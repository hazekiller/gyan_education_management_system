var _6=Object.defineProperty;var Iv=e=>{throw TypeError(e)};var S6=(e,t,s)=>t in e?_6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var k6=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var xp=(e,t,s)=>S6(e,typeof t!="symbol"?t+"":t,s),gp=(e,t,s)=>t.has(e)||Iv("Cannot "+s);var se=(e,t,s)=>(gp(e,t,"read from private field"),s?s.call(e):t.get(e)),Oe=(e,t,s)=>t.has(e)?Iv("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),Se=(e,t,s,n)=>(gp(e,t,"write to private field"),n?n.call(e,s):t.set(e,s),s),ze=(e,t,s)=>(gp(e,t,"access private method"),s);var Iu=(e,t,s,n)=>({set _(a){Se(e,t,a,s)},get _(){return se(e,t,n)}});var sX=k6((AX,tf)=>{function E6(e,t){for(var s=0;s<t.length;s++){const n=t[s];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();var kt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function om(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var l_={exports:{}},cm={},o_={exports:{}},Ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mu=Symbol.for("react.element"),C6=Symbol.for("react.portal"),A6=Symbol.for("react.fragment"),T6=Symbol.for("react.strict_mode"),O6=Symbol.for("react.profiler"),R6=Symbol.for("react.provider"),P6=Symbol.for("react.context"),M6=Symbol.for("react.forward_ref"),D6=Symbol.for("react.suspense"),L6=Symbol.for("react.memo"),F6=Symbol.for("react.lazy"),Bv=Symbol.iterator;function I6(e){return e===null||typeof e!="object"?null:(e=Bv&&e[Bv]||e["@@iterator"],typeof e=="function"?e:null)}var c_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},d_=Object.assign,u_={};function oc(e,t,s){this.props=e,this.context=t,this.refs=u_,this.updater=s||c_}oc.prototype.isReactComponent={};oc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};oc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function h_(){}h_.prototype=oc.prototype;function xy(e,t,s){this.props=e,this.context=t,this.refs=u_,this.updater=s||c_}var gy=xy.prototype=new h_;gy.constructor=xy;d_(gy,oc.prototype);gy.isPureReactComponent=!0;var qv=Array.isArray,f_=Object.prototype.hasOwnProperty,yy={current:null},m_={key:!0,ref:!0,__self:!0,__source:!0};function p_(e,t,s){var n,a={},i=null,l=null;if(t!=null)for(n in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)f_.call(t,n)&&!m_.hasOwnProperty(n)&&(a[n]=t[n]);var o=arguments.length-2;if(o===1)a.children=s;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:mu,type:e,key:i,ref:l,props:a,_owner:yy.current}}function B6(e,t){return{$$typeof:mu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function by(e){return typeof e=="object"&&e!==null&&e.$$typeof===mu}function q6(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var $v=/\/+/g;function yp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?q6(""+e.key):t.toString(36)}function bh(e,t,s,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case mu:case C6:l=!0}}if(l)return l=e,a=a(l),e=n===""?"."+yp(l,0):n,qv(a)?(s="",e!=null&&(s=e.replace($v,"$&/")+"/"),bh(a,t,s,"",function(d){return d})):a!=null&&(by(a)&&(a=B6(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace($v,"$&/")+"/")+e)),t.push(a)),1;if(l=0,n=n===""?".":n+":",qv(e))for(var o=0;o<e.length;o++){i=e[o];var c=n+yp(i,o);l+=bh(i,t,s,c,a)}else if(c=I6(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=n+yp(i,o++),l+=bh(i,t,s,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Bu(e,t,s){if(e==null)return e;var n=[],a=0;return bh(e,n,"","",function(i){return t.call(s,i,a++)}),n}function $6(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ir={current:null},vh={transition:null},U6={ReactCurrentDispatcher:Ir,ReactCurrentBatchConfig:vh,ReactCurrentOwner:yy};function x_(){throw Error("act(...) is not supported in production builds of React.")}Ke.Children={map:Bu,forEach:function(e,t,s){Bu(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return Bu(e,function(){t++}),t},toArray:function(e){return Bu(e,function(t){return t})||[]},only:function(e){if(!by(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ke.Component=oc;Ke.Fragment=A6;Ke.Profiler=O6;Ke.PureComponent=xy;Ke.StrictMode=T6;Ke.Suspense=D6;Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U6;Ke.act=x_;Ke.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=d_({},e.props),a=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=yy.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)f_.call(t,c)&&!m_.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];n.children=o}return{$$typeof:mu,type:e.type,key:a,ref:i,props:n,_owner:l}};Ke.createContext=function(e){return e={$$typeof:P6,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:R6,_context:e},e.Consumer=e};Ke.createElement=p_;Ke.createFactory=function(e){var t=p_.bind(null,e);return t.type=e,t};Ke.createRef=function(){return{current:null}};Ke.forwardRef=function(e){return{$$typeof:M6,render:e}};Ke.isValidElement=by;Ke.lazy=function(e){return{$$typeof:F6,_payload:{_status:-1,_result:e},_init:$6}};Ke.memo=function(e,t){return{$$typeof:L6,type:e,compare:t===void 0?null:t}};Ke.startTransition=function(e){var t=vh.transition;vh.transition={};try{e()}finally{vh.transition=t}};Ke.unstable_act=x_;Ke.useCallback=function(e,t){return Ir.current.useCallback(e,t)};Ke.useContext=function(e){return Ir.current.useContext(e)};Ke.useDebugValue=function(){};Ke.useDeferredValue=function(e){return Ir.current.useDeferredValue(e)};Ke.useEffect=function(e,t){return Ir.current.useEffect(e,t)};Ke.useId=function(){return Ir.current.useId()};Ke.useImperativeHandle=function(e,t,s){return Ir.current.useImperativeHandle(e,t,s)};Ke.useInsertionEffect=function(e,t){return Ir.current.useInsertionEffect(e,t)};Ke.useLayoutEffect=function(e,t){return Ir.current.useLayoutEffect(e,t)};Ke.useMemo=function(e,t){return Ir.current.useMemo(e,t)};Ke.useReducer=function(e,t,s){return Ir.current.useReducer(e,t,s)};Ke.useRef=function(e){return Ir.current.useRef(e)};Ke.useState=function(e){return Ir.current.useState(e)};Ke.useSyncExternalStore=function(e,t,s){return Ir.current.useSyncExternalStore(e,t,s)};Ke.useTransition=function(){return Ir.current.useTransition()};Ke.version="18.3.1";o_.exports=Ke;var O=o_.exports;const na=om(O),z6=E6({__proto__:null,default:na},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V6=O,H6=Symbol.for("react.element"),W6=Symbol.for("react.fragment"),Y6=Object.prototype.hasOwnProperty,G6=V6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,K6={key:!0,ref:!0,__self:!0,__source:!0};function g_(e,t,s){var n,a={},i=null,l=null;s!==void 0&&(i=""+s),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)Y6.call(t,n)&&!K6.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:H6,type:e,key:i,ref:l,props:a,_owner:G6.current}}cm.Fragment=W6;cm.jsx=g_;cm.jsxs=g_;l_.exports=cm;var r=l_.exports,Vx={},y_={exports:{}},gs={},b_={exports:{}},v_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(X,Z){var W=X.length;X.push(Z);e:for(;0<W;){var F=W-1>>>1,q=X[F];if(0<a(q,Z))X[F]=Z,X[W]=q,W=F;else break e}}function s(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var Z=X[0],W=X.pop();if(W!==Z){X[0]=W;e:for(var F=0,q=X.length,I=q>>>1;F<I;){var $=2*(F+1)-1,G=X[$],R=$+1,B=X[R];if(0>a(G,W))R<q&&0>a(B,G)?(X[F]=B,X[R]=W,F=R):(X[F]=G,X[$]=W,F=$);else if(R<q&&0>a(B,W))X[F]=B,X[R]=W,F=R;else break e}}return Z}function a(X,Z){var W=X.sortIndex-Z.sortIndex;return W!==0?W:X.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,h=null,f=3,m=!1,x=!1,p=!1,j=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(X){for(var Z=s(d);Z!==null;){if(Z.callback===null)n(d);else if(Z.startTime<=X)n(d),Z.sortIndex=Z.expirationTime,t(c,Z);else break;Z=s(d)}}function b(X){if(p=!1,y(X),!x)if(s(c)!==null)x=!0,z(N);else{var Z=s(d);Z!==null&&Y(b,Z.startTime-X)}}function N(X,Z){x=!1,p&&(p=!1,v(_),_=-1),m=!0;var W=f;try{for(y(Z),h=s(c);h!==null&&(!(h.expirationTime>Z)||X&&!A());){var F=h.callback;if(typeof F=="function"){h.callback=null,f=h.priorityLevel;var q=F(h.expirationTime<=Z);Z=e.unstable_now(),typeof q=="function"?h.callback=q:h===s(c)&&n(c),y(Z)}else n(c);h=s(c)}if(h!==null)var I=!0;else{var $=s(d);$!==null&&Y(b,$.startTime-Z),I=!1}return I}finally{h=null,f=W,m=!1}}var k=!1,w=null,_=-1,S=5,E=-1;function A(){return!(e.unstable_now()-E<S)}function C(){if(w!==null){var X=e.unstable_now();E=X;var Z=!0;try{Z=w(!0,X)}finally{Z?D():(k=!1,w=null)}}else k=!1}var D;if(typeof g=="function")D=function(){g(C)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,L=M.port2;M.port1.onmessage=C,D=function(){L.postMessage(null)}}else D=function(){j(C,0)};function z(X){w=X,k||(k=!0,D())}function Y(X,Z){_=j(function(){X(e.unstable_now())},Z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(X){X.callback=null},e.unstable_continueExecution=function(){x||m||(x=!0,z(N))},e.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<X?Math.floor(1e3/X):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return s(c)},e.unstable_next=function(X){switch(f){case 1:case 2:case 3:var Z=3;break;default:Z=f}var W=f;f=Z;try{return X()}finally{f=W}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(X,Z){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var W=f;f=X;try{return Z()}finally{f=W}},e.unstable_scheduleCallback=function(X,Z,W){var F=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?F+W:F):W=F,X){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=W+q,X={id:u++,callback:Z,priorityLevel:X,startTime:W,expirationTime:q,sortIndex:-1},W>F?(X.sortIndex=W,t(d,X),s(c)===null&&X===s(d)&&(p?(v(_),_=-1):p=!0,Y(b,W-F))):(X.sortIndex=q,t(c,X),x||m||(x=!0,z(N))),X},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(X){var Z=f;return function(){var W=f;f=Z;try{return X.apply(this,arguments)}finally{f=W}}}})(v_);b_.exports=v_;var Q6=b_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X6=O,fs=Q6;function ve(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var j_=new Set,_d={};function Rl(e,t){Uo(e,t),Uo(e+"Capture",t)}function Uo(e,t){for(_d[e]=t,e=0;e<t.length;e++)j_.add(t[e])}var ha=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hx=Object.prototype.hasOwnProperty,Z6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Uv={},zv={};function J6(e){return Hx.call(zv,e)?!0:Hx.call(Uv,e)?!1:Z6.test(e)?zv[e]=!0:(Uv[e]=!0,!1)}function e5(e,t,s,n){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function t5(e,t,s,n){if(t===null||typeof t>"u"||e5(e,t,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Br(e,t,s,n,a,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var br={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){br[e]=new Br(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];br[t]=new Br(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){br[e]=new Br(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){br[e]=new Br(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){br[e]=new Br(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){br[e]=new Br(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){br[e]=new Br(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){br[e]=new Br(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){br[e]=new Br(e,5,!1,e.toLowerCase(),null,!1,!1)});var vy=/[\-:]([a-z])/g;function jy(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(vy,jy);br[t]=new Br(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(vy,jy);br[t]=new Br(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(vy,jy);br[t]=new Br(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){br[e]=new Br(e,1,!1,e.toLowerCase(),null,!1,!1)});br.xlinkHref=new Br("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){br[e]=new Br(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ny(e,t,s,n){var a=br.hasOwnProperty(t)?br[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(t5(t,s,a,n)&&(s=null),n||a===null?J6(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):a.mustUseProperty?e[a.propertyName]=s===null?a.type===3?!1:"":s:(t=a.attributeName,n=a.attributeNamespace,s===null?e.removeAttribute(t):(a=a.type,s=a===3||a===4&&s===!0?"":""+s,n?e.setAttributeNS(n,t,s):e.setAttribute(t,s))))}var _a=X6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qu=Symbol.for("react.element"),Ql=Symbol.for("react.portal"),Xl=Symbol.for("react.fragment"),wy=Symbol.for("react.strict_mode"),Wx=Symbol.for("react.profiler"),N_=Symbol.for("react.provider"),w_=Symbol.for("react.context"),_y=Symbol.for("react.forward_ref"),Yx=Symbol.for("react.suspense"),Gx=Symbol.for("react.suspense_list"),Sy=Symbol.for("react.memo"),La=Symbol.for("react.lazy"),__=Symbol.for("react.offscreen"),Vv=Symbol.iterator;function Tc(e){return e===null||typeof e!="object"?null:(e=Vv&&e[Vv]||e["@@iterator"],typeof e=="function"?e:null)}var Ut=Object.assign,bp;function Yc(e){if(bp===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);bp=t&&t[1]||""}return`
`+bp+e}var vp=!1;function jp(e,t){if(!e||vp)return"";vp=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),l=a.length-1,o=i.length-1;1<=l&&0<=o&&a[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(a[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||a[l]!==i[o]){var c=`
`+a[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{vp=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?Yc(e):""}function r5(e){switch(e.tag){case 5:return Yc(e.type);case 16:return Yc("Lazy");case 13:return Yc("Suspense");case 19:return Yc("SuspenseList");case 0:case 2:case 15:return e=jp(e.type,!1),e;case 11:return e=jp(e.type.render,!1),e;case 1:return e=jp(e.type,!0),e;default:return""}}function Kx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Xl:return"Fragment";case Ql:return"Portal";case Wx:return"Profiler";case wy:return"StrictMode";case Yx:return"Suspense";case Gx:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case w_:return(e.displayName||"Context")+".Consumer";case N_:return(e._context.displayName||"Context")+".Provider";case _y:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Sy:return t=e.displayName||null,t!==null?t:Kx(e.type)||"Memo";case La:t=e._payload,e=e._init;try{return Kx(e(t))}catch{}}return null}function s5(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Kx(t);case 8:return t===wy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ni(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function S_(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function n5(e){var t=S_(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,i=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){n=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function $u(e){e._valueTracker||(e._valueTracker=n5(e))}function k_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),n="";return e&&(n=S_(e)?e.checked?"true":"false":e.value),e=n,e!==s?(t.setValue(e),!0):!1}function rf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Qx(e,t){var s=t.checked;return Ut({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Hv(e,t){var s=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;s=Ni(t.value!=null?t.value:s),e._wrapperState={initialChecked:n,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function E_(e,t){t=t.checked,t!=null&&Ny(e,"checked",t,!1)}function Xx(e,t){E_(e,t);var s=Ni(t.value),n=t.type;if(s!=null)n==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Zx(e,t.type,s):t.hasOwnProperty("defaultValue")&&Zx(e,t.type,Ni(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Wv(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function Zx(e,t,s){(t!=="number"||rf(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Gc=Array.isArray;function mo(e,t,s,n){if(e=e.options,t){t={};for(var a=0;a<s.length;a++)t["$"+s[a]]=!0;for(s=0;s<e.length;s++)a=t.hasOwnProperty("$"+e[s].value),e[s].selected!==a&&(e[s].selected=a),a&&n&&(e[s].defaultSelected=!0)}else{for(s=""+Ni(s),t=null,a=0;a<e.length;a++){if(e[a].value===s){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Jx(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ve(91));return Ut({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Yv(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(ve(92));if(Gc(s)){if(1<s.length)throw Error(ve(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:Ni(s)}}function C_(e,t){var s=Ni(t.value),n=Ni(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),n!=null&&(e.defaultValue=""+n)}function Gv(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function A_(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function e0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?A_(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Uu,T_=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,s,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Uu=Uu||document.createElement("div"),Uu.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Uu.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Sd(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var id={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},a5=["Webkit","ms","Moz","O"];Object.keys(id).forEach(function(e){a5.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),id[t]=id[e]})});function O_(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||id.hasOwnProperty(e)&&id[e]?(""+t).trim():t+"px"}function R_(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var n=s.indexOf("--")===0,a=O_(s,t[s],n);s==="float"&&(s="cssFloat"),n?e.setProperty(s,a):e[s]=a}}var i5=Ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function t0(e,t){if(t){if(i5[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ve(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ve(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ve(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ve(62))}}function r0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var s0=null;function ky(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var n0=null,po=null,xo=null;function Kv(e){if(e=gu(e)){if(typeof n0!="function")throw Error(ve(280));var t=e.stateNode;t&&(t=mm(t),n0(e.stateNode,e.type,t))}}function P_(e){po?xo?xo.push(e):xo=[e]:po=e}function M_(){if(po){var e=po,t=xo;if(xo=po=null,Kv(e),t)for(e=0;e<t.length;e++)Kv(t[e])}}function D_(e,t){return e(t)}function L_(){}var Np=!1;function F_(e,t,s){if(Np)return e(t,s);Np=!0;try{return D_(e,t,s)}finally{Np=!1,(po!==null||xo!==null)&&(L_(),M_())}}function kd(e,t){var s=e.stateNode;if(s===null)return null;var n=mm(s);if(n===null)return null;s=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(ve(231,t,typeof s));return s}var a0=!1;if(ha)try{var Oc={};Object.defineProperty(Oc,"passive",{get:function(){a0=!0}}),window.addEventListener("test",Oc,Oc),window.removeEventListener("test",Oc,Oc)}catch{a0=!1}function l5(e,t,s,n,a,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(s,d)}catch(u){this.onError(u)}}var ld=!1,sf=null,nf=!1,i0=null,o5={onError:function(e){ld=!0,sf=e}};function c5(e,t,s,n,a,i,l,o,c){ld=!1,sf=null,l5.apply(o5,arguments)}function d5(e,t,s,n,a,i,l,o,c){if(c5.apply(this,arguments),ld){if(ld){var d=sf;ld=!1,sf=null}else throw Error(ve(198));nf||(nf=!0,i0=d)}}function Pl(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function I_(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Qv(e){if(Pl(e)!==e)throw Error(ve(188))}function u5(e){var t=e.alternate;if(!t){if(t=Pl(e),t===null)throw Error(ve(188));return t!==e?null:e}for(var s=e,n=t;;){var a=s.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){s=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===s)return Qv(a),e;if(i===n)return Qv(a),t;i=i.sibling}throw Error(ve(188))}if(s.return!==n.return)s=a,n=i;else{for(var l=!1,o=a.child;o;){if(o===s){l=!0,s=a,n=i;break}if(o===n){l=!0,n=a,s=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===s){l=!0,s=i,n=a;break}if(o===n){l=!0,n=i,s=a;break}o=o.sibling}if(!l)throw Error(ve(189))}}if(s.alternate!==n)throw Error(ve(190))}if(s.tag!==3)throw Error(ve(188));return s.stateNode.current===s?e:t}function B_(e){return e=u5(e),e!==null?q_(e):null}function q_(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=q_(e);if(t!==null)return t;e=e.sibling}return null}var $_=fs.unstable_scheduleCallback,Xv=fs.unstable_cancelCallback,h5=fs.unstable_shouldYield,f5=fs.unstable_requestPaint,Xt=fs.unstable_now,m5=fs.unstable_getCurrentPriorityLevel,Ey=fs.unstable_ImmediatePriority,U_=fs.unstable_UserBlockingPriority,af=fs.unstable_NormalPriority,p5=fs.unstable_LowPriority,z_=fs.unstable_IdlePriority,dm=null,An=null;function x5(e){if(An&&typeof An.onCommitFiberRoot=="function")try{An.onCommitFiberRoot(dm,e,void 0,(e.current.flags&128)===128)}catch{}}var en=Math.clz32?Math.clz32:b5,g5=Math.log,y5=Math.LN2;function b5(e){return e>>>=0,e===0?32:31-(g5(e)/y5|0)|0}var zu=64,Vu=4194304;function Kc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function lf(e,t){var s=e.pendingLanes;if(s===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,l=s&268435455;if(l!==0){var o=l&~a;o!==0?n=Kc(o):(i&=l,i!==0&&(n=Kc(i)))}else l=s&~a,l!==0?n=Kc(l):i!==0&&(n=Kc(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)s=31-en(t),a=1<<s,n|=e[s],t&=~a;return n}function v5(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function j5(e,t){for(var s=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-en(i),o=1<<l,c=a[l];c===-1?(!(o&s)||o&n)&&(a[l]=v5(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function l0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function V_(){var e=zu;return zu<<=1,!(zu&4194240)&&(zu=64),e}function wp(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function pu(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-en(t),e[t]=s}function N5(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<s;){var a=31-en(s),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,s&=~i}}function Cy(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var n=31-en(s),a=1<<n;a&t|e[n]&t&&(e[n]|=t),s&=~a}}var ft=0;function H_(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var W_,Ay,Y_,G_,K_,o0=!1,Hu=[],ii=null,li=null,oi=null,Ed=new Map,Cd=new Map,Ia=[],w5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zv(e,t){switch(e){case"focusin":case"focusout":ii=null;break;case"dragenter":case"dragleave":li=null;break;case"mouseover":case"mouseout":oi=null;break;case"pointerover":case"pointerout":Ed.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cd.delete(t.pointerId)}}function Rc(e,t,s,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:s,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=gu(t),t!==null&&Ay(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function _5(e,t,s,n,a){switch(t){case"focusin":return ii=Rc(ii,e,t,s,n,a),!0;case"dragenter":return li=Rc(li,e,t,s,n,a),!0;case"mouseover":return oi=Rc(oi,e,t,s,n,a),!0;case"pointerover":var i=a.pointerId;return Ed.set(i,Rc(Ed.get(i)||null,e,t,s,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Cd.set(i,Rc(Cd.get(i)||null,e,t,s,n,a)),!0}return!1}function Q_(e){var t=zi(e.target);if(t!==null){var s=Pl(t);if(s!==null){if(t=s.tag,t===13){if(t=I_(s),t!==null){e.blockedOn=t,K_(e.priority,function(){Y_(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function jh(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=c0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var n=new s.constructor(s.type,s);s0=n,s.target.dispatchEvent(n),s0=null}else return t=gu(s),t!==null&&Ay(t),e.blockedOn=s,!1;t.shift()}return!0}function Jv(e,t,s){jh(e)&&s.delete(t)}function S5(){o0=!1,ii!==null&&jh(ii)&&(ii=null),li!==null&&jh(li)&&(li=null),oi!==null&&jh(oi)&&(oi=null),Ed.forEach(Jv),Cd.forEach(Jv)}function Pc(e,t){e.blockedOn===t&&(e.blockedOn=null,o0||(o0=!0,fs.unstable_scheduleCallback(fs.unstable_NormalPriority,S5)))}function Ad(e){function t(a){return Pc(a,e)}if(0<Hu.length){Pc(Hu[0],e);for(var s=1;s<Hu.length;s++){var n=Hu[s];n.blockedOn===e&&(n.blockedOn=null)}}for(ii!==null&&Pc(ii,e),li!==null&&Pc(li,e),oi!==null&&Pc(oi,e),Ed.forEach(t),Cd.forEach(t),s=0;s<Ia.length;s++)n=Ia[s],n.blockedOn===e&&(n.blockedOn=null);for(;0<Ia.length&&(s=Ia[0],s.blockedOn===null);)Q_(s),s.blockedOn===null&&Ia.shift()}var go=_a.ReactCurrentBatchConfig,of=!0;function k5(e,t,s,n){var a=ft,i=go.transition;go.transition=null;try{ft=1,Ty(e,t,s,n)}finally{ft=a,go.transition=i}}function E5(e,t,s,n){var a=ft,i=go.transition;go.transition=null;try{ft=4,Ty(e,t,s,n)}finally{ft=a,go.transition=i}}function Ty(e,t,s,n){if(of){var a=c0(e,t,s,n);if(a===null)Pp(e,t,n,cf,s),Zv(e,n);else if(_5(a,e,t,s,n))n.stopPropagation();else if(Zv(e,n),t&4&&-1<w5.indexOf(e)){for(;a!==null;){var i=gu(a);if(i!==null&&W_(i),i=c0(e,t,s,n),i===null&&Pp(e,t,n,cf,s),i===a)break;a=i}a!==null&&n.stopPropagation()}else Pp(e,t,n,null,s)}}var cf=null;function c0(e,t,s,n){if(cf=null,e=ky(n),e=zi(e),e!==null)if(t=Pl(e),t===null)e=null;else if(s=t.tag,s===13){if(e=I_(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return cf=e,null}function X_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(m5()){case Ey:return 1;case U_:return 4;case af:case p5:return 16;case z_:return 536870912;default:return 16}default:return 16}}var Qa=null,Oy=null,Nh=null;function Z_(){if(Nh)return Nh;var e,t=Oy,s=t.length,n,a="value"in Qa?Qa.value:Qa.textContent,i=a.length;for(e=0;e<s&&t[e]===a[e];e++);var l=s-e;for(n=1;n<=l&&t[s-n]===a[i-n];n++);return Nh=a.slice(e,1<n?1-n:void 0)}function wh(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Wu(){return!0}function ej(){return!1}function ys(e){function t(s,n,a,i,l){this._reactName=s,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(s=e[o],this[o]=s?s(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Wu:ej,this.isPropagationStopped=ej,this}return Ut(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Wu)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Wu)},persist:function(){},isPersistent:Wu}),t}var cc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ry=ys(cc),xu=Ut({},cc,{view:0,detail:0}),C5=ys(xu),_p,Sp,Mc,um=Ut({},xu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Py,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Mc&&(Mc&&e.type==="mousemove"?(_p=e.screenX-Mc.screenX,Sp=e.screenY-Mc.screenY):Sp=_p=0,Mc=e),_p)},movementY:function(e){return"movementY"in e?e.movementY:Sp}}),tj=ys(um),A5=Ut({},um,{dataTransfer:0}),T5=ys(A5),O5=Ut({},xu,{relatedTarget:0}),kp=ys(O5),R5=Ut({},cc,{animationName:0,elapsedTime:0,pseudoElement:0}),P5=ys(R5),M5=Ut({},cc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),D5=ys(M5),L5=Ut({},cc,{data:0}),rj=ys(L5),F5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},I5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},B5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function q5(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=B5[e])?!!t[e]:!1}function Py(){return q5}var $5=Ut({},xu,{key:function(e){if(e.key){var t=F5[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=wh(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?I5[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Py,charCode:function(e){return e.type==="keypress"?wh(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wh(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),U5=ys($5),z5=Ut({},um,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sj=ys(z5),V5=Ut({},xu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Py}),H5=ys(V5),W5=Ut({},cc,{propertyName:0,elapsedTime:0,pseudoElement:0}),Y5=ys(W5),G5=Ut({},um,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),K5=ys(G5),Q5=[9,13,27,32],My=ha&&"CompositionEvent"in window,od=null;ha&&"documentMode"in document&&(od=document.documentMode);var X5=ha&&"TextEvent"in window&&!od,J_=ha&&(!My||od&&8<od&&11>=od),nj=" ",aj=!1;function e2(e,t){switch(e){case"keyup":return Q5.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function t2(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Zl=!1;function Z5(e,t){switch(e){case"compositionend":return t2(t);case"keypress":return t.which!==32?null:(aj=!0,nj);case"textInput":return e=t.data,e===nj&&aj?null:e;default:return null}}function J5(e,t){if(Zl)return e==="compositionend"||!My&&e2(e,t)?(e=Z_(),Nh=Oy=Qa=null,Zl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return J_&&t.locale!=="ko"?null:t.data;default:return null}}var eA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ij(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!eA[e.type]:t==="textarea"}function r2(e,t,s,n){P_(n),t=df(t,"onChange"),0<t.length&&(s=new Ry("onChange","change",null,s,n),e.push({event:s,listeners:t}))}var cd=null,Td=null;function tA(e){f2(e,0)}function hm(e){var t=to(e);if(k_(t))return e}function rA(e,t){if(e==="change")return t}var s2=!1;if(ha){var Ep;if(ha){var Cp="oninput"in document;if(!Cp){var lj=document.createElement("div");lj.setAttribute("oninput","return;"),Cp=typeof lj.oninput=="function"}Ep=Cp}else Ep=!1;s2=Ep&&(!document.documentMode||9<document.documentMode)}function oj(){cd&&(cd.detachEvent("onpropertychange",n2),Td=cd=null)}function n2(e){if(e.propertyName==="value"&&hm(Td)){var t=[];r2(t,Td,e,ky(e)),F_(tA,t)}}function sA(e,t,s){e==="focusin"?(oj(),cd=t,Td=s,cd.attachEvent("onpropertychange",n2)):e==="focusout"&&oj()}function nA(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hm(Td)}function aA(e,t){if(e==="click")return hm(t)}function iA(e,t){if(e==="input"||e==="change")return hm(t)}function lA(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var nn=typeof Object.is=="function"?Object.is:lA;function Od(e,t){if(nn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var a=s[n];if(!Hx.call(t,a)||!nn(e[a],t[a]))return!1}return!0}function cj(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dj(e,t){var s=cj(e);e=0;for(var n;s;){if(s.nodeType===3){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=cj(s)}}function a2(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?a2(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function i2(){for(var e=window,t=rf();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=rf(e.document)}return t}function Dy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function oA(e){var t=i2(),s=e.focusedElem,n=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&a2(s.ownerDocument.documentElement,s)){if(n!==null&&Dy(s)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=s.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=dj(s,i);var l=dj(s,n);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var cA=ha&&"documentMode"in document&&11>=document.documentMode,Jl=null,d0=null,dd=null,u0=!1;function uj(e,t,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;u0||Jl==null||Jl!==rf(n)||(n=Jl,"selectionStart"in n&&Dy(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),dd&&Od(dd,n)||(dd=n,n=df(d0,"onSelect"),0<n.length&&(t=new Ry("onSelect","select",null,t,s),e.push({event:t,listeners:n}),t.target=Jl)))}function Yu(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var eo={animationend:Yu("Animation","AnimationEnd"),animationiteration:Yu("Animation","AnimationIteration"),animationstart:Yu("Animation","AnimationStart"),transitionend:Yu("Transition","TransitionEnd")},Ap={},l2={};ha&&(l2=document.createElement("div").style,"AnimationEvent"in window||(delete eo.animationend.animation,delete eo.animationiteration.animation,delete eo.animationstart.animation),"TransitionEvent"in window||delete eo.transitionend.transition);function fm(e){if(Ap[e])return Ap[e];if(!eo[e])return e;var t=eo[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in l2)return Ap[e]=t[s];return e}var o2=fm("animationend"),c2=fm("animationiteration"),d2=fm("animationstart"),u2=fm("transitionend"),h2=new Map,hj="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ai(e,t){h2.set(e,t),Rl(t,[e])}for(var Tp=0;Tp<hj.length;Tp++){var Op=hj[Tp],dA=Op.toLowerCase(),uA=Op[0].toUpperCase()+Op.slice(1);Ai(dA,"on"+uA)}Ai(o2,"onAnimationEnd");Ai(c2,"onAnimationIteration");Ai(d2,"onAnimationStart");Ai("dblclick","onDoubleClick");Ai("focusin","onFocus");Ai("focusout","onBlur");Ai(u2,"onTransitionEnd");Uo("onMouseEnter",["mouseout","mouseover"]);Uo("onMouseLeave",["mouseout","mouseover"]);Uo("onPointerEnter",["pointerout","pointerover"]);Uo("onPointerLeave",["pointerout","pointerover"]);Rl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qc));function fj(e,t,s){var n=e.type||"unknown-event";e.currentTarget=s,d5(n,t,void 0,e),e.currentTarget=null}function f2(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var n=e[s],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var l=n.length-1;0<=l;l--){var o=n[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&a.isPropagationStopped())break e;fj(a,o,d),i=c}else for(l=0;l<n.length;l++){if(o=n[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&a.isPropagationStopped())break e;fj(a,o,d),i=c}}}if(nf)throw e=i0,nf=!1,i0=null,e}function wt(e,t){var s=t[x0];s===void 0&&(s=t[x0]=new Set);var n=e+"__bubble";s.has(n)||(m2(t,e,2,!1),s.add(n))}function Rp(e,t,s){var n=0;t&&(n|=4),m2(s,e,n,t)}var Gu="_reactListening"+Math.random().toString(36).slice(2);function Rd(e){if(!e[Gu]){e[Gu]=!0,j_.forEach(function(s){s!=="selectionchange"&&(hA.has(s)||Rp(s,!1,e),Rp(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Gu]||(t[Gu]=!0,Rp("selectionchange",!1,t))}}function m2(e,t,s,n){switch(X_(t)){case 1:var a=k5;break;case 4:a=E5;break;default:a=Ty}s=a.bind(null,t,s,e),a=void 0,!a0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,s,{capture:!0,passive:a}):e.addEventListener(t,s,!0):a!==void 0?e.addEventListener(t,s,{passive:a}):e.addEventListener(t,s,!1)}function Pp(e,t,s,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(l===4)for(l=n.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;l=l.return}for(;o!==null;){if(l=zi(o),l===null)return;if(c=l.tag,c===5||c===6){n=i=l;continue e}o=o.parentNode}}n=n.return}F_(function(){var d=i,u=ky(s),h=[];e:{var f=h2.get(e);if(f!==void 0){var m=Ry,x=e;switch(e){case"keypress":if(wh(s)===0)break e;case"keydown":case"keyup":m=U5;break;case"focusin":x="focus",m=kp;break;case"focusout":x="blur",m=kp;break;case"beforeblur":case"afterblur":m=kp;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=tj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=T5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=H5;break;case o2:case c2:case d2:m=P5;break;case u2:m=Y5;break;case"scroll":m=C5;break;case"wheel":m=K5;break;case"copy":case"cut":case"paste":m=D5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=sj}var p=(t&4)!==0,j=!p&&e==="scroll",v=p?f!==null?f+"Capture":null:f;p=[];for(var g=d,y;g!==null;){y=g;var b=y.stateNode;if(y.tag===5&&b!==null&&(y=b,v!==null&&(b=kd(g,v),b!=null&&p.push(Pd(g,b,y)))),j)break;g=g.return}0<p.length&&(f=new m(f,x,null,s,u),h.push({event:f,listeners:p}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&s!==s0&&(x=s.relatedTarget||s.fromElement)&&(zi(x)||x[fa]))break e;if((m||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,m?(x=s.relatedTarget||s.toElement,m=d,x=x?zi(x):null,x!==null&&(j=Pl(x),x!==j||x.tag!==5&&x.tag!==6)&&(x=null)):(m=null,x=d),m!==x)){if(p=tj,b="onMouseLeave",v="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(p=sj,b="onPointerLeave",v="onPointerEnter",g="pointer"),j=m==null?f:to(m),y=x==null?f:to(x),f=new p(b,g+"leave",m,s,u),f.target=j,f.relatedTarget=y,b=null,zi(u)===d&&(p=new p(v,g+"enter",x,s,u),p.target=y,p.relatedTarget=j,b=p),j=b,m&&x)t:{for(p=m,v=x,g=0,y=p;y;y=ql(y))g++;for(y=0,b=v;b;b=ql(b))y++;for(;0<g-y;)p=ql(p),g--;for(;0<y-g;)v=ql(v),y--;for(;g--;){if(p===v||v!==null&&p===v.alternate)break t;p=ql(p),v=ql(v)}p=null}else p=null;m!==null&&mj(h,f,m,p,!1),x!==null&&j!==null&&mj(h,j,x,p,!0)}}e:{if(f=d?to(d):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var N=rA;else if(ij(f))if(s2)N=iA;else{N=nA;var k=sA}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=aA);if(N&&(N=N(e,d))){r2(h,N,s,u);break e}k&&k(e,f,d),e==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&Zx(f,"number",f.value)}switch(k=d?to(d):window,e){case"focusin":(ij(k)||k.contentEditable==="true")&&(Jl=k,d0=d,dd=null);break;case"focusout":dd=d0=Jl=null;break;case"mousedown":u0=!0;break;case"contextmenu":case"mouseup":case"dragend":u0=!1,uj(h,s,u);break;case"selectionchange":if(cA)break;case"keydown":case"keyup":uj(h,s,u)}var w;if(My)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Zl?e2(e,s)&&(_="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(_="onCompositionStart");_&&(J_&&s.locale!=="ko"&&(Zl||_!=="onCompositionStart"?_==="onCompositionEnd"&&Zl&&(w=Z_()):(Qa=u,Oy="value"in Qa?Qa.value:Qa.textContent,Zl=!0)),k=df(d,_),0<k.length&&(_=new rj(_,e,null,s,u),h.push({event:_,listeners:k}),w?_.data=w:(w=t2(s),w!==null&&(_.data=w)))),(w=X5?Z5(e,s):J5(e,s))&&(d=df(d,"onBeforeInput"),0<d.length&&(u=new rj("onBeforeInput","beforeinput",null,s,u),h.push({event:u,listeners:d}),u.data=w))}f2(h,t)})}function Pd(e,t,s){return{instance:e,listener:t,currentTarget:s}}function df(e,t){for(var s=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=kd(e,s),i!=null&&n.unshift(Pd(e,i,a)),i=kd(e,t),i!=null&&n.push(Pd(e,i,a))),e=e.return}return n}function ql(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function mj(e,t,s,n,a){for(var i=t._reactName,l=[];s!==null&&s!==n;){var o=s,c=o.alternate,d=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&d!==null&&(o=d,a?(c=kd(s,i),c!=null&&l.unshift(Pd(s,c,o))):a||(c=kd(s,i),c!=null&&l.push(Pd(s,c,o)))),s=s.return}l.length!==0&&e.push({event:t,listeners:l})}var fA=/\r\n?/g,mA=/\u0000|\uFFFD/g;function pj(e){return(typeof e=="string"?e:""+e).replace(fA,`
`).replace(mA,"")}function Ku(e,t,s){if(t=pj(t),pj(e)!==t&&s)throw Error(ve(425))}function uf(){}var h0=null,f0=null;function m0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var p0=typeof setTimeout=="function"?setTimeout:void 0,pA=typeof clearTimeout=="function"?clearTimeout:void 0,xj=typeof Promise=="function"?Promise:void 0,xA=typeof queueMicrotask=="function"?queueMicrotask:typeof xj<"u"?function(e){return xj.resolve(null).then(e).catch(gA)}:p0;function gA(e){setTimeout(function(){throw e})}function Mp(e,t){var s=t,n=0;do{var a=s.nextSibling;if(e.removeChild(s),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(n===0){e.removeChild(a),Ad(t);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=a}while(s);Ad(t)}function ci(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function gj(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var dc=Math.random().toString(36).slice(2),wn="__reactFiber$"+dc,Md="__reactProps$"+dc,fa="__reactContainer$"+dc,x0="__reactEvents$"+dc,yA="__reactListeners$"+dc,bA="__reactHandles$"+dc;function zi(e){var t=e[wn];if(t)return t;for(var s=e.parentNode;s;){if(t=s[fa]||s[wn]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=gj(e);e!==null;){if(s=e[wn])return s;e=gj(e)}return t}e=s,s=e.parentNode}return null}function gu(e){return e=e[wn]||e[fa],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function to(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ve(33))}function mm(e){return e[Md]||null}var g0=[],ro=-1;function Ti(e){return{current:e}}function Et(e){0>ro||(e.current=g0[ro],g0[ro]=null,ro--)}function jt(e,t){ro++,g0[ro]=e.current,e.current=t}var wi={},Cr=Ti(wi),Wr=Ti(!1),gl=wi;function zo(e,t){var s=e.type.contextTypes;if(!s)return wi;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in s)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Yr(e){return e=e.childContextTypes,e!=null}function hf(){Et(Wr),Et(Cr)}function yj(e,t,s){if(Cr.current!==wi)throw Error(ve(168));jt(Cr,t),jt(Wr,s)}function p2(e,t,s){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(ve(108,s5(e)||"Unknown",a));return Ut({},s,n)}function ff(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wi,gl=Cr.current,jt(Cr,e),jt(Wr,Wr.current),!0}function bj(e,t,s){var n=e.stateNode;if(!n)throw Error(ve(169));s?(e=p2(e,t,gl),n.__reactInternalMemoizedMergedChildContext=e,Et(Wr),Et(Cr),jt(Cr,e)):Et(Wr),jt(Wr,s)}var Wn=null,pm=!1,Dp=!1;function x2(e){Wn===null?Wn=[e]:Wn.push(e)}function vA(e){pm=!0,x2(e)}function Oi(){if(!Dp&&Wn!==null){Dp=!0;var e=0,t=ft;try{var s=Wn;for(ft=1;e<s.length;e++){var n=s[e];do n=n(!0);while(n!==null)}Wn=null,pm=!1}catch(a){throw Wn!==null&&(Wn=Wn.slice(e+1)),$_(Ey,Oi),a}finally{ft=t,Dp=!1}}return null}var so=[],no=0,mf=null,pf=0,ks=[],Es=0,yl=null,Jn=1,ea="";function Ii(e,t){so[no++]=pf,so[no++]=mf,mf=e,pf=t}function g2(e,t,s){ks[Es++]=Jn,ks[Es++]=ea,ks[Es++]=yl,yl=e;var n=Jn;e=ea;var a=32-en(n)-1;n&=~(1<<a),s+=1;var i=32-en(t)+a;if(30<i){var l=a-a%5;i=(n&(1<<l)-1).toString(32),n>>=l,a-=l,Jn=1<<32-en(t)+a|s<<a|n,ea=i+e}else Jn=1<<i|s<<a|n,ea=e}function Ly(e){e.return!==null&&(Ii(e,1),g2(e,1,0))}function Fy(e){for(;e===mf;)mf=so[--no],so[no]=null,pf=so[--no],so[no]=null;for(;e===yl;)yl=ks[--Es],ks[Es]=null,ea=ks[--Es],ks[Es]=null,Jn=ks[--Es],ks[Es]=null}var us=null,os=null,Mt=!1,Xs=null;function y2(e,t){var s=Os(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function vj(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,us=e,os=ci(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,us=e,os=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=yl!==null?{id:Jn,overflow:ea}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=Os(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,us=e,os=null,!0):!1;default:return!1}}function y0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function b0(e){if(Mt){var t=os;if(t){var s=t;if(!vj(e,t)){if(y0(e))throw Error(ve(418));t=ci(s.nextSibling);var n=us;t&&vj(e,t)?y2(n,s):(e.flags=e.flags&-4097|2,Mt=!1,us=e)}}else{if(y0(e))throw Error(ve(418));e.flags=e.flags&-4097|2,Mt=!1,us=e}}}function jj(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;us=e}function Qu(e){if(e!==us)return!1;if(!Mt)return jj(e),Mt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!m0(e.type,e.memoizedProps)),t&&(t=os)){if(y0(e))throw b2(),Error(ve(418));for(;t;)y2(e,t),t=ci(t.nextSibling)}if(jj(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ve(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){os=ci(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}os=null}}else os=us?ci(e.stateNode.nextSibling):null;return!0}function b2(){for(var e=os;e;)e=ci(e.nextSibling)}function Vo(){os=us=null,Mt=!1}function Iy(e){Xs===null?Xs=[e]:Xs.push(e)}var jA=_a.ReactCurrentBatchConfig;function Dc(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(ve(309));var n=s.stateNode}if(!n)throw Error(ve(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=a.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(ve(284));if(!s._owner)throw Error(ve(290,e))}return e}function Xu(e,t){throw e=Object.prototype.toString.call(t),Error(ve(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Nj(e){var t=e._init;return t(e._payload)}function v2(e){function t(v,g){if(e){var y=v.deletions;y===null?(v.deletions=[g],v.flags|=16):y.push(g)}}function s(v,g){if(!e)return null;for(;g!==null;)t(v,g),g=g.sibling;return null}function n(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function a(v,g){return v=fi(v,g),v.index=0,v.sibling=null,v}function i(v,g,y){return v.index=y,e?(y=v.alternate,y!==null?(y=y.index,y<g?(v.flags|=2,g):y):(v.flags|=2,g)):(v.flags|=1048576,g)}function l(v){return e&&v.alternate===null&&(v.flags|=2),v}function o(v,g,y,b){return g===null||g.tag!==6?(g=Up(y,v.mode,b),g.return=v,g):(g=a(g,y),g.return=v,g)}function c(v,g,y,b){var N=y.type;return N===Xl?u(v,g,y.props.children,b,y.key):g!==null&&(g.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===La&&Nj(N)===g.type)?(b=a(g,y.props),b.ref=Dc(v,g,y),b.return=v,b):(b=Th(y.type,y.key,y.props,null,v.mode,b),b.ref=Dc(v,g,y),b.return=v,b)}function d(v,g,y,b){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=zp(y,v.mode,b),g.return=v,g):(g=a(g,y.children||[]),g.return=v,g)}function u(v,g,y,b,N){return g===null||g.tag!==7?(g=cl(y,v.mode,b,N),g.return=v,g):(g=a(g,y),g.return=v,g)}function h(v,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Up(""+g,v.mode,y),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case qu:return y=Th(g.type,g.key,g.props,null,v.mode,y),y.ref=Dc(v,null,g),y.return=v,y;case Ql:return g=zp(g,v.mode,y),g.return=v,g;case La:var b=g._init;return h(v,b(g._payload),y)}if(Gc(g)||Tc(g))return g=cl(g,v.mode,y,null),g.return=v,g;Xu(v,g)}return null}function f(v,g,y,b){var N=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return N!==null?null:o(v,g,""+y,b);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case qu:return y.key===N?c(v,g,y,b):null;case Ql:return y.key===N?d(v,g,y,b):null;case La:return N=y._init,f(v,g,N(y._payload),b)}if(Gc(y)||Tc(y))return N!==null?null:u(v,g,y,b,null);Xu(v,y)}return null}function m(v,g,y,b,N){if(typeof b=="string"&&b!==""||typeof b=="number")return v=v.get(y)||null,o(g,v,""+b,N);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case qu:return v=v.get(b.key===null?y:b.key)||null,c(g,v,b,N);case Ql:return v=v.get(b.key===null?y:b.key)||null,d(g,v,b,N);case La:var k=b._init;return m(v,g,y,k(b._payload),N)}if(Gc(b)||Tc(b))return v=v.get(y)||null,u(g,v,b,N,null);Xu(g,b)}return null}function x(v,g,y,b){for(var N=null,k=null,w=g,_=g=0,S=null;w!==null&&_<y.length;_++){w.index>_?(S=w,w=null):S=w.sibling;var E=f(v,w,y[_],b);if(E===null){w===null&&(w=S);break}e&&w&&E.alternate===null&&t(v,w),g=i(E,g,_),k===null?N=E:k.sibling=E,k=E,w=S}if(_===y.length)return s(v,w),Mt&&Ii(v,_),N;if(w===null){for(;_<y.length;_++)w=h(v,y[_],b),w!==null&&(g=i(w,g,_),k===null?N=w:k.sibling=w,k=w);return Mt&&Ii(v,_),N}for(w=n(v,w);_<y.length;_++)S=m(w,v,_,y[_],b),S!==null&&(e&&S.alternate!==null&&w.delete(S.key===null?_:S.key),g=i(S,g,_),k===null?N=S:k.sibling=S,k=S);return e&&w.forEach(function(A){return t(v,A)}),Mt&&Ii(v,_),N}function p(v,g,y,b){var N=Tc(y);if(typeof N!="function")throw Error(ve(150));if(y=N.call(y),y==null)throw Error(ve(151));for(var k=N=null,w=g,_=g=0,S=null,E=y.next();w!==null&&!E.done;_++,E=y.next()){w.index>_?(S=w,w=null):S=w.sibling;var A=f(v,w,E.value,b);if(A===null){w===null&&(w=S);break}e&&w&&A.alternate===null&&t(v,w),g=i(A,g,_),k===null?N=A:k.sibling=A,k=A,w=S}if(E.done)return s(v,w),Mt&&Ii(v,_),N;if(w===null){for(;!E.done;_++,E=y.next())E=h(v,E.value,b),E!==null&&(g=i(E,g,_),k===null?N=E:k.sibling=E,k=E);return Mt&&Ii(v,_),N}for(w=n(v,w);!E.done;_++,E=y.next())E=m(w,v,_,E.value,b),E!==null&&(e&&E.alternate!==null&&w.delete(E.key===null?_:E.key),g=i(E,g,_),k===null?N=E:k.sibling=E,k=E);return e&&w.forEach(function(C){return t(v,C)}),Mt&&Ii(v,_),N}function j(v,g,y,b){if(typeof y=="object"&&y!==null&&y.type===Xl&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case qu:e:{for(var N=y.key,k=g;k!==null;){if(k.key===N){if(N=y.type,N===Xl){if(k.tag===7){s(v,k.sibling),g=a(k,y.props.children),g.return=v,v=g;break e}}else if(k.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===La&&Nj(N)===k.type){s(v,k.sibling),g=a(k,y.props),g.ref=Dc(v,k,y),g.return=v,v=g;break e}s(v,k);break}else t(v,k);k=k.sibling}y.type===Xl?(g=cl(y.props.children,v.mode,b,y.key),g.return=v,v=g):(b=Th(y.type,y.key,y.props,null,v.mode,b),b.ref=Dc(v,g,y),b.return=v,v=b)}return l(v);case Ql:e:{for(k=y.key;g!==null;){if(g.key===k)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){s(v,g.sibling),g=a(g,y.children||[]),g.return=v,v=g;break e}else{s(v,g);break}else t(v,g);g=g.sibling}g=zp(y,v.mode,b),g.return=v,v=g}return l(v);case La:return k=y._init,j(v,g,k(y._payload),b)}if(Gc(y))return x(v,g,y,b);if(Tc(y))return p(v,g,y,b);Xu(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(s(v,g.sibling),g=a(g,y),g.return=v,v=g):(s(v,g),g=Up(y,v.mode,b),g.return=v,v=g),l(v)):s(v,g)}return j}var Ho=v2(!0),j2=v2(!1),xf=Ti(null),gf=null,ao=null,By=null;function qy(){By=ao=gf=null}function $y(e){var t=xf.current;Et(xf),e._currentValue=t}function v0(e,t,s){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===s)break;e=e.return}}function yo(e,t){gf=e,By=ao=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Hr=!0),e.firstContext=null)}function Bs(e){var t=e._currentValue;if(By!==e)if(e={context:e,memoizedValue:t,next:null},ao===null){if(gf===null)throw Error(ve(308));ao=e,gf.dependencies={lanes:0,firstContext:e}}else ao=ao.next=e;return t}var Vi=null;function Uy(e){Vi===null?Vi=[e]:Vi.push(e)}function N2(e,t,s,n){var a=t.interleaved;return a===null?(s.next=s,Uy(t)):(s.next=a.next,a.next=s),t.interleaved=s,ma(e,n)}function ma(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Fa=!1;function zy(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function w2(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function aa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function di(e,t,s){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,lt&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,ma(e,s)}return a=n.interleaved,a===null?(t.next=t,Uy(n)):(t.next=a.next,a.next=t),n.interleaved=t,ma(e,s)}function _h(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,Cy(e,s)}}function wj(e,t){var s=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var a=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var l={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};i===null?a=i=l:i=i.next=l,s=s.next}while(s!==null);i===null?a=i=t:i=i.next=t}else a=i=t;s={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function yf(e,t,s,n){var a=e.updateQueue;Fa=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var u=e.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=a.baseState;l=0,u=d=c=null,o=i;do{var f=o.lane,m=o.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var x=e,p=o;switch(f=t,m=s,p.tag){case 1:if(x=p.payload,typeof x=="function"){h=x.call(m,h,f);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=p.payload,f=typeof x=="function"?x.call(m,h,f):x,f==null)break e;h=Ut({},h,f);break e;case 2:Fa=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,f=a.effects,f===null?a.effects=[o]:f.push(o))}else m={eventTime:m,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=m,c=h):u=u.next=m,l|=f;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;f=o,o=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(!0);if(u===null&&(c=h),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);vl|=l,e.lanes=l,e.memoizedState=h}}function _j(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=s,typeof a!="function")throw Error(ve(191,a));a.call(n)}}}var yu={},Tn=Ti(yu),Dd=Ti(yu),Ld=Ti(yu);function Hi(e){if(e===yu)throw Error(ve(174));return e}function Vy(e,t){switch(jt(Ld,t),jt(Dd,e),jt(Tn,yu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:e0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=e0(t,e)}Et(Tn),jt(Tn,t)}function Wo(){Et(Tn),Et(Dd),Et(Ld)}function _2(e){Hi(Ld.current);var t=Hi(Tn.current),s=e0(t,e.type);t!==s&&(jt(Dd,e),jt(Tn,s))}function Hy(e){Dd.current===e&&(Et(Tn),Et(Dd))}var Lt=Ti(0);function bf(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Lp=[];function Wy(){for(var e=0;e<Lp.length;e++)Lp[e]._workInProgressVersionPrimary=null;Lp.length=0}var Sh=_a.ReactCurrentDispatcher,Fp=_a.ReactCurrentBatchConfig,bl=0,Bt=null,ar=null,ur=null,vf=!1,ud=!1,Fd=0,NA=0;function vr(){throw Error(ve(321))}function Yy(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!nn(e[s],t[s]))return!1;return!0}function Gy(e,t,s,n,a,i){if(bl=i,Bt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Sh.current=e===null||e.memoizedState===null?kA:EA,e=s(n,a),ud){i=0;do{if(ud=!1,Fd=0,25<=i)throw Error(ve(301));i+=1,ur=ar=null,t.updateQueue=null,Sh.current=CA,e=s(n,a)}while(ud)}if(Sh.current=jf,t=ar!==null&&ar.next!==null,bl=0,ur=ar=Bt=null,vf=!1,t)throw Error(ve(300));return e}function Ky(){var e=Fd!==0;return Fd=0,e}function pn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ur===null?Bt.memoizedState=ur=e:ur=ur.next=e,ur}function qs(){if(ar===null){var e=Bt.alternate;e=e!==null?e.memoizedState:null}else e=ar.next;var t=ur===null?Bt.memoizedState:ur.next;if(t!==null)ur=t,ar=e;else{if(e===null)throw Error(ve(310));ar=e,e={memoizedState:ar.memoizedState,baseState:ar.baseState,baseQueue:ar.baseQueue,queue:ar.queue,next:null},ur===null?Bt.memoizedState=ur=e:ur=ur.next=e}return ur}function Id(e,t){return typeof t=="function"?t(e):t}function Ip(e){var t=qs(),s=t.queue;if(s===null)throw Error(ve(311));s.lastRenderedReducer=e;var n=ar,a=n.baseQueue,i=s.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}n.baseQueue=a=i,s.pending=null}if(a!==null){i=a.next,n=n.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((bl&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=h,l=n):c=c.next=h,Bt.lanes|=u,vl|=u}d=d.next}while(d!==null&&d!==i);c===null?l=n:c.next=o,nn(n,t.memoizedState)||(Hr=!0),t.memoizedState=n,t.baseState=l,t.baseQueue=c,s.lastRenderedState=n}if(e=s.interleaved,e!==null){a=e;do i=a.lane,Bt.lanes|=i,vl|=i,a=a.next;while(a!==e)}else a===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Bp(e){var t=qs(),s=t.queue;if(s===null)throw Error(ve(311));s.lastRenderedReducer=e;var n=s.dispatch,a=s.pending,i=t.memoizedState;if(a!==null){s.pending=null;var l=a=a.next;do i=e(i,l.action),l=l.next;while(l!==a);nn(i,t.memoizedState)||(Hr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),s.lastRenderedState=i}return[i,n]}function S2(){}function k2(e,t){var s=Bt,n=qs(),a=t(),i=!nn(n.memoizedState,a);if(i&&(n.memoizedState=a,Hr=!0),n=n.queue,Qy(A2.bind(null,s,n,e),[e]),n.getSnapshot!==t||i||ur!==null&&ur.memoizedState.tag&1){if(s.flags|=2048,Bd(9,C2.bind(null,s,n,a,t),void 0,null),hr===null)throw Error(ve(349));bl&30||E2(s,t,a)}return a}function E2(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Bt.updateQueue,t===null?(t={lastEffect:null,stores:null},Bt.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function C2(e,t,s,n){t.value=s,t.getSnapshot=n,T2(t)&&O2(e)}function A2(e,t,s){return s(function(){T2(t)&&O2(e)})}function T2(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!nn(e,s)}catch{return!0}}function O2(e){var t=ma(e,1);t!==null&&tn(t,e,1,-1)}function Sj(e){var t=pn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Id,lastRenderedState:e},t.queue=e,e=e.dispatch=SA.bind(null,Bt,e),[t.memoizedState,e]}function Bd(e,t,s,n){return e={tag:e,create:t,destroy:s,deps:n,next:null},t=Bt.updateQueue,t===null?(t={lastEffect:null,stores:null},Bt.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(n=s.next,s.next=e,e.next=n,t.lastEffect=e)),e}function R2(){return qs().memoizedState}function kh(e,t,s,n){var a=pn();Bt.flags|=e,a.memoizedState=Bd(1|t,s,void 0,n===void 0?null:n)}function xm(e,t,s,n){var a=qs();n=n===void 0?null:n;var i=void 0;if(ar!==null){var l=ar.memoizedState;if(i=l.destroy,n!==null&&Yy(n,l.deps)){a.memoizedState=Bd(t,s,i,n);return}}Bt.flags|=e,a.memoizedState=Bd(1|t,s,i,n)}function kj(e,t){return kh(8390656,8,e,t)}function Qy(e,t){return xm(2048,8,e,t)}function P2(e,t){return xm(4,2,e,t)}function M2(e,t){return xm(4,4,e,t)}function D2(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function L2(e,t,s){return s=s!=null?s.concat([e]):null,xm(4,4,D2.bind(null,t,e),s)}function Xy(){}function F2(e,t){var s=qs();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&Yy(t,n[1])?n[0]:(s.memoizedState=[e,t],e)}function I2(e,t){var s=qs();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&Yy(t,n[1])?n[0]:(e=e(),s.memoizedState=[e,t],e)}function B2(e,t,s){return bl&21?(nn(s,t)||(s=V_(),Bt.lanes|=s,vl|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Hr=!0),e.memoizedState=s)}function wA(e,t){var s=ft;ft=s!==0&&4>s?s:4,e(!0);var n=Fp.transition;Fp.transition={};try{e(!1),t()}finally{ft=s,Fp.transition=n}}function q2(){return qs().memoizedState}function _A(e,t,s){var n=hi(e);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},$2(e))U2(t,s);else if(s=N2(e,t,s,n),s!==null){var a=Lr();tn(s,e,n,a),z2(s,t,n)}}function SA(e,t,s){var n=hi(e),a={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if($2(e))U2(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,s);if(a.hasEagerState=!0,a.eagerState=o,nn(o,l)){var c=t.interleaved;c===null?(a.next=a,Uy(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}s=N2(e,t,a,n),s!==null&&(a=Lr(),tn(s,e,n,a),z2(s,t,n))}}function $2(e){var t=e.alternate;return e===Bt||t!==null&&t===Bt}function U2(e,t){ud=vf=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function z2(e,t,s){if(s&4194240){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,Cy(e,s)}}var jf={readContext:Bs,useCallback:vr,useContext:vr,useEffect:vr,useImperativeHandle:vr,useInsertionEffect:vr,useLayoutEffect:vr,useMemo:vr,useReducer:vr,useRef:vr,useState:vr,useDebugValue:vr,useDeferredValue:vr,useTransition:vr,useMutableSource:vr,useSyncExternalStore:vr,useId:vr,unstable_isNewReconciler:!1},kA={readContext:Bs,useCallback:function(e,t){return pn().memoizedState=[e,t===void 0?null:t],e},useContext:Bs,useEffect:kj,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,kh(4194308,4,D2.bind(null,t,e),s)},useLayoutEffect:function(e,t){return kh(4194308,4,e,t)},useInsertionEffect:function(e,t){return kh(4,2,e,t)},useMemo:function(e,t){var s=pn();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var n=pn();return t=s!==void 0?s(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=_A.bind(null,Bt,e),[n.memoizedState,e]},useRef:function(e){var t=pn();return e={current:e},t.memoizedState=e},useState:Sj,useDebugValue:Xy,useDeferredValue:function(e){return pn().memoizedState=e},useTransition:function(){var e=Sj(!1),t=e[0];return e=wA.bind(null,e[1]),pn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var n=Bt,a=pn();if(Mt){if(s===void 0)throw Error(ve(407));s=s()}else{if(s=t(),hr===null)throw Error(ve(349));bl&30||E2(n,t,s)}a.memoizedState=s;var i={value:s,getSnapshot:t};return a.queue=i,kj(A2.bind(null,n,i,e),[e]),n.flags|=2048,Bd(9,C2.bind(null,n,i,s,t),void 0,null),s},useId:function(){var e=pn(),t=hr.identifierPrefix;if(Mt){var s=ea,n=Jn;s=(n&~(1<<32-en(n)-1)).toString(32)+s,t=":"+t+"R"+s,s=Fd++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=NA++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},EA={readContext:Bs,useCallback:F2,useContext:Bs,useEffect:Qy,useImperativeHandle:L2,useInsertionEffect:P2,useLayoutEffect:M2,useMemo:I2,useReducer:Ip,useRef:R2,useState:function(){return Ip(Id)},useDebugValue:Xy,useDeferredValue:function(e){var t=qs();return B2(t,ar.memoizedState,e)},useTransition:function(){var e=Ip(Id)[0],t=qs().memoizedState;return[e,t]},useMutableSource:S2,useSyncExternalStore:k2,useId:q2,unstable_isNewReconciler:!1},CA={readContext:Bs,useCallback:F2,useContext:Bs,useEffect:Qy,useImperativeHandle:L2,useInsertionEffect:P2,useLayoutEffect:M2,useMemo:I2,useReducer:Bp,useRef:R2,useState:function(){return Bp(Id)},useDebugValue:Xy,useDeferredValue:function(e){var t=qs();return ar===null?t.memoizedState=e:B2(t,ar.memoizedState,e)},useTransition:function(){var e=Bp(Id)[0],t=qs().memoizedState;return[e,t]},useMutableSource:S2,useSyncExternalStore:k2,useId:q2,unstable_isNewReconciler:!1};function Ws(e,t){if(e&&e.defaultProps){t=Ut({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function j0(e,t,s,n){t=e.memoizedState,s=s(n,t),s=s==null?t:Ut({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var gm={isMounted:function(e){return(e=e._reactInternals)?Pl(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var n=Lr(),a=hi(e),i=aa(n,a);i.payload=t,s!=null&&(i.callback=s),t=di(e,i,a),t!==null&&(tn(t,e,a,n),_h(t,e,a))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var n=Lr(),a=hi(e),i=aa(n,a);i.tag=1,i.payload=t,s!=null&&(i.callback=s),t=di(e,i,a),t!==null&&(tn(t,e,a,n),_h(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Lr(),n=hi(e),a=aa(s,n);a.tag=2,t!=null&&(a.callback=t),t=di(e,a,n),t!==null&&(tn(t,e,n,s),_h(t,e,n))}};function Ej(e,t,s,n,a,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,l):t.prototype&&t.prototype.isPureReactComponent?!Od(s,n)||!Od(a,i):!0}function V2(e,t,s){var n=!1,a=wi,i=t.contextType;return typeof i=="object"&&i!==null?i=Bs(i):(a=Yr(t)?gl:Cr.current,n=t.contextTypes,i=(n=n!=null)?zo(e,a):wi),t=new t(s,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=gm,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Cj(e,t,s,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,n),t.state!==e&&gm.enqueueReplaceState(t,t.state,null)}function N0(e,t,s,n){var a=e.stateNode;a.props=s,a.state=e.memoizedState,a.refs={},zy(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Bs(i):(i=Yr(t)?gl:Cr.current,a.context=zo(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(j0(e,t,i,s),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&gm.enqueueReplaceState(a,a.state,null),yf(e,s,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Yo(e,t){try{var s="",n=t;do s+=r5(n),n=n.return;while(n);var a=s}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function qp(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function w0(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var AA=typeof WeakMap=="function"?WeakMap:Map;function H2(e,t,s){s=aa(-1,s),s.tag=3,s.payload={element:null};var n=t.value;return s.callback=function(){wf||(wf=!0,P0=n),w0(e,t)},s}function W2(e,t,s){s=aa(-1,s),s.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;s.payload=function(){return n(a)},s.callback=function(){w0(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(s.callback=function(){w0(e,t),typeof n!="function"&&(ui===null?ui=new Set([this]):ui.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),s}function Aj(e,t,s){var n=e.pingCache;if(n===null){n=e.pingCache=new AA;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(s)||(a.add(s),e=zA.bind(null,e,t,s),t.then(e,e))}function Tj(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Oj(e,t,s,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=aa(-1,1),t.tag=2,di(s,t,1))),s.lanes|=1),e)}var TA=_a.ReactCurrentOwner,Hr=!1;function Pr(e,t,s,n){t.child=e===null?j2(t,null,s,n):Ho(t,e.child,s,n)}function Rj(e,t,s,n,a){s=s.render;var i=t.ref;return yo(t,a),n=Gy(e,t,s,n,i,a),s=Ky(),e!==null&&!Hr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,pa(e,t,a)):(Mt&&s&&Ly(t),t.flags|=1,Pr(e,t,n,a),t.child)}function Pj(e,t,s,n,a){if(e===null){var i=s.type;return typeof i=="function"&&!ab(i)&&i.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=i,Y2(e,t,i,n,a)):(e=Th(s.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var l=i.memoizedProps;if(s=s.compare,s=s!==null?s:Od,s(l,n)&&e.ref===t.ref)return pa(e,t,a)}return t.flags|=1,e=fi(i,n),e.ref=t.ref,e.return=t,t.child=e}function Y2(e,t,s,n,a){if(e!==null){var i=e.memoizedProps;if(Od(i,n)&&e.ref===t.ref)if(Hr=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Hr=!0);else return t.lanes=e.lanes,pa(e,t,a)}return _0(e,t,s,n,a)}function G2(e,t,s){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},jt(lo,as),as|=s;else{if(!(s&1073741824))return e=i!==null?i.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,jt(lo,as),as|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:s,jt(lo,as),as|=n}else i!==null?(n=i.baseLanes|s,t.memoizedState=null):n=s,jt(lo,as),as|=n;return Pr(e,t,a,s),t.child}function K2(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function _0(e,t,s,n,a){var i=Yr(s)?gl:Cr.current;return i=zo(t,i),yo(t,a),s=Gy(e,t,s,n,i,a),n=Ky(),e!==null&&!Hr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,pa(e,t,a)):(Mt&&n&&Ly(t),t.flags|=1,Pr(e,t,s,a),t.child)}function Mj(e,t,s,n,a){if(Yr(s)){var i=!0;ff(t)}else i=!1;if(yo(t,a),t.stateNode===null)Eh(e,t),V2(t,s,n),N0(t,s,n,a),n=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,d=s.contextType;typeof d=="object"&&d!==null?d=Bs(d):(d=Yr(s)?gl:Cr.current,d=zo(t,d));var u=s.getDerivedStateFromProps,h=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==n||c!==d)&&Cj(t,l,n,d),Fa=!1;var f=t.memoizedState;l.state=f,yf(t,n,l,a),c=t.memoizedState,o!==n||f!==c||Wr.current||Fa?(typeof u=="function"&&(j0(t,s,u,n),c=t.memoizedState),(o=Fa||Ej(t,s,o,n,f,c,d))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),l.props=n,l.state=c,l.context=d,n=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{l=t.stateNode,w2(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:Ws(t.type,o),l.props=d,h=t.pendingProps,f=l.context,c=s.contextType,typeof c=="object"&&c!==null?c=Bs(c):(c=Yr(s)?gl:Cr.current,c=zo(t,c));var m=s.getDerivedStateFromProps;(u=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==h||f!==c)&&Cj(t,l,n,c),Fa=!1,f=t.memoizedState,l.state=f,yf(t,n,l,a);var x=t.memoizedState;o!==h||f!==x||Wr.current||Fa?(typeof m=="function"&&(j0(t,s,m,n),x=t.memoizedState),(d=Fa||Ej(t,s,d,n,f,x,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,x,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,x,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=x),l.props=n,l.state=x,l.context=c,n=d):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return S0(e,t,s,n,i,a)}function S0(e,t,s,n,a,i){K2(e,t);var l=(t.flags&128)!==0;if(!n&&!l)return a&&bj(t,s,!1),pa(e,t,i);n=t.stateNode,TA.current=t;var o=l&&typeof s.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&l?(t.child=Ho(t,e.child,null,i),t.child=Ho(t,null,o,i)):Pr(e,t,o,i),t.memoizedState=n.state,a&&bj(t,s,!0),t.child}function Q2(e){var t=e.stateNode;t.pendingContext?yj(e,t.pendingContext,t.pendingContext!==t.context):t.context&&yj(e,t.context,!1),Vy(e,t.containerInfo)}function Dj(e,t,s,n,a){return Vo(),Iy(a),t.flags|=256,Pr(e,t,s,n),t.child}var k0={dehydrated:null,treeContext:null,retryLane:0};function E0(e){return{baseLanes:e,cachePool:null,transitions:null}}function X2(e,t,s){var n=t.pendingProps,a=Lt.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),jt(Lt,a&1),e===null)return b0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=n.children,e=n.fallback,i?(n=t.mode,i=t.child,l={mode:"hidden",children:l},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=vm(l,n,0,null),e=cl(e,n,s,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=E0(s),t.memoizedState=k0,e):Zy(t,l));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return OA(e,t,l,n,o,a,s);if(i){i=n.fallback,l=t.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:n.children};return!(l&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=fi(a,c),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=fi(o,i):(i=cl(i,l,s,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,l=e.child.memoizedState,l=l===null?E0(s):{baseLanes:l.baseLanes|s,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~s,t.memoizedState=k0,n}return i=e.child,e=i.sibling,n=fi(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=s),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n}function Zy(e,t){return t=vm({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Zu(e,t,s,n){return n!==null&&Iy(n),Ho(t,e.child,null,s),e=Zy(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function OA(e,t,s,n,a,i,l){if(s)return t.flags&256?(t.flags&=-257,n=qp(Error(ve(422))),Zu(e,t,l,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=vm({mode:"visible",children:n.children},a,0,null),i=cl(i,a,l,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Ho(t,e.child,null,l),t.child.memoizedState=E0(l),t.memoizedState=k0,i);if(!(t.mode&1))return Zu(e,t,l,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(ve(419)),n=qp(i,n,void 0),Zu(e,t,l,n)}if(o=(l&e.childLanes)!==0,Hr||o){if(n=hr,n!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,ma(e,a),tn(n,e,a,-1))}return nb(),n=qp(Error(ve(421))),Zu(e,t,l,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=VA.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,os=ci(a.nextSibling),us=t,Mt=!0,Xs=null,e!==null&&(ks[Es++]=Jn,ks[Es++]=ea,ks[Es++]=yl,Jn=e.id,ea=e.overflow,yl=t),t=Zy(t,n.children),t.flags|=4096,t)}function Lj(e,t,s){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),v0(e.return,t,s)}function $p(e,t,s,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=s,i.tailMode=a)}function Z2(e,t,s){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Pr(e,t,n.children,s),n=Lt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Lj(e,s,t);else if(e.tag===19)Lj(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(jt(Lt,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(s=t.child,a=null;s!==null;)e=s.alternate,e!==null&&bf(e)===null&&(a=s),s=s.sibling;s=a,s===null?(a=t.child,t.child=null):(a=s.sibling,s.sibling=null),$p(t,!1,a,s,i);break;case"backwards":for(s=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&bf(e)===null){t.child=a;break}e=a.sibling,a.sibling=s,s=a,a=e}$p(t,!0,s,null,i);break;case"together":$p(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Eh(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function pa(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),vl|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ve(153));if(t.child!==null){for(e=t.child,s=fi(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=fi(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function RA(e,t,s){switch(t.tag){case 3:Q2(t),Vo();break;case 5:_2(t);break;case 1:Yr(t.type)&&ff(t);break;case 4:Vy(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;jt(xf,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(jt(Lt,Lt.current&1),t.flags|=128,null):s&t.child.childLanes?X2(e,t,s):(jt(Lt,Lt.current&1),e=pa(e,t,s),e!==null?e.sibling:null);jt(Lt,Lt.current&1);break;case 19:if(n=(s&t.childLanes)!==0,e.flags&128){if(n)return Z2(e,t,s);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),jt(Lt,Lt.current),n)break;return null;case 22:case 23:return t.lanes=0,G2(e,t,s)}return pa(e,t,s)}var J2,C0,eS,tS;J2=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};C0=function(){};eS=function(e,t,s,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Hi(Tn.current);var i=null;switch(s){case"input":a=Qx(e,a),n=Qx(e,n),i=[];break;case"select":a=Ut({},a,{value:void 0}),n=Ut({},n,{value:void 0}),i=[];break;case"textarea":a=Jx(e,a),n=Jx(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=uf)}t0(s,n);var l;s=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var o=a[d];for(l in o)o.hasOwnProperty(l)&&(s||(s={}),s[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(_d.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(o=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(s||(s={}),s[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(s||(s={}),s[l]=c[l])}else s||(i||(i=[]),i.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(_d.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&wt("scroll",e),i||o===c||(i=[])):(i=i||[]).push(d,c))}s&&(i=i||[]).push("style",s);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};tS=function(e,t,s,n){s!==n&&(t.flags|=4)};function Lc(e,t){if(!Mt)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function jr(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,n=0;if(t)for(var a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=s,t}function PA(e,t,s){var n=t.pendingProps;switch(Fy(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jr(t),null;case 1:return Yr(t.type)&&hf(),jr(t),null;case 3:return n=t.stateNode,Wo(),Et(Wr),Et(Cr),Wy(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Qu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Xs!==null&&(L0(Xs),Xs=null))),C0(e,t),jr(t),null;case 5:Hy(t);var a=Hi(Ld.current);if(s=t.type,e!==null&&t.stateNode!=null)eS(e,t,s,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ve(166));return jr(t),null}if(e=Hi(Tn.current),Qu(t)){n=t.stateNode,s=t.type;var i=t.memoizedProps;switch(n[wn]=t,n[Md]=i,e=(t.mode&1)!==0,s){case"dialog":wt("cancel",n),wt("close",n);break;case"iframe":case"object":case"embed":wt("load",n);break;case"video":case"audio":for(a=0;a<Qc.length;a++)wt(Qc[a],n);break;case"source":wt("error",n);break;case"img":case"image":case"link":wt("error",n),wt("load",n);break;case"details":wt("toggle",n);break;case"input":Hv(n,i),wt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},wt("invalid",n);break;case"textarea":Yv(n,i),wt("invalid",n)}t0(s,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&Ku(n.textContent,o,e),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Ku(n.textContent,o,e),a=["children",""+o]):_d.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&wt("scroll",n)}switch(s){case"input":$u(n),Wv(n,i,!0);break;case"textarea":$u(n),Gv(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=uf)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=A_(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=l.createElement(s,{is:n.is}):(e=l.createElement(s),s==="select"&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,s),e[wn]=t,e[Md]=n,J2(e,t,!1,!1),t.stateNode=e;e:{switch(l=r0(s,n),s){case"dialog":wt("cancel",e),wt("close",e),a=n;break;case"iframe":case"object":case"embed":wt("load",e),a=n;break;case"video":case"audio":for(a=0;a<Qc.length;a++)wt(Qc[a],e);a=n;break;case"source":wt("error",e),a=n;break;case"img":case"image":case"link":wt("error",e),wt("load",e),a=n;break;case"details":wt("toggle",e),a=n;break;case"input":Hv(e,n),a=Qx(e,n),wt("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Ut({},n,{value:void 0}),wt("invalid",e);break;case"textarea":Yv(e,n),a=Jx(e,n),wt("invalid",e);break;default:a=n}t0(s,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?R_(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&T_(e,c)):i==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&Sd(e,c):typeof c=="number"&&Sd(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(_d.hasOwnProperty(i)?c!=null&&i==="onScroll"&&wt("scroll",e):c!=null&&Ny(e,i,c,l))}switch(s){case"input":$u(e),Wv(e,n,!1);break;case"textarea":$u(e),Gv(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Ni(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?mo(e,!!n.multiple,i,!1):n.defaultValue!=null&&mo(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=uf)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return jr(t),null;case 6:if(e&&t.stateNode!=null)tS(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ve(166));if(s=Hi(Ld.current),Hi(Tn.current),Qu(t)){if(n=t.stateNode,s=t.memoizedProps,n[wn]=t,(i=n.nodeValue!==s)&&(e=us,e!==null))switch(e.tag){case 3:Ku(n.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ku(n.nodeValue,s,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[wn]=t,t.stateNode=n}return jr(t),null;case 13:if(Et(Lt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Mt&&os!==null&&t.mode&1&&!(t.flags&128))b2(),Vo(),t.flags|=98560,i=!1;else if(i=Qu(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(ve(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ve(317));i[wn]=t}else Vo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;jr(t),i=!1}else Xs!==null&&(L0(Xs),Xs=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Lt.current&1?lr===0&&(lr=3):nb())),t.updateQueue!==null&&(t.flags|=4),jr(t),null);case 4:return Wo(),C0(e,t),e===null&&Rd(t.stateNode.containerInfo),jr(t),null;case 10:return $y(t.type._context),jr(t),null;case 17:return Yr(t.type)&&hf(),jr(t),null;case 19:if(Et(Lt),i=t.memoizedState,i===null)return jr(t),null;if(n=(t.flags&128)!==0,l=i.rendering,l===null)if(n)Lc(i,!1);else{if(lr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=bf(e),l!==null){for(t.flags|=128,Lc(i,!1),n=l.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=s,s=t.child;s!==null;)i=s,e=n,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return jt(Lt,Lt.current&1|2),t.child}e=e.sibling}i.tail!==null&&Xt()>Go&&(t.flags|=128,n=!0,Lc(i,!1),t.lanes=4194304)}else{if(!n)if(e=bf(l),e!==null){if(t.flags|=128,n=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),Lc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Mt)return jr(t),null}else 2*Xt()-i.renderingStartTime>Go&&s!==1073741824&&(t.flags|=128,n=!0,Lc(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(s=i.last,s!==null?s.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Xt(),t.sibling=null,s=Lt.current,jt(Lt,n?s&1|2:s&1),t):(jr(t),null);case 22:case 23:return sb(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?as&1073741824&&(jr(t),t.subtreeFlags&6&&(t.flags|=8192)):jr(t),null;case 24:return null;case 25:return null}throw Error(ve(156,t.tag))}function MA(e,t){switch(Fy(t),t.tag){case 1:return Yr(t.type)&&hf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Wo(),Et(Wr),Et(Cr),Wy(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Hy(t),null;case 13:if(Et(Lt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ve(340));Vo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Et(Lt),null;case 4:return Wo(),null;case 10:return $y(t.type._context),null;case 22:case 23:return sb(),null;case 24:return null;default:return null}}var Ju=!1,Nr=!1,DA=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function io(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){Wt(e,t,n)}else s.current=null}function A0(e,t,s){try{s()}catch(n){Wt(e,t,n)}}var Fj=!1;function LA(e,t){if(h0=of,e=i2(),Dy(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var l=0,o=-1,c=-1,d=0,u=0,h=e,f=null;t:for(;;){for(var m;h!==s||a!==0&&h.nodeType!==3||(o=l+a),h!==i||n!==0&&h.nodeType!==3||(c=l+n),h.nodeType===3&&(l+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===e)break t;if(f===s&&++d===a&&(o=l),f===i&&++u===n&&(c=l),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}s=o===-1||c===-1?null:{start:o,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(f0={focusedElem:e,selectionRange:s},of=!1,Ce=t;Ce!==null;)if(t=Ce,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ce=e;else for(;Ce!==null;){t=Ce;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var p=x.memoizedProps,j=x.memoizedState,v=t.stateNode,g=v.getSnapshotBeforeUpdate(t.elementType===t.type?p:Ws(t.type,p),j);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ve(163))}}catch(b){Wt(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,Ce=e;break}Ce=t.return}return x=Fj,Fj=!1,x}function hd(e,t,s){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&A0(t,s,i)}a=a.next}while(a!==n)}}function ym(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var n=s.create;s.destroy=n()}s=s.next}while(s!==t)}}function T0(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function rS(e){var t=e.alternate;t!==null&&(e.alternate=null,rS(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[wn],delete t[Md],delete t[x0],delete t[yA],delete t[bA])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sS(e){return e.tag===5||e.tag===3||e.tag===4}function Ij(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||sS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function O0(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=uf));else if(n!==4&&(e=e.child,e!==null))for(O0(e,t,s),e=e.sibling;e!==null;)O0(e,t,s),e=e.sibling}function R0(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(R0(e,t,s),e=e.sibling;e!==null;)R0(e,t,s),e=e.sibling}var xr=null,Ks=!1;function Pa(e,t,s){for(s=s.child;s!==null;)nS(e,t,s),s=s.sibling}function nS(e,t,s){if(An&&typeof An.onCommitFiberUnmount=="function")try{An.onCommitFiberUnmount(dm,s)}catch{}switch(s.tag){case 5:Nr||io(s,t);case 6:var n=xr,a=Ks;xr=null,Pa(e,t,s),xr=n,Ks=a,xr!==null&&(Ks?(e=xr,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):xr.removeChild(s.stateNode));break;case 18:xr!==null&&(Ks?(e=xr,s=s.stateNode,e.nodeType===8?Mp(e.parentNode,s):e.nodeType===1&&Mp(e,s),Ad(e)):Mp(xr,s.stateNode));break;case 4:n=xr,a=Ks,xr=s.stateNode.containerInfo,Ks=!0,Pa(e,t,s),xr=n,Ks=a;break;case 0:case 11:case 14:case 15:if(!Nr&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&A0(s,t,l),a=a.next}while(a!==n)}Pa(e,t,s);break;case 1:if(!Nr&&(io(s,t),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(o){Wt(s,t,o)}Pa(e,t,s);break;case 21:Pa(e,t,s);break;case 22:s.mode&1?(Nr=(n=Nr)||s.memoizedState!==null,Pa(e,t,s),Nr=n):Pa(e,t,s);break;default:Pa(e,t,s)}}function Bj(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new DA),t.forEach(function(n){var a=HA.bind(null,e,n);s.has(n)||(s.add(n),n.then(a,a))})}}function Hs(e,t){var s=t.deletions;if(s!==null)for(var n=0;n<s.length;n++){var a=s[n];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:xr=o.stateNode,Ks=!1;break e;case 3:xr=o.stateNode.containerInfo,Ks=!0;break e;case 4:xr=o.stateNode.containerInfo,Ks=!0;break e}o=o.return}if(xr===null)throw Error(ve(160));nS(i,l,a),xr=null,Ks=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Wt(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)aS(t,e),t=t.sibling}function aS(e,t){var s=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Hs(t,e),hn(e),n&4){try{hd(3,e,e.return),ym(3,e)}catch(p){Wt(e,e.return,p)}try{hd(5,e,e.return)}catch(p){Wt(e,e.return,p)}}break;case 1:Hs(t,e),hn(e),n&512&&s!==null&&io(s,s.return);break;case 5:if(Hs(t,e),hn(e),n&512&&s!==null&&io(s,s.return),e.flags&32){var a=e.stateNode;try{Sd(a,"")}catch(p){Wt(e,e.return,p)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,l=s!==null?s.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&E_(a,i),r0(o,l);var d=r0(o,i);for(l=0;l<c.length;l+=2){var u=c[l],h=c[l+1];u==="style"?R_(a,h):u==="dangerouslySetInnerHTML"?T_(a,h):u==="children"?Sd(a,h):Ny(a,u,h,d)}switch(o){case"input":Xx(a,i);break;case"textarea":C_(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?mo(a,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?mo(a,!!i.multiple,i.defaultValue,!0):mo(a,!!i.multiple,i.multiple?[]:"",!1))}a[Md]=i}catch(p){Wt(e,e.return,p)}}break;case 6:if(Hs(t,e),hn(e),n&4){if(e.stateNode===null)throw Error(ve(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(p){Wt(e,e.return,p)}}break;case 3:if(Hs(t,e),hn(e),n&4&&s!==null&&s.memoizedState.isDehydrated)try{Ad(t.containerInfo)}catch(p){Wt(e,e.return,p)}break;case 4:Hs(t,e),hn(e);break;case 13:Hs(t,e),hn(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(tb=Xt())),n&4&&Bj(e);break;case 22:if(u=s!==null&&s.memoizedState!==null,e.mode&1?(Nr=(d=Nr)||u,Hs(t,e),Nr=d):Hs(t,e),hn(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(Ce=e,u=e.child;u!==null;){for(h=Ce=u;Ce!==null;){switch(f=Ce,m=f.child,f.tag){case 0:case 11:case 14:case 15:hd(4,f,f.return);break;case 1:io(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){n=f,s=f.return;try{t=n,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(p){Wt(n,s,p)}}break;case 5:io(f,f.return);break;case 22:if(f.memoizedState!==null){$j(h);continue}}m!==null?(m.return=f,Ce=m):$j(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{a=h.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=h.stateNode,c=h.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=O_("display",l))}catch(p){Wt(e,e.return,p)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(p){Wt(e,e.return,p)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Hs(t,e),hn(e),n&4&&Bj(e);break;case 21:break;default:Hs(t,e),hn(e)}}function hn(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(sS(s)){var n=s;break e}s=s.return}throw Error(ve(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Sd(a,""),n.flags&=-33);var i=Ij(e);R0(e,i,a);break;case 3:case 4:var l=n.stateNode.containerInfo,o=Ij(e);O0(e,o,l);break;default:throw Error(ve(161))}}catch(c){Wt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function FA(e,t,s){Ce=e,iS(e)}function iS(e,t,s){for(var n=(e.mode&1)!==0;Ce!==null;){var a=Ce,i=a.child;if(a.tag===22&&n){var l=a.memoizedState!==null||Ju;if(!l){var o=a.alternate,c=o!==null&&o.memoizedState!==null||Nr;o=Ju;var d=Nr;if(Ju=l,(Nr=c)&&!d)for(Ce=a;Ce!==null;)l=Ce,c=l.child,l.tag===22&&l.memoizedState!==null?Uj(a):c!==null?(c.return=l,Ce=c):Uj(a);for(;i!==null;)Ce=i,iS(i),i=i.sibling;Ce=a,Ju=o,Nr=d}qj(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Ce=i):qj(e)}}function qj(e){for(;Ce!==null;){var t=Ce;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Nr||ym(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Nr)if(s===null)n.componentDidMount();else{var a=t.elementType===t.type?s.memoizedProps:Ws(t.type,s.memoizedProps);n.componentDidUpdate(a,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&_j(t,i,n);break;case 3:var l=t.updateQueue;if(l!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}_j(t,l,s)}break;case 5:var o=t.stateNode;if(s===null&&t.flags&4){s=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Ad(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ve(163))}Nr||t.flags&512&&T0(t)}catch(f){Wt(t,t.return,f)}}if(t===e){Ce=null;break}if(s=t.sibling,s!==null){s.return=t.return,Ce=s;break}Ce=t.return}}function $j(e){for(;Ce!==null;){var t=Ce;if(t===e){Ce=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Ce=s;break}Ce=t.return}}function Uj(e){for(;Ce!==null;){var t=Ce;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{ym(4,t)}catch(c){Wt(t,s,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Wt(t,a,c)}}var i=t.return;try{T0(t)}catch(c){Wt(t,i,c)}break;case 5:var l=t.return;try{T0(t)}catch(c){Wt(t,l,c)}}}catch(c){Wt(t,t.return,c)}if(t===e){Ce=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Ce=o;break}Ce=t.return}}var IA=Math.ceil,Nf=_a.ReactCurrentDispatcher,Jy=_a.ReactCurrentOwner,Fs=_a.ReactCurrentBatchConfig,lt=0,hr=null,rr=null,gr=0,as=0,lo=Ti(0),lr=0,qd=null,vl=0,bm=0,eb=0,fd=null,Vr=null,tb=0,Go=1/0,zn=null,wf=!1,P0=null,ui=null,eh=!1,Xa=null,_f=0,md=0,M0=null,Ch=-1,Ah=0;function Lr(){return lt&6?Xt():Ch!==-1?Ch:Ch=Xt()}function hi(e){return e.mode&1?lt&2&&gr!==0?gr&-gr:jA.transition!==null?(Ah===0&&(Ah=V_()),Ah):(e=ft,e!==0||(e=window.event,e=e===void 0?16:X_(e.type)),e):1}function tn(e,t,s,n){if(50<md)throw md=0,M0=null,Error(ve(185));pu(e,s,n),(!(lt&2)||e!==hr)&&(e===hr&&(!(lt&2)&&(bm|=s),lr===4&&Ba(e,gr)),Gr(e,n),s===1&&lt===0&&!(t.mode&1)&&(Go=Xt()+500,pm&&Oi()))}function Gr(e,t){var s=e.callbackNode;j5(e,t);var n=lf(e,e===hr?gr:0);if(n===0)s!==null&&Xv(s),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(s!=null&&Xv(s),t===1)e.tag===0?vA(zj.bind(null,e)):x2(zj.bind(null,e)),xA(function(){!(lt&6)&&Oi()}),s=null;else{switch(H_(n)){case 1:s=Ey;break;case 4:s=U_;break;case 16:s=af;break;case 536870912:s=z_;break;default:s=af}s=mS(s,lS.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function lS(e,t){if(Ch=-1,Ah=0,lt&6)throw Error(ve(327));var s=e.callbackNode;if(bo()&&e.callbackNode!==s)return null;var n=lf(e,e===hr?gr:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Sf(e,n);else{t=n;var a=lt;lt|=2;var i=cS();(hr!==e||gr!==t)&&(zn=null,Go=Xt()+500,ol(e,t));do try{$A();break}catch(o){oS(e,o)}while(!0);qy(),Nf.current=i,lt=a,rr!==null?t=0:(hr=null,gr=0,t=lr)}if(t!==0){if(t===2&&(a=l0(e),a!==0&&(n=a,t=D0(e,a))),t===1)throw s=qd,ol(e,0),Ba(e,n),Gr(e,Xt()),s;if(t===6)Ba(e,n);else{if(a=e.current.alternate,!(n&30)&&!BA(a)&&(t=Sf(e,n),t===2&&(i=l0(e),i!==0&&(n=i,t=D0(e,i))),t===1))throw s=qd,ol(e,0),Ba(e,n),Gr(e,Xt()),s;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(ve(345));case 2:Bi(e,Vr,zn);break;case 3:if(Ba(e,n),(n&130023424)===n&&(t=tb+500-Xt(),10<t)){if(lf(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Lr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=p0(Bi.bind(null,e,Vr,zn),t);break}Bi(e,Vr,zn);break;case 4:if(Ba(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var l=31-en(n);i=1<<l,l=t[l],l>a&&(a=l),n&=~i}if(n=a,n=Xt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*IA(n/1960))-n,10<n){e.timeoutHandle=p0(Bi.bind(null,e,Vr,zn),n);break}Bi(e,Vr,zn);break;case 5:Bi(e,Vr,zn);break;default:throw Error(ve(329))}}}return Gr(e,Xt()),e.callbackNode===s?lS.bind(null,e):null}function D0(e,t){var s=fd;return e.current.memoizedState.isDehydrated&&(ol(e,t).flags|=256),e=Sf(e,t),e!==2&&(t=Vr,Vr=s,t!==null&&L0(t)),e}function L0(e){Vr===null?Vr=e:Vr.push.apply(Vr,e)}function BA(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var a=s[n],i=a.getSnapshot;a=a.value;try{if(!nn(i(),a))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ba(e,t){for(t&=~eb,t&=~bm,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-en(t),n=1<<s;e[s]=-1,t&=~n}}function zj(e){if(lt&6)throw Error(ve(327));bo();var t=lf(e,0);if(!(t&1))return Gr(e,Xt()),null;var s=Sf(e,t);if(e.tag!==0&&s===2){var n=l0(e);n!==0&&(t=n,s=D0(e,n))}if(s===1)throw s=qd,ol(e,0),Ba(e,t),Gr(e,Xt()),s;if(s===6)throw Error(ve(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Bi(e,Vr,zn),Gr(e,Xt()),null}function rb(e,t){var s=lt;lt|=1;try{return e(t)}finally{lt=s,lt===0&&(Go=Xt()+500,pm&&Oi())}}function jl(e){Xa!==null&&Xa.tag===0&&!(lt&6)&&bo();var t=lt;lt|=1;var s=Fs.transition,n=ft;try{if(Fs.transition=null,ft=1,e)return e()}finally{ft=n,Fs.transition=s,lt=t,!(lt&6)&&Oi()}}function sb(){as=lo.current,Et(lo)}function ol(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,pA(s)),rr!==null)for(s=rr.return;s!==null;){var n=s;switch(Fy(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&hf();break;case 3:Wo(),Et(Wr),Et(Cr),Wy();break;case 5:Hy(n);break;case 4:Wo();break;case 13:Et(Lt);break;case 19:Et(Lt);break;case 10:$y(n.type._context);break;case 22:case 23:sb()}s=s.return}if(hr=e,rr=e=fi(e.current,null),gr=as=t,lr=0,qd=null,eb=bm=vl=0,Vr=fd=null,Vi!==null){for(t=0;t<Vi.length;t++)if(s=Vi[t],n=s.interleaved,n!==null){s.interleaved=null;var a=n.next,i=s.pending;if(i!==null){var l=i.next;i.next=a,n.next=l}s.pending=n}Vi=null}return e}function oS(e,t){do{var s=rr;try{if(qy(),Sh.current=jf,vf){for(var n=Bt.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}vf=!1}if(bl=0,ur=ar=Bt=null,ud=!1,Fd=0,Jy.current=null,s===null||s.return===null){lr=1,qd=t,rr=null;break}e:{var i=e,l=s.return,o=s,c=t;if(t=gr,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=Tj(l);if(m!==null){m.flags&=-257,Oj(m,l,o,i,t),m.mode&1&&Aj(i,d,t),t=m,c=d;var x=t.updateQueue;if(x===null){var p=new Set;p.add(c),t.updateQueue=p}else x.add(c);break e}else{if(!(t&1)){Aj(i,d,t),nb();break e}c=Error(ve(426))}}else if(Mt&&o.mode&1){var j=Tj(l);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Oj(j,l,o,i,t),Iy(Yo(c,o));break e}}i=c=Yo(c,o),lr!==4&&(lr=2),fd===null?fd=[i]:fd.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=H2(i,c,t);wj(i,v);break e;case 1:o=c;var g=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ui===null||!ui.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var b=W2(i,o,t);wj(i,b);break e}}i=i.return}while(i!==null)}uS(s)}catch(N){t=N,rr===s&&s!==null&&(rr=s=s.return);continue}break}while(!0)}function cS(){var e=Nf.current;return Nf.current=jf,e===null?jf:e}function nb(){(lr===0||lr===3||lr===2)&&(lr=4),hr===null||!(vl&268435455)&&!(bm&268435455)||Ba(hr,gr)}function Sf(e,t){var s=lt;lt|=2;var n=cS();(hr!==e||gr!==t)&&(zn=null,ol(e,t));do try{qA();break}catch(a){oS(e,a)}while(!0);if(qy(),lt=s,Nf.current=n,rr!==null)throw Error(ve(261));return hr=null,gr=0,lr}function qA(){for(;rr!==null;)dS(rr)}function $A(){for(;rr!==null&&!h5();)dS(rr)}function dS(e){var t=fS(e.alternate,e,as);e.memoizedProps=e.pendingProps,t===null?uS(e):rr=t,Jy.current=null}function uS(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=MA(s,t),s!==null){s.flags&=32767,rr=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{lr=6,rr=null;return}}else if(s=PA(s,t,as),s!==null){rr=s;return}if(t=t.sibling,t!==null){rr=t;return}rr=t=e}while(t!==null);lr===0&&(lr=5)}function Bi(e,t,s){var n=ft,a=Fs.transition;try{Fs.transition=null,ft=1,UA(e,t,s,n)}finally{Fs.transition=a,ft=n}return null}function UA(e,t,s,n){do bo();while(Xa!==null);if(lt&6)throw Error(ve(327));s=e.finishedWork;var a=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(ve(177));e.callbackNode=null,e.callbackPriority=0;var i=s.lanes|s.childLanes;if(N5(e,i),e===hr&&(rr=hr=null,gr=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||eh||(eh=!0,mS(af,function(){return bo(),null})),i=(s.flags&15990)!==0,s.subtreeFlags&15990||i){i=Fs.transition,Fs.transition=null;var l=ft;ft=1;var o=lt;lt|=4,Jy.current=null,LA(e,s),aS(s,e),oA(f0),of=!!h0,f0=h0=null,e.current=s,FA(s),f5(),lt=o,ft=l,Fs.transition=i}else e.current=s;if(eh&&(eh=!1,Xa=e,_f=a),i=e.pendingLanes,i===0&&(ui=null),x5(s.stateNode),Gr(e,Xt()),t!==null)for(n=e.onRecoverableError,s=0;s<t.length;s++)a=t[s],n(a.value,{componentStack:a.stack,digest:a.digest});if(wf)throw wf=!1,e=P0,P0=null,e;return _f&1&&e.tag!==0&&bo(),i=e.pendingLanes,i&1?e===M0?md++:(md=0,M0=e):md=0,Oi(),null}function bo(){if(Xa!==null){var e=H_(_f),t=Fs.transition,s=ft;try{if(Fs.transition=null,ft=16>e?16:e,Xa===null)var n=!1;else{if(e=Xa,Xa=null,_f=0,lt&6)throw Error(ve(331));var a=lt;for(lt|=4,Ce=e.current;Ce!==null;){var i=Ce,l=i.child;if(Ce.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(Ce=d;Ce!==null;){var u=Ce;switch(u.tag){case 0:case 11:case 15:hd(8,u,i)}var h=u.child;if(h!==null)h.return=u,Ce=h;else for(;Ce!==null;){u=Ce;var f=u.sibling,m=u.return;if(rS(u),u===d){Ce=null;break}if(f!==null){f.return=m,Ce=f;break}Ce=m}}}var x=i.alternate;if(x!==null){var p=x.child;if(p!==null){x.child=null;do{var j=p.sibling;p.sibling=null,p=j}while(p!==null)}}Ce=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,Ce=l;else e:for(;Ce!==null;){if(i=Ce,i.flags&2048)switch(i.tag){case 0:case 11:case 15:hd(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Ce=v;break e}Ce=i.return}}var g=e.current;for(Ce=g;Ce!==null;){l=Ce;var y=l.child;if(l.subtreeFlags&2064&&y!==null)y.return=l,Ce=y;else e:for(l=g;Ce!==null;){if(o=Ce,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:ym(9,o)}}catch(N){Wt(o,o.return,N)}if(o===l){Ce=null;break e}var b=o.sibling;if(b!==null){b.return=o.return,Ce=b;break e}Ce=o.return}}if(lt=a,Oi(),An&&typeof An.onPostCommitFiberRoot=="function")try{An.onPostCommitFiberRoot(dm,e)}catch{}n=!0}return n}finally{ft=s,Fs.transition=t}}return!1}function Vj(e,t,s){t=Yo(s,t),t=H2(e,t,1),e=di(e,t,1),t=Lr(),e!==null&&(pu(e,1,t),Gr(e,t))}function Wt(e,t,s){if(e.tag===3)Vj(e,e,s);else for(;t!==null;){if(t.tag===3){Vj(t,e,s);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ui===null||!ui.has(n))){e=Yo(s,e),e=W2(t,e,1),t=di(t,e,1),e=Lr(),t!==null&&(pu(t,1,e),Gr(t,e));break}}t=t.return}}function zA(e,t,s){var n=e.pingCache;n!==null&&n.delete(t),t=Lr(),e.pingedLanes|=e.suspendedLanes&s,hr===e&&(gr&s)===s&&(lr===4||lr===3&&(gr&130023424)===gr&&500>Xt()-tb?ol(e,0):eb|=s),Gr(e,t)}function hS(e,t){t===0&&(e.mode&1?(t=Vu,Vu<<=1,!(Vu&130023424)&&(Vu=4194304)):t=1);var s=Lr();e=ma(e,t),e!==null&&(pu(e,t,s),Gr(e,s))}function VA(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),hS(e,s)}function HA(e,t){var s=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(s=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ve(314))}n!==null&&n.delete(t),hS(e,s)}var fS;fS=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||Wr.current)Hr=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return Hr=!1,RA(e,t,s);Hr=!!(e.flags&131072)}else Hr=!1,Mt&&t.flags&1048576&&g2(t,pf,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Eh(e,t),e=t.pendingProps;var a=zo(t,Cr.current);yo(t,s),a=Gy(null,t,n,e,a,s);var i=Ky();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Yr(n)?(i=!0,ff(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,zy(t),a.updater=gm,t.stateNode=a,a._reactInternals=t,N0(t,n,e,s),t=S0(null,t,n,!0,i,s)):(t.tag=0,Mt&&i&&Ly(t),Pr(null,t,a,s),t=t.child),t;case 16:n=t.elementType;e:{switch(Eh(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=YA(n),e=Ws(n,e),a){case 0:t=_0(null,t,n,e,s);break e;case 1:t=Mj(null,t,n,e,s);break e;case 11:t=Rj(null,t,n,e,s);break e;case 14:t=Pj(null,t,n,Ws(n.type,e),s);break e}throw Error(ve(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ws(n,a),_0(e,t,n,a,s);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ws(n,a),Mj(e,t,n,a,s);case 3:e:{if(Q2(t),e===null)throw Error(ve(387));n=t.pendingProps,i=t.memoizedState,a=i.element,w2(e,t),yf(t,n,null,s);var l=t.memoizedState;if(n=l.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Yo(Error(ve(423)),t),t=Dj(e,t,n,s,a);break e}else if(n!==a){a=Yo(Error(ve(424)),t),t=Dj(e,t,n,s,a);break e}else for(os=ci(t.stateNode.containerInfo.firstChild),us=t,Mt=!0,Xs=null,s=j2(t,null,n,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Vo(),n===a){t=pa(e,t,s);break e}Pr(e,t,n,s)}t=t.child}return t;case 5:return _2(t),e===null&&b0(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,l=a.children,m0(n,a)?l=null:i!==null&&m0(n,i)&&(t.flags|=32),K2(e,t),Pr(e,t,l,s),t.child;case 6:return e===null&&b0(t),null;case 13:return X2(e,t,s);case 4:return Vy(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ho(t,null,n,s):Pr(e,t,n,s),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ws(n,a),Rj(e,t,n,a,s);case 7:return Pr(e,t,t.pendingProps,s),t.child;case 8:return Pr(e,t,t.pendingProps.children,s),t.child;case 12:return Pr(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,l=a.value,jt(xf,n._currentValue),n._currentValue=l,i!==null)if(nn(i.value,l)){if(i.children===a.children&&!Wr.current){t=pa(e,t,s);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=aa(-1,s&-s),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=s,c=i.alternate,c!==null&&(c.lanes|=s),v0(i.return,s,t),o.lanes|=s;break}c=c.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(ve(341));l.lanes|=s,o=l.alternate,o!==null&&(o.lanes|=s),v0(l,s,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}Pr(e,t,a.children,s),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,yo(t,s),a=Bs(a),n=n(a),t.flags|=1,Pr(e,t,n,s),t.child;case 14:return n=t.type,a=Ws(n,t.pendingProps),a=Ws(n.type,a),Pj(e,t,n,a,s);case 15:return Y2(e,t,t.type,t.pendingProps,s);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ws(n,a),Eh(e,t),t.tag=1,Yr(n)?(e=!0,ff(t)):e=!1,yo(t,s),V2(t,n,a),N0(t,n,a,s),S0(null,t,n,!0,e,s);case 19:return Z2(e,t,s);case 22:return G2(e,t,s)}throw Error(ve(156,t.tag))};function mS(e,t){return $_(e,t)}function WA(e,t,s,n){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Os(e,t,s,n){return new WA(e,t,s,n)}function ab(e){return e=e.prototype,!(!e||!e.isReactComponent)}function YA(e){if(typeof e=="function")return ab(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_y)return 11;if(e===Sy)return 14}return 2}function fi(e,t){var s=e.alternate;return s===null?(s=Os(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Th(e,t,s,n,a,i){var l=2;if(n=e,typeof e=="function")ab(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Xl:return cl(s.children,a,i,t);case wy:l=8,a|=8;break;case Wx:return e=Os(12,s,t,a|2),e.elementType=Wx,e.lanes=i,e;case Yx:return e=Os(13,s,t,a),e.elementType=Yx,e.lanes=i,e;case Gx:return e=Os(19,s,t,a),e.elementType=Gx,e.lanes=i,e;case __:return vm(s,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case N_:l=10;break e;case w_:l=9;break e;case _y:l=11;break e;case Sy:l=14;break e;case La:l=16,n=null;break e}throw Error(ve(130,e==null?e:typeof e,""))}return t=Os(l,s,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function cl(e,t,s,n){return e=Os(7,e,n,t),e.lanes=s,e}function vm(e,t,s,n){return e=Os(22,e,n,t),e.elementType=__,e.lanes=s,e.stateNode={isHidden:!1},e}function Up(e,t,s){return e=Os(6,e,null,t),e.lanes=s,e}function zp(e,t,s){return t=Os(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function GA(e,t,s,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wp(0),this.expirationTimes=wp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wp(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function ib(e,t,s,n,a,i,l,o,c){return e=new GA(e,t,s,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Os(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},zy(i),e}function KA(e,t,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ql,key:n==null?null:""+n,children:e,containerInfo:t,implementation:s}}function pS(e){if(!e)return wi;e=e._reactInternals;e:{if(Pl(e)!==e||e.tag!==1)throw Error(ve(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Yr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ve(171))}if(e.tag===1){var s=e.type;if(Yr(s))return p2(e,s,t)}return t}function xS(e,t,s,n,a,i,l,o,c){return e=ib(s,n,!0,e,a,i,l,o,c),e.context=pS(null),s=e.current,n=Lr(),a=hi(s),i=aa(n,a),i.callback=t??null,di(s,i,a),e.current.lanes=a,pu(e,a,n),Gr(e,n),e}function jm(e,t,s,n){var a=t.current,i=Lr(),l=hi(a);return s=pS(s),t.context===null?t.context=s:t.pendingContext=s,t=aa(i,l),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=di(a,t,l),e!==null&&(tn(e,a,l,i),_h(e,a,l)),l}function kf(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Hj(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function lb(e,t){Hj(e,t),(e=e.alternate)&&Hj(e,t)}function QA(){return null}var gS=typeof reportError=="function"?reportError:function(e){console.error(e)};function ob(e){this._internalRoot=e}Nm.prototype.render=ob.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ve(409));jm(e,t,null,null)};Nm.prototype.unmount=ob.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;jl(function(){jm(null,e,null,null)}),t[fa]=null}};function Nm(e){this._internalRoot=e}Nm.prototype.unstable_scheduleHydration=function(e){if(e){var t=G_();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Ia.length&&t!==0&&t<Ia[s].priority;s++);Ia.splice(s,0,e),s===0&&Q_(e)}};function cb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function wm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Wj(){}function XA(e,t,s,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=kf(l);i.call(d)}}var l=xS(t,n,e,0,null,!1,!1,"",Wj);return e._reactRootContainer=l,e[fa]=l.current,Rd(e.nodeType===8?e.parentNode:e),jl(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var d=kf(c);o.call(d)}}var c=ib(e,0,!1,null,null,!1,!1,"",Wj);return e._reactRootContainer=c,e[fa]=c.current,Rd(e.nodeType===8?e.parentNode:e),jl(function(){jm(t,c,s,n)}),c}function _m(e,t,s,n,a){var i=s._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var o=a;a=function(){var c=kf(l);o.call(c)}}jm(t,l,e,a)}else l=XA(s,t,e,a,n);return kf(l)}W_=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Kc(t.pendingLanes);s!==0&&(Cy(t,s|1),Gr(t,Xt()),!(lt&6)&&(Go=Xt()+500,Oi()))}break;case 13:jl(function(){var n=ma(e,1);if(n!==null){var a=Lr();tn(n,e,1,a)}}),lb(e,1)}};Ay=function(e){if(e.tag===13){var t=ma(e,134217728);if(t!==null){var s=Lr();tn(t,e,134217728,s)}lb(e,134217728)}};Y_=function(e){if(e.tag===13){var t=hi(e),s=ma(e,t);if(s!==null){var n=Lr();tn(s,e,t,n)}lb(e,t)}};G_=function(){return ft};K_=function(e,t){var s=ft;try{return ft=e,t()}finally{ft=s}};n0=function(e,t,s){switch(t){case"input":if(Xx(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var n=s[t];if(n!==e&&n.form===e.form){var a=mm(n);if(!a)throw Error(ve(90));k_(n),Xx(n,a)}}}break;case"textarea":C_(e,s);break;case"select":t=s.value,t!=null&&mo(e,!!s.multiple,t,!1)}};D_=rb;L_=jl;var ZA={usingClientEntryPoint:!1,Events:[gu,to,mm,P_,M_,rb]},Fc={findFiberByHostInstance:zi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},JA={bundleType:Fc.bundleType,version:Fc.version,rendererPackageName:Fc.rendererPackageName,rendererConfig:Fc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_a.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=B_(e),e===null?null:e.stateNode},findFiberByHostInstance:Fc.findFiberByHostInstance||QA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!th.isDisabled&&th.supportsFiber)try{dm=th.inject(JA),An=th}catch{}}gs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZA;gs.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cb(t))throw Error(ve(200));return KA(e,t,null,s)};gs.createRoot=function(e,t){if(!cb(e))throw Error(ve(299));var s=!1,n="",a=gS;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=ib(e,1,!1,null,null,s,!1,n,a),e[fa]=t.current,Rd(e.nodeType===8?e.parentNode:e),new ob(t)};gs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ve(188)):(e=Object.keys(e).join(","),Error(ve(268,e)));return e=B_(t),e=e===null?null:e.stateNode,e};gs.flushSync=function(e){return jl(e)};gs.hydrate=function(e,t,s){if(!wm(t))throw Error(ve(200));return _m(null,e,t,!0,s)};gs.hydrateRoot=function(e,t,s){if(!cb(e))throw Error(ve(405));var n=s!=null&&s.hydratedSources||null,a=!1,i="",l=gS;if(s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(l=s.onRecoverableError)),t=xS(t,null,e,1,s??null,a,!1,i,l),e[fa]=t.current,Rd(e),n)for(e=0;e<n.length;e++)s=n[e],a=s._getVersion,a=a(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,a]:t.mutableSourceEagerHydrationData.push(s,a);return new Nm(t)};gs.render=function(e,t,s){if(!wm(t))throw Error(ve(200));return _m(null,e,t,!1,s)};gs.unmountComponentAtNode=function(e){if(!wm(e))throw Error(ve(40));return e._reactRootContainer?(jl(function(){_m(null,null,e,!1,function(){e._reactRootContainer=null,e[fa]=null})}),!0):!1};gs.unstable_batchedUpdates=rb;gs.unstable_renderSubtreeIntoContainer=function(e,t,s,n){if(!wm(s))throw Error(ve(200));if(e==null||e._reactInternals===void 0)throw Error(ve(38));return _m(e,t,s,!1,n)};gs.version="18.3.1-next-f1338f8080-20240426";function yS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yS)}catch(e){console.error(e)}}yS(),y_.exports=gs;var bS=y_.exports,Yj=bS;Vx.createRoot=Yj.createRoot,Vx.hydrateRoot=Yj.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $d(){return $d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},$d.apply(this,arguments)}var Za;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Za||(Za={}));const Gj="popstate";function e3(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:l,hash:o}=n.location;return F0("",{pathname:i,search:l,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(n,a){return typeof a=="string"?a:Ef(a)}return r3(t,s,null,e)}function qt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function vS(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function t3(){return Math.random().toString(36).substr(2,8)}function Kj(e,t){return{usr:e.state,key:e.key,idx:t}}function F0(e,t,s,n){return s===void 0&&(s=null),$d({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?uc(t):t,{state:s,key:t&&t.key||n||t3()})}function Ef(e){let{pathname:t="/",search:s="",hash:n=""}=e;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function uc(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function r3(e,t,s,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,l=a.history,o=Za.Pop,c=null,d=u();d==null&&(d=0,l.replaceState($d({},l.state,{idx:d}),""));function u(){return(l.state||{idx:null}).idx}function h(){o=Za.Pop;let j=u(),v=j==null?null:j-d;d=j,c&&c({action:o,location:p.location,delta:v})}function f(j,v){o=Za.Push;let g=F0(p.location,j,v);d=u()+1;let y=Kj(g,d),b=p.createHref(g);try{l.pushState(y,"",b)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;a.location.assign(b)}i&&c&&c({action:o,location:p.location,delta:1})}function m(j,v){o=Za.Replace;let g=F0(p.location,j,v);d=u();let y=Kj(g,d),b=p.createHref(g);l.replaceState(y,"",b),i&&c&&c({action:o,location:p.location,delta:0})}function x(j){let v=a.location.origin!=="null"?a.location.origin:a.location.href,g=typeof j=="string"?j:Ef(j);return g=g.replace(/ $/,"%20"),qt(v,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,v)}let p={get action(){return o},get location(){return e(a,l)},listen(j){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Gj,h),c=j,()=>{a.removeEventListener(Gj,h),c=null}},createHref(j){return t(a,j)},createURL:x,encodeLocation(j){let v=x(j);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:m,go(j){return l.go(j)}};return p}var Qj;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Qj||(Qj={}));function s3(e,t,s){return s===void 0&&(s="/"),n3(e,t,s)}function n3(e,t,s,n){let a=typeof t=="string"?uc(t):t,i=Ko(a.pathname||"/",s);if(i==null)return null;let l=jS(e);a3(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let d=x3(i);o=m3(l[c],d)}return o}function jS(e,t,s,n){t===void 0&&(t=[]),s===void 0&&(s=[]),n===void 0&&(n="");let a=(i,l,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};c.relativePath.startsWith("/")&&(qt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=mi([n,c.relativePath]),u=s.concat(c);i.children&&i.children.length>0&&(qt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),jS(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:h3(d,i.index),routesMeta:u})};return e.forEach((i,l)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))a(i,l);else for(let c of NS(i.path))a(i,l,c)}),t}function NS(e){let t=e.split("/");if(t.length===0)return[];let[s,...n]=t,a=s.endsWith("?"),i=s.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let l=NS(n.join("/")),o=[];return o.push(...l.map(c=>c===""?i:[i,c].join("/"))),a&&o.push(...l),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function a3(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:f3(t.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const i3=/^:[\w-]+$/,l3=3,o3=2,c3=1,d3=10,u3=-2,Xj=e=>e==="*";function h3(e,t){let s=e.split("/"),n=s.length;return s.some(Xj)&&(n+=u3),t&&(n+=o3),s.filter(a=>!Xj(a)).reduce((a,i)=>a+(i3.test(i)?l3:i===""?c3:d3),n)}function f3(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function m3(e,t,s){let{routesMeta:n}=e,a={},i="/",l=[];for(let o=0;o<n.length;++o){let c=n[o],d=o===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=I0({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!h)return null;Object.assign(a,h.params),l.push({params:a,pathname:mi([i,h.pathname]),pathnameBase:v3(mi([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=mi([i,h.pathnameBase]))}return l}function I0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,n]=p3(e.path,e.caseSensitive,e.end),a=t.match(s);if(!a)return null;let i=a[0],l=i.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((d,u,h)=>{let{paramName:f,isOptional:m}=u;if(f==="*"){let p=o[h]||"";l=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const x=o[h];return m&&!x?d[f]=void 0:d[f]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:l,pattern:e}}function p3(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),vS(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function x3(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return vS(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ko(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,n=e.charAt(s);return n&&n!=="/"?null:e.slice(s)||"/"}function g3(e,t){t===void 0&&(t="/");let{pathname:s,search:n="",hash:a=""}=typeof e=="string"?uc(e):e;return{pathname:s?s.startsWith("/")?s:y3(s,t):t,search:j3(n),hash:N3(a)}}function y3(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function Vp(e,t,s,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function b3(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function db(e,t){let s=b3(e);return t?s.map((n,a)=>a===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function ub(e,t,s,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=uc(e):(a=$d({},e),qt(!a.pathname||!a.pathname.includes("?"),Vp("?","pathname","search",a)),qt(!a.pathname||!a.pathname.includes("#"),Vp("#","pathname","hash",a)),qt(!a.search||!a.search.includes("#"),Vp("#","search","hash",a)));let i=e===""||a.pathname==="",l=i?"/":a.pathname,o;if(l==null)o=s;else{let h=t.length-1;if(!n&&l.startsWith("..")){let f=l.split("/");for(;f[0]==="..";)f.shift(),h-=1;a.pathname=f.join("/")}o=h>=0?t[h]:"/"}let c=g3(a,o),d=l&&l!=="/"&&l.endsWith("/"),u=(i||l===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const mi=e=>e.join("/").replace(/\/\/+/g,"/"),v3=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),j3=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,N3=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function w3(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const wS=["post","put","patch","delete"];new Set(wS);const _3=["get",...wS];new Set(_3);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ud(){return Ud=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Ud.apply(this,arguments)}const Sm=O.createContext(null),_S=O.createContext(null),Sa=O.createContext(null),km=O.createContext(null),Ln=O.createContext({outlet:null,matches:[],isDataRoute:!1}),SS=O.createContext(null);function S3(e,t){let{relative:s}=t===void 0?{}:t;hc()||qt(!1);let{basename:n,navigator:a}=O.useContext(Sa),{hash:i,pathname:l,search:o}=Em(e,{relative:s}),c=l;return n!=="/"&&(c=l==="/"?n:mi([n,l])),a.createHref({pathname:c,search:o,hash:i})}function hc(){return O.useContext(km)!=null}function ka(){return hc()||qt(!1),O.useContext(km).location}function kS(e){O.useContext(Sa).static||O.useLayoutEffect(e)}function We(){let{isDataRoute:e}=O.useContext(Ln);return e?q3():k3()}function k3(){hc()||qt(!1);let e=O.useContext(Sm),{basename:t,future:s,navigator:n}=O.useContext(Sa),{matches:a}=O.useContext(Ln),{pathname:i}=ka(),l=JSON.stringify(db(a,s.v7_relativeSplatPath)),o=O.useRef(!1);return kS(()=>{o.current=!0}),O.useCallback(function(d,u){if(u===void 0&&(u={}),!o.current)return;if(typeof d=="number"){n.go(d);return}let h=ub(d,JSON.parse(l),i,u.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:mi([t,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[t,n,l,i,e])}const E3=O.createContext(null);function C3(e){let t=O.useContext(Ln).outlet;return t&&O.createElement(E3.Provider,{value:e},t)}function bs(){let{matches:e}=O.useContext(Ln),t=e[e.length-1];return t?t.params:{}}function Em(e,t){let{relative:s}=t===void 0?{}:t,{future:n}=O.useContext(Sa),{matches:a}=O.useContext(Ln),{pathname:i}=ka(),l=JSON.stringify(db(a,n.v7_relativeSplatPath));return O.useMemo(()=>ub(e,JSON.parse(l),i,s==="path"),[e,l,i,s])}function A3(e,t){return T3(e,t)}function T3(e,t,s,n){hc()||qt(!1);let{navigator:a}=O.useContext(Sa),{matches:i}=O.useContext(Ln),l=i[i.length-1],o=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let d=ka(),u;if(t){var h;let j=typeof t=="string"?uc(t):t;c==="/"||(h=j.pathname)!=null&&h.startsWith(c)||qt(!1),u=j}else u=d;let f=u.pathname||"/",m=f;if(c!=="/"){let j=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(j.length).join("/")}let x=s3(e,{pathname:m}),p=D3(x&&x.map(j=>Object.assign({},j,{params:Object.assign({},o,j.params),pathname:mi([c,a.encodeLocation?a.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?c:mi([c,a.encodeLocation?a.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),i,s,n);return t&&p?O.createElement(km.Provider,{value:{location:Ud({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Za.Pop}},p):p}function O3(){let e=B3(),t=w3(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},t),s?O.createElement("pre",{style:a},s):null,null)}const R3=O.createElement(O3,null);class P3 extends O.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?O.createElement(Ln.Provider,{value:this.props.routeContext},O.createElement(SS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function M3(e){let{routeContext:t,match:s,children:n}=e,a=O.useContext(Sm);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),O.createElement(Ln.Provider,{value:t},n)}function D3(e,t,s,n){var a;if(t===void 0&&(t=[]),s===void 0&&(s=null),n===void 0&&(n=null),e==null){var i;if(!s)return null;if(s.errors)e=s.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let l=e,o=(a=s)==null?void 0:a.errors;if(o!=null){let u=l.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);u>=0||qt(!1),l=l.slice(0,Math.min(l.length,u+1))}let c=!1,d=-1;if(s&&n&&n.v7_partialHydration)for(let u=0;u<l.length;u++){let h=l[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:f,errors:m}=s,x=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||x){c=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((u,h,f)=>{let m,x=!1,p=null,j=null;s&&(m=o&&h.route.id?o[h.route.id]:void 0,p=h.route.errorElement||R3,c&&(d<0&&f===0?($3("route-fallback"),x=!0,j=null):d===f&&(x=!0,j=h.route.hydrateFallbackElement||null)));let v=t.concat(l.slice(0,f+1)),g=()=>{let y;return m?y=p:x?y=j:h.route.Component?y=O.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=u,O.createElement(M3,{match:h,routeContext:{outlet:u,matches:v,isDataRoute:s!=null},children:y})};return s&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?O.createElement(P3,{location:s.location,revalidation:s.revalidation,component:p,error:m,children:g(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):g()},null)}var ES=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ES||{}),CS=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(CS||{});function L3(e){let t=O.useContext(Sm);return t||qt(!1),t}function F3(e){let t=O.useContext(_S);return t||qt(!1),t}function I3(e){let t=O.useContext(Ln);return t||qt(!1),t}function AS(e){let t=I3(),s=t.matches[t.matches.length-1];return s.route.id||qt(!1),s.route.id}function B3(){var e;let t=O.useContext(SS),s=F3(),n=AS();return t!==void 0?t:(e=s.errors)==null?void 0:e[n]}function q3(){let{router:e}=L3(ES.UseNavigateStable),t=AS(CS.UseNavigateStable),s=O.useRef(!1);return kS(()=>{s.current=!0}),O.useCallback(function(a,i){i===void 0&&(i={}),s.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Ud({fromRouteId:t},i)))},[e,t])}const Zj={};function $3(e,t,s){Zj[e]||(Zj[e]=!0)}function U3(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function zd(e){let{to:t,replace:s,state:n,relative:a}=e;hc()||qt(!1);let{future:i,static:l}=O.useContext(Sa),{matches:o}=O.useContext(Ln),{pathname:c}=ka(),d=We(),u=ub(t,db(o,i.v7_relativeSplatPath),c,a==="path"),h=JSON.stringify(u);return O.useEffect(()=>d(JSON.parse(h),{replace:s,state:n,relative:a}),[d,h,a,s,n]),null}function z3(e){return C3(e.context)}function Le(e){qt(!1)}function V3(e){let{basename:t="/",children:s=null,location:n,navigationType:a=Za.Pop,navigator:i,static:l=!1,future:o}=e;hc()&&qt(!1);let c=t.replace(/^\/*/,"/"),d=O.useMemo(()=>({basename:c,navigator:i,static:l,future:Ud({v7_relativeSplatPath:!1},o)}),[c,o,i,l]);typeof n=="string"&&(n=uc(n));let{pathname:u="/",search:h="",hash:f="",state:m=null,key:x="default"}=n,p=O.useMemo(()=>{let j=Ko(u,c);return j==null?null:{location:{pathname:j,search:h,hash:f,state:m,key:x},navigationType:a}},[c,u,h,f,m,x,a]);return p==null?null:O.createElement(Sa.Provider,{value:d},O.createElement(km.Provider,{children:s,value:p}))}function H3(e){let{children:t,location:s}=e;return A3(B0(t),s)}new Promise(()=>{});function B0(e,t){t===void 0&&(t=[]);let s=[];return O.Children.forEach(e,(n,a)=>{if(!O.isValidElement(n))return;let i=[...t,a];if(n.type===O.Fragment){s.push.apply(s,B0(n.props.children,i));return}n.type!==Le&&qt(!1),!n.props.index||!n.props.children||qt(!1);let l={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=B0(n.props.children,i)),s.push(l)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cf(){return Cf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Cf.apply(this,arguments)}function TS(e,t){if(e==null)return{};var s={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(s[a]=e[a]);return s}function W3(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Y3(e,t){return e.button===0&&(!t||t==="_self")&&!W3(e)}function q0(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,s)=>{let n=e[s];return t.concat(Array.isArray(n)?n.map(a=>[s,a]):[[s,n]])},[]))}function G3(e,t){let s=q0(e);return t&&t.forEach((n,a)=>{s.has(a)||t.getAll(a).forEach(i=>{s.append(a,i)})}),s}const K3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Q3=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],X3="6";try{window.__reactRouterVersion=X3}catch{}const Z3=O.createContext({isTransitioning:!1}),J3="startTransition",Jj=z6[J3];function eT(e){let{basename:t,children:s,future:n,window:a}=e,i=O.useRef();i.current==null&&(i.current=e3({window:a,v5Compat:!0}));let l=i.current,[o,c]=O.useState({action:l.action,location:l.location}),{v7_startTransition:d}=n||{},u=O.useCallback(h=>{d&&Jj?Jj(()=>c(h)):c(h)},[c,d]);return O.useLayoutEffect(()=>l.listen(u),[l,u]),O.useEffect(()=>U3(n),[n]),O.createElement(V3,{basename:t,children:s,location:o.location,navigationType:o.action,navigator:l,future:n})}const tT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hb=O.forwardRef(function(t,s){let{onClick:n,relative:a,reloadDocument:i,replace:l,state:o,target:c,to:d,preventScrollReset:u,viewTransition:h}=t,f=TS(t,K3),{basename:m}=O.useContext(Sa),x,p=!1;if(typeof d=="string"&&rT.test(d)&&(x=d,tT))try{let y=new URL(window.location.href),b=d.startsWith("//")?new URL(y.protocol+d):new URL(d),N=Ko(b.pathname,m);b.origin===y.origin&&N!=null?d=N+b.search+b.hash:p=!0}catch{}let j=S3(d,{relative:a}),v=aT(d,{replace:l,state:o,target:c,preventScrollReset:u,relative:a,viewTransition:h});function g(y){n&&n(y),y.defaultPrevented||v(y)}return O.createElement("a",Cf({},f,{href:x||j,onClick:p||i?n:g,ref:s,target:c}))}),sT=O.forwardRef(function(t,s){let{"aria-current":n="page",caseSensitive:a=!1,className:i="",end:l=!1,style:o,to:c,viewTransition:d,children:u}=t,h=TS(t,Q3),f=Em(c,{relative:h.relative}),m=ka(),x=O.useContext(_S),{navigator:p,basename:j}=O.useContext(Sa),v=x!=null&&lT(f)&&d===!0,g=p.encodeLocation?p.encodeLocation(f).pathname:f.pathname,y=m.pathname,b=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;a||(y=y.toLowerCase(),b=b?b.toLowerCase():null,g=g.toLowerCase()),b&&j&&(b=Ko(b,j)||b);const N=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let k=y===g||!l&&y.startsWith(g)&&y.charAt(N)==="/",w=b!=null&&(b===g||!l&&b.startsWith(g)&&b.charAt(g.length)==="/"),_={isActive:k,isPending:w,isTransitioning:v},S=k?n:void 0,E;typeof i=="function"?E=i(_):E=[i,k?"active":null,w?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let A=typeof o=="function"?o(_):o;return O.createElement(hb,Cf({},h,{"aria-current":S,className:E,ref:s,style:A,to:c,viewTransition:d}),typeof u=="function"?u(_):u)});var $0;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})($0||($0={}));var eN;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(eN||(eN={}));function nT(e){let t=O.useContext(Sm);return t||qt(!1),t}function aT(e,t){let{target:s,replace:n,state:a,preventScrollReset:i,relative:l,viewTransition:o}=t===void 0?{}:t,c=We(),d=ka(),u=Em(e,{relative:l});return O.useCallback(h=>{if(Y3(h,s)){h.preventDefault();let f=n!==void 0?n:Ef(d)===Ef(u);c(e,{replace:f,state:a,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,u,n,a,s,e,i,l,o])}function iT(e){let t=O.useRef(q0(e)),s=O.useRef(!1),n=ka(),a=O.useMemo(()=>G3(n.search,s.current?null:t.current),[n.search]),i=We(),l=O.useCallback((o,c)=>{const d=q0(typeof o=="function"?o(a):o);s.current=!0,i("?"+d,c)},[i,a]);return[a,l]}function lT(e,t){t===void 0&&(t={});let s=O.useContext(Z3);s==null&&qt(!1);let{basename:n}=nT($0.useViewTransitionState),a=Em(e,{relative:t.relative});if(!s.isTransitioning)return!1;let i=Ko(s.currentLocation.pathname,n)||s.currentLocation.pathname,l=Ko(s.nextLocation.pathname,n)||s.nextLocation.pathname;return I0(a.pathname,l)!=null||I0(a.pathname,i)!=null}var fc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},oT={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},$a,py,Qw,cT=(Qw=class{constructor(){Oe(this,$a,oT);Oe(this,py,!1)}setTimeoutProvider(e){Se(this,$a,e)}setTimeout(e,t){return se(this,$a).setTimeout(e,t)}clearTimeout(e){se(this,$a).clearTimeout(e)}setInterval(e,t){return se(this,$a).setInterval(e,t)}clearInterval(e){se(this,$a).clearInterval(e)}},$a=new WeakMap,py=new WeakMap,Qw),Wi=new cT;function dT(e){setTimeout(e,0)}var Nl=typeof window>"u"||"Deno"in globalThis;function Mr(){}function uT(e,t){return typeof e=="function"?e(t):e}function U0(e){return typeof e=="number"&&e>=0&&e!==1/0}function OS(e,t){return Math.max(e+(t||0)-Date.now(),0)}function pi(e,t){return typeof e=="function"?e(t):e}function Ss(e,t){return typeof e=="function"?e(t):e}function tN(e,t){const{type:s="all",exact:n,fetchStatus:a,predicate:i,queryKey:l,stale:o}=e;if(l){if(n){if(t.queryHash!==fb(l,t.options))return!1}else if(!Vd(t.queryKey,l))return!1}if(s!=="all"){const c=t.isActive();if(s==="active"&&!c||s==="inactive"&&c)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||a&&a!==t.state.fetchStatus||i&&!i(t))}function rN(e,t){const{exact:s,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(s){if(wl(t.options.mutationKey)!==wl(i))return!1}else if(!Vd(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function fb(e,t){return((t==null?void 0:t.queryKeyHashFn)||wl)(e)}function wl(e){return JSON.stringify(e,(t,s)=>z0(s)?Object.keys(s).sort().reduce((n,a)=>(n[a]=s[a],n),{}):s)}function Vd(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(s=>Vd(e[s],t[s])):!1}var hT=Object.prototype.hasOwnProperty;function RS(e,t){if(e===t)return e;const s=sN(e)&&sN(t);if(!s&&!(z0(e)&&z0(t)))return t;const a=(s?e:Object.keys(e)).length,i=s?t:Object.keys(t),l=i.length,o=s?new Array(l):{};let c=0;for(let d=0;d<l;d++){const u=s?d:i[d],h=e[u],f=t[u];if(h===f){o[u]=h,(s?d<a:hT.call(e,u))&&c++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){o[u]=f;continue}const m=RS(h,f);o[u]=m,m===h&&c++}return a===l&&c===a?e:o}function Af(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function sN(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function z0(e){if(!nN(e))return!1;const t=e.constructor;if(t===void 0)return!0;const s=t.prototype;return!(!nN(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function nN(e){return Object.prototype.toString.call(e)==="[object Object]"}function fT(e){return new Promise(t=>{Wi.setTimeout(t,e)})}function V0(e,t,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,t):s.structuralSharing!==!1?RS(e,t):t}function mT(e,t,s=0){const n=[...e,t];return s&&n.length>s?n.slice(1):n}function pT(e,t,s=0){const n=[t,...e];return s&&n.length>s?n.slice(0,-1):n}var mb=Symbol();function PS(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===mb?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function MS(e,t){return typeof e=="function"?e(...t):!!e}var Ji,Ua,To,Xw,xT=(Xw=class extends fc{constructor(){super();Oe(this,Ji);Oe(this,Ua);Oe(this,To);Se(this,To,t=>{if(!Nl&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){se(this,Ua)||this.setEventListener(se(this,To))}onUnsubscribe(){var t;this.hasListeners()||((t=se(this,Ua))==null||t.call(this),Se(this,Ua,void 0))}setEventListener(t){var s;Se(this,To,t),(s=se(this,Ua))==null||s.call(this),Se(this,Ua,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){se(this,Ji)!==t&&(Se(this,Ji,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){var t;return typeof se(this,Ji)=="boolean"?se(this,Ji):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Ji=new WeakMap,Ua=new WeakMap,To=new WeakMap,Xw),pb=new xT;function H0(){let e,t;const s=new Promise((a,i)=>{e=a,t=i});s.status="pending",s.catch(()=>{});function n(a){Object.assign(s,a),delete s.resolve,delete s.reject}return s.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},s.reject=a=>{n({status:"rejected",reason:a}),t(a)},s}var gT=dT;function yT(){let e=[],t=0,s=o=>{o()},n=o=>{o()},a=gT;const i=o=>{t?e.push(o):a(()=>{s(o)})},l=()=>{const o=e;e=[],o.length&&a(()=>{n(()=>{o.forEach(c=>{s(c)})})})};return{batch:o=>{let c;t++;try{c=o()}finally{t--,t||l()}return c},batchCalls:o=>(...c)=>{i(()=>{o(...c)})},schedule:i,setNotifyFunction:o=>{s=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{a=o}}}var ir=yT(),Oo,za,Ro,Zw,bT=(Zw=class extends fc{constructor(){super();Oe(this,Oo,!0);Oe(this,za);Oe(this,Ro);Se(this,Ro,t=>{if(!Nl&&window.addEventListener){const s=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",n)}}})}onSubscribe(){se(this,za)||this.setEventListener(se(this,Ro))}onUnsubscribe(){var t;this.hasListeners()||((t=se(this,za))==null||t.call(this),Se(this,za,void 0))}setEventListener(t){var s;Se(this,Ro,t),(s=se(this,za))==null||s.call(this),Se(this,za,t(this.setOnline.bind(this)))}setOnline(t){se(this,Oo)!==t&&(Se(this,Oo,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return se(this,Oo)}},Oo=new WeakMap,za=new WeakMap,Ro=new WeakMap,Zw),Tf=new bT;function vT(e){return Math.min(1e3*2**e,3e4)}function DS(e){return(e??"online")==="online"?Tf.isOnline():!0}var W0=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function LS(e){let t=!1,s=0,n;const a=H0(),i=()=>a.status!=="pending",l=p=>{var j;if(!i()){const v=new W0(p);f(v),(j=e.onCancel)==null||j.call(e,v)}},o=()=>{t=!0},c=()=>{t=!1},d=()=>pb.isFocused()&&(e.networkMode==="always"||Tf.isOnline())&&e.canRun(),u=()=>DS(e.networkMode)&&e.canRun(),h=p=>{i()||(n==null||n(),a.resolve(p))},f=p=>{i()||(n==null||n(),a.reject(p))},m=()=>new Promise(p=>{var j;n=v=>{(i()||d())&&p(v)},(j=e.onPause)==null||j.call(e)}).then(()=>{var p;n=void 0,i()||(p=e.onContinue)==null||p.call(e)}),x=()=>{if(i())return;let p;const j=s===0?e.initialPromise:void 0;try{p=j??e.fn()}catch(v){p=Promise.reject(v)}Promise.resolve(p).then(h).catch(v=>{var k;if(i())return;const g=e.retry??(Nl?0:3),y=e.retryDelay??vT,b=typeof y=="function"?y(s,v):y,N=g===!0||typeof g=="number"&&s<g||typeof g=="function"&&g(s,v);if(t||!N){f(v);return}s++,(k=e.onFail)==null||k.call(e,s,v),fT(b).then(()=>d()?void 0:m()).then(()=>{t?f(v):x()})})};return{promise:a,status:()=>a.status,cancel:l,continue:()=>(n==null||n(),a),cancelRetry:o,continueRetry:c,canStart:u,start:()=>(u()?x():m().then(x),a)}}var el,Jw,FS=(Jw=class{constructor(){Oe(this,el)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),U0(this.gcTime)&&Se(this,el,Wi.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Nl?1/0:5*60*1e3))}clearGcTimeout(){se(this,el)&&(Wi.clearTimeout(se(this,el)),Se(this,el,void 0))}},el=new WeakMap,Jw),tl,Po,_s,rl,cr,cu,sl,Ys,Un,e_,jT=(e_=class extends FS{constructor(t){super();Oe(this,Ys);Oe(this,tl);Oe(this,Po);Oe(this,_s);Oe(this,rl);Oe(this,cr);Oe(this,cu);Oe(this,sl);Se(this,sl,!1),Se(this,cu,t.defaultOptions),this.setOptions(t.options),this.observers=[],Se(this,rl,t.client),Se(this,_s,se(this,rl).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Se(this,tl,aN(this.options)),this.state=t.state??se(this,tl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=se(this,cr))==null?void 0:t.promise}setOptions(t){if(this.options={...se(this,cu),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const s=aN(this.options);s.data!==void 0&&(this.setData(s.data,{updatedAt:s.dataUpdatedAt,manual:!0}),Se(this,tl,s))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&se(this,_s).remove(this)}setData(t,s){const n=V0(this.state.data,t,this.options);return ze(this,Ys,Un).call(this,{data:n,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),n}setState(t,s){ze(this,Ys,Un).call(this,{type:"setState",state:t,setStateOptions:s})}cancel(t){var n,a;const s=(n=se(this,cr))==null?void 0:n.promise;return(a=se(this,cr))==null||a.cancel(t),s?s.then(Mr).catch(Mr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(se(this,tl))}isActive(){return this.observers.some(t=>Ss(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===mb||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>pi(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!OS(this.state.dataUpdatedAt,t)}onFocus(){var s;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(s=se(this,cr))==null||s.continue()}onOnline(){var s;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(s=se(this,cr))==null||s.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),se(this,_s).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(se(this,cr)&&(se(this,sl)?se(this,cr).cancel({revert:!0}):se(this,cr).cancelRetry()),this.scheduleGc()),se(this,_s).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ze(this,Ys,Un).call(this,{type:"invalidate"})}async fetch(t,s){var c,d,u,h,f,m,x,p,j,v,g,y;if(this.state.fetchStatus!=="idle"&&((c=se(this,cr))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(se(this,cr))return se(this,cr).continueRetry(),se(this,cr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const b=this.observers.find(N=>N.options.queryFn);b&&this.setOptions(b.options)}const n=new AbortController,a=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(Se(this,sl,!0),n.signal)})},i=()=>{const b=PS(this.options,s),k=(()=>{const w={client:se(this,rl),queryKey:this.queryKey,meta:this.meta};return a(w),w})();return Se(this,sl,!1),this.options.persister?this.options.persister(b,k,this):b(k)},o=(()=>{const b={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:se(this,rl),state:this.state,fetchFn:i};return a(b),b})();(d=this.options.behavior)==null||d.onFetch(o,this),Se(this,Po,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&ze(this,Ys,Un).call(this,{type:"fetch",meta:(h=o.fetchOptions)==null?void 0:h.meta}),Se(this,cr,LS({initialPromise:s==null?void 0:s.initialPromise,fn:o.fetchFn,onCancel:b=>{b instanceof W0&&b.revert&&this.setState({...se(this,Po),fetchStatus:"idle"}),n.abort()},onFail:(b,N)=>{ze(this,Ys,Un).call(this,{type:"failed",failureCount:b,error:N})},onPause:()=>{ze(this,Ys,Un).call(this,{type:"pause"})},onContinue:()=>{ze(this,Ys,Un).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const b=await se(this,cr).start();if(b===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(b),(m=(f=se(this,_s).config).onSuccess)==null||m.call(f,b,this),(p=(x=se(this,_s).config).onSettled)==null||p.call(x,b,this.state.error,this),b}catch(b){if(b instanceof W0){if(b.silent)return se(this,cr).promise;if(b.revert){if(this.state.data===void 0)throw b;return this.state.data}}throw ze(this,Ys,Un).call(this,{type:"error",error:b}),(v=(j=se(this,_s).config).onError)==null||v.call(j,b,this),(y=(g=se(this,_s).config).onSettled)==null||y.call(g,this.state.data,b,this),b}finally{this.scheduleGc()}}},tl=new WeakMap,Po=new WeakMap,_s=new WeakMap,rl=new WeakMap,cr=new WeakMap,cu=new WeakMap,sl=new WeakMap,Ys=new WeakSet,Un=function(t){const s=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...IS(n.data,this.options),fetchMeta:t.meta??null};case"success":const a={...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Se(this,Po,t.manual?a:void 0),a;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=s(this.state),ir.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),se(this,_s).notify({query:this,type:"updated",action:t})})},e_);function IS(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:DS(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function aN(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,s=t!==void 0,n=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var Ur,Je,du,Or,nl,Mo,Gn,Va,uu,Do,Lo,al,il,Ha,Fo,ht,Xc,Y0,G0,K0,Q0,X0,Z0,J0,BS,t_,NT=(t_=class extends fc{constructor(t,s){super();Oe(this,ht);Oe(this,Ur);Oe(this,Je);Oe(this,du);Oe(this,Or);Oe(this,nl);Oe(this,Mo);Oe(this,Gn);Oe(this,Va);Oe(this,uu);Oe(this,Do);Oe(this,Lo);Oe(this,al);Oe(this,il);Oe(this,Ha);Oe(this,Fo,new Set);this.options=s,Se(this,Ur,t),Se(this,Va,null),Se(this,Gn,H0()),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(se(this,Je).addObserver(this),iN(se(this,Je),this.options)?ze(this,ht,Xc).call(this):this.updateResult(),ze(this,ht,Q0).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return eg(se(this,Je),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return eg(se(this,Je),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ze(this,ht,X0).call(this),ze(this,ht,Z0).call(this),se(this,Je).removeObserver(this)}setOptions(t){const s=this.options,n=se(this,Je);if(this.options=se(this,Ur).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ss(this.options.enabled,se(this,Je))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ze(this,ht,J0).call(this),se(this,Je).setOptions(this.options),s._defaulted&&!Af(this.options,s)&&se(this,Ur).getQueryCache().notify({type:"observerOptionsUpdated",query:se(this,Je),observer:this});const a=this.hasListeners();a&&lN(se(this,Je),n,this.options,s)&&ze(this,ht,Xc).call(this),this.updateResult(),a&&(se(this,Je)!==n||Ss(this.options.enabled,se(this,Je))!==Ss(s.enabled,se(this,Je))||pi(this.options.staleTime,se(this,Je))!==pi(s.staleTime,se(this,Je)))&&ze(this,ht,Y0).call(this);const i=ze(this,ht,G0).call(this);a&&(se(this,Je)!==n||Ss(this.options.enabled,se(this,Je))!==Ss(s.enabled,se(this,Je))||i!==se(this,Ha))&&ze(this,ht,K0).call(this,i)}getOptimisticResult(t){const s=se(this,Ur).getQueryCache().build(se(this,Ur),t),n=this.createResult(s,t);return _T(this,n)&&(Se(this,Or,n),Se(this,Mo,this.options),Se(this,nl,se(this,Je).state)),n}getCurrentResult(){return se(this,Or)}trackResult(t,s){return new Proxy(t,{get:(n,a)=>(this.trackProp(a),s==null||s(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&se(this,Gn).status==="pending"&&se(this,Gn).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,a))})}trackProp(t){se(this,Fo).add(t)}getCurrentQuery(){return se(this,Je)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=se(this,Ur).defaultQueryOptions(t),n=se(this,Ur).getQueryCache().build(se(this,Ur),s);return n.fetch().then(()=>this.createResult(n,s))}fetch(t){return ze(this,ht,Xc).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),se(this,Or)))}createResult(t,s){var S;const n=se(this,Je),a=this.options,i=se(this,Or),l=se(this,nl),o=se(this,Mo),d=t!==n?t.state:se(this,du),{state:u}=t;let h={...u},f=!1,m;if(s._optimisticResults){const E=this.hasListeners(),A=!E&&iN(t,s),C=E&&lN(t,n,s,a);(A||C)&&(h={...h,...IS(u.data,t.options)}),s._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:x,errorUpdatedAt:p,status:j}=h;m=h.data;let v=!1;if(s.placeholderData!==void 0&&m===void 0&&j==="pending"){let E;i!=null&&i.isPlaceholderData&&s.placeholderData===(o==null?void 0:o.placeholderData)?(E=i.data,v=!0):E=typeof s.placeholderData=="function"?s.placeholderData((S=se(this,Lo))==null?void 0:S.state.data,se(this,Lo)):s.placeholderData,E!==void 0&&(j="success",m=V0(i==null?void 0:i.data,E,s),f=!0)}if(s.select&&m!==void 0&&!v)if(i&&m===(l==null?void 0:l.data)&&s.select===se(this,uu))m=se(this,Do);else try{Se(this,uu,s.select),m=s.select(m),m=V0(i==null?void 0:i.data,m,s),Se(this,Do,m),Se(this,Va,null)}catch(E){Se(this,Va,E)}se(this,Va)&&(x=se(this,Va),m=se(this,Do),p=Date.now(),j="error");const g=h.fetchStatus==="fetching",y=j==="pending",b=j==="error",N=y&&g,k=m!==void 0,_={status:j,fetchStatus:h.fetchStatus,isPending:y,isSuccess:j==="success",isError:b,isInitialLoading:N,isLoading:N,data:m,dataUpdatedAt:h.dataUpdatedAt,error:x,errorUpdatedAt:p,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:g,isRefetching:g&&!y,isLoadingError:b&&!k,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:b&&k,isStale:xb(t,s),refetch:this.refetch,promise:se(this,Gn),isEnabled:Ss(s.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const E=D=>{_.status==="error"?D.reject(_.error):_.data!==void 0&&D.resolve(_.data)},A=()=>{const D=Se(this,Gn,_.promise=H0());E(D)},C=se(this,Gn);switch(C.status){case"pending":t.queryHash===n.queryHash&&E(C);break;case"fulfilled":(_.status==="error"||_.data!==C.value)&&A();break;case"rejected":(_.status!=="error"||_.error!==C.reason)&&A();break}}return _}updateResult(){const t=se(this,Or),s=this.createResult(se(this,Je),this.options);if(Se(this,nl,se(this,Je).state),Se(this,Mo,this.options),se(this,nl).data!==void 0&&Se(this,Lo,se(this,Je)),Af(s,t))return;Se(this,Or,s);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!se(this,Fo).size)return!0;const l=new Set(i??se(this,Fo));return this.options.throwOnError&&l.add("error"),Object.keys(se(this,Or)).some(o=>{const c=o;return se(this,Or)[c]!==t[c]&&l.has(c)})};ze(this,ht,BS).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ze(this,ht,Q0).call(this)}},Ur=new WeakMap,Je=new WeakMap,du=new WeakMap,Or=new WeakMap,nl=new WeakMap,Mo=new WeakMap,Gn=new WeakMap,Va=new WeakMap,uu=new WeakMap,Do=new WeakMap,Lo=new WeakMap,al=new WeakMap,il=new WeakMap,Ha=new WeakMap,Fo=new WeakMap,ht=new WeakSet,Xc=function(t){ze(this,ht,J0).call(this);let s=se(this,Je).fetch(this.options,t);return t!=null&&t.throwOnError||(s=s.catch(Mr)),s},Y0=function(){ze(this,ht,X0).call(this);const t=pi(this.options.staleTime,se(this,Je));if(Nl||se(this,Or).isStale||!U0(t))return;const n=OS(se(this,Or).dataUpdatedAt,t)+1;Se(this,al,Wi.setTimeout(()=>{se(this,Or).isStale||this.updateResult()},n))},G0=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(se(this,Je)):this.options.refetchInterval)??!1},K0=function(t){ze(this,ht,Z0).call(this),Se(this,Ha,t),!(Nl||Ss(this.options.enabled,se(this,Je))===!1||!U0(se(this,Ha))||se(this,Ha)===0)&&Se(this,il,Wi.setInterval(()=>{(this.options.refetchIntervalInBackground||pb.isFocused())&&ze(this,ht,Xc).call(this)},se(this,Ha)))},Q0=function(){ze(this,ht,Y0).call(this),ze(this,ht,K0).call(this,ze(this,ht,G0).call(this))},X0=function(){se(this,al)&&(Wi.clearTimeout(se(this,al)),Se(this,al,void 0))},Z0=function(){se(this,il)&&(Wi.clearInterval(se(this,il)),Se(this,il,void 0))},J0=function(){const t=se(this,Ur).getQueryCache().build(se(this,Ur),this.options);if(t===se(this,Je))return;const s=se(this,Je);Se(this,Je,t),Se(this,du,t.state),this.hasListeners()&&(s==null||s.removeObserver(this),t.addObserver(this))},BS=function(t){ir.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(se(this,Or))}),se(this,Ur).getQueryCache().notify({query:se(this,Je),type:"observerResultsUpdated"})})},t_);function wT(e,t){return Ss(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function iN(e,t){return wT(e,t)||e.state.data!==void 0&&eg(e,t,t.refetchOnMount)}function eg(e,t,s){if(Ss(t.enabled,e)!==!1&&pi(t.staleTime,e)!=="static"){const n=typeof s=="function"?s(e):s;return n==="always"||n!==!1&&xb(e,t)}return!1}function lN(e,t,s,n){return(e!==t||Ss(n.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&xb(e,s)}function xb(e,t){return Ss(t.enabled,e)!==!1&&e.isStaleByTime(pi(t.staleTime,e))}function _T(e,t){return!Af(e.getCurrentResult(),t)}function oN(e){return{onFetch:(t,s)=>{var u,h,f,m,x;const n=t.options,a=(f=(h=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((m=t.state.data)==null?void 0:m.pages)||[],l=((x=t.state.data)==null?void 0:x.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const d=async()=>{let p=!1;const j=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(t.signal.aborted?p=!0:t.signal.addEventListener("abort",()=>{p=!0}),t.signal)})},v=PS(t.options,t.fetchOptions),g=async(y,b,N)=>{if(p)return Promise.reject();if(b==null&&y.pages.length)return Promise.resolve(y);const w=(()=>{const A={client:t.client,queryKey:t.queryKey,pageParam:b,direction:N?"backward":"forward",meta:t.options.meta};return j(A),A})(),_=await v(w),{maxPages:S}=t.options,E=N?pT:mT;return{pages:E(y.pages,_,S),pageParams:E(y.pageParams,b,S)}};if(a&&i.length){const y=a==="backward",b=y?ST:cN,N={pages:i,pageParams:l},k=b(n,N);o=await g(N,k,y)}else{const y=e??i.length;do{const b=c===0?l[0]??n.initialPageParam:cN(n,o);if(c>0&&b==null)break;o=await g(o,b),c++}while(c<y)}return o};t.options.persister?t.fetchFn=()=>{var p,j;return(j=(p=t.options).persister)==null?void 0:j.call(p,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s)}:t.fetchFn=d}}}function cN(e,{pages:t,pageParams:s}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,s[n],s):void 0}function ST(e,{pages:t,pageParams:s}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,s[0],s):void 0}var hu,vn,Rr,ll,jn,Da,r_,kT=(r_=class extends FS{constructor(t){super();Oe(this,jn);Oe(this,hu);Oe(this,vn);Oe(this,Rr);Oe(this,ll);Se(this,hu,t.client),this.mutationId=t.mutationId,Se(this,Rr,t.mutationCache),Se(this,vn,[]),this.state=t.state||qS(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){se(this,vn).includes(t)||(se(this,vn).push(t),this.clearGcTimeout(),se(this,Rr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Se(this,vn,se(this,vn).filter(s=>s!==t)),this.scheduleGc(),se(this,Rr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){se(this,vn).length||(this.state.status==="pending"?this.scheduleGc():se(this,Rr).remove(this))}continue(){var t;return((t=se(this,ll))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var l,o,c,d,u,h,f,m,x,p,j,v,g,y,b,N,k,w,_,S;const s=()=>{ze(this,jn,Da).call(this,{type:"continue"})},n={client:se(this,hu),meta:this.options.meta,mutationKey:this.options.mutationKey};Se(this,ll,LS({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(E,A)=>{ze(this,jn,Da).call(this,{type:"failed",failureCount:E,error:A})},onPause:()=>{ze(this,jn,Da).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>se(this,Rr).canRun(this)}));const a=this.state.status==="pending",i=!se(this,ll).canStart();try{if(a)s();else{ze(this,jn,Da).call(this,{type:"pending",variables:t,isPaused:i}),await((o=(l=se(this,Rr).config).onMutate)==null?void 0:o.call(l,t,this,n));const A=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,t,n));A!==this.state.context&&ze(this,jn,Da).call(this,{type:"pending",context:A,variables:t,isPaused:i})}const E=await se(this,ll).start();return await((h=(u=se(this,Rr).config).onSuccess)==null?void 0:h.call(u,E,t,this.state.context,this,n)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,E,t,this.state.context,n)),await((p=(x=se(this,Rr).config).onSettled)==null?void 0:p.call(x,E,null,this.state.variables,this.state.context,this,n)),await((v=(j=this.options).onSettled)==null?void 0:v.call(j,E,null,t,this.state.context,n)),ze(this,jn,Da).call(this,{type:"success",data:E}),E}catch(E){try{throw await((y=(g=se(this,Rr).config).onError)==null?void 0:y.call(g,E,t,this.state.context,this,n)),await((N=(b=this.options).onError)==null?void 0:N.call(b,E,t,this.state.context,n)),await((w=(k=se(this,Rr).config).onSettled)==null?void 0:w.call(k,void 0,E,this.state.variables,this.state.context,this,n)),await((S=(_=this.options).onSettled)==null?void 0:S.call(_,void 0,E,t,this.state.context,n)),E}finally{ze(this,jn,Da).call(this,{type:"error",error:E})}}finally{se(this,Rr).runNext(this)}}},hu=new WeakMap,vn=new WeakMap,Rr=new WeakMap,ll=new WeakMap,jn=new WeakSet,Da=function(t){const s=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),ir.batch(()=>{se(this,vn).forEach(n=>{n.onMutationUpdate(t)}),se(this,Rr).notify({mutation:this,type:"updated",action:t})})},r_);function qS(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Kn,Gs,fu,s_,ET=(s_=class extends fc{constructor(t={}){super();Oe(this,Kn);Oe(this,Gs);Oe(this,fu);this.config=t,Se(this,Kn,new Set),Se(this,Gs,new Map),Se(this,fu,0)}build(t,s,n){const a=new kT({client:t,mutationCache:this,mutationId:++Iu(this,fu)._,options:t.defaultMutationOptions(s),state:n});return this.add(a),a}add(t){se(this,Kn).add(t);const s=rh(t);if(typeof s=="string"){const n=se(this,Gs).get(s);n?n.push(t):se(this,Gs).set(s,[t])}this.notify({type:"added",mutation:t})}remove(t){if(se(this,Kn).delete(t)){const s=rh(t);if(typeof s=="string"){const n=se(this,Gs).get(s);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&se(this,Gs).delete(s)}}this.notify({type:"removed",mutation:t})}canRun(t){const s=rh(t);if(typeof s=="string"){const n=se(this,Gs).get(s),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const s=rh(t);if(typeof s=="string"){const a=(n=se(this,Gs).get(s))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ir.batch(()=>{se(this,Kn).forEach(t=>{this.notify({type:"removed",mutation:t})}),se(this,Kn).clear(),se(this,Gs).clear()})}getAll(){return Array.from(se(this,Kn))}find(t){const s={exact:!0,...t};return this.getAll().find(n=>rN(s,n))}findAll(t={}){return this.getAll().filter(s=>rN(t,s))}notify(t){ir.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return ir.batch(()=>Promise.all(t.map(s=>s.continue().catch(Mr))))}},Kn=new WeakMap,Gs=new WeakMap,fu=new WeakMap,s_);function rh(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Qn,Wa,zr,Xn,ua,Oh,tg,n_,CT=(n_=class extends fc{constructor(s,n){super();Oe(this,ua);Oe(this,Qn);Oe(this,Wa);Oe(this,zr);Oe(this,Xn);Se(this,Qn,s),this.setOptions(n),this.bindMethods(),ze(this,ua,Oh).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){var a;const n=this.options;this.options=se(this,Qn).defaultMutationOptions(s),Af(this.options,n)||se(this,Qn).getMutationCache().notify({type:"observerOptionsUpdated",mutation:se(this,zr),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&wl(n.mutationKey)!==wl(this.options.mutationKey)?this.reset():((a=se(this,zr))==null?void 0:a.state.status)==="pending"&&se(this,zr).setOptions(this.options)}onUnsubscribe(){var s;this.hasListeners()||(s=se(this,zr))==null||s.removeObserver(this)}onMutationUpdate(s){ze(this,ua,Oh).call(this),ze(this,ua,tg).call(this,s)}getCurrentResult(){return se(this,Wa)}reset(){var s;(s=se(this,zr))==null||s.removeObserver(this),Se(this,zr,void 0),ze(this,ua,Oh).call(this),ze(this,ua,tg).call(this)}mutate(s,n){var a;return Se(this,Xn,n),(a=se(this,zr))==null||a.removeObserver(this),Se(this,zr,se(this,Qn).getMutationCache().build(se(this,Qn),this.options)),se(this,zr).addObserver(this),se(this,zr).execute(s)}},Qn=new WeakMap,Wa=new WeakMap,zr=new WeakMap,Xn=new WeakMap,ua=new WeakSet,Oh=function(){var n;const s=((n=se(this,zr))==null?void 0:n.state)??qS();Se(this,Wa,{...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset})},tg=function(s){ir.batch(()=>{var n,a,i,l,o,c,d,u;if(se(this,Xn)&&this.hasListeners()){const h=se(this,Wa).variables,f=se(this,Wa).context,m={client:se(this,Qn),meta:this.options.meta,mutationKey:this.options.mutationKey};(s==null?void 0:s.type)==="success"?((a=(n=se(this,Xn)).onSuccess)==null||a.call(n,s.data,h,f,m),(l=(i=se(this,Xn)).onSettled)==null||l.call(i,s.data,null,h,f,m)):(s==null?void 0:s.type)==="error"&&((c=(o=se(this,Xn)).onError)==null||c.call(o,s.error,h,f,m),(u=(d=se(this,Xn)).onSettled)==null||u.call(d,void 0,s.error,h,f,m))}this.listeners.forEach(h=>{h(se(this,Wa))})})},n_),Nn,a_,AT=(a_=class extends fc{constructor(t={}){super();Oe(this,Nn);this.config=t,Se(this,Nn,new Map)}build(t,s,n){const a=s.queryKey,i=s.queryHash??fb(a,s);let l=this.get(i);return l||(l=new jT({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(s),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(l)),l}add(t){se(this,Nn).has(t.queryHash)||(se(this,Nn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=se(this,Nn).get(t.queryHash);s&&(t.destroy(),s===t&&se(this,Nn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){ir.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return se(this,Nn).get(t)}getAll(){return[...se(this,Nn).values()]}find(t){const s={exact:!0,...t};return this.getAll().find(n=>tN(s,n))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(n=>tN(t,n)):s}notify(t){ir.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){ir.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){ir.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Nn=new WeakMap,a_),Ht,Ya,Ga,Io,Bo,Ka,qo,$o,i_,TT=(i_=class{constructor(e={}){Oe(this,Ht);Oe(this,Ya);Oe(this,Ga);Oe(this,Io);Oe(this,Bo);Oe(this,Ka);Oe(this,qo);Oe(this,$o);Se(this,Ht,e.queryCache||new AT),Se(this,Ya,e.mutationCache||new ET),Se(this,Ga,e.defaultOptions||{}),Se(this,Io,new Map),Se(this,Bo,new Map),Se(this,Ka,0)}mount(){Iu(this,Ka)._++,se(this,Ka)===1&&(Se(this,qo,pb.subscribe(async e=>{e&&(await this.resumePausedMutations(),se(this,Ht).onFocus())})),Se(this,$o,Tf.subscribe(async e=>{e&&(await this.resumePausedMutations(),se(this,Ht).onOnline())})))}unmount(){var e,t;Iu(this,Ka)._--,se(this,Ka)===0&&((e=se(this,qo))==null||e.call(this),Se(this,qo,void 0),(t=se(this,$o))==null||t.call(this),Se(this,$o,void 0))}isFetching(e){return se(this,Ht).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return se(this,Ya).findAll({...e,status:"pending"}).length}getQueryData(e){var s;const t=this.defaultQueryOptions({queryKey:e});return(s=se(this,Ht).get(t.queryHash))==null?void 0:s.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),s=se(this,Ht).build(this,t),n=s.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(pi(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return se(this,Ht).findAll(e).map(({queryKey:t,state:s})=>{const n=s.data;return[t,n]})}setQueryData(e,t,s){const n=this.defaultQueryOptions({queryKey:e}),a=se(this,Ht).get(n.queryHash),i=a==null?void 0:a.state.data,l=uT(t,i);if(l!==void 0)return se(this,Ht).build(this,n).setData(l,{...s,manual:!0})}setQueriesData(e,t,s){return ir.batch(()=>se(this,Ht).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,s)]))}getQueryState(e){var s;const t=this.defaultQueryOptions({queryKey:e});return(s=se(this,Ht).get(t.queryHash))==null?void 0:s.state}removeQueries(e){const t=se(this,Ht);ir.batch(()=>{t.findAll(e).forEach(s=>{t.remove(s)})})}resetQueries(e,t){const s=se(this,Ht);return ir.batch(()=>(s.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const s={revert:!0,...t},n=ir.batch(()=>se(this,Ht).findAll(e).map(a=>a.cancel(s)));return Promise.all(n).then(Mr).catch(Mr)}invalidateQueries(e,t={}){return ir.batch(()=>(se(this,Ht).findAll(e).forEach(s=>{s.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const s={...t,cancelRefetch:t.cancelRefetch??!0},n=ir.batch(()=>se(this,Ht).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,s);return s.throwOnError||(i=i.catch(Mr)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Mr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const s=se(this,Ht).build(this,t);return s.isStaleByTime(pi(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Mr).catch(Mr)}fetchInfiniteQuery(e){return e.behavior=oN(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Mr).catch(Mr)}ensureInfiniteQueryData(e){return e.behavior=oN(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Tf.isOnline()?se(this,Ya).resumePausedMutations():Promise.resolve()}getQueryCache(){return se(this,Ht)}getMutationCache(){return se(this,Ya)}getDefaultOptions(){return se(this,Ga)}setDefaultOptions(e){Se(this,Ga,e)}setQueryDefaults(e,t){se(this,Io).set(wl(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...se(this,Io).values()],s={};return t.forEach(n=>{Vd(e,n.queryKey)&&Object.assign(s,n.defaultOptions)}),s}setMutationDefaults(e,t){se(this,Bo).set(wl(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...se(this,Bo).values()],s={};return t.forEach(n=>{Vd(e,n.mutationKey)&&Object.assign(s,n.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const t={...se(this,Ga).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=fb(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===mb&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...se(this,Ga).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){se(this,Ht).clear(),se(this,Ya).clear()}},Ht=new WeakMap,Ya=new WeakMap,Ga=new WeakMap,Io=new WeakMap,Bo=new WeakMap,Ka=new WeakMap,qo=new WeakMap,$o=new WeakMap,i_),$S=O.createContext(void 0),Me=e=>{const t=O.useContext($S);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},OT=({client:e,children:t})=>(O.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx($S.Provider,{value:e,children:t})),US=O.createContext(!1),RT=()=>O.useContext(US);US.Provider;function PT(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var MT=O.createContext(PT()),DT=()=>O.useContext(MT),LT=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},FT=e=>{O.useEffect(()=>{e.clearReset()},[e])},IT=({result:e,errorResetBoundary:t,throwOnError:s,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||MS(s,[e.error,n])),BT=e=>{if(e.suspense){const s=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>s(n(...a)):s(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},qT=(e,t)=>e.isLoading&&e.isFetching&&!t,$T=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,dN=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function UT(e,t,s){var h,f,m,x,p;const n=RT(),a=DT(),i=Me(),l=i.defaultQueryOptions(e);(f=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,l),l._optimisticResults=n?"isRestoring":"optimistic",BT(l),LT(l,a),FT(a);const o=!i.getQueryCache().get(l.queryHash),[c]=O.useState(()=>new t(i,l)),d=c.getOptimisticResult(l),u=!n&&e.subscribed!==!1;if(O.useSyncExternalStore(O.useCallback(j=>{const v=u?c.subscribe(ir.batchCalls(j)):Mr;return c.updateResult(),v},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),O.useEffect(()=>{c.setOptions(l)},[l,c]),$T(l,d))throw dN(l,c,a);if(IT({result:d,errorResetBoundary:a,throwOnError:l.throwOnError,query:i.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw d.error;if((x=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||x.call(m,l,d),l.experimental_prefetchInRender&&!Nl&&qT(d,n)){const j=o?dN(l,c,a):(p=i.getQueryCache().get(l.queryHash))==null?void 0:p.promise;j==null||j.catch(Mr).finally(()=>{c.updateResult()})}return l.notifyOnChangeProps?d:c.trackResult(d)}function me(e,t){return UT(e,NT)}function _e(e,t){const s=Me(),[n]=O.useState(()=>new CT(s,e));O.useEffect(()=>{n.setOptions(e)},[n,e]);const a=O.useSyncExternalStore(O.useCallback(l=>n.subscribe(ir.batchCalls(l)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=O.useCallback((l,o)=>{n.mutate(l,o).catch(Mr)},[n]);if(a.error&&MS(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}var zS={exports:{}},VS={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bu=O;function zT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var VT=typeof Object.is=="function"?Object.is:zT,HT=bu.useSyncExternalStore,WT=bu.useRef,YT=bu.useEffect,GT=bu.useMemo,KT=bu.useDebugValue;VS.useSyncExternalStoreWithSelector=function(e,t,s,n,a){var i=WT(null);if(i.current===null){var l={hasValue:!1,value:null};i.current=l}else l=i.current;i=GT(function(){function c(m){if(!d){if(d=!0,u=m,m=n(m),a!==void 0&&l.hasValue){var x=l.value;if(a(x,m))return h=x}return h=m}if(x=h,VT(u,m))return x;var p=n(m);return a!==void 0&&a(x,p)?(u=m,x):(u=m,h=p)}var d=!1,u,h,f=s===void 0?null:s;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,s,n,a]);var o=HT(e,i[0],i[1]);return YT(function(){l.hasValue=!0,l.value=o},[o]),KT(o),o};zS.exports=VS;var QT=zS.exports;function XT(e){e()}function ZT(){let e=null,t=null;return{clear(){e=null,t=null},notify(){XT(()=>{let s=e;for(;s;)s.callback(),s=s.next})},get(){const s=[];let n=e;for(;n;)s.push(n),n=n.next;return s},subscribe(s){let n=!0;const a=t={callback:s,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var uN={notify(){},get:()=>[]};function JT(e,t){let s,n=uN,a=0,i=!1;function l(p){u();const j=n.subscribe(p);let v=!1;return()=>{v||(v=!0,j(),h())}}function o(){n.notify()}function c(){x.onStateChange&&x.onStateChange()}function d(){return i}function u(){a++,s||(s=e.subscribe(c),n=ZT())}function h(){a--,s&&a===0&&(s(),s=void 0,n.clear(),n=uN)}function f(){i||(i=!0,u())}function m(){i&&(i=!1,h())}const x={addNestedSub:l,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:d,trySubscribe:f,tryUnsubscribe:m,getListeners:()=>n};return x}var eO=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tO=eO(),rO=()=>typeof navigator<"u"&&navigator.product==="ReactNative",sO=rO(),nO=()=>tO||sO?O.useLayoutEffect:O.useEffect,aO=nO(),Hp=Symbol.for("react-redux-context"),Wp=typeof globalThis<"u"?globalThis:{};function iO(){if(!O.createContext)return{};const e=Wp[Hp]??(Wp[Hp]=new Map);let t=e.get(O.createContext);return t||(t=O.createContext(null),e.set(O.createContext,t)),t}var _i=iO();function lO(e){const{children:t,context:s,serverState:n,store:a}=e,i=O.useMemo(()=>{const c=JT(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),l=O.useMemo(()=>a.getState(),[a]);aO(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),l!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,l]);const o=s||_i;return O.createElement(o.Provider,{value:i},t)}var oO=lO;function gb(e=_i){return function(){return O.useContext(e)}}var HS=gb();function WS(e=_i){const t=e===_i?HS:gb(e),s=()=>{const{store:n}=t();return n};return Object.assign(s,{withTypes:()=>s}),s}var cO=WS();function dO(e=_i){const t=e===_i?cO:WS(e),s=()=>t().dispatch;return Object.assign(s,{withTypes:()=>s}),s}var YS=dO(),uO=(e,t)=>e===t;function hO(e=_i){const t=e===_i?HS:gb(e),s=(n,a={})=>{const{equalityFn:i=uO}=typeof a=="function"?{equalityFn:a}:a,l=t(),{store:o,subscription:c,getServerState:d}=l;O.useRef(!0);const u=O.useCallback({[n.name](f){return n(f)}}[n.name],[n]),h=QT.useSyncExternalStoreWithSelector(c.addNestedSub,o.getState,d||o.getState,u,i);return O.useDebugValue(h),h};return Object.assign(s,{withTypes:()=>s}),s}var Ie=hO();let fO={data:""},mO=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||fO},pO=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,xO=/\/\*[^]*?\*\/|  +/g,hN=/\n+/g,qa=(e,t)=>{let s="",n="",a="";for(let i in e){let l=e[i];i[0]=="@"?i[1]=="i"?s=i+" "+l+";":n+=i[1]=="f"?qa(l,i):i+"{"+qa(l,i[1]=="k"?"":t)+"}":typeof l=="object"?n+=qa(l,t?t.replace(/([^,])+/g,o=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,o):o?o+" "+c:c)):i):l!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=qa.p?qa.p(i,l):i+":"+l+";")}return s+(t&&a?t+"{"+a+"}":a)+n},Bn={},GS=e=>{if(typeof e=="object"){let t="";for(let s in e)t+=s+GS(e[s]);return t}return e},gO=(e,t,s,n,a)=>{let i=GS(e),l=Bn[i]||(Bn[i]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(i));if(!Bn[l]){let c=i!==e?e:(d=>{let u,h,f=[{}];for(;u=pO.exec(d.replace(xO,""));)u[4]?f.shift():u[3]?(h=u[3].replace(hN," ").trim(),f.unshift(f[0][h]=f[0][h]||{})):f[0][u[1]]=u[2].replace(hN," ").trim();return f[0]})(e);Bn[l]=qa(a?{["@keyframes "+l]:c}:c,s?"":"."+l)}let o=s&&Bn.g?Bn.g:null;return s&&(Bn.g=Bn[l]),((c,d,u,h)=>{h?d.data=d.data.replace(h,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(Bn[l],t,n,o),l},yO=(e,t,s)=>e.reduce((n,a,i)=>{let l=t[i];if(l&&l.call){let o=l(s),c=o&&o.props&&o.props.className||/^go/.test(o)&&o;l=c?"."+c:o&&typeof o=="object"?o.props?"":qa(o,""):o===!1?"":o}return n+a+(l??"")},"");function Cm(e){let t=this||{},s=e.call?e(t.p):e;return gO(s.unshift?s.raw?yO(s,[].slice.call(arguments,1),t.p):s.reduce((n,a)=>Object.assign(n,a&&a.call?a(t.p):a),{}):s,mO(t.target),t.g,t.o,t.k)}let KS,rg,sg;Cm.bind({g:1});let xa=Cm.bind({k:1});function bO(e,t,s,n){qa.p=t,KS=e,rg=s,sg=n}function Ri(e,t){let s=this||{};return function(){let n=arguments;function a(i,l){let o=Object.assign({},i),c=o.className||a.className;s.p=Object.assign({theme:rg&&rg()},o),s.o=/ *go\d+/.test(c),o.className=Cm.apply(s,n)+(c?" "+c:"");let d=e;return e[0]&&(d=o.as||e,delete o.as),sg&&d[0]&&sg(o),KS(d,o)}return a}}var vO=e=>typeof e=="function",Of=(e,t)=>vO(e)?e(t):e,jO=(()=>{let e=0;return()=>(++e).toString()})(),QS=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),NO=20,yb="default",XS=(e,t)=>{let{toastLimit:s}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,s)};case 1:return{...e,toasts:e.toasts.map(l=>l.id===t.toast.id?{...l,...t.toast}:l)};case 2:let{toast:n}=t;return XS(e,{type:e.toasts.find(l=>l.id===n.id)?1:0,toast:n});case 3:let{toastId:a}=t;return{...e,toasts:e.toasts.map(l=>l.id===a||a===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(l=>l.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+i}))}}},Rh=[],ZS={toasts:[],pausedAt:void 0,settings:{toastLimit:NO}},kn={},JS=(e,t=yb)=>{kn[t]=XS(kn[t]||ZS,e),Rh.forEach(([s,n])=>{s===t&&n(kn[t])})},ek=e=>Object.keys(kn).forEach(t=>JS(e,t)),wO=e=>Object.keys(kn).find(t=>kn[t].toasts.some(s=>s.id===e)),Am=(e=yb)=>t=>{JS(t,e)},_O={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},SO=(e={},t=yb)=>{let[s,n]=O.useState(kn[t]||ZS),a=O.useRef(kn[t]);O.useEffect(()=>(a.current!==kn[t]&&n(kn[t]),Rh.push([t,n]),()=>{let l=Rh.findIndex(([o])=>o===t);l>-1&&Rh.splice(l,1)}),[t]);let i=s.toasts.map(l=>{var o,c,d;return{...e,...e[l.type],...l,removeDelay:l.removeDelay||((o=e[l.type])==null?void 0:o.removeDelay)||(e==null?void 0:e.removeDelay),duration:l.duration||((c=e[l.type])==null?void 0:c.duration)||(e==null?void 0:e.duration)||_O[l.type],style:{...e.style,...(d=e[l.type])==null?void 0:d.style,...l.style}}});return{...s,toasts:i}},kO=(e,t="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...s,id:(s==null?void 0:s.id)||jO()}),vu=e=>(t,s)=>{let n=kO(t,e,s);return Am(n.toasterId||wO(n.id))({type:2,toast:n}),n.id},vt=(e,t)=>vu("blank")(e,t);vt.error=vu("error");vt.success=vu("success");vt.loading=vu("loading");vt.custom=vu("custom");vt.dismiss=(e,t)=>{let s={type:3,toastId:e};t?Am(t)(s):ek(s)};vt.dismissAll=e=>vt.dismiss(void 0,e);vt.remove=(e,t)=>{let s={type:4,toastId:e};t?Am(t)(s):ek(s)};vt.removeAll=e=>vt.remove(void 0,e);vt.promise=(e,t,s)=>{let n=vt.loading(t.loading,{...s,...s==null?void 0:s.loading});return typeof e=="function"&&(e=e()),e.then(a=>{let i=t.success?Of(t.success,a):void 0;return i?vt.success(i,{id:n,...s,...s==null?void 0:s.success}):vt.dismiss(n),a}).catch(a=>{let i=t.error?Of(t.error,a):void 0;i?vt.error(i,{id:n,...s,...s==null?void 0:s.error}):vt.dismiss(n)}),e};var EO=1e3,CO=(e,t="default")=>{let{toasts:s,pausedAt:n}=SO(e,t),a=O.useRef(new Map).current,i=O.useCallback((h,f=EO)=>{if(a.has(h))return;let m=setTimeout(()=>{a.delete(h),l({type:4,toastId:h})},f);a.set(h,m)},[]);O.useEffect(()=>{if(n)return;let h=Date.now(),f=s.map(m=>{if(m.duration===1/0)return;let x=(m.duration||0)+m.pauseDuration-(h-m.createdAt);if(x<0){m.visible&&vt.dismiss(m.id);return}return setTimeout(()=>vt.dismiss(m.id,t),x)});return()=>{f.forEach(m=>m&&clearTimeout(m))}},[s,n,t]);let l=O.useCallback(Am(t),[t]),o=O.useCallback(()=>{l({type:5,time:Date.now()})},[l]),c=O.useCallback((h,f)=>{l({type:1,toast:{id:h,height:f}})},[l]),d=O.useCallback(()=>{n&&l({type:6,time:Date.now()})},[n,l]),u=O.useCallback((h,f)=>{let{reverseOrder:m=!1,gutter:x=8,defaultPosition:p}=f||{},j=s.filter(y=>(y.position||p)===(h.position||p)&&y.height),v=j.findIndex(y=>y.id===h.id),g=j.filter((y,b)=>b<v&&y.visible).length;return j.filter(y=>y.visible).slice(...m?[g+1]:[0,g]).reduce((y,b)=>y+(b.height||0)+x,0)},[s]);return O.useEffect(()=>{s.forEach(h=>{if(h.dismissed)i(h.id,h.removeDelay);else{let f=a.get(h.id);f&&(clearTimeout(f),a.delete(h.id))}})},[s,i]),{toasts:s,handlers:{updateHeight:c,startPause:o,endPause:d,calculateOffset:u}}},AO=xa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,TO=xa`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,OO=xa`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,RO=Ri("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${AO} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${TO} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${OO} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,PO=xa`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,MO=Ri("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${PO} 1s linear infinite;
`,DO=xa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,LO=xa`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,FO=Ri("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${DO} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${LO} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,IO=Ri("div")`
  position: absolute;
`,BO=Ri("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,qO=xa`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,$O=Ri("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${qO} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,UO=({toast:e})=>{let{icon:t,type:s,iconTheme:n}=e;return t!==void 0?typeof t=="string"?O.createElement($O,null,t):t:s==="blank"?null:O.createElement(BO,null,O.createElement(MO,{...n}),s!=="loading"&&O.createElement(IO,null,s==="error"?O.createElement(RO,{...n}):O.createElement(FO,{...n})))},zO=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,VO=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,HO="0%{opacity:0;} 100%{opacity:1;}",WO="0%{opacity:1;} 100%{opacity:0;}",YO=Ri("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,GO=Ri("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,KO=(e,t)=>{let s=e.includes("top")?1:-1,[n,a]=QS()?[HO,WO]:[zO(s),VO(s)];return{animation:t?`${xa(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${xa(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},QO=O.memo(({toast:e,position:t,style:s,children:n})=>{let a=e.height?KO(e.position||t||"top-center",e.visible):{opacity:0},i=O.createElement(UO,{toast:e}),l=O.createElement(GO,{...e.ariaProps},Of(e.message,e));return O.createElement(YO,{className:e.className,style:{...a,...s,...e.style}},typeof n=="function"?n({icon:i,message:l}):O.createElement(O.Fragment,null,i,l))});bO(O.createElement);var XO=({id:e,className:t,style:s,onHeightUpdate:n,children:a})=>{let i=O.useCallback(l=>{if(l){let o=()=>{let c=l.getBoundingClientRect().height;n(e,c)};o(),new MutationObserver(o).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return O.createElement("div",{ref:i,className:t,style:s},a)},ZO=(e,t)=>{let s=e.includes("top"),n=s?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:QS()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(s?1:-1)}px)`,...n,...a}},JO=Cm`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,sh=16,eR=({reverseOrder:e,position:t="top-center",toastOptions:s,gutter:n,children:a,toasterId:i,containerStyle:l,containerClassName:o})=>{let{toasts:c,handlers:d}=CO(s,i);return O.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:sh,left:sh,right:sh,bottom:sh,pointerEvents:"none",...l},className:o,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(u=>{let h=u.position||t,f=d.calculateOffset(u,{reverseOrder:e,gutter:n,defaultPosition:t}),m=ZO(h,f);return O.createElement(XO,{id:u.id,key:u.id,onHeightUpdate:d.updateHeight,className:u.visible?JO:"",style:m},u.type==="custom"?Of(u.message,u):a?a(u):O.createElement(QO,{toast:u,position:h}))}))},K=vt;function tR(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var tk={exports:{}},Jt=tk.exports={},gn,yn;function ng(){throw new Error("setTimeout has not been defined")}function ag(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?gn=setTimeout:gn=ng}catch{gn=ng}try{typeof clearTimeout=="function"?yn=clearTimeout:yn=ag}catch{yn=ag}})();function rk(e){if(gn===setTimeout)return setTimeout(e,0);if((gn===ng||!gn)&&setTimeout)return gn=setTimeout,setTimeout(e,0);try{return gn(e,0)}catch{try{return gn.call(null,e,0)}catch{return gn.call(this,e,0)}}}function rR(e){if(yn===clearTimeout)return clearTimeout(e);if((yn===ag||!yn)&&clearTimeout)return yn=clearTimeout,clearTimeout(e);try{return yn(e)}catch{try{return yn.call(null,e)}catch{return yn.call(this,e)}}}var ta=[],vo=!1,Yi,Ph=-1;function sR(){!vo||!Yi||(vo=!1,Yi.length?ta=Yi.concat(ta):Ph=-1,ta.length&&sk())}function sk(){if(!vo){var e=rk(sR);vo=!0;for(var t=ta.length;t;){for(Yi=ta,ta=[];++Ph<t;)Yi&&Yi[Ph].run();Ph=-1,t=ta.length}Yi=null,vo=!1,rR(e)}}Jt.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];ta.push(new nk(e,t)),ta.length===1&&!vo&&rk(sk)};function nk(e,t){this.fun=e,this.array=t}nk.prototype.run=function(){this.fun.apply(null,this.array)};Jt.title="browser";Jt.browser=!0;Jt.env={};Jt.argv=[];Jt.version="";Jt.versions={};function Ea(){}Jt.on=Ea;Jt.addListener=Ea;Jt.once=Ea;Jt.off=Ea;Jt.removeListener=Ea;Jt.removeAllListeners=Ea;Jt.emit=Ea;Jt.prependListener=Ea;Jt.prependOnceListener=Ea;Jt.listeners=function(e){return[]};Jt.binding=function(e){throw new Error("process.binding is not supported")};Jt.cwd=function(){return"/"};Jt.chdir=function(e){throw new Error("process.chdir is not supported")};Jt.umask=function(){return 0};var nR=tk.exports;const Ve=tR(nR);function pr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var aR=typeof Symbol=="function"&&Symbol.observable||"@@observable",fN=aR,Yp=()=>Math.random().toString(36).substring(7).split("").join("."),iR={INIT:`@@redux/INIT${Yp()}`,REPLACE:`@@redux/REPLACE${Yp()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Yp()}`},Rf=iR;function bb(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function ak(e,t,s){if(typeof e!="function")throw new Error(pr(2));if(typeof t=="function"&&typeof s=="function"||typeof s=="function"&&typeof arguments[3]=="function")throw new Error(pr(0));if(typeof t=="function"&&typeof s>"u"&&(s=t,t=void 0),typeof s<"u"){if(typeof s!="function")throw new Error(pr(1));return s(ak)(e,t)}let n=e,a=t,i=new Map,l=i,o=0,c=!1;function d(){l===i&&(l=new Map,i.forEach((j,v)=>{l.set(v,j)}))}function u(){if(c)throw new Error(pr(3));return a}function h(j){if(typeof j!="function")throw new Error(pr(4));if(c)throw new Error(pr(5));let v=!0;d();const g=o++;return l.set(g,j),function(){if(v){if(c)throw new Error(pr(6));v=!1,d(),l.delete(g),i=null}}}function f(j){if(!bb(j))throw new Error(pr(7));if(typeof j.type>"u")throw new Error(pr(8));if(typeof j.type!="string")throw new Error(pr(17));if(c)throw new Error(pr(9));try{c=!0,a=n(a,j)}finally{c=!1}return(i=l).forEach(g=>{g()}),j}function m(j){if(typeof j!="function")throw new Error(pr(10));n=j,f({type:Rf.REPLACE})}function x(){const j=h;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(pr(11));function g(){const b=v;b.next&&b.next(u())}return g(),{unsubscribe:j(g)}},[fN](){return this}}}return f({type:Rf.INIT}),{dispatch:f,subscribe:h,getState:u,replaceReducer:m,[fN]:x}}function lR(e){Object.keys(e).forEach(t=>{const s=e[t];if(typeof s(void 0,{type:Rf.INIT})>"u")throw new Error(pr(12));if(typeof s(void 0,{type:Rf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(pr(13))})}function oR(e){const t=Object.keys(e),s={};for(let i=0;i<t.length;i++){const l=t[i];typeof e[l]=="function"&&(s[l]=e[l])}const n=Object.keys(s);let a;try{lR(s)}catch(i){a=i}return function(l={},o){if(a)throw a;let c=!1;const d={};for(let u=0;u<n.length;u++){const h=n[u],f=s[h],m=l[h],x=f(m,o);if(typeof x>"u")throw o&&o.type,new Error(pr(14));d[h]=x,c=c||x!==m}return c=c||n.length!==Object.keys(l).length,c?d:l}}function Pf(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,s)=>(...n)=>t(s(...n)))}function cR(...e){return t=>(s,n)=>{const a=t(s,n);let i=()=>{throw new Error(pr(15))};const l={getState:a.getState,dispatch:(c,...d)=>i(c,...d)},o=e.map(c=>c(l));return i=Pf(...o)(a.dispatch),{...a,dispatch:i}}}function dR(e){return bb(e)&&"type"in e&&typeof e.type=="string"}var ik=Symbol.for("immer-nothing"),mN=Symbol.for("immer-draftable"),ms=Symbol.for("immer-state");function Zs(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Qo=Object.getPrototypeOf;function _l(e){return!!e&&!!e[ms]}function ga(e){var t;return e?lk(e)||Array.isArray(e)||!!e[mN]||!!((t=e.constructor)!=null&&t[mN])||ju(e)||Om(e):!1}var uR=Object.prototype.constructor.toString();function lk(e){if(!e||typeof e!="object")return!1;const t=Qo(e);if(t===null)return!0;const s=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return s===Object?!0:typeof s=="function"&&Function.toString.call(s)===uR}function Mf(e,t){Tm(e)===0?Reflect.ownKeys(e).forEach(s=>{t(s,e[s],e)}):e.forEach((s,n)=>t(n,s,e))}function Tm(e){const t=e[ms];return t?t.type_:Array.isArray(e)?1:ju(e)?2:Om(e)?3:0}function ig(e,t){return Tm(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ok(e,t,s){const n=Tm(e);n===2?e.set(t,s):n===3?e.add(s):e[t]=s}function hR(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function ju(e){return e instanceof Map}function Om(e){return e instanceof Set}function qi(e){return e.copy_||e.base_}function lg(e,t){if(ju(e))return new Map(e);if(Om(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const s=lk(e);if(t===!0||t==="class_only"&&!s){const n=Object.getOwnPropertyDescriptors(e);delete n[ms];let a=Reflect.ownKeys(n);for(let i=0;i<a.length;i++){const l=a[i],o=n[l];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[l]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[l]})}return Object.create(Qo(e),n)}else{const n=Qo(e);if(n!==null&&s)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function vb(e,t=!1){return Rm(e)||_l(e)||!ga(e)||(Tm(e)>1&&Object.defineProperties(e,{set:{value:nh},add:{value:nh},clear:{value:nh},delete:{value:nh}}),Object.freeze(e),t&&Object.values(e).forEach(s=>vb(s,!0))),e}function nh(){Zs(2)}function Rm(e){return Object.isFrozen(e)}var fR={};function Sl(e){const t=fR[e];return t||Zs(0,e),t}var Hd;function ck(){return Hd}function mR(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function pN(e,t){t&&(Sl("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function og(e){cg(e),e.drafts_.forEach(pR),e.drafts_=null}function cg(e){e===Hd&&(Hd=e.parent_)}function xN(e){return Hd=mR(Hd,e)}function pR(e){const t=e[ms];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function gN(e,t){t.unfinalizedDrafts_=t.drafts_.length;const s=t.drafts_[0];return e!==void 0&&e!==s?(s[ms].modified_&&(og(t),Zs(4)),ga(e)&&(e=Df(t,e),t.parent_||Lf(t,e)),t.patches_&&Sl("Patches").generateReplacementPatches_(s[ms].base_,e,t.patches_,t.inversePatches_)):e=Df(t,s,[]),og(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==ik?e:void 0}function Df(e,t,s){if(Rm(t))return t;const n=t[ms];if(!n)return Mf(t,(a,i)=>yN(e,n,t,a,i,s)),t;if(n.scope_!==e)return t;if(!n.modified_)return Lf(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let i=a,l=!1;n.type_===3&&(i=new Set(a),a.clear(),l=!0),Mf(i,(o,c)=>yN(e,n,a,o,c,s,l)),Lf(e,a,!1),s&&e.patches_&&Sl("Patches").generatePatches_(n,s,e.patches_,e.inversePatches_)}return n.copy_}function yN(e,t,s,n,a,i,l){if(_l(a)){const o=i&&t&&t.type_!==3&&!ig(t.assigned_,n)?i.concat(n):void 0,c=Df(e,a,o);if(ok(s,n,c),_l(c))e.canAutoFreeze_=!1;else return}else l&&s.add(a);if(ga(a)&&!Rm(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Df(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(ju(s)?s.has(n):Object.prototype.propertyIsEnumerable.call(s,n))&&Lf(e,a)}}function Lf(e,t,s=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&vb(t,s)}function xR(e,t){const s=Array.isArray(e),n={type_:s?1:0,scope_:t?t.scope_:ck(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,i=jb;s&&(a=[n],i=Wd);const{revoke:l,proxy:o}=Proxy.revocable(a,i);return n.draft_=o,n.revoke_=l,o}var jb={get(e,t){if(t===ms)return e;const s=qi(e);if(!ig(s,t))return gR(e,s,t);const n=s[t];return e.finalized_||!ga(n)?n:n===Gp(e.base_,t)?(Kp(e),e.copy_[t]=ug(n,e)):n},has(e,t){return t in qi(e)},ownKeys(e){return Reflect.ownKeys(qi(e))},set(e,t,s){const n=dk(qi(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,s),!0;if(!e.modified_){const a=Gp(qi(e),t),i=a==null?void 0:a[ms];if(i&&i.base_===s)return e.copy_[t]=s,e.assigned_[t]=!1,!0;if(hR(s,a)&&(s!==void 0||ig(e.base_,t)))return!0;Kp(e),dg(e)}return e.copy_[t]===s&&(s!==void 0||t in e.copy_)||Number.isNaN(s)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=s,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Gp(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Kp(e),dg(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const s=qi(e),n=Reflect.getOwnPropertyDescriptor(s,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:s[t]}},defineProperty(){Zs(11)},getPrototypeOf(e){return Qo(e.base_)},setPrototypeOf(){Zs(12)}},Wd={};Mf(jb,(e,t)=>{Wd[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Wd.deleteProperty=function(e,t){return Wd.set.call(this,e,t,void 0)};Wd.set=function(e,t,s){return jb.set.call(this,e[0],t,s,e[0])};function Gp(e,t){const s=e[ms];return(s?qi(s):e)[t]}function gR(e,t,s){var a;const n=dk(t,s);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function dk(e,t){if(!(t in e))return;let s=Qo(e);for(;s;){const n=Object.getOwnPropertyDescriptor(s,t);if(n)return n;s=Qo(s)}}function dg(e){e.modified_||(e.modified_=!0,e.parent_&&dg(e.parent_))}function Kp(e){e.copy_||(e.copy_=lg(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var yR=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,s,n)=>{if(typeof t=="function"&&typeof s!="function"){const i=s;s=t;const l=this;return function(c=i,...d){return l.produce(c,u=>s.call(this,u,...d))}}typeof s!="function"&&Zs(6),n!==void 0&&typeof n!="function"&&Zs(7);let a;if(ga(t)){const i=xN(this),l=ug(t,void 0);let o=!0;try{a=s(l),o=!1}finally{o?og(i):cg(i)}return pN(i,n),gN(a,i)}else if(!t||typeof t!="object"){if(a=s(t),a===void 0&&(a=t),a===ik&&(a=void 0),this.autoFreeze_&&vb(a,!0),n){const i=[],l=[];Sl("Patches").generateReplacementPatches_(t,a,i,l),n(i,l)}return a}else Zs(1,t)},this.produceWithPatches=(t,s)=>{if(typeof t=="function")return(l,...o)=>this.produceWithPatches(l,c=>t(c,...o));let n,a;return[this.produce(t,s,(l,o)=>{n=l,a=o}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ga(e)||Zs(8),_l(e)&&(e=bR(e));const t=xN(this),s=ug(e,void 0);return s[ms].isManual_=!0,cg(t),s}finishDraft(e,t){const s=e&&e[ms];(!s||!s.isManual_)&&Zs(9);const{scope_:n}=s;return pN(n,t),gN(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let s;for(s=t.length-1;s>=0;s--){const a=t[s];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}s>-1&&(t=t.slice(s+1));const n=Sl("Patches").applyPatches_;return _l(e)?n(e,t):this.produce(e,a=>n(a,t))}};function ug(e,t){const s=ju(e)?Sl("MapSet").proxyMap_(e,t):Om(e)?Sl("MapSet").proxySet_(e,t):xR(e,t);return(t?t.scope_:ck()).drafts_.push(s),s}function bR(e){return _l(e)||Zs(10,e),uk(e)}function uk(e){if(!ga(e)||Rm(e))return e;const t=e[ms];let s;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,s=lg(e,t.scope_.immer_.useStrictShallowCopy_)}else s=lg(e,!0);return Mf(s,(n,a)=>{ok(s,n,uk(a))}),t&&(t.finalized_=!1),s}var vR=new yR,hk=vR.produce;function fk(e){return({dispatch:s,getState:n})=>a=>i=>typeof i=="function"?i(s,n,e):a(i)}var jR=fk(),NR=fk,wR=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Pf:Pf.apply(null,arguments)},_R=e=>e&&typeof e.match=="function";function pd(e,t){function s(...n){if(t){let a=t(...n);if(!a)throw new Error(ia(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return s.toString=()=>`${e}`,s.type=e,s.match=n=>dR(n)&&n.type===e,s}var mk=class Zc extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Zc.prototype)}static get[Symbol.species](){return Zc}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Zc(...t[0].concat(this)):new Zc(...t.concat(this))}};function bN(e){return ga(e)?hk(e,()=>{}):e}function ah(e,t,s){return e.has(t)?e.get(t):e.set(t,s(t)).get(t)}function SR(e){return typeof e=="boolean"}var kR=()=>function(t){const{thunk:s=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:i=!0}=t??{};let l=new mk;return s&&(SR(s)?l.push(jR):l.push(NR(s.extraArgument))),l},ER="RTK_autoBatch",vN=e=>t=>{setTimeout(t,e)},CR=(e={type:"raf"})=>t=>(...s)=>{const n=t(...s);let a=!0,i=!1,l=!1;const o=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:vN(10):e.type==="callback"?e.queueNotification:vN(e.timeout),d=()=>{l=!1,i&&(i=!1,o.forEach(u=>u()))};return Object.assign({},n,{subscribe(u){const h=()=>a&&u(),f=n.subscribe(h);return o.add(u),()=>{f(),o.delete(u)}},dispatch(u){var h;try{return a=!((h=u==null?void 0:u.meta)!=null&&h[ER]),i=!a,i&&(l||(l=!0,c(d))),n.dispatch(u)}finally{a=!0}}})},AR=e=>function(s){const{autoBatch:n=!0}=s??{};let a=new mk(e);return n&&a.push(CR(typeof n=="object"?n:void 0)),a};function TR(e){const t=kR(),{reducer:s=void 0,middleware:n,devTools:a=!0,preloadedState:i=void 0,enhancers:l=void 0}=e||{};let o;if(typeof s=="function")o=s;else if(bb(s))o=oR(s);else throw new Error(ia(1));let c;typeof n=="function"?c=n(t):c=t();let d=Pf;a&&(d=wR({trace:!1,...typeof a=="object"&&a}));const u=cR(...c),h=AR(u);let f=typeof l=="function"?l(h):h();const m=d(...f);return ak(o,i,m)}function pk(e){const t={},s=[];let n;const a={addCase(i,l){const o=typeof i=="string"?i:i.type;if(!o)throw new Error(ia(28));if(o in t)throw new Error(ia(29));return t[o]=l,a},addAsyncThunk(i,l){return l.pending&&(t[i.pending.type]=l.pending),l.rejected&&(t[i.rejected.type]=l.rejected),l.fulfilled&&(t[i.fulfilled.type]=l.fulfilled),l.settled&&s.push({matcher:i.settled,reducer:l.settled}),a},addMatcher(i,l){return s.push({matcher:i,reducer:l}),a},addDefaultCase(i){return n=i,a}};return e(a),[t,s,n]}function OR(e){return typeof e=="function"}function RR(e,t){let[s,n,a]=pk(t),i;if(OR(e))i=()=>bN(e());else{const o=bN(e);i=()=>o}function l(o=i(),c){let d=[s[c.type],...n.filter(({matcher:u})=>u(c)).map(({reducer:u})=>u)];return d.filter(u=>!!u).length===0&&(d=[a]),d.reduce((u,h)=>{if(h)if(_l(u)){const m=h(u,c);return m===void 0?u:m}else{if(ga(u))return hk(u,f=>h(f,c));{const f=h(u,c);if(f===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return u},o)}return l.getInitialState=i,l}var PR=(e,t)=>_R(e)?e.match(t):e(t);function MR(...e){return t=>e.some(s=>PR(s,t))}var DR="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",LR=(e=21)=>{let t="",s=e;for(;s--;)t+=DR[Math.random()*64|0];return t},FR=["name","message","stack","code"],Qp=class{constructor(e,t){xp(this,"_type");this.payload=e,this.meta=t}},jN=class{constructor(e,t){xp(this,"_type");this.payload=e,this.meta=t}},IR=e=>{if(typeof e=="object"&&e!==null){const t={};for(const s of FR)typeof e[s]=="string"&&(t[s]=e[s]);return t}return{message:String(e)}},NN="External signal was aborted",Nb=(()=>{function e(t,s,n){const a=pd(t+"/fulfilled",(c,d,u,h)=>({payload:c,meta:{...h||{},arg:u,requestId:d,requestStatus:"fulfilled"}})),i=pd(t+"/pending",(c,d,u)=>({payload:void 0,meta:{...u||{},arg:d,requestId:c,requestStatus:"pending"}})),l=pd(t+"/rejected",(c,d,u,h,f)=>({payload:h,error:(n&&n.serializeError||IR)(c||"Rejected"),meta:{...f||{},arg:u,requestId:d,rejectedWithValue:!!h,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"}}));function o(c,{signal:d}={}){return(u,h,f)=>{const m=n!=null&&n.idGenerator?n.idGenerator(c):LR(),x=new AbortController;let p,j;function v(y){j=y,x.abort()}d&&(d.aborted?v(NN):d.addEventListener("abort",()=>v(NN),{once:!0}));const g=async function(){var N,k;let y;try{let w=(N=n==null?void 0:n.condition)==null?void 0:N.call(n,c,{getState:h,extra:f});if(qR(w)&&(w=await w),w===!1||x.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const _=new Promise((S,E)=>{p=()=>{E({name:"AbortError",message:j||"Aborted"})},x.signal.addEventListener("abort",p)});u(i(m,c,(k=n==null?void 0:n.getPendingMeta)==null?void 0:k.call(n,{requestId:m,arg:c},{getState:h,extra:f}))),y=await Promise.race([_,Promise.resolve(s(c,{dispatch:u,getState:h,extra:f,requestId:m,signal:x.signal,abort:v,rejectWithValue:(S,E)=>new Qp(S,E),fulfillWithValue:(S,E)=>new jN(S,E)})).then(S=>{if(S instanceof Qp)throw S;return S instanceof jN?a(S.payload,m,c,S.meta):a(S,m,c)})])}catch(w){y=w instanceof Qp?l(null,m,c,w.payload,w.meta):l(w,m,c)}finally{p&&x.signal.removeEventListener("abort",p)}return n&&!n.dispatchConditionRejection&&l.match(y)&&y.meta.condition||u(y),y}();return Object.assign(g,{abort:v,requestId:m,arg:c,unwrap(){return g.then(BR)}})}}return Object.assign(o,{pending:i,rejected:l,fulfilled:a,settled:MR(l,a),typePrefix:t})}return e.withTypes=()=>e,e})();function BR(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function qR(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var $R=Symbol.for("rtk-slice-createasyncthunk");function UR(e,t){return`${e}/${t}`}function zR({creators:e}={}){var s;const t=(s=e==null?void 0:e.asyncThunk)==null?void 0:s[$R];return function(a){const{name:i,reducerPath:l=i}=a;if(!i)throw new Error(ia(11));const o=(typeof a.reducers=="function"?a.reducers(WR()):a.reducers)||{},c=Object.keys(o),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(b,N){const k=typeof b=="string"?b:b.type;if(!k)throw new Error(ia(12));if(k in d.sliceCaseReducersByType)throw new Error(ia(13));return d.sliceCaseReducersByType[k]=N,u},addMatcher(b,N){return d.sliceMatchers.push({matcher:b,reducer:N}),u},exposeAction(b,N){return d.actionCreators[b]=N,u},exposeCaseReducer(b,N){return d.sliceCaseReducersByName[b]=N,u}};c.forEach(b=>{const N=o[b],k={reducerName:b,type:UR(i,b),createNotation:typeof a.reducers=="function"};GR(N)?QR(k,N,u,t):YR(k,N,u)});function h(){const[b={},N=[],k=void 0]=typeof a.extraReducers=="function"?pk(a.extraReducers):[a.extraReducers],w={...b,...d.sliceCaseReducersByType};return RR(a.initialState,_=>{for(let S in w)_.addCase(S,w[S]);for(let S of d.sliceMatchers)_.addMatcher(S.matcher,S.reducer);for(let S of N)_.addMatcher(S.matcher,S.reducer);k&&_.addDefaultCase(k)})}const f=b=>b,m=new Map,x=new WeakMap;let p;function j(b,N){return p||(p=h()),p(b,N)}function v(){return p||(p=h()),p.getInitialState()}function g(b,N=!1){function k(_){let S=_[b];return typeof S>"u"&&N&&(S=ah(x,k,v)),S}function w(_=f){const S=ah(m,N,()=>new WeakMap);return ah(S,_,()=>{const E={};for(const[A,C]of Object.entries(a.selectors??{}))E[A]=VR(C,_,()=>ah(x,_,v),N);return E})}return{reducerPath:b,getSelectors:w,get selectors(){return w(k)},selectSlice:k}}const y={name:i,reducer:j,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:v,...g(l),injectInto(b,{reducerPath:N,...k}={}){const w=N??l;return b.inject({reducerPath:w,reducer:j},k),{...y,...g(w,!0)}}};return y}}function VR(e,t,s,n){function a(i,...l){let o=t(i);return typeof o>"u"&&n&&(o=s()),e(o,...l)}return a.unwrapped=e,a}var HR=zR();function WR(){function e(t,s){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...s}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...s){return t(...s)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,s){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:s}},asyncThunk:e}}function YR({type:e,reducerName:t,createNotation:s},n,a){let i,l;if("reducer"in n){if(s&&!KR(n))throw new Error(ia(17));i=n.reducer,l=n.prepare}else i=n;a.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,l?pd(e,l):pd(e))}function GR(e){return e._reducerDefinitionType==="asyncThunk"}function KR(e){return e._reducerDefinitionType==="reducerWithPrepare"}function QR({type:e,reducerName:t},s,n,a){if(!a)throw new Error(ia(18));const{payloadCreator:i,fulfilled:l,pending:o,rejected:c,settled:d,options:u}=s,h=a(e,i,u);n.exposeAction(t,h),l&&n.addCase(h.fulfilled,l),o&&n.addCase(h.pending,o),c&&n.addCase(h.rejected,c),d&&n.addMatcher(h.settled,d),n.exposeCaseReducer(t,{fulfilled:l||ih,pending:o||ih,rejected:c||ih,settled:d||ih})}function ih(){}function ia(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const XR=globalThis||void 0||self;function xk(e,t){return function(){return e.apply(t,arguments)}}const{toString:ZR}=Object.prototype,{getPrototypeOf:wb}=Object,{iterator:Pm,toStringTag:gk}=Symbol,Mm=(e=>t=>{const s=ZR.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),on=e=>(e=e.toLowerCase(),t=>Mm(t)===e),Dm=e=>t=>typeof t===e,{isArray:mc}=Array,Xo=Dm("undefined");function Nu(e){return e!==null&&!Xo(e)&&e.constructor!==null&&!Xo(e.constructor)&&Kr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const yk=on("ArrayBuffer");function JR(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&yk(e.buffer),t}const eP=Dm("string"),Kr=Dm("function"),bk=Dm("number"),wu=e=>e!==null&&typeof e=="object",tP=e=>e===!0||e===!1,Mh=e=>{if(Mm(e)!=="object")return!1;const t=wb(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(gk in e)&&!(Pm in e)},rP=e=>{if(!wu(e)||Nu(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},sP=on("Date"),nP=on("File"),aP=on("Blob"),iP=on("FileList"),lP=e=>wu(e)&&Kr(e.pipe),oP=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Kr(e.append)&&((t=Mm(e))==="formdata"||t==="object"&&Kr(e.toString)&&e.toString()==="[object FormData]"))},cP=on("URLSearchParams"),[dP,uP,hP,fP]=["ReadableStream","Request","Response","Headers"].map(on),mP=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function _u(e,t,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),mc(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{if(Nu(e))return;const i=s?Object.getOwnPropertyNames(e):Object.keys(e),l=i.length;let o;for(n=0;n<l;n++)o=i[n],t.call(null,e[o],o,e)}}function vk(e,t){if(Nu(e))return null;t=t.toLowerCase();const s=Object.keys(e);let n=s.length,a;for(;n-- >0;)if(a=s[n],t===a.toLowerCase())return a;return null}const Gi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:XR,jk=e=>!Xo(e)&&e!==Gi;function hg(){const{caseless:e,skipUndefined:t}=jk(this)&&this||{},s={},n=(a,i)=>{const l=e&&vk(s,i)||i;Mh(s[l])&&Mh(a)?s[l]=hg(s[l],a):Mh(a)?s[l]=hg({},a):mc(a)?s[l]=a.slice():(!t||!Xo(a))&&(s[l]=a)};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&_u(arguments[a],n);return s}const pP=(e,t,s,{allOwnKeys:n}={})=>(_u(t,(a,i)=>{s&&Kr(a)?e[i]=xk(a,s):e[i]=a},{allOwnKeys:n}),e),xP=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),gP=(e,t,s,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},yP=(e,t,s,n)=>{let a,i,l;const o={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)l=a[i],(!n||n(l,e,t))&&!o[l]&&(t[l]=e[l],o[l]=!0);e=s!==!1&&wb(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},bP=(e,t,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=t.length;const n=e.indexOf(t,s);return n!==-1&&n===s},vP=e=>{if(!e)return null;if(mc(e))return e;let t=e.length;if(!bk(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},jP=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&wb(Uint8Array)),NP=(e,t)=>{const n=(e&&e[Pm]).call(e);let a;for(;(a=n.next())&&!a.done;){const i=a.value;t.call(e,i[0],i[1])}},wP=(e,t)=>{let s;const n=[];for(;(s=e.exec(t))!==null;)n.push(s);return n},_P=on("HTMLFormElement"),SP=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,n,a){return n.toUpperCase()+a}),wN=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),kP=on("RegExp"),Nk=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),n={};_u(s,(a,i)=>{let l;(l=t(a,i,e))!==!1&&(n[i]=l||a)}),Object.defineProperties(e,n)},EP=e=>{Nk(e,(t,s)=>{if(Kr(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const n=e[s];if(Kr(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},CP=(e,t)=>{const s={},n=a=>{a.forEach(i=>{s[i]=!0})};return mc(e)?n(e):n(String(e).split(t)),s},AP=()=>{},TP=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function OP(e){return!!(e&&Kr(e.append)&&e[gk]==="FormData"&&e[Pm])}const RP=e=>{const t=new Array(10),s=(n,a)=>{if(wu(n)){if(t.indexOf(n)>=0)return;if(Nu(n))return n;if(!("toJSON"in n)){t[a]=n;const i=mc(n)?[]:{};return _u(n,(l,o)=>{const c=s(l,a+1);!Xo(c)&&(i[o]=c)}),t[a]=void 0,i}}return n};return s(e,0)},PP=on("AsyncFunction"),MP=e=>e&&(wu(e)||Kr(e))&&Kr(e.then)&&Kr(e.catch),wk=((e,t)=>e?setImmediate:t?((s,n)=>(Gi.addEventListener("message",({source:a,data:i})=>{a===Gi&&i===s&&n.length&&n.shift()()},!1),a=>{n.push(a),Gi.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Kr(Gi.postMessage)),DP=typeof queueMicrotask<"u"?queueMicrotask.bind(Gi):typeof Ve<"u"&&Ve.nextTick||wk,LP=e=>e!=null&&Kr(e[Pm]),he={isArray:mc,isArrayBuffer:yk,isBuffer:Nu,isFormData:oP,isArrayBufferView:JR,isString:eP,isNumber:bk,isBoolean:tP,isObject:wu,isPlainObject:Mh,isEmptyObject:rP,isReadableStream:dP,isRequest:uP,isResponse:hP,isHeaders:fP,isUndefined:Xo,isDate:sP,isFile:nP,isBlob:aP,isRegExp:kP,isFunction:Kr,isStream:lP,isURLSearchParams:cP,isTypedArray:jP,isFileList:iP,forEach:_u,merge:hg,extend:pP,trim:mP,stripBOM:xP,inherits:gP,toFlatObject:yP,kindOf:Mm,kindOfTest:on,endsWith:bP,toArray:vP,forEachEntry:NP,matchAll:wP,isHTMLForm:_P,hasOwnProperty:wN,hasOwnProp:wN,reduceDescriptors:Nk,freezeMethods:EP,toObjectSet:CP,toCamelCase:SP,noop:AP,toFiniteNumber:TP,findKey:vk,global:Gi,isContextDefined:jk,isSpecCompliantForm:OP,toJSONObject:RP,isAsyncFn:PP,isThenable:MP,setImmediate:wk,asap:DP,isIterable:LP};var Ml={};(function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t={},s={};s.byteLength=u,s.toByteArray=f,s.fromByteArray=p;for(var n=[],a=[],i=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,c=l.length;o<c;++o)n[o]=l[o],a[l.charCodeAt(o)]=o;a[45]=62,a[95]=63;function d(g){var y=g.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=g.indexOf("=");b===-1&&(b=y);var N=b===y?0:4-b%4;return[b,N]}function u(g){var y=d(g),b=y[0],N=y[1];return(b+N)*3/4-N}function h(g,y,b){return(y+b)*3/4-b}function f(g){var y,b=d(g),N=b[0],k=b[1],w=new i(h(g,N,k)),_=0,S=k>0?N-4:N,E;for(E=0;E<S;E+=4)y=a[g.charCodeAt(E)]<<18|a[g.charCodeAt(E+1)]<<12|a[g.charCodeAt(E+2)]<<6|a[g.charCodeAt(E+3)],w[_++]=y>>16&255,w[_++]=y>>8&255,w[_++]=y&255;return k===2&&(y=a[g.charCodeAt(E)]<<2|a[g.charCodeAt(E+1)]>>4,w[_++]=y&255),k===1&&(y=a[g.charCodeAt(E)]<<10|a[g.charCodeAt(E+1)]<<4|a[g.charCodeAt(E+2)]>>2,w[_++]=y>>8&255,w[_++]=y&255),w}function m(g){return n[g>>18&63]+n[g>>12&63]+n[g>>6&63]+n[g&63]}function x(g,y,b){for(var N,k=[],w=y;w<b;w+=3)N=(g[w]<<16&16711680)+(g[w+1]<<8&65280)+(g[w+2]&255),k.push(m(N));return k.join("")}function p(g){for(var y,b=g.length,N=b%3,k=[],w=16383,_=0,S=b-N;_<S;_+=w)k.push(x(g,_,_+w>S?S:_+w));return N===1?(y=g[b-1],k.push(n[y>>2]+n[y<<4&63]+"==")):N===2&&(y=(g[b-2]<<8)+g[b-1],k.push(n[y>>10]+n[y>>4&63]+n[y<<2&63]+"=")),k.join("")}var j={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */j.read=function(g,y,b,N,k){var w,_,S=k*8-N-1,E=(1<<S)-1,A=E>>1,C=-7,D=b?k-1:0,M=b?-1:1,L=g[y+D];for(D+=M,w=L&(1<<-C)-1,L>>=-C,C+=S;C>0;w=w*256+g[y+D],D+=M,C-=8);for(_=w&(1<<-C)-1,w>>=-C,C+=N;C>0;_=_*256+g[y+D],D+=M,C-=8);if(w===0)w=1-A;else{if(w===E)return _?NaN:(L?-1:1)*(1/0);_=_+Math.pow(2,N),w=w-A}return(L?-1:1)*_*Math.pow(2,w-N)},j.write=function(g,y,b,N,k,w){var _,S,E,A=w*8-k-1,C=(1<<A)-1,D=C>>1,M=k===23?Math.pow(2,-24)-Math.pow(2,-77):0,L=N?0:w-1,z=N?1:-1,Y=y<0||y===0&&1/y<0?1:0;for(y=Math.abs(y),isNaN(y)||y===1/0?(S=isNaN(y)?1:0,_=C):(_=Math.floor(Math.log(y)/Math.LN2),y*(E=Math.pow(2,-_))<1&&(_--,E*=2),_+D>=1?y+=M/E:y+=M*Math.pow(2,1-D),y*E>=2&&(_++,E/=2),_+D>=C?(S=0,_=C):_+D>=1?(S=(y*E-1)*Math.pow(2,k),_=_+D):(S=y*Math.pow(2,D-1)*Math.pow(2,k),_=0));k>=8;g[b+L]=S&255,L+=z,S/=256,k-=8);for(_=_<<k|S,A+=k;A>0;g[b+L]=_&255,L+=z,_/=256,A-=8);g[b+L-z]|=Y*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(g){const y=s,b=j,N=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;g.Buffer=C,g.SlowBuffer=I,g.INSPECT_MAX_BYTES=50;const k=2147483647;g.kMaxLength=k;const{Uint8Array:w,ArrayBuffer:_,SharedArrayBuffer:S}=globalThis;C.TYPED_ARRAY_SUPPORT=E(),!C.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function E(){try{const H=new w(1),T={foo:function(){return 42}};return Object.setPrototypeOf(T,w.prototype),Object.setPrototypeOf(H,T),H.foo()===42}catch{return!1}}Object.defineProperty(C.prototype,"parent",{enumerable:!0,get:function(){if(C.isBuffer(this))return this.buffer}}),Object.defineProperty(C.prototype,"offset",{enumerable:!0,get:function(){if(C.isBuffer(this))return this.byteOffset}});function A(H){if(H>k)throw new RangeError('The value "'+H+'" is invalid for option "size"');const T=new w(H);return Object.setPrototypeOf(T,C.prototype),T}function C(H,T,P){if(typeof H=="number"){if(typeof T=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return z(H)}return D(H,T,P)}C.poolSize=8192;function D(H,T,P){if(typeof H=="string")return Y(H,T);if(_.isView(H))return Z(H);if(H==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H);if(un(H,_)||H&&un(H.buffer,_)||typeof S<"u"&&(un(H,S)||H&&un(H.buffer,S)))return W(H,T,P);if(typeof H=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const J=H.valueOf&&H.valueOf();if(J!=null&&J!==H)return C.from(J,T,P);const le=F(H);if(le)return le;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof H[Symbol.toPrimitive]=="function")return C.from(H[Symbol.toPrimitive]("string"),T,P);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H)}C.from=function(H,T,P){return D(H,T,P)},Object.setPrototypeOf(C.prototype,w.prototype),Object.setPrototypeOf(C,w);function M(H){if(typeof H!="number")throw new TypeError('"size" argument must be of type number');if(H<0)throw new RangeError('The value "'+H+'" is invalid for option "size"')}function L(H,T,P){return M(H),H<=0?A(H):T!==void 0?typeof P=="string"?A(H).fill(T,P):A(H).fill(T):A(H)}C.alloc=function(H,T,P){return L(H,T,P)};function z(H){return M(H),A(H<0?0:q(H)|0)}C.allocUnsafe=function(H){return z(H)},C.allocUnsafeSlow=function(H){return z(H)};function Y(H,T){if((typeof T!="string"||T==="")&&(T="utf8"),!C.isEncoding(T))throw new TypeError("Unknown encoding: "+T);const P=$(H,T)|0;let J=A(P);const le=J.write(H,T);return le!==P&&(J=J.slice(0,le)),J}function X(H){const T=H.length<0?0:q(H.length)|0,P=A(T);for(let J=0;J<T;J+=1)P[J]=H[J]&255;return P}function Z(H){if(un(H,w)){const T=new w(H);return W(T.buffer,T.byteOffset,T.byteLength)}return X(H)}function W(H,T,P){if(T<0||H.byteLength<T)throw new RangeError('"offset" is outside of buffer bounds');if(H.byteLength<T+(P||0))throw new RangeError('"length" is outside of buffer bounds');let J;return T===void 0&&P===void 0?J=new w(H):P===void 0?J=new w(H,T):J=new w(H,T,P),Object.setPrototypeOf(J,C.prototype),J}function F(H){if(C.isBuffer(H)){const T=q(H.length)|0,P=A(T);return P.length===0||H.copy(P,0,0,T),P}if(H.length!==void 0)return typeof H.length!="number"||pp(H.length)?A(0):X(H);if(H.type==="Buffer"&&Array.isArray(H.data))return X(H.data)}function q(H){if(H>=k)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+k.toString(16)+" bytes");return H|0}function I(H){return+H!=H&&(H=0),C.alloc(+H)}C.isBuffer=function(T){return T!=null&&T._isBuffer===!0&&T!==C.prototype},C.compare=function(T,P){if(un(T,w)&&(T=C.from(T,T.offset,T.byteLength)),un(P,w)&&(P=C.from(P,P.offset,P.byteLength)),!C.isBuffer(T)||!C.isBuffer(P))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(T===P)return 0;let J=T.length,le=P.length;for(let ue=0,xe=Math.min(J,le);ue<xe;++ue)if(T[ue]!==P[ue]){J=T[ue],le=P[ue];break}return J<le?-1:le<J?1:0},C.isEncoding=function(T){switch(String(T).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},C.concat=function(T,P){if(!Array.isArray(T))throw new TypeError('"list" argument must be an Array of Buffers');if(T.length===0)return C.alloc(0);let J;if(P===void 0)for(P=0,J=0;J<T.length;++J)P+=T[J].length;const le=C.allocUnsafe(P);let ue=0;for(J=0;J<T.length;++J){let xe=T[J];if(un(xe,w))ue+xe.length>le.length?(C.isBuffer(xe)||(xe=C.from(xe)),xe.copy(le,ue)):w.prototype.set.call(le,xe,ue);else if(C.isBuffer(xe))xe.copy(le,ue);else throw new TypeError('"list" argument must be an Array of Buffers');ue+=xe.length}return le};function $(H,T){if(C.isBuffer(H))return H.length;if(_.isView(H)||un(H,_))return H.byteLength;if(typeof H!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof H);const P=H.length,J=arguments.length>2&&arguments[2]===!0;if(!J&&P===0)return 0;let le=!1;for(;;)switch(T){case"ascii":case"latin1":case"binary":return P;case"utf8":case"utf-8":return mp(H).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P*2;case"hex":return P>>>1;case"base64":return Fv(H).length;default:if(le)return J?-1:mp(H).length;T=(""+T).toLowerCase(),le=!0}}C.byteLength=$;function G(H,T,P){let J=!1;if((T===void 0||T<0)&&(T=0),T>this.length||((P===void 0||P>this.length)&&(P=this.length),P<=0)||(P>>>=0,T>>>=0,P<=T))return"";for(H||(H="utf8");;)switch(H){case"hex":return ge(this,T,P);case"utf8":case"utf-8":return ye(this,T,P);case"ascii":return ce(this,T,P);case"latin1":case"binary":return re(this,T,P);case"base64":return fe(this,T,P);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return we(this,T,P);default:if(J)throw new TypeError("Unknown encoding: "+H);H=(H+"").toLowerCase(),J=!0}}C.prototype._isBuffer=!0;function R(H,T,P){const J=H[T];H[T]=H[P],H[P]=J}C.prototype.swap16=function(){const T=this.length;if(T%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let P=0;P<T;P+=2)R(this,P,P+1);return this},C.prototype.swap32=function(){const T=this.length;if(T%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let P=0;P<T;P+=4)R(this,P,P+3),R(this,P+1,P+2);return this},C.prototype.swap64=function(){const T=this.length;if(T%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let P=0;P<T;P+=8)R(this,P,P+7),R(this,P+1,P+6),R(this,P+2,P+5),R(this,P+3,P+4);return this},C.prototype.toString=function(){const T=this.length;return T===0?"":arguments.length===0?ye(this,0,T):G.apply(this,arguments)},C.prototype.toLocaleString=C.prototype.toString,C.prototype.equals=function(T){if(!C.isBuffer(T))throw new TypeError("Argument must be a Buffer");return this===T?!0:C.compare(this,T)===0},C.prototype.inspect=function(){let T="";const P=g.INSPECT_MAX_BYTES;return T=this.toString("hex",0,P).replace(/(.{2})/g,"$1 ").trim(),this.length>P&&(T+=" ... "),"<Buffer "+T+">"},N&&(C.prototype[N]=C.prototype.inspect),C.prototype.compare=function(T,P,J,le,ue){if(un(T,w)&&(T=C.from(T,T.offset,T.byteLength)),!C.isBuffer(T))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof T);if(P===void 0&&(P=0),J===void 0&&(J=T?T.length:0),le===void 0&&(le=0),ue===void 0&&(ue=this.length),P<0||J>T.length||le<0||ue>this.length)throw new RangeError("out of range index");if(le>=ue&&P>=J)return 0;if(le>=ue)return-1;if(P>=J)return 1;if(P>>>=0,J>>>=0,le>>>=0,ue>>>=0,this===T)return 0;let xe=ue-le,Ye=J-P;const zt=Math.min(xe,Ye),Ot=this.slice(le,ue),Vt=T.slice(P,J);for(let xt=0;xt<zt;++xt)if(Ot[xt]!==Vt[xt]){xe=Ot[xt],Ye=Vt[xt];break}return xe<Ye?-1:Ye<xe?1:0};function B(H,T,P,J,le){if(H.length===0)return-1;if(typeof P=="string"?(J=P,P=0):P>2147483647?P=2147483647:P<-2147483648&&(P=-2147483648),P=+P,pp(P)&&(P=le?0:H.length-1),P<0&&(P=H.length+P),P>=H.length){if(le)return-1;P=H.length-1}else if(P<0)if(le)P=0;else return-1;if(typeof T=="string"&&(T=C.from(T,J)),C.isBuffer(T))return T.length===0?-1:Q(H,T,P,J,le);if(typeof T=="number")return T=T&255,typeof w.prototype.indexOf=="function"?le?w.prototype.indexOf.call(H,T,P):w.prototype.lastIndexOf.call(H,T,P):Q(H,[T],P,J,le);throw new TypeError("val must be string, number or Buffer")}function Q(H,T,P,J,le){let ue=1,xe=H.length,Ye=T.length;if(J!==void 0&&(J=String(J).toLowerCase(),J==="ucs2"||J==="ucs-2"||J==="utf16le"||J==="utf-16le")){if(H.length<2||T.length<2)return-1;ue=2,xe/=2,Ye/=2,P/=2}function zt(Vt,xt){return ue===1?Vt[xt]:Vt.readUInt16BE(xt*ue)}let Ot;if(le){let Vt=-1;for(Ot=P;Ot<xe;Ot++)if(zt(H,Ot)===zt(T,Vt===-1?0:Ot-Vt)){if(Vt===-1&&(Vt=Ot),Ot-Vt+1===Ye)return Vt*ue}else Vt!==-1&&(Ot-=Ot-Vt),Vt=-1}else for(P+Ye>xe&&(P=xe-Ye),Ot=P;Ot>=0;Ot--){let Vt=!0;for(let xt=0;xt<Ye;xt++)if(zt(H,Ot+xt)!==zt(T,xt)){Vt=!1;break}if(Vt)return Ot}return-1}C.prototype.includes=function(T,P,J){return this.indexOf(T,P,J)!==-1},C.prototype.indexOf=function(T,P,J){return B(this,T,P,J,!0)},C.prototype.lastIndexOf=function(T,P,J){return B(this,T,P,J,!1)};function te(H,T,P,J){P=Number(P)||0;const le=H.length-P;J?(J=Number(J),J>le&&(J=le)):J=le;const ue=T.length;J>ue/2&&(J=ue/2);let xe;for(xe=0;xe<J;++xe){const Ye=parseInt(T.substr(xe*2,2),16);if(pp(Ye))return xe;H[P+xe]=Ye}return xe}function ae(H,T,P,J){return Fu(mp(T,H.length-P),H,P,J)}function U(H,T,P,J){return Fu(v6(T),H,P,J)}function V(H,T,P,J){return Fu(Fv(T),H,P,J)}function ne(H,T,P,J){return Fu(j6(T,H.length-P),H,P,J)}C.prototype.write=function(T,P,J,le){if(P===void 0)le="utf8",J=this.length,P=0;else if(J===void 0&&typeof P=="string")le=P,J=this.length,P=0;else if(isFinite(P))P=P>>>0,isFinite(J)?(J=J>>>0,le===void 0&&(le="utf8")):(le=J,J=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ue=this.length-P;if((J===void 0||J>ue)&&(J=ue),T.length>0&&(J<0||P<0)||P>this.length)throw new RangeError("Attempt to write outside buffer bounds");le||(le="utf8");let xe=!1;for(;;)switch(le){case"hex":return te(this,T,P,J);case"utf8":case"utf-8":return ae(this,T,P,J);case"ascii":case"latin1":case"binary":return U(this,T,P,J);case"base64":return V(this,T,P,J);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,T,P,J);default:if(xe)throw new TypeError("Unknown encoding: "+le);le=(""+le).toLowerCase(),xe=!0}},C.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function fe(H,T,P){return T===0&&P===H.length?y.fromByteArray(H):y.fromByteArray(H.slice(T,P))}function ye(H,T,P){P=Math.min(H.length,P);const J=[];let le=T;for(;le<P;){const ue=H[le];let xe=null,Ye=ue>239?4:ue>223?3:ue>191?2:1;if(le+Ye<=P){let zt,Ot,Vt,xt;switch(Ye){case 1:ue<128&&(xe=ue);break;case 2:zt=H[le+1],(zt&192)===128&&(xt=(ue&31)<<6|zt&63,xt>127&&(xe=xt));break;case 3:zt=H[le+1],Ot=H[le+2],(zt&192)===128&&(Ot&192)===128&&(xt=(ue&15)<<12|(zt&63)<<6|Ot&63,xt>2047&&(xt<55296||xt>57343)&&(xe=xt));break;case 4:zt=H[le+1],Ot=H[le+2],Vt=H[le+3],(zt&192)===128&&(Ot&192)===128&&(Vt&192)===128&&(xt=(ue&15)<<18|(zt&63)<<12|(Ot&63)<<6|Vt&63,xt>65535&&xt<1114112&&(xe=xt))}}xe===null?(xe=65533,Ye=1):xe>65535&&(xe-=65536,J.push(xe>>>10&1023|55296),xe=56320|xe&1023),J.push(xe),le+=Ye}return be(J)}const oe=4096;function be(H){const T=H.length;if(T<=oe)return String.fromCharCode.apply(String,H);let P="",J=0;for(;J<T;)P+=String.fromCharCode.apply(String,H.slice(J,J+=oe));return P}function ce(H,T,P){let J="";P=Math.min(H.length,P);for(let le=T;le<P;++le)J+=String.fromCharCode(H[le]&127);return J}function re(H,T,P){let J="";P=Math.min(H.length,P);for(let le=T;le<P;++le)J+=String.fromCharCode(H[le]);return J}function ge(H,T,P){const J=H.length;(!T||T<0)&&(T=0),(!P||P<0||P>J)&&(P=J);let le="";for(let ue=T;ue<P;++ue)le+=N6[H[ue]];return le}function we(H,T,P){const J=H.slice(T,P);let le="";for(let ue=0;ue<J.length-1;ue+=2)le+=String.fromCharCode(J[ue]+J[ue+1]*256);return le}C.prototype.slice=function(T,P){const J=this.length;T=~~T,P=P===void 0?J:~~P,T<0?(T+=J,T<0&&(T=0)):T>J&&(T=J),P<0?(P+=J,P<0&&(P=0)):P>J&&(P=J),P<T&&(P=T);const le=this.subarray(T,P);return Object.setPrototypeOf(le,C.prototype),le};function pe(H,T,P){if(H%1!==0||H<0)throw new RangeError("offset is not uint");if(H+T>P)throw new RangeError("Trying to access beyond buffer length")}C.prototype.readUintLE=C.prototype.readUIntLE=function(T,P,J){T=T>>>0,P=P>>>0,J||pe(T,P,this.length);let le=this[T],ue=1,xe=0;for(;++xe<P&&(ue*=256);)le+=this[T+xe]*ue;return le},C.prototype.readUintBE=C.prototype.readUIntBE=function(T,P,J){T=T>>>0,P=P>>>0,J||pe(T,P,this.length);let le=this[T+--P],ue=1;for(;P>0&&(ue*=256);)le+=this[T+--P]*ue;return le},C.prototype.readUint8=C.prototype.readUInt8=function(T,P){return T=T>>>0,P||pe(T,1,this.length),this[T]},C.prototype.readUint16LE=C.prototype.readUInt16LE=function(T,P){return T=T>>>0,P||pe(T,2,this.length),this[T]|this[T+1]<<8},C.prototype.readUint16BE=C.prototype.readUInt16BE=function(T,P){return T=T>>>0,P||pe(T,2,this.length),this[T]<<8|this[T+1]},C.prototype.readUint32LE=C.prototype.readUInt32LE=function(T,P){return T=T>>>0,P||pe(T,4,this.length),(this[T]|this[T+1]<<8|this[T+2]<<16)+this[T+3]*16777216},C.prototype.readUint32BE=C.prototype.readUInt32BE=function(T,P){return T=T>>>0,P||pe(T,4,this.length),this[T]*16777216+(this[T+1]<<16|this[T+2]<<8|this[T+3])},C.prototype.readBigUInt64LE=Ra(function(T){T=T>>>0,Bl(T,"offset");const P=this[T],J=this[T+7];(P===void 0||J===void 0)&&Ac(T,this.length-8);const le=P+this[++T]*2**8+this[++T]*2**16+this[++T]*2**24,ue=this[++T]+this[++T]*2**8+this[++T]*2**16+J*2**24;return BigInt(le)+(BigInt(ue)<<BigInt(32))}),C.prototype.readBigUInt64BE=Ra(function(T){T=T>>>0,Bl(T,"offset");const P=this[T],J=this[T+7];(P===void 0||J===void 0)&&Ac(T,this.length-8);const le=P*2**24+this[++T]*2**16+this[++T]*2**8+this[++T],ue=this[++T]*2**24+this[++T]*2**16+this[++T]*2**8+J;return(BigInt(le)<<BigInt(32))+BigInt(ue)}),C.prototype.readIntLE=function(T,P,J){T=T>>>0,P=P>>>0,J||pe(T,P,this.length);let le=this[T],ue=1,xe=0;for(;++xe<P&&(ue*=256);)le+=this[T+xe]*ue;return ue*=128,le>=ue&&(le-=Math.pow(2,8*P)),le},C.prototype.readIntBE=function(T,P,J){T=T>>>0,P=P>>>0,J||pe(T,P,this.length);let le=P,ue=1,xe=this[T+--le];for(;le>0&&(ue*=256);)xe+=this[T+--le]*ue;return ue*=128,xe>=ue&&(xe-=Math.pow(2,8*P)),xe},C.prototype.readInt8=function(T,P){return T=T>>>0,P||pe(T,1,this.length),this[T]&128?(255-this[T]+1)*-1:this[T]},C.prototype.readInt16LE=function(T,P){T=T>>>0,P||pe(T,2,this.length);const J=this[T]|this[T+1]<<8;return J&32768?J|4294901760:J},C.prototype.readInt16BE=function(T,P){T=T>>>0,P||pe(T,2,this.length);const J=this[T+1]|this[T]<<8;return J&32768?J|4294901760:J},C.prototype.readInt32LE=function(T,P){return T=T>>>0,P||pe(T,4,this.length),this[T]|this[T+1]<<8|this[T+2]<<16|this[T+3]<<24},C.prototype.readInt32BE=function(T,P){return T=T>>>0,P||pe(T,4,this.length),this[T]<<24|this[T+1]<<16|this[T+2]<<8|this[T+3]},C.prototype.readBigInt64LE=Ra(function(T){T=T>>>0,Bl(T,"offset");const P=this[T],J=this[T+7];(P===void 0||J===void 0)&&Ac(T,this.length-8);const le=this[T+4]+this[T+5]*2**8+this[T+6]*2**16+(J<<24);return(BigInt(le)<<BigInt(32))+BigInt(P+this[++T]*2**8+this[++T]*2**16+this[++T]*2**24)}),C.prototype.readBigInt64BE=Ra(function(T){T=T>>>0,Bl(T,"offset");const P=this[T],J=this[T+7];(P===void 0||J===void 0)&&Ac(T,this.length-8);const le=(P<<24)+this[++T]*2**16+this[++T]*2**8+this[++T];return(BigInt(le)<<BigInt(32))+BigInt(this[++T]*2**24+this[++T]*2**16+this[++T]*2**8+J)}),C.prototype.readFloatLE=function(T,P){return T=T>>>0,P||pe(T,4,this.length),b.read(this,T,!0,23,4)},C.prototype.readFloatBE=function(T,P){return T=T>>>0,P||pe(T,4,this.length),b.read(this,T,!1,23,4)},C.prototype.readDoubleLE=function(T,P){return T=T>>>0,P||pe(T,8,this.length),b.read(this,T,!0,52,8)},C.prototype.readDoubleBE=function(T,P){return T=T>>>0,P||pe(T,8,this.length),b.read(this,T,!1,52,8)};function de(H,T,P,J,le,ue){if(!C.isBuffer(H))throw new TypeError('"buffer" argument must be a Buffer instance');if(T>le||T<ue)throw new RangeError('"value" argument is out of bounds');if(P+J>H.length)throw new RangeError("Index out of range")}C.prototype.writeUintLE=C.prototype.writeUIntLE=function(T,P,J,le){if(T=+T,P=P>>>0,J=J>>>0,!le){const Ye=Math.pow(2,8*J)-1;de(this,T,P,J,Ye,0)}let ue=1,xe=0;for(this[P]=T&255;++xe<J&&(ue*=256);)this[P+xe]=T/ue&255;return P+J},C.prototype.writeUintBE=C.prototype.writeUIntBE=function(T,P,J,le){if(T=+T,P=P>>>0,J=J>>>0,!le){const Ye=Math.pow(2,8*J)-1;de(this,T,P,J,Ye,0)}let ue=J-1,xe=1;for(this[P+ue]=T&255;--ue>=0&&(xe*=256);)this[P+ue]=T/xe&255;return P+J},C.prototype.writeUint8=C.prototype.writeUInt8=function(T,P,J){return T=+T,P=P>>>0,J||de(this,T,P,1,255,0),this[P]=T&255,P+1},C.prototype.writeUint16LE=C.prototype.writeUInt16LE=function(T,P,J){return T=+T,P=P>>>0,J||de(this,T,P,2,65535,0),this[P]=T&255,this[P+1]=T>>>8,P+2},C.prototype.writeUint16BE=C.prototype.writeUInt16BE=function(T,P,J){return T=+T,P=P>>>0,J||de(this,T,P,2,65535,0),this[P]=T>>>8,this[P+1]=T&255,P+2},C.prototype.writeUint32LE=C.prototype.writeUInt32LE=function(T,P,J){return T=+T,P=P>>>0,J||de(this,T,P,4,4294967295,0),this[P+3]=T>>>24,this[P+2]=T>>>16,this[P+1]=T>>>8,this[P]=T&255,P+4},C.prototype.writeUint32BE=C.prototype.writeUInt32BE=function(T,P,J){return T=+T,P=P>>>0,J||de(this,T,P,4,4294967295,0),this[P]=T>>>24,this[P+1]=T>>>16,this[P+2]=T>>>8,this[P+3]=T&255,P+4};function Re(H,T,P,J,le){Lv(T,J,le,H,P,7);let ue=Number(T&BigInt(4294967295));H[P++]=ue,ue=ue>>8,H[P++]=ue,ue=ue>>8,H[P++]=ue,ue=ue>>8,H[P++]=ue;let xe=Number(T>>BigInt(32)&BigInt(4294967295));return H[P++]=xe,xe=xe>>8,H[P++]=xe,xe=xe>>8,H[P++]=xe,xe=xe>>8,H[P++]=xe,P}function Fe(H,T,P,J,le){Lv(T,J,le,H,P,7);let ue=Number(T&BigInt(4294967295));H[P+7]=ue,ue=ue>>8,H[P+6]=ue,ue=ue>>8,H[P+5]=ue,ue=ue>>8,H[P+4]=ue;let xe=Number(T>>BigInt(32)&BigInt(4294967295));return H[P+3]=xe,xe=xe>>8,H[P+2]=xe,xe=xe>>8,H[P+1]=xe,xe=xe>>8,H[P]=xe,P+8}C.prototype.writeBigUInt64LE=Ra(function(T,P=0){return Re(this,T,P,BigInt(0),BigInt("0xffffffffffffffff"))}),C.prototype.writeBigUInt64BE=Ra(function(T,P=0){return Fe(this,T,P,BigInt(0),BigInt("0xffffffffffffffff"))}),C.prototype.writeIntLE=function(T,P,J,le){if(T=+T,P=P>>>0,!le){const zt=Math.pow(2,8*J-1);de(this,T,P,J,zt-1,-zt)}let ue=0,xe=1,Ye=0;for(this[P]=T&255;++ue<J&&(xe*=256);)T<0&&Ye===0&&this[P+ue-1]!==0&&(Ye=1),this[P+ue]=(T/xe>>0)-Ye&255;return P+J},C.prototype.writeIntBE=function(T,P,J,le){if(T=+T,P=P>>>0,!le){const zt=Math.pow(2,8*J-1);de(this,T,P,J,zt-1,-zt)}let ue=J-1,xe=1,Ye=0;for(this[P+ue]=T&255;--ue>=0&&(xe*=256);)T<0&&Ye===0&&this[P+ue+1]!==0&&(Ye=1),this[P+ue]=(T/xe>>0)-Ye&255;return P+J},C.prototype.writeInt8=function(T,P,J){return T=+T,P=P>>>0,J||de(this,T,P,1,127,-128),T<0&&(T=255+T+1),this[P]=T&255,P+1},C.prototype.writeInt16LE=function(T,P,J){return T=+T,P=P>>>0,J||de(this,T,P,2,32767,-32768),this[P]=T&255,this[P+1]=T>>>8,P+2},C.prototype.writeInt16BE=function(T,P,J){return T=+T,P=P>>>0,J||de(this,T,P,2,32767,-32768),this[P]=T>>>8,this[P+1]=T&255,P+2},C.prototype.writeInt32LE=function(T,P,J){return T=+T,P=P>>>0,J||de(this,T,P,4,2147483647,-2147483648),this[P]=T&255,this[P+1]=T>>>8,this[P+2]=T>>>16,this[P+3]=T>>>24,P+4},C.prototype.writeInt32BE=function(T,P,J){return T=+T,P=P>>>0,J||de(this,T,P,4,2147483647,-2147483648),T<0&&(T=4294967295+T+1),this[P]=T>>>24,this[P+1]=T>>>16,this[P+2]=T>>>8,this[P+3]=T&255,P+4},C.prototype.writeBigInt64LE=Ra(function(T,P=0){return Re(this,T,P,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),C.prototype.writeBigInt64BE=Ra(function(T,P=0){return Fe(this,T,P,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Gt(H,T,P,J,le,ue){if(P+J>H.length)throw new RangeError("Index out of range");if(P<0)throw new RangeError("Index out of range")}function nr(H,T,P,J,le){return T=+T,P=P>>>0,le||Gt(H,T,P,4),b.write(H,T,P,J,23,4),P+4}C.prototype.writeFloatLE=function(T,P,J){return nr(this,T,P,!0,J)},C.prototype.writeFloatBE=function(T,P,J){return nr(this,T,P,!1,J)};function it(H,T,P,J,le){return T=+T,P=P>>>0,le||Gt(H,T,P,8),b.write(H,T,P,J,52,8),P+8}C.prototype.writeDoubleLE=function(T,P,J){return it(this,T,P,!0,J)},C.prototype.writeDoubleBE=function(T,P,J){return it(this,T,P,!1,J)},C.prototype.copy=function(T,P,J,le){if(!C.isBuffer(T))throw new TypeError("argument should be a Buffer");if(J||(J=0),!le&&le!==0&&(le=this.length),P>=T.length&&(P=T.length),P||(P=0),le>0&&le<J&&(le=J),le===J||T.length===0||this.length===0)return 0;if(P<0)throw new RangeError("targetStart out of bounds");if(J<0||J>=this.length)throw new RangeError("Index out of range");if(le<0)throw new RangeError("sourceEnd out of bounds");le>this.length&&(le=this.length),T.length-P<le-J&&(le=T.length-P+J);const ue=le-J;return this===T&&typeof w.prototype.copyWithin=="function"?this.copyWithin(P,J,le):w.prototype.set.call(T,this.subarray(J,le),P),ue},C.prototype.fill=function(T,P,J,le){if(typeof T=="string"){if(typeof P=="string"?(le=P,P=0,J=this.length):typeof J=="string"&&(le=J,J=this.length),le!==void 0&&typeof le!="string")throw new TypeError("encoding must be a string");if(typeof le=="string"&&!C.isEncoding(le))throw new TypeError("Unknown encoding: "+le);if(T.length===1){const xe=T.charCodeAt(0);(le==="utf8"&&xe<128||le==="latin1")&&(T=xe)}}else typeof T=="number"?T=T&255:typeof T=="boolean"&&(T=Number(T));if(P<0||this.length<P||this.length<J)throw new RangeError("Out of range index");if(J<=P)return this;P=P>>>0,J=J===void 0?this.length:J>>>0,T||(T=0);let ue;if(typeof T=="number")for(ue=P;ue<J;++ue)this[ue]=T;else{const xe=C.isBuffer(T)?T:C.from(T,le),Ye=xe.length;if(Ye===0)throw new TypeError('The value "'+T+'" is invalid for argument "value"');for(ue=0;ue<J-P;++ue)this[ue+P]=xe[ue%Ye]}return this};const Oa={};function Tt(H,T,P){Oa[H]=class extends P{constructor(){super(),Object.defineProperty(this,"message",{value:T.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${H}]`,this.stack,delete this.name}get code(){return H}set code(le){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:le,writable:!0})}toString(){return`${this.name} [${H}]: ${this.message}`}}}Tt("ERR_BUFFER_OUT_OF_BOUNDS",function(H){return H?`${H} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Tt("ERR_INVALID_ARG_TYPE",function(H,T){return`The "${H}" argument must be of type number. Received type ${typeof T}`},TypeError),Tt("ERR_OUT_OF_RANGE",function(H,T,P){let J=`The value of "${H}" is out of range.`,le=P;return Number.isInteger(P)&&Math.abs(P)>2**32?le=Vs(String(P)):typeof P=="bigint"&&(le=String(P),(P>BigInt(2)**BigInt(32)||P<-(BigInt(2)**BigInt(32)))&&(le=Vs(le)),le+="n"),J+=` It must be ${T}. Received ${le}`,J},RangeError);function Vs(H){let T="",P=H.length;const J=H[0]==="-"?1:0;for(;P>=J+4;P-=3)T=`_${H.slice(P-3,P)}${T}`;return`${H.slice(0,P)}${T}`}function g6(H,T,P){Bl(T,"offset"),(H[T]===void 0||H[T+P]===void 0)&&Ac(T,H.length-(P+1))}function Lv(H,T,P,J,le,ue){if(H>P||H<T){const xe=typeof T=="bigint"?"n":"";let Ye;throw T===0||T===BigInt(0)?Ye=`>= 0${xe} and < 2${xe} ** ${(ue+1)*8}${xe}`:Ye=`>= -(2${xe} ** ${(ue+1)*8-1}${xe}) and < 2 ** ${(ue+1)*8-1}${xe}`,new Oa.ERR_OUT_OF_RANGE("value",Ye,H)}g6(J,le,ue)}function Bl(H,T){if(typeof H!="number")throw new Oa.ERR_INVALID_ARG_TYPE(T,"number",H)}function Ac(H,T,P){throw Math.floor(H)!==H?(Bl(H,P),new Oa.ERR_OUT_OF_RANGE("offset","an integer",H)):T<0?new Oa.ERR_BUFFER_OUT_OF_BOUNDS:new Oa.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${T}`,H)}const y6=/[^+/0-9A-Za-z-_]/g;function b6(H){if(H=H.split("=")[0],H=H.trim().replace(y6,""),H.length<2)return"";for(;H.length%4!==0;)H=H+"=";return H}function mp(H,T){T=T||1/0;let P;const J=H.length;let le=null;const ue=[];for(let xe=0;xe<J;++xe){if(P=H.charCodeAt(xe),P>55295&&P<57344){if(!le){if(P>56319){(T-=3)>-1&&ue.push(239,191,189);continue}else if(xe+1===J){(T-=3)>-1&&ue.push(239,191,189);continue}le=P;continue}if(P<56320){(T-=3)>-1&&ue.push(239,191,189),le=P;continue}P=(le-55296<<10|P-56320)+65536}else le&&(T-=3)>-1&&ue.push(239,191,189);if(le=null,P<128){if((T-=1)<0)break;ue.push(P)}else if(P<2048){if((T-=2)<0)break;ue.push(P>>6|192,P&63|128)}else if(P<65536){if((T-=3)<0)break;ue.push(P>>12|224,P>>6&63|128,P&63|128)}else if(P<1114112){if((T-=4)<0)break;ue.push(P>>18|240,P>>12&63|128,P>>6&63|128,P&63|128)}else throw new Error("Invalid code point")}return ue}function v6(H){const T=[];for(let P=0;P<H.length;++P)T.push(H.charCodeAt(P)&255);return T}function j6(H,T){let P,J,le;const ue=[];for(let xe=0;xe<H.length&&!((T-=2)<0);++xe)P=H.charCodeAt(xe),J=P>>8,le=P%256,ue.push(le),ue.push(J);return ue}function Fv(H){return y.toByteArray(b6(H))}function Fu(H,T,P,J){let le;for(le=0;le<J&&!(le+P>=T.length||le>=H.length);++le)T[le+P]=H[le];return le}function un(H,T){return H instanceof T||H!=null&&H.constructor!=null&&H.constructor.name!=null&&H.constructor.name===T.name}function pp(H){return H!==H}const N6=function(){const H="0123456789abcdef",T=new Array(256);for(let P=0;P<16;++P){const J=P*16;for(let le=0;le<16;++le)T[J+le]=H[P]+H[le]}return T}();function Ra(H){return typeof BigInt>"u"?w6:H}function w6(){throw new Error("BigInt not supported")}})(t);const v=t.Buffer;e.Blob=t.Blob,e.BlobOptions=t.BlobOptions,e.Buffer=t.Buffer,e.File=t.File,e.FileOptions=t.FileOptions,e.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,e.SlowBuffer=t.SlowBuffer,e.TranscodeEncoding=t.TranscodeEncoding,e.atob=t.atob,e.btoa=t.btoa,e.constants=t.constants,e.default=v,e.isAscii=t.isAscii,e.isUtf8=t.isUtf8,e.kMaxLength=t.kMaxLength,e.kStringMaxLength=t.kStringMaxLength,e.resolveObjectURL=t.resolveObjectURL,e.transcode=t.transcode})(Ml);const Wl=om(Ml);function qe(e,t,s,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}he.inherits(qe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:he.toJSONObject(this.config),code:this.code,status:this.status}}});const _k=qe.prototype,Sk={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Sk[e]={value:e}});Object.defineProperties(qe,Sk);Object.defineProperty(_k,"isAxiosError",{value:!0});qe.from=(e,t,s,n,a,i)=>{const l=Object.create(_k);he.toFlatObject(e,l,function(u){return u!==Error.prototype},d=>d!=="isAxiosError");const o=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return qe.call(l,o,c,s,n,a),e&&l.cause==null&&Object.defineProperty(l,"cause",{value:e,configurable:!0}),l.name=e&&e.name||"Error",i&&Object.assign(l,i),l};const FP=null;function fg(e){return he.isPlainObject(e)||he.isArray(e)}function kk(e){return he.endsWith(e,"[]")?e.slice(0,-2):e}function _N(e,t,s){return e?e.concat(t).map(function(a,i){return a=kk(a),!s&&i?"["+a+"]":a}).join(s?".":""):t}function IP(e){return he.isArray(e)&&!e.some(fg)}const BP=he.toFlatObject(he,{},null,function(t){return/^is[A-Z]/.test(t)});function Lm(e,t,s){if(!he.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,s=he.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,j){return!he.isUndefined(j[p])});const n=s.metaTokens,a=s.visitor||u,i=s.dots,l=s.indexes,c=(s.Blob||typeof Blob<"u"&&Blob)&&he.isSpecCompliantForm(t);if(!he.isFunction(a))throw new TypeError("visitor must be a function");function d(x){if(x===null)return"";if(he.isDate(x))return x.toISOString();if(he.isBoolean(x))return x.toString();if(!c&&he.isBlob(x))throw new qe("Blob is not supported. Use a Buffer instead.");return he.isArrayBuffer(x)||he.isTypedArray(x)?c&&typeof Blob=="function"?new Blob([x]):Wl.from(x):x}function u(x,p,j){let v=x;if(x&&!j&&typeof x=="object"){if(he.endsWith(p,"{}"))p=n?p:p.slice(0,-2),x=JSON.stringify(x);else if(he.isArray(x)&&IP(x)||(he.isFileList(x)||he.endsWith(p,"[]"))&&(v=he.toArray(x)))return p=kk(p),v.forEach(function(y,b){!(he.isUndefined(y)||y===null)&&t.append(l===!0?_N([p],b,i):l===null?p:p+"[]",d(y))}),!1}return fg(x)?!0:(t.append(_N(j,p,i),d(x)),!1)}const h=[],f=Object.assign(BP,{defaultVisitor:u,convertValue:d,isVisitable:fg});function m(x,p){if(!he.isUndefined(x)){if(h.indexOf(x)!==-1)throw Error("Circular reference detected in "+p.join("."));h.push(x),he.forEach(x,function(v,g){(!(he.isUndefined(v)||v===null)&&a.call(t,v,he.isString(g)?g.trim():g,p,f))===!0&&m(v,p?p.concat(g):[g])}),h.pop()}}if(!he.isObject(e))throw new TypeError("data must be an object");return m(e),t}function SN(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function _b(e,t){this._pairs=[],e&&Lm(e,this,t)}const Ek=_b.prototype;Ek.append=function(t,s){this._pairs.push([t,s])};Ek.toString=function(t){const s=t?function(n){return t.call(this,n,SN)}:SN;return this._pairs.map(function(a){return s(a[0])+"="+s(a[1])},"").join("&")};function qP(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ck(e,t,s){if(!t)return e;const n=s&&s.encode||qP;he.isFunction(s)&&(s={serialize:s});const a=s&&s.serialize;let i;if(a?i=a(t,s):i=he.isURLSearchParams(t)?t.toString():new _b(t,s).toString(n),i){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class kN{constructor(){this.handlers=[]}use(t,s,n){return this.handlers.push({fulfilled:t,rejected:s,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){he.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Ak={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},$P=typeof URLSearchParams<"u"?URLSearchParams:_b,UP=typeof FormData<"u"?FormData:null,zP=typeof Blob<"u"?Blob:null,VP={isBrowser:!0,classes:{URLSearchParams:$P,FormData:UP,Blob:zP},protocols:["http","https","file","blob","url","data"]},Sb=typeof window<"u"&&typeof document<"u",mg=typeof navigator=="object"&&navigator||void 0,HP=Sb&&(!mg||["ReactNative","NativeScript","NS"].indexOf(mg.product)<0),WP=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",YP=Sb&&window.location.href||"http://localhost",GP=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Sb,hasStandardBrowserEnv:HP,hasStandardBrowserWebWorkerEnv:WP,navigator:mg,origin:YP},Symbol.toStringTag,{value:"Module"})),wr={...GP,...VP};function KP(e,t){return Lm(e,new wr.classes.URLSearchParams,{visitor:function(s,n,a,i){return wr.isNode&&he.isBuffer(s)?(this.append(n,s.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function QP(e){return he.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function XP(e){const t={},s=Object.keys(e);let n;const a=s.length;let i;for(n=0;n<a;n++)i=s[n],t[i]=e[i];return t}function Tk(e){function t(s,n,a,i){let l=s[i++];if(l==="__proto__")return!0;const o=Number.isFinite(+l),c=i>=s.length;return l=!l&&he.isArray(a)?a.length:l,c?(he.hasOwnProp(a,l)?a[l]=[a[l],n]:a[l]=n,!o):((!a[l]||!he.isObject(a[l]))&&(a[l]=[]),t(s,n,a[l],i)&&he.isArray(a[l])&&(a[l]=XP(a[l])),!o)}if(he.isFormData(e)&&he.isFunction(e.entries)){const s={};return he.forEachEntry(e,(n,a)=>{t(QP(n),a,s,0)}),s}return null}function ZP(e,t,s){if(he.isString(e))try{return(t||JSON.parse)(e),he.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(s||JSON.stringify)(e)}const Su={transitional:Ak,adapter:["xhr","http","fetch"],transformRequest:[function(t,s){const n=s.getContentType()||"",a=n.indexOf("application/json")>-1,i=he.isObject(t);if(i&&he.isHTMLForm(t)&&(t=new FormData(t)),he.isFormData(t))return a?JSON.stringify(Tk(t)):t;if(he.isArrayBuffer(t)||he.isBuffer(t)||he.isStream(t)||he.isFile(t)||he.isBlob(t)||he.isReadableStream(t))return t;if(he.isArrayBufferView(t))return t.buffer;if(he.isURLSearchParams(t))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return KP(t,this.formSerializer).toString();if((o=he.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Lm(o?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||a?(s.setContentType("application/json",!1),ZP(t)):t}],transformResponse:[function(t){const s=this.transitional||Su.transitional,n=s&&s.forcedJSONParsing,a=this.responseType==="json";if(he.isResponse(t)||he.isReadableStream(t))return t;if(t&&he.isString(t)&&(n&&!this.responseType||a)){const l=!(s&&s.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(o){if(l)throw o.name==="SyntaxError"?qe.from(o,qe.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:wr.classes.FormData,Blob:wr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};he.forEach(["delete","get","head","post","put","patch"],e=>{Su.headers[e]={}});const JP=he.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),eM=e=>{const t={};let s,n,a;return e&&e.split(`
`).forEach(function(l){a=l.indexOf(":"),s=l.substring(0,a).trim().toLowerCase(),n=l.substring(a+1).trim(),!(!s||t[s]&&JP[s])&&(s==="set-cookie"?t[s]?t[s].push(n):t[s]=[n]:t[s]=t[s]?t[s]+", "+n:n)}),t},EN=Symbol("internals");function Ic(e){return e&&String(e).trim().toLowerCase()}function Dh(e){return e===!1||e==null?e:he.isArray(e)?e.map(Dh):String(e)}function tM(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(e);)t[n[1]]=n[2];return t}const rM=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Xp(e,t,s,n,a){if(he.isFunction(n))return n.call(this,t,s);if(a&&(t=s),!!he.isString(t)){if(he.isString(n))return t.indexOf(n)!==-1;if(he.isRegExp(n))return n.test(t)}}function sM(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,s,n)=>s.toUpperCase()+n)}function nM(e,t){const s=he.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+s,{value:function(a,i,l){return this[n].call(this,t,a,i,l)},configurable:!0})})}let Qr=class{constructor(t){t&&this.set(t)}set(t,s,n){const a=this;function i(o,c,d){const u=Ic(c);if(!u)throw new Error("header name must be a non-empty string");const h=he.findKey(a,u);(!h||a[h]===void 0||d===!0||d===void 0&&a[h]!==!1)&&(a[h||c]=Dh(o))}const l=(o,c)=>he.forEach(o,(d,u)=>i(d,u,c));if(he.isPlainObject(t)||t instanceof this.constructor)l(t,s);else if(he.isString(t)&&(t=t.trim())&&!rM(t))l(eM(t),s);else if(he.isObject(t)&&he.isIterable(t)){let o={},c,d;for(const u of t){if(!he.isArray(u))throw TypeError("Object iterator must return a key-value pair");o[d=u[0]]=(c=o[d])?he.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}l(o,s)}else t!=null&&i(s,t,n);return this}get(t,s){if(t=Ic(t),t){const n=he.findKey(this,t);if(n){const a=this[n];if(!s)return a;if(s===!0)return tM(a);if(he.isFunction(s))return s.call(this,a,n);if(he.isRegExp(s))return s.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,s){if(t=Ic(t),t){const n=he.findKey(this,t);return!!(n&&this[n]!==void 0&&(!s||Xp(this,this[n],n,s)))}return!1}delete(t,s){const n=this;let a=!1;function i(l){if(l=Ic(l),l){const o=he.findKey(n,l);o&&(!s||Xp(n,n[o],o,s))&&(delete n[o],a=!0)}}return he.isArray(t)?t.forEach(i):i(t),a}clear(t){const s=Object.keys(this);let n=s.length,a=!1;for(;n--;){const i=s[n];(!t||Xp(this,this[i],i,t,!0))&&(delete this[i],a=!0)}return a}normalize(t){const s=this,n={};return he.forEach(this,(a,i)=>{const l=he.findKey(n,i);if(l){s[l]=Dh(a),delete s[i];return}const o=t?sM(i):String(i).trim();o!==i&&delete s[i],s[o]=Dh(a),n[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const s=Object.create(null);return he.forEach(this,(n,a)=>{n!=null&&n!==!1&&(s[a]=t&&he.isArray(n)?n.join(", "):n)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,s])=>t+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...s){const n=new this(t);return s.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[EN]=this[EN]={accessors:{}}).accessors,a=this.prototype;function i(l){const o=Ic(l);n[o]||(nM(a,l),n[o]=!0)}return he.isArray(t)?t.forEach(i):i(t),this}};Qr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);he.reduceDescriptors(Qr.prototype,({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[s]=n}}});he.freezeMethods(Qr);function Zp(e,t){const s=this||Su,n=t||s,a=Qr.from(n.headers);let i=n.data;return he.forEach(e,function(o){i=o.call(s,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function Ok(e){return!!(e&&e.__CANCEL__)}function pc(e,t,s){qe.call(this,e??"canceled",qe.ERR_CANCELED,t,s),this.name="CanceledError"}he.inherits(pc,qe,{__CANCEL__:!0});function Rk(e,t,s){const n=s.config.validateStatus;!s.status||!n||n(s.status)?e(s):t(new qe("Request failed with status code "+s.status,[qe.ERR_BAD_REQUEST,qe.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function aM(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function iM(e,t){e=e||10;const s=new Array(e),n=new Array(e);let a=0,i=0,l;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=n[i];l||(l=d),s[a]=c,n[a]=d;let h=i,f=0;for(;h!==a;)f+=s[h++],h=h%e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),d-l<t)return;const m=u&&d-u;return m?Math.round(f*1e3/m):void 0}}function lM(e,t){let s=0,n=1e3/t,a,i;const l=(d,u=Date.now())=>{s=u,a=null,i&&(clearTimeout(i),i=null),e(...d)};return[(...d)=>{const u=Date.now(),h=u-s;h>=n?l(d,u):(a=d,i||(i=setTimeout(()=>{i=null,l(a)},n-h)))},()=>a&&l(a)]}const Ff=(e,t,s=3)=>{let n=0;const a=iM(50,250);return lM(i=>{const l=i.loaded,o=i.lengthComputable?i.total:void 0,c=l-n,d=a(c),u=l<=o;n=l;const h={loaded:l,total:o,progress:o?l/o:void 0,bytes:c,rate:d||void 0,estimated:d&&o&&u?(o-l)/d:void 0,event:i,lengthComputable:o!=null,[t?"download":"upload"]:!0};e(h)},s)},CN=(e,t)=>{const s=e!=null;return[n=>t[0]({lengthComputable:s,total:e,loaded:n}),t[1]]},AN=e=>(...t)=>he.asap(()=>e(...t)),oM=wr.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,wr.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(wr.origin),wr.navigator&&/(msie|trident)/i.test(wr.navigator.userAgent)):()=>!0,cM=wr.hasStandardBrowserEnv?{write(e,t,s,n,a,i){const l=[e+"="+encodeURIComponent(t)];he.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),he.isString(n)&&l.push("path="+n),he.isString(a)&&l.push("domain="+a),i===!0&&l.push("secure"),document.cookie=l.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function dM(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function uM(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Pk(e,t,s){let n=!dM(t);return e&&(n||s==!1)?uM(e,t):t}const TN=e=>e instanceof Qr?{...e}:e;function kl(e,t){t=t||{};const s={};function n(d,u,h,f){return he.isPlainObject(d)&&he.isPlainObject(u)?he.merge.call({caseless:f},d,u):he.isPlainObject(u)?he.merge({},u):he.isArray(u)?u.slice():u}function a(d,u,h,f){if(he.isUndefined(u)){if(!he.isUndefined(d))return n(void 0,d,h,f)}else return n(d,u,h,f)}function i(d,u){if(!he.isUndefined(u))return n(void 0,u)}function l(d,u){if(he.isUndefined(u)){if(!he.isUndefined(d))return n(void 0,d)}else return n(void 0,u)}function o(d,u,h){if(h in t)return n(d,u);if(h in e)return n(void 0,d)}const c={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o,headers:(d,u,h)=>a(TN(d),TN(u),h,!0)};return he.forEach(Object.keys({...e,...t}),function(u){const h=c[u]||a,f=h(e[u],t[u],u);he.isUndefined(f)&&h!==o||(s[u]=f)}),s}const Mk=e=>{const t=kl({},e);let{data:s,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:i,headers:l,auth:o}=t;if(t.headers=l=Qr.from(l),t.url=Ck(Pk(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&l.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),he.isFormData(s)){if(wr.hasStandardBrowserEnv||wr.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(he.isFunction(s.getHeaders)){const c=s.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([u,h])=>{d.includes(u.toLowerCase())&&l.set(u,h)})}}if(wr.hasStandardBrowserEnv&&(n&&he.isFunction(n)&&(n=n(t)),n||n!==!1&&oM(t.url))){const c=a&&i&&cM.read(i);c&&l.set(a,c)}return t},hM=typeof XMLHttpRequest<"u",fM=hM&&function(e){return new Promise(function(s,n){const a=Mk(e);let i=a.data;const l=Qr.from(a.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:d}=a,u,h,f,m,x;function p(){m&&m(),x&&x(),a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let j=new XMLHttpRequest;j.open(a.method.toUpperCase(),a.url,!0),j.timeout=a.timeout;function v(){if(!j)return;const y=Qr.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),N={data:!o||o==="text"||o==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:y,config:e,request:j};Rk(function(w){s(w),p()},function(w){n(w),p()},N),j=null}"onloadend"in j?j.onloadend=v:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(v)},j.onabort=function(){j&&(n(new qe("Request aborted",qe.ECONNABORTED,e,j)),j=null)},j.onerror=function(b){const N=b&&b.message?b.message:"Network Error",k=new qe(N,qe.ERR_NETWORK,e,j);k.event=b||null,n(k),j=null},j.ontimeout=function(){let b=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const N=a.transitional||Ak;a.timeoutErrorMessage&&(b=a.timeoutErrorMessage),n(new qe(b,N.clarifyTimeoutError?qe.ETIMEDOUT:qe.ECONNABORTED,e,j)),j=null},i===void 0&&l.setContentType(null),"setRequestHeader"in j&&he.forEach(l.toJSON(),function(b,N){j.setRequestHeader(N,b)}),he.isUndefined(a.withCredentials)||(j.withCredentials=!!a.withCredentials),o&&o!=="json"&&(j.responseType=a.responseType),d&&([f,x]=Ff(d,!0),j.addEventListener("progress",f)),c&&j.upload&&([h,m]=Ff(c),j.upload.addEventListener("progress",h),j.upload.addEventListener("loadend",m)),(a.cancelToken||a.signal)&&(u=y=>{j&&(n(!y||y.type?new pc(null,e,j):y),j.abort(),j=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const g=aM(a.url);if(g&&wr.protocols.indexOf(g)===-1){n(new qe("Unsupported protocol "+g+":",qe.ERR_BAD_REQUEST,e));return}j.send(i||null)})},mM=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let n=new AbortController,a;const i=function(d){if(!a){a=!0,o();const u=d instanceof Error?d:this.reason;n.abort(u instanceof qe?u:new pc(u instanceof Error?u.message:u))}};let l=t&&setTimeout(()=>{l=null,i(new qe(`timeout ${t} of ms exceeded`,qe.ETIMEDOUT))},t);const o=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>he.asap(o),c}},pM=function*(e,t){let s=e.byteLength;if(s<t){yield e;return}let n=0,a;for(;n<s;)a=n+t,yield e.slice(n,a),n=a},xM=async function*(e,t){for await(const s of gM(e))yield*pM(s,t)},gM=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:s,value:n}=await t.read();if(s)break;yield n}}finally{await t.cancel()}},ON=(e,t,s,n)=>{const a=xM(e,t);let i=0,l,o=c=>{l||(l=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await a.next();if(d){o(),c.close();return}let h=u.byteLength;if(s){let f=i+=h;s(f)}c.enqueue(new Uint8Array(u))}catch(d){throw o(d),d}},cancel(c){return o(c),a.return()}},{highWaterMark:2})},RN=64*1024,{isFunction:lh}=he,yM=(({Request:e,Response:t})=>({Request:e,Response:t}))(he.global),{ReadableStream:PN,TextEncoder:MN}=he.global,DN=(e,...t)=>{try{return!!e(...t)}catch{return!1}},bM=e=>{e=he.merge.call({skipUndefined:!0},yM,e);const{fetch:t,Request:s,Response:n}=e,a=t?lh(t):typeof fetch=="function",i=lh(s),l=lh(n);if(!a)return!1;const o=a&&lh(PN),c=a&&(typeof MN=="function"?(x=>p=>x.encode(p))(new MN):async x=>new Uint8Array(await new s(x).arrayBuffer())),d=i&&o&&DN(()=>{let x=!1;const p=new s(wr.origin,{body:new PN,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!p}),u=l&&o&&DN(()=>he.isReadableStream(new n("").body)),h={stream:u&&(x=>x.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!h[x]&&(h[x]=(p,j)=>{let v=p&&p[x];if(v)return v.call(p);throw new qe(`Response type '${x}' is not supported`,qe.ERR_NOT_SUPPORT,j)})});const f=async x=>{if(x==null)return 0;if(he.isBlob(x))return x.size;if(he.isSpecCompliantForm(x))return(await new s(wr.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(he.isArrayBufferView(x)||he.isArrayBuffer(x))return x.byteLength;if(he.isURLSearchParams(x)&&(x=x+""),he.isString(x))return(await c(x)).byteLength},m=async(x,p)=>{const j=he.toFiniteNumber(x.getContentLength());return j??f(p)};return async x=>{let{url:p,method:j,data:v,signal:g,cancelToken:y,timeout:b,onDownloadProgress:N,onUploadProgress:k,responseType:w,headers:_,withCredentials:S="same-origin",fetchOptions:E}=Mk(x),A=t||fetch;w=w?(w+"").toLowerCase():"text";let C=mM([g,y&&y.toAbortSignal()],b),D=null;const M=C&&C.unsubscribe&&(()=>{C.unsubscribe()});let L;try{if(k&&d&&j!=="get"&&j!=="head"&&(L=await m(_,v))!==0){let F=new s(p,{method:"POST",body:v,duplex:"half"}),q;if(he.isFormData(v)&&(q=F.headers.get("content-type"))&&_.setContentType(q),F.body){const[I,$]=CN(L,Ff(AN(k)));v=ON(F.body,RN,I,$)}}he.isString(S)||(S=S?"include":"omit");const z=i&&"credentials"in s.prototype,Y={...E,signal:C,method:j.toUpperCase(),headers:_.normalize().toJSON(),body:v,duplex:"half",credentials:z?S:void 0};D=i&&new s(p,Y);let X=await(i?A(D,E):A(p,Y));const Z=u&&(w==="stream"||w==="response");if(u&&(N||Z&&M)){const F={};["status","statusText","headers"].forEach(G=>{F[G]=X[G]});const q=he.toFiniteNumber(X.headers.get("content-length")),[I,$]=N&&CN(q,Ff(AN(N),!0))||[];X=new n(ON(X.body,RN,I,()=>{$&&$(),M&&M()}),F)}w=w||"text";let W=await h[he.findKey(h,w)||"text"](X,x);return!Z&&M&&M(),await new Promise((F,q)=>{Rk(F,q,{data:W,headers:Qr.from(X.headers),status:X.status,statusText:X.statusText,config:x,request:D})})}catch(z){throw M&&M(),z&&z.name==="TypeError"&&/Load failed|fetch/i.test(z.message)?Object.assign(new qe("Network Error",qe.ERR_NETWORK,x,D),{cause:z.cause||z}):qe.from(z,z&&z.code,x,D)}}},vM=new Map,Dk=e=>{let t=e?e.env:{};const{fetch:s,Request:n,Response:a}=t,i=[n,a,s];let l=i.length,o=l,c,d,u=vM;for(;o--;)c=i[o],d=u.get(c),d===void 0&&u.set(c,d=o?new Map:bM(t)),u=d;return d};Dk();const pg={http:FP,xhr:fM,fetch:{get:Dk}};he.forEach(pg,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const LN=e=>`- ${e}`,jM=e=>he.isFunction(e)||e===null||e===!1,Lk={getAdapter:(e,t)=>{e=he.isArray(e)?e:[e];const{length:s}=e;let n,a;const i={};for(let l=0;l<s;l++){n=e[l];let o;if(a=n,!jM(n)&&(a=pg[(o=String(n)).toLowerCase()],a===void 0))throw new qe(`Unknown adapter '${o}'`);if(a&&(he.isFunction(a)||(a=a.get(t))))break;i[o||"#"+l]=a}if(!a){const l=Object.entries(i).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let o=s?l.length>1?`since :
`+l.map(LN).join(`
`):" "+LN(l[0]):"as no adapter specified";throw new qe("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return a},adapters:pg};function Jp(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new pc(null,e)}function FN(e){return Jp(e),e.headers=Qr.from(e.headers),e.data=Zp.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Lk.getAdapter(e.adapter||Su.adapter,e)(e).then(function(n){return Jp(e),n.data=Zp.call(e,e.transformResponse,n),n.headers=Qr.from(n.headers),n},function(n){return Ok(n)||(Jp(e),n&&n.response&&(n.response.data=Zp.call(e,e.transformResponse,n.response),n.response.headers=Qr.from(n.response.headers))),Promise.reject(n)})}const Fk="1.12.2",Fm={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Fm[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const IN={};Fm.transitional=function(t,s,n){function a(i,l){return"[Axios v"+Fk+"] Transitional option '"+i+"'"+l+(n?". "+n:"")}return(i,l,o)=>{if(t===!1)throw new qe(a(l," has been removed"+(s?" in "+s:"")),qe.ERR_DEPRECATED);return s&&!IN[l]&&(IN[l]=!0,console.warn(a(l," has been deprecated since v"+s+" and will be removed in the near future"))),t?t(i,l,o):!0}};Fm.spelling=function(t){return(s,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function NM(e,t,s){if(typeof e!="object")throw new qe("options must be an object",qe.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const i=n[a],l=t[i];if(l){const o=e[i],c=o===void 0||l(o,i,e);if(c!==!0)throw new qe("option "+i+" must be "+c,qe.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new qe("Unknown option "+i,qe.ERR_BAD_OPTION)}}const Lh={assertOptions:NM,validators:Fm},fn=Lh.validators;let dl=class{constructor(t){this.defaults=t||{},this.interceptors={request:new kN,response:new kN}}async request(t,s){try{return await this._request(t,s)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,s){typeof t=="string"?(s=s||{},s.url=t):s=t||{},s=kl(this.defaults,s);const{transitional:n,paramsSerializer:a,headers:i}=s;n!==void 0&&Lh.assertOptions(n,{silentJSONParsing:fn.transitional(fn.boolean),forcedJSONParsing:fn.transitional(fn.boolean),clarifyTimeoutError:fn.transitional(fn.boolean)},!1),a!=null&&(he.isFunction(a)?s.paramsSerializer={serialize:a}:Lh.assertOptions(a,{encode:fn.function,serialize:fn.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),Lh.assertOptions(s,{baseUrl:fn.spelling("baseURL"),withXsrfToken:fn.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let l=i&&he.merge(i.common,i[s.method]);i&&he.forEach(["delete","get","head","post","put","patch","common"],x=>{delete i[x]}),s.headers=Qr.concat(l,i);const o=[];let c=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(s)===!1||(c=c&&p.synchronous,o.unshift(p.fulfilled,p.rejected))});const d=[];this.interceptors.response.forEach(function(p){d.push(p.fulfilled,p.rejected)});let u,h=0,f;if(!c){const x=[FN.bind(this),void 0];for(x.unshift(...o),x.push(...d),f=x.length,u=Promise.resolve(s);h<f;)u=u.then(x[h++],x[h++]);return u}f=o.length;let m=s;for(;h<f;){const x=o[h++],p=o[h++];try{m=x(m)}catch(j){p.call(this,j);break}}try{u=FN.call(this,m)}catch(x){return Promise.reject(x)}for(h=0,f=d.length;h<f;)u=u.then(d[h++],d[h++]);return u}getUri(t){t=kl(this.defaults,t);const s=Pk(t.baseURL,t.url,t.allowAbsoluteUrls);return Ck(s,t.params,t.paramsSerializer)}};he.forEach(["delete","get","head","options"],function(t){dl.prototype[t]=function(s,n){return this.request(kl(n||{},{method:t,url:s,data:(n||{}).data}))}});he.forEach(["post","put","patch"],function(t){function s(n){return function(i,l,o){return this.request(kl(o||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}dl.prototype[t]=s(),dl.prototype[t+"Form"]=s(!0)});let wM=class Ik{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(i){s=i});const n=this;this.promise.then(a=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](a);n._listeners=null}),this.promise.then=a=>{let i;const l=new Promise(o=>{n.subscribe(o),i=o}).then(a);return l.cancel=function(){n.unsubscribe(i)},l},t(function(i,l,o){n.reason||(n.reason=new pc(i,l,o),s(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const s=this._listeners.indexOf(t);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const t=new AbortController,s=n=>{t.abort(n)};return this.subscribe(s),t.signal.unsubscribe=()=>this.unsubscribe(s),t.signal}static source(){let t;return{token:new Ik(function(a){t=a}),cancel:t}}};function _M(e){return function(s){return e.apply(null,s)}}function SM(e){return he.isObject(e)&&e.isAxiosError===!0}const xg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(xg).forEach(([e,t])=>{xg[t]=e});function Bk(e){const t=new dl(e),s=xk(dl.prototype.request,t);return he.extend(s,dl.prototype,t,{allOwnKeys:!0}),he.extend(s,t,null,{allOwnKeys:!0}),s.create=function(a){return Bk(kl(e,a))},s}const Zt=Bk(Su);Zt.Axios=dl;Zt.CanceledError=pc;Zt.CancelToken=wM;Zt.isCancel=Ok;Zt.VERSION=Fk;Zt.toFormData=Lm;Zt.AxiosError=qe;Zt.Cancel=Zt.CanceledError;Zt.all=function(t){return Promise.all(t)};Zt.spread=_M;Zt.isAxiosError=SM;Zt.mergeConfig=kl;Zt.AxiosHeaders=Qr;Zt.formToJSON=e=>Tk(he.isHTMLForm(e)?new FormData(e):e);Zt.getAdapter=Lk.getAdapter;Zt.HttpStatusCode=xg;Zt.default=Zt;const{Axios:cX,AxiosError:dX,CanceledError:uX,isCancel:hX,CancelToken:fX,VERSION:mX,all:pX,Cancel:xX,isAxiosError:gX,spread:yX,toFormData:bX,AxiosHeaders:vX,HttpStatusCode:jX,formToJSON:NX,getAdapter:wX,mergeConfig:_X}=Zt,qk="http://localhost:5001/api",ee=Zt.create({baseURL:qk,headers:{"Content-Type":"application/json"}});ee.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));ee.interceptors.response.use(e=>e.data,e=>{var t,s;return((t=e.response)==null?void 0:t.status)===401&&(localStorage.clear(),window.location.href="/login"),Promise.reject(((s=e.response)==null?void 0:s.data)||e.message)});const cs=e=>{const t=new FormData;return Object.keys(e).forEach(s=>{e[s]!==null&&e[s]!==void 0&&e[s]!==""&&(s==="attachments"&&e[s]?e[s]instanceof FileList?Array.from(e[s]).forEach(n=>t.append("attachments",n)):Array.isArray(e[s])&&e[s].forEach(n=>t.append("attachments",n)):Array.isArray(e[s])?e[s].forEach(n=>t.append(`${s}[]`,n)):t.append(s,e[s]))}),t},Zo={login:e=>ee.post("/auth/login",e),getProfile:()=>ee.get("/auth/profile"),changePassword:e=>ee.put("/auth/change-password",e),logout:()=>ee.post("/auth/logout")},Fr={getAll:e=>ee.get("/students",{params:e}),getById:e=>ee.get(`/students/${e}`),create:e=>ee.post("/students",cs(e),{headers:{"Content-Type":"multipart/form-data"}}),update:(e,t)=>ee.put(`/students/${e}`,cs(t),{headers:{"Content-Type":"multipart/form-data"}}),delete:e=>ee.delete(`/students/${e}`),getAttendance:(e,t)=>ee.get(`/students/${e}/attendance`,{params:t}),getResults:(e,t)=>ee.get(`/students/${e}/results`,{params:t})},Pt={getAll:e=>ee.get("/teachers",{params:e}),getById:e=>ee.get(`/teachers/${e}`),create:e=>ee.post("/teachers",cs(e),{headers:{"Content-Type":"multipart/form-data"}}),update:(e,t)=>ee.put(`/teachers/${e}`,cs(t),{headers:{"Content-Type":"multipart/form-data"}}),delete:e=>ee.delete(`/teachers/${e}`),getSchedule:(e,t)=>ee.get(`/teachers/${e}/schedule`,{params:t}),getScheduleDetail:e=>ee.get(`/teachers/my-schedule/${e}`),assignSchedule:e=>ee.post("/teachers/schedule",e),getMySubjects:()=>ee.get("/teachers/my-subjects")},Cs={getAll:e=>ee.get("/staff",{params:e}),getById:e=>ee.get(`/staff/${e}`),create:e=>ee.post("/staff",cs(e),{headers:{"Content-Type":"multipart/form-data"}}),update:(e,t)=>ee.put(`/staff/${e}`,cs(t),{headers:{"Content-Type":"multipart/form-data"}}),delete:e=>ee.delete(`/staff/${e}`)},rn={getAll:e=>ee.get("/frontdesk",{params:e}),getById:e=>ee.get(`/frontdesk/${e}`),create:e=>ee.post("/frontdesk",cs(e),{headers:{"Content-Type":"multipart/form-data"}}),update:(e,t)=>ee.put(`/frontdesk/${e}`,cs(t),{headers:{"Content-Type":"multipart/form-data"}}),delete:e=>ee.delete(`/frontdesk/${e}`),logVisitor:e=>ee.post("/frontdesk/visitors",e),getVisitors:e=>ee.get("/frontdesk/visitors/logs",{params:e}),checkoutVisitor:e=>ee.put(`/frontdesk/visitors/${e}/checkout`),createInquiry:e=>ee.post("/frontdesk/inquiries",e),getInquiries:e=>ee.get("/frontdesk/inquiries/list",{params:e}),updateInquiry:(e,t)=>ee.put(`/frontdesk/inquiries/${e}`,t)},sn={getAll:e=>ee.get("/subjects",{params:e}),getById:e=>ee.get(`/subjects/${e}`),create:e=>ee.post("/subjects",e),update:(e,t)=>ee.put(`/subjects/${e}`,t),delete:e=>ee.delete(`/subjects/${e}`)},$l={getFiles:e=>ee.get("/subject-files",{params:e}),uploadFile:e=>ee.post("/subject-files/upload",e,{headers:{"Content-Type":"multipart/form-data"}}),createFolder:e=>ee.post("/subject-files/folder",e),updateItem:(e,t)=>ee.put(`/subject-files/${e}`,t),deleteItem:e=>ee.delete(`/subject-files/${e}`),downloadFile:e=>{const t=localStorage.getItem("token");return fetch(`http://localhost:5001/api/subject-files/${e}/download`,{headers:{Authorization:`Bearer ${t}`}}).then(s=>s.blob())}},Bc={getAll:e=>ee.get("/admissions",{params:e}),getById:e=>ee.get(`/admissions/${e}`),create:e=>ee.post("/admissions",e),update:(e,t)=>ee.put(`/admissions/${e}`,t),delete:e=>ee.delete(`/admissions/${e}`),convertToStudent:e=>ee.post(`/admissions/${e}/convert-to-student`)},kb={getByClass:e=>ee.get(`/class-subjects/class/${e}`),getBySection:e=>ee.get(`/class-subjects/section/${e}`),getAvailable:e=>ee.get(`/class-subjects/available/${e}`),assign:e=>ee.post("/class-subjects/assign",e),assignMultiple:e=>ee.post("/class-subjects/assign-multiple",e),update:(e,t)=>ee.put(`/class-subjects/${e}`,t),delete:e=>ee.delete(`/class-subjects/${e}`)},He={getAll:e=>ee.get("/classes",{params:e}),getMyClasses:()=>ee.get("/classes/my-classes"),getById:e=>ee.get(`/classes/${e}`),getSections:e=>ee.get(`/classes/${e}/sections`),getMySections:e=>ee.get(`/classes/${e}/my-sections`),getStudents:e=>ee.get(`/classes/${e}/students`),create:e=>ee.post("/classes",e),update:(e,t)=>ee.put(`/classes/${e}`,t),delete:e=>ee.delete(`/classes/${e}`),assignTeacher:(e,t)=>ee.put(`/classes/${e}/assign-teacher`,{teacher_id:t}),removeTeacher:e=>ee.delete(`/classes/${e}/remove-teacher`),getSections:e=>ee.get(`/classes/${e}/sections`),getMySections:e=>ee.get(`/classes/${e}/my-sections`),getSectionById:e=>ee.get(`/classes/sections/${e}`),createSection:(e,t)=>ee.post(`/classes/${e}/sections`,t),updateSection:(e,t)=>ee.put(`/classes/sections/${e}`,t),deleteSection:e=>ee.delete(`/classes/sections/${e}`),getSectionStudents:e=>ee.get(`/classes/sections/${e}/students`),assignSectionTeacher:(e,t)=>ee.put(`/classes/sections/${e}/assign-teacher`,{teacher_id:t}),removeSectionTeacher:e=>ee.delete(`/classes/sections/${e}/remove-teacher`),getSectionSubjectTeachers:e=>ee.get(`/classes/sections/${e}/subject-teachers`),assignSectionSubjectTeacher:(e,t)=>ee.post(`/classes/sections/${e}/subject-teachers`,t),updateSectionSubjectTeacher:(e,t)=>ee.put(`/classes/section-subject-teachers/${e}`,t),removeSectionSubjectTeacher:e=>ee.delete(`/classes/section-subject-teachers/${e}`),getClassSubjects:(e,t)=>ee.get(`/class-subjects/class/${e}`,{params:t}),getAvailableSubjects:(e,t)=>ee.get(`/class-subjects/available/${e}`,{params:t}),assignSubjectToClass:e=>ee.post("/class-subjects/assign",e),assignMultipleSubjects:e=>ee.post("/class-subjects/assign-multiple",e),updateClassSubject:(e,t)=>ee.put(`/class-subjects/${e}`,t),removeSubjectFromClass:e=>ee.delete(`/class-subjects/${e}`),getSectionSubjects:(e,t)=>ee.get(`/class-subjects/section/${e}`,{params:t}),assignTeacherToSectionSubject:e=>ee.post("/class-subjects/section-teacher",e)},xn={mark:e=>ee.post("/attendance",e),get:e=>ee.get("/attendance",{params:e}),getStats:e=>ee.get("/attendance/stats",{params:e}),checkSubmission:e=>ee.get("/attendance/check-submission",{params:e}),submit:e=>ee.post("/attendance/submit",e),unlock:e=>ee.post("/attendance/unlock",e)},Rs={create:e=>ee.post("/exams",e),getAll:e=>ee.get("/exams",{params:e}),getById:e=>ee.get(`/exams/${e}`),update:(e,t)=>ee.put(`/exams/${e}`,t),delete:e=>ee.delete(`/exams/${e}`),getAcademicYears:()=>ee.get("/exams/academic-years"),getResults:(e,t)=>ee.get(`/exams/${e}/results`,{params:{subject_id:t}}),getStudentResults:(e,t)=>ee.get(`/exams/${e}/students/${t}/results`),enterResults:(e,t)=>ee.post(`/exams/${e}/results`,t),updateResult:(e,t)=>ee.put(`/exams/results/${e}`,t),deleteResult:e=>ee.delete(`/exams/results/${e}`)},oo={getExamSchedules:e=>ee.get(`/exam-schedules/exam/${e}`),getById:e=>ee.get(`/exam-schedules/${e}`),create:e=>ee.post("/exam-schedules",e),createBulk:e=>ee.post("/exam-schedules/bulk",e),update:(e,t)=>ee.put(`/exam-schedules/${e}`,t),delete:e=>ee.delete(`/exam-schedules/${e}`),deleteExamSchedules:e=>ee.delete(`/exam-schedules/exam/${e}`)},Ps={create:e=>ee.post("/assignments",cs(e),{headers:{"Content-Type":"multipart/form-data"}}),getAll:e=>ee.get("/assignments",{params:e}),getById:e=>ee.get(`/assignments/${e}`),update:(e,t)=>ee.put(`/assignments/${e}`,cs(t),{headers:{"Content-Type":"multipart/form-data"}}),delete:e=>ee.delete(`/assignments/${e}`),submit:(e,t)=>ee.post(`/assignments/${e}/submit`,cs(t),{headers:{"Content-Type":"multipart/form-data"}}),getSubmissions:e=>ee.get(`/assignments/${e}/submissions`),getMySubmission:e=>ee.get(`/assignments/${e}/my-submission`),gradeSubmission:(e,t)=>ee.put(`/assignments/submissions/${e}/grade`,t),updateSubmission:(e,t)=>ee.put(`/assignments/submissions/${e}`,cs(t),{headers:{"Content-Type":"multipart/form-data"}})},Ja={getAll:e=>ee.get("/notifications",{params:e}),getUnreadCount:()=>ee.get("/notifications/unread-count"),markAsRead:e=>ee.put(`/notifications/${e}/read`),markAllAsRead:()=>ee.put("/notifications/mark-all-read"),delete:e=>ee.delete(`/notifications/${e}`)},En={createHead:e=>ee.post("/fees/heads",e),getHeads:()=>ee.get("/fees/heads"),updateHead:(e,t)=>ee.put(`/fees/heads/${e}`,t),deleteHead:e=>ee.delete(`/fees/heads/${e}`),createStructure:e=>ee.post("/fees/structure",e),getStructure:e=>ee.get("/fees/structure",{params:e}),getStudentStatus:e=>ee.get(`/fees/student/${e}`),collectFee:e=>ee.post("/fees/collect",e),getPayments:e=>ee.get("/fees/payments",{params:e})},xd={create:e=>ee.post("/events",e),getAll:e=>ee.get("/events",{params:e}),getById:e=>ee.get(`/events/${e}`),update:(e,t)=>ee.put(`/events/${e}`,t),delete:e=>ee.delete(`/events/${e}`),toggleStatus:e=>ee.patch(`/events/${e}/toggle-status`)},Ki={getAll:e=>ee.get("/announcements",{params:e}),getById:e=>ee.get(`/announcements/${e}`),create:e=>ee.post("/announcements",e),update:(e,t)=>ee.put(`/announcements/${e}`,t),delete:e=>ee.delete(`/announcements/${e}`),getMyAnnouncements:()=>ee.get("/announcements/my-announcements"),getMyCreated:()=>ee.get("/announcements/my-created"),getUrgent:()=>ee.get("/announcements/urgent"),getByClass:e=>ee.get(`/announcements/class/${e}`),getBySection:e=>ee.get(`/announcements/section/${e}`),toggleStatus:e=>ee.patch(`/announcements/${e}/toggle-status`),publish:e=>ee.patch(`/announcements/${e}/publish`),getActive:()=>ee.get("/announcements",{params:{status:"active"}}),getExpired:()=>ee.get("/announcements",{params:{status:"expired"}}),getInactive:()=>ee.get("/announcements",{params:{status:"inactive"}}),getByAudience:e=>ee.get("/announcements",{params:{target_audience:e}}),getByPriority:e=>ee.get("/announcements",{params:{priority:e}})},xi={getAllBooks:e=>ee.get("/library/books",{params:e}),getBookById:e=>ee.get(`/library/books/${e}`),addBook:e=>ee.post("/library/books",e),updateBook:(e,t)=>ee.put(`/library/books/${e}`,t),deleteBook:e=>ee.delete(`/library/books/${e}`),issueBook:e=>ee.post("/library/issue",e),returnBook:e=>ee.post("/library/return",e),getTransactions:e=>ee.get("/library/transactions",{params:e}),getMyBooks:()=>ee.get("/library/my-books")},Eb={getStats:()=>ee.get("/dashboard/stats"),getTeacherStats:e=>ee.get(`/dashboard/teacher-stats/${e}`),getRecentRegistrations:(e=5)=>ee.get("/dashboard/recent-registrations",{params:{limit:e}})},gi={getAllRooms:e=>ee.get("/hostel/rooms",{params:e}),createRoom:e=>ee.post("/hostel/rooms",e),updateRoom:(e,t)=>ee.put(`/hostel/rooms/${e}`,t),deleteRoom:e=>ee.delete(`/hostel/rooms/${e}`),getRoomDetails:e=>ee.get(`/hostel/rooms/${e}`),allocateRoom:e=>ee.post("/hostel/allocate",e),vacateRoom:e=>ee.post("/hostel/vacate",e),getMyRoom:()=>ee.get("/hostel/my-room")},St={getAllVehicles:()=>ee.get("/transport/vehicles"),createVehicle:e=>ee.post("/transport/vehicles",e),updateVehicle:(e,t)=>ee.put(`/transport/vehicles/${e}`,t),deleteVehicle:e=>ee.delete(`/transport/vehicles/${e}`),getAllRoutes:()=>ee.get("/transport/routes"),createRoute:e=>ee.post("/transport/routes",e),updateRoute:(e,t)=>ee.put(`/transport/routes/${e}`,t),deleteRoute:e=>ee.delete(`/transport/routes/${e}`),getAllLocations:()=>ee.get("/transport/allocations"),allocateTransport:e=>ee.post("/transport/allocate",e),updateAllocation:(e,t)=>ee.put(`/transport/allocations/${e}`,t),cancelAllocation:e=>ee.delete(`/transport/allocations/${e}`),getMyTransport:()=>ee.get("/transport/my-transport"),getBusAttendanceReports:e=>ee.get("/transport/attendance-reports",{params:e}),getBusAttendanceReportById:e=>ee.get(`/transport/attendance-reports/${e}`),createBusAttendanceReport:e=>ee.post("/transport/attendance-reports",e),updateBusAttendanceReport:(e,t)=>ee.put(`/transport/attendance-reports/${e}`,t),deleteBusAttendanceReport:e=>ee.delete(`/transport/attendance-reports/${e}`),verifyBusAttendanceReport:e=>ee.patch(`/transport/attendance-reports/${e}/verify`),getRouteStudents:e=>ee.get(`/transport/routes/${e}/students`),getMyBusAttendance:e=>ee.get("/transport/my-bus-attendance",{params:e})},ex={getStudentResults:e=>ee.get(`/results/student/${e}`),getStudentExamResults:(e,t)=>ee.get(`/results/student/${e}/exam/${t}`),downloadResultPDF:(e,t)=>{const s=localStorage.getItem("token");return fetch(`${qk}/results/student/${e}/exam/${t}/pdf`,{headers:{Authorization:`Bearer ${s}`}}).then(n=>{if(!n.ok)throw new Error("Failed to download PDF");return n.blob()}).then(n=>{const a=window.URL.createObjectURL(n),i=document.createElement("a");i.href=a,i.download=`marksheet_${e}_${t}.pdf`,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(a),document.body.removeChild(i)})}},qc={getAll:e=>ee.get("/payroll",{params:e}),getById:e=>ee.get(`/payroll/${e}`),create:e=>ee.post("/payroll",e),update:(e,t)=>ee.put(`/payroll/${e}`,t),delete:e=>ee.delete(`/payroll/${e}`),getEmployeePayroll:(e,t)=>ee.get(`/payroll/employee/${e}/${t}`)},Jc={getAll:e=>ee.get("/daily-reports",{params:e}),getById:e=>ee.get(`/daily-reports/${e}`),create:e=>ee.post("/daily-reports",e),update:(e,t)=>ee.put(`/daily-reports/${e}`,t),delete:e=>ee.delete(`/daily-reports/${e}`)},ed={getAllBlogs:()=>ee.get("/blogs"),getBlogById:e=>ee.get(`/blogs/${e}`),createBlog:e=>ee.post("/blogs",e),updateBlog:(e,t)=>ee.put(`/blogs/${e}`,t),deleteBlog:e=>ee.delete(`/blogs/${e}`)},Ma={getComprehensiveReport:e=>ee.get(`/students/${e}/comprehensive-report`),getAttendanceReport:(e,t)=>ee.get(`/students/${e}/reports/attendance`,{params:t}),getExamReport:(e,t)=>ee.get(`/students/${e}/reports/exams`,{params:t}),getAssignmentReport:(e,t)=>ee.get(`/students/${e}/reports/assignments`,{params:t}),getFeeReport:e=>ee.get(`/students/${e}/reports/fees`),getTransportReport:e=>ee.get(`/students/${e}/reports/transport`),getHostelReport:e=>ee.get(`/students/${e}/reports/hostel`),getLibraryReport:(e,t)=>ee.get(`/students/${e}/reports/library`,{params:t})},tx={get:e=>ee.get("/timetable",{params:e}),create:e=>ee.post("/timetable",e),update:(e,t)=>ee.put(`/timetable/${e}`,t),delete:e=>ee.delete(`/timetable/${e}`)},Qi={getAll:e=>ee.get("/leaves",{params:e}),getMyLeaves:()=>ee.get("/leaves/my-leaves"),getPendingCount:()=>ee.get("/leaves/pending-count"),getById:e=>ee.get(`/leaves/${e}`),create:e=>ee.post("/leaves",cs(e),{headers:{"Content-Type":"multipart/form-data"}}),update:(e,t)=>ee.put(`/leaves/${e}`,t),approve:(e,t)=>ee.patch(`/leaves/${e}/approve`,{admin_remarks:t}),decline:(e,t)=>ee.patch(`/leaves/${e}/decline`,{admin_remarks:t}),delete:e=>ee.delete(`/leaves/${e}`)},oh={getAll:e=>ee.get("/discipline",{params:e}),getById:e=>ee.get(`/discipline/${e}`),getMyDiscipline:e=>ee.get("/discipline/my-records/view",{params:e}),create:e=>ee.post("/discipline",e),update:(e,t)=>ee.put(`/discipline/${e}`,t),delete:e=>ee.delete(`/discipline/${e}`)},Fh=Nb("auth/login",async(e,{rejectWithValue:t})=>{try{return await Zo.login(e)}catch(s){return t(s.message||"Login failed")}}),rx=Nb("auth/getProfile",async(e,{rejectWithValue:t})=>{try{return await Zo.getProfile()}catch(s){return t(s.message||"Failed to fetch profile")}}),sx=Nb("auth/changePassword",async(e,{rejectWithValue:t})=>{try{return await Zo.changePassword(e)}catch(s){return t(s.message||"Failed to change password")}}),kM=()=>{try{const e=localStorage.getItem("token"),t=localStorage.getItem("user");if(e&&t)return{user:JSON.parse(t),token:e,isAuthenticated:!0}}catch(e){console.error("Error loading auth state:",e)}return{user:null,token:null,isAuthenticated:!1}},EM={...kM(),loading:!1,error:null},$k=HR({name:"auth",initialState:EM,reducers:{setCredentials:(e,t)=>{const{user:s,token:n}=t.payload;e.user=s,e.token=n,e.isAuthenticated=!0,e.error=null,localStorage.setItem("token",n),localStorage.setItem("user",JSON.stringify(s))},updateUser:(e,t)=>{e.user={...e.user,...t.payload},localStorage.setItem("user",JSON.stringify(e.user))},logout:e=>{e.user=null,e.token=null,e.isAuthenticated=!1,e.error=null,localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.clear()},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Fh.pending,t=>{t.loading=!0,t.error=null}).addCase(Fh.fulfilled,(t,s)=>{t.loading=!1,t.user=s.payload.data.user,t.token=s.payload.data.token,t.isAuthenticated=!0,localStorage.setItem("token",s.payload.data.token),localStorage.setItem("user",JSON.stringify(s.payload.data.user))}).addCase(Fh.rejected,(t,s)=>{t.loading=!1,t.error=s.payload,t.isAuthenticated=!1}),e.addCase(rx.pending,t=>{t.loading=!0}).addCase(rx.fulfilled,(t,s)=>{t.loading=!1,t.user={...t.user,...s.payload.data},localStorage.setItem("user",JSON.stringify(t.user))}).addCase(rx.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}),e.addCase(sx.pending,t=>{t.loading=!0,t.error=null}).addCase(sx.fulfilled,t=>{t.loading=!1}).addCase(sx.rejected,(t,s)=>{t.loading=!1,t.error=s.payload})}}),{setCredentials:SX,updateUser:kX,logout:CM,clearError:EX}=$k.actions,vs=e=>e.auth.user,Uk=e=>e.auth.isAuthenticated,AM=e=>e.auth.loading,TM=e=>e.auth.error,mr=e=>{var t;return(t=e.auth.user)==null?void 0:t.role},gg=$k.reducer,OM=TR({reducer:{auth:gg},middleware:e=>e({serializableCheck:!1}),devTools:!1});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var RM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ne=(e,t)=>{const s=O.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:o="",children:c,...d},u)=>O.createElement("svg",{ref:u,...RM,width:a,height:a,stroke:n,strokeWidth:l?Number(i)*24/Number(a):i,className:["lucide",`lucide-${PM(e)}`,o].join(" "),...d},[...t.map(([h,f])=>O.createElement(h,f)),...Array.isArray(c)?c:[c]]));return s.displayName=`${e}`,s};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=Ne("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=Ne("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=Ne("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=Ne("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=Ne("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=Ne("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=Ne("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=Ne("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yg=Ne("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=Ne("BookMarked",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["polyline",{points:"10 2 10 10 13 7 16 10 16 2",key:"13o6vz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=Ne("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=Ne("BookText",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["path",{d:"M8 7h6",key:"1f0q6e"}],["path",{d:"M8 11h8",key:"vwpz6n"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=Ne("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=Ne("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=Ne("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=Ne("Bus",[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=Ne("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=Ne("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=Ne("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=Ne("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=Ne("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=Ne("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=Ne("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=Ne("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=Ne("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=Ne("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=Ne("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=Ne("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=Ne("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=Ne("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=Ne("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=Ne("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=Ne("FileCheck",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=Ne("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=Ne("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=Ne("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=Ne("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=Ne("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=Ne("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=Ne("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=Ne("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=Ne("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=Ne("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=Ne("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=Ne("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=Ne("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=Ne("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=Ne("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=Ne("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=Ne("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=Ne("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=Ne("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vg=Ne("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=Ne("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=Ne("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=Ne("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=Ne("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=Ne("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=Ne("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=Ne("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=Ne("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=Ne("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=Ne("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=Ne("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=Ne("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=Ne("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=Ne("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ch=Ne("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=Ne("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dl=Ne("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=Ne("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=Ne("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=Ne("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=Ne("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=Ne("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=Ne("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=Ne("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=Ne("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=Ne("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=Ne("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=Ne("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=Ne("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=Ne("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=Ne("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.34l1 1L22 8v8",key:"ubwiq0"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2l10 10Z",key:"1l10zd"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=Ne("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=Ne("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=Ne("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=Ne("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=Ne("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),iD=({children:e})=>r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("div",{className:"bg-blue-600 p-4 rounded-2xl shadow-lg",children:r.jsx(Cl,{className:"w-12 h-12 text-white"})})}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Gyan School"}),r.jsx("p",{className:"text-gray-600",children:"School Management System"})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:e}),r.jsx("div",{className:"text-center mt-8 text-sm text-gray-600",children:r.jsx("p",{children:" 2024 Gyan School. All rights reserved."})})]})}),Pn=Object.create(null);Pn.open="0";Pn.close="1";Pn.ping="2";Pn.pong="3";Pn.message="4";Pn.upgrade="5";Pn.noop="6";const Ih=Object.create(null);Object.keys(Pn).forEach(e=>{Ih[Pn[e]]=e});const jg={type:"error",data:"parser error"},Yk=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Gk=typeof ArrayBuffer=="function",Kk=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Tb=({type:e,data:t},s,n)=>Yk&&t instanceof Blob?s?n(t):YN(t,n):Gk&&(t instanceof ArrayBuffer||Kk(t))?s?n(t):YN(new Blob([t]),n):n(Pn[e]+(t||"")),YN=(e,t)=>{const s=new FileReader;return s.onload=function(){const n=s.result.split(",")[1];t("b"+(n||""))},s.readAsDataURL(e)};function GN(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let nx;function lD(e,t){if(Yk&&e.data instanceof Blob)return e.data.arrayBuffer().then(GN).then(t);if(Gk&&(e.data instanceof ArrayBuffer||Kk(e.data)))return t(GN(e.data));Tb(e,!1,s=>{nx||(nx=new TextEncoder),t(nx.encode(s))})}const KN="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",td=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<KN.length;e++)td[KN.charCodeAt(e)]=e;const oD=e=>{let t=e.length*.75,s=e.length,n,a=0,i,l,o,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const d=new ArrayBuffer(t),u=new Uint8Array(d);for(n=0;n<s;n+=4)i=td[e.charCodeAt(n)],l=td[e.charCodeAt(n+1)],o=td[e.charCodeAt(n+2)],c=td[e.charCodeAt(n+3)],u[a++]=i<<2|l>>4,u[a++]=(l&15)<<4|o>>2,u[a++]=(o&3)<<6|c&63;return d},cD=typeof ArrayBuffer=="function",Ob=(e,t)=>{if(typeof e!="string")return{type:"message",data:Qk(e,t)};const s=e.charAt(0);return s==="b"?{type:"message",data:dD(e.substring(1),t)}:Ih[s]?e.length>1?{type:Ih[s],data:e.substring(1)}:{type:Ih[s]}:jg},dD=(e,t)=>{if(cD){const s=oD(e);return Qk(s,t)}else return{base64:!0,data:e}},Qk=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Xk="",uD=(e,t)=>{const s=e.length,n=new Array(s);let a=0;e.forEach((i,l)=>{Tb(i,!1,o=>{n[l]=o,++a===s&&t(n.join(Xk))})})},hD=(e,t)=>{const s=e.split(Xk),n=[];for(let a=0;a<s.length;a++){const i=Ob(s[a],t);if(n.push(i),i.type==="error")break}return n};function fD(){return new TransformStream({transform(e,t){lD(e,s=>{const n=s.length;let a;if(n<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,n);else if(n<65536){a=new Uint8Array(3);const i=new DataView(a.buffer);i.setUint8(0,126),i.setUint16(1,n)}else{a=new Uint8Array(9);const i=new DataView(a.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(n))}e.data&&typeof e.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(s)})}})}let ax;function dh(e){return e.reduce((t,s)=>t+s.length,0)}function uh(e,t){if(e[0].length===t)return e.shift();const s=new Uint8Array(t);let n=0;for(let a=0;a<t;a++)s[a]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),s}function mD(e,t){ax||(ax=new TextDecoder);const s=[];let n=0,a=-1,i=!1;return new TransformStream({transform(l,o){for(s.push(l);;){if(n===0){if(dh(s)<1)break;const c=uh(s,1);i=(c[0]&128)===128,a=c[0]&127,a<126?n=3:a===126?n=1:n=2}else if(n===1){if(dh(s)<2)break;const c=uh(s,2);a=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),n=3}else if(n===2){if(dh(s)<8)break;const c=uh(s,8),d=new DataView(c.buffer,c.byteOffset,c.length),u=d.getUint32(0);if(u>Math.pow(2,21)-1){o.enqueue(jg);break}a=u*Math.pow(2,32)+d.getUint32(4),n=3}else{if(dh(s)<a)break;const c=uh(s,a);o.enqueue(Ob(i?c:ax.decode(c),t)),n=0}if(a===0||a>e){o.enqueue(jg);break}}}})}const Zk=4;function sr(e){if(e)return pD(e)}function pD(e){for(var t in sr.prototype)e[t]=sr.prototype[t];return e}sr.prototype.on=sr.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};sr.prototype.once=function(e,t){function s(){this.off(e,s),t.apply(this,arguments)}return s.fn=t,this.on(e,s),this};sr.prototype.off=sr.prototype.removeListener=sr.prototype.removeAllListeners=sr.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+e];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,a=0;a<s.length;a++)if(n=s[a],n===t||n.fn===t){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+e],this};sr.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),s=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(s){s=s.slice(0);for(var n=0,a=s.length;n<a;++n)s[n].apply(this,t)}return this};sr.prototype.emitReserved=sr.prototype.emit;sr.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};sr.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Bm=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,s)=>s(t,0),As=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),xD="arraybuffer";function Jk(e,...t){return t.reduce((s,n)=>(e.hasOwnProperty(n)&&(s[n]=e[n]),s),{})}const gD=As.setTimeout,yD=As.clearTimeout;function qm(e,t){t.useNativeTimers?(e.setTimeoutFn=gD.bind(As),e.clearTimeoutFn=yD.bind(As)):(e.setTimeoutFn=As.setTimeout.bind(As),e.clearTimeoutFn=As.clearTimeout.bind(As))}const bD=1.33;function vD(e){return typeof e=="string"?jD(e):Math.ceil((e.byteLength||e.size)*bD)}function jD(e){let t=0,s=0;for(let n=0,a=e.length;n<a;n++)t=e.charCodeAt(n),t<128?s+=1:t<2048?s+=2:t<55296||t>=57344?s+=3:(n++,s+=4);return s}function eE(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function ND(e){let t="";for(let s in e)e.hasOwnProperty(s)&&(t.length&&(t+="&"),t+=encodeURIComponent(s)+"="+encodeURIComponent(e[s]));return t}function wD(e){let t={},s=e.split("&");for(let n=0,a=s.length;n<a;n++){let i=s[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class _D extends Error{constructor(t,s,n){super(t),this.description=s,this.context=n,this.type="TransportError"}}class Rb extends sr{constructor(t){super(),this.writable=!1,qm(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,s,n){return super.emitReserved("error",new _D(t,s,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const s=Ob(t,this.socket.binaryType);this.onPacket(s)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,s={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(s)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const s=ND(t);return s.length?"?"+s:""}}class SD extends Rb{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const s=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||s()})),this.writable||(n++,this.once("drain",function(){--n||s()}))}else s()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const s=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};hD(t,this.socket.binaryType).forEach(s),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,uD(t,s=>{this.doWrite(s,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",s=this.query||{};return this.opts.timestampRequests!==!1&&(s[this.opts.timestampParam]=eE()),!this.supportsBinary&&!s.sid&&(s.b64=1),this.createUri(t,s)}}let tE=!1;try{tE=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const kD=tE;function ED(){}class CD extends SD{constructor(t){if(super(t),typeof location<"u"){const s=location.protocol==="https:";let n=location.port;n||(n=s?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,s){const n=this.request({method:"POST",data:t});n.on("success",s),n.on("error",(a,i)=>{this.onError("xhr post error",a,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(s,n)=>{this.onError("xhr poll error",s,n)}),this.pollXhr=t}}class On extends sr{constructor(t,s,n){super(),this.createRequest=t,qm(this,n),this._opts=n,this._method=n.method||"GET",this._uri=s,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const s=Jk(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");s.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(s);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&n.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var a;n.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=On.requestsCount++,On.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=ED,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete On.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}On.requestsCount=0;On.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",QN);else if(typeof addEventListener=="function"){const e="onpagehide"in As?"pagehide":"unload";addEventListener(e,QN,!1)}}function QN(){for(let e in On.requests)On.requests.hasOwnProperty(e)&&On.requests[e].abort()}const AD=function(){const e=rE({xdomain:!1});return e&&e.responseType!==null}();class TD extends CD{constructor(t){super(t);const s=t&&t.forceBase64;this.supportsBinary=AD&&!s}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new On(rE,this.uri(),t)}}function rE(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||kD))return new XMLHttpRequest}catch{}if(!t)try{return new As[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const sE=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class OD extends Rb{get name(){return"websocket"}doOpen(){const t=this.uri(),s=this.opts.protocols,n=sE?{}:Jk(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,s,n)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let s=0;s<t.length;s++){const n=t[s],a=s===t.length-1;Tb(n,this.supportsBinary,i=>{try{this.doWrite(n,i)}catch{}a&&Bm(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",s=this.query||{};return this.opts.timestampRequests&&(s[this.opts.timestampParam]=eE()),this.supportsBinary||(s.b64=1),this.createUri(t,s)}}const ix=As.WebSocket||As.MozWebSocket;class RD extends OD{createSocket(t,s,n){return sE?new ix(t,s,n):s?new ix(t,s):new ix(t)}doWrite(t,s){this.ws.send(s)}}class PD extends Rb{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const s=mD(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(s).getReader(),a=fD();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const i=()=>{n.read().then(({done:o,value:c})=>{o||(this.onPacket(c),i())}).catch(o=>{})};i();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let s=0;s<t.length;s++){const n=t[s],a=s===t.length-1;this._writer.write(n).then(()=>{a&&Bm(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const MD={websocket:RD,webtransport:PD,polling:TD},DD=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,LD=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ng(e){if(e.length>8e3)throw"URI too long";const t=e,s=e.indexOf("["),n=e.indexOf("]");s!=-1&&n!=-1&&(e=e.substring(0,s)+e.substring(s,n).replace(/:/g,";")+e.substring(n,e.length));let a=DD.exec(e||""),i={},l=14;for(;l--;)i[LD[l]]=a[l]||"";return s!=-1&&n!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=FD(i,i.path),i.queryKey=ID(i,i.query),i}function FD(e,t){const s=/\/{2,9}/g,n=t.replace(s,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function ID(e,t){const s={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,a,i){a&&(s[a]=i)}),s}const wg=typeof addEventListener=="function"&&typeof removeEventListener=="function",Bh=[];wg&&addEventListener("offline",()=>{Bh.forEach(e=>e())},!1);class yi extends sr{constructor(t,s){if(super(),this.binaryType=xD,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(s=t,t=null),t){const n=Ng(t);s.hostname=n.host,s.secure=n.protocol==="https"||n.protocol==="wss",s.port=n.port,n.query&&(s.query=n.query)}else s.host&&(s.hostname=Ng(s.host).host);qm(this,s),this.secure=s.secure!=null?s.secure:typeof location<"u"&&location.protocol==="https:",s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=s.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},s.transports.forEach(n=>{const a=n.prototype.name;this.transports.push(a),this._transportsByName[a]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},s),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=wD(this.opts.query)),wg&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Bh.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const s=Object.assign({},this.opts.query);s.EIO=Zk,s.transport=t,this.id&&(s.sid=this.id);const n=Object.assign({},this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&yi.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const s=this.createTransport(t);s.open(),this.setTransport(s)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",s=>this._onClose("transport close",s))}onOpen(){this.readyState="open",yi.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const s=new Error("server error");s.code=t.data,this._onError(s);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let n=0;n<this.writeBuffer.length;n++){const a=this.writeBuffer[n].data;if(a&&(s+=vD(a)),n>0&&s>this._maxPayload)return this.writeBuffer.slice(0,n);s+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Bm(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,s,n){return this._sendPacket("message",t,s,n),this}send(t,s,n){return this._sendPacket("message",t,s,n),this}_sendPacket(t,s,n,a){if(typeof s=="function"&&(a=s,s=void 0),typeof n=="function"&&(a=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const i={type:t,data:s,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),t()},n=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(yi.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),wg&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=Bh.indexOf(this._offlineEventListener);n!==-1&&Bh.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,s),this.writeBuffer=[],this._prevBufferLen=0}}}yi.protocol=Zk;class BD extends yi{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let s=this.createTransport(t),n=!1;yi.priorWebsocketSuccess=!1;const a=()=>{n||(s.send([{type:"ping",data:"probe"}]),s.once("packet",h=>{if(!n)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;yi.priorWebsocketSuccess=s.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=s.name,this.emitReserved("upgradeError",f)}}))};function i(){n||(n=!0,u(),s.close(),s=null)}const l=h=>{const f=new Error("probe error: "+h);f.transport=s.name,i(),this.emitReserved("upgradeError",f)};function o(){l("transport closed")}function c(){l("socket closed")}function d(h){s&&h.name!==s.name&&i()}const u=()=>{s.removeListener("open",a),s.removeListener("error",l),s.removeListener("close",o),this.off("close",c),this.off("upgrading",d)};s.once("open",a),s.once("error",l),s.once("close",o),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||s.open()},200):s.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const s=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&s.push(t[n]);return s}}let qD=class extends BD{constructor(t,s={}){const n=typeof t=="object"?t:s;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(a=>MD[a]).filter(a=>!!a)),super(t,n)}};function $D(e,t="",s){let n=e;s=s||typeof location<"u"&&location,e==null&&(e=s.protocol+"//"+s.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=s.protocol+e:e=s.host+e),/^(https?|wss?):\/\//.test(e)||(typeof s<"u"?e=s.protocol+"//"+e:e="https://"+e),n=Ng(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+t,n.href=n.protocol+"://"+i+(s&&s.port===n.port?"":":"+n.port),n}const UD=typeof ArrayBuffer=="function",zD=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,nE=Object.prototype.toString,VD=typeof Blob=="function"||typeof Blob<"u"&&nE.call(Blob)==="[object BlobConstructor]",HD=typeof File=="function"||typeof File<"u"&&nE.call(File)==="[object FileConstructor]";function Pb(e){return UD&&(e instanceof ArrayBuffer||zD(e))||VD&&e instanceof Blob||HD&&e instanceof File}function qh(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let s=0,n=e.length;s<n;s++)if(qh(e[s]))return!0;return!1}if(Pb(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return qh(e.toJSON(),!0);for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&qh(e[s]))return!0;return!1}function WD(e){const t=[],s=e.data,n=e;return n.data=_g(s,t),n.attachments=t.length,{packet:n,buffers:t}}function _g(e,t){if(!e)return e;if(Pb(e)){const s={_placeholder:!0,num:t.length};return t.push(e),s}else if(Array.isArray(e)){const s=new Array(e.length);for(let n=0;n<e.length;n++)s[n]=_g(e[n],t);return s}else if(typeof e=="object"&&!(e instanceof Date)){const s={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(s[n]=_g(e[n],t));return s}return e}function YD(e,t){return e.data=Sg(e.data,t),delete e.attachments,e}function Sg(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let s=0;s<e.length;s++)e[s]=Sg(e[s],t);else if(typeof e=="object")for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(e[s]=Sg(e[s],t));return e}const GD=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],KD=5;var et;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(et||(et={}));class QD{constructor(t){this.replacer=t}encode(t){return(t.type===et.EVENT||t.type===et.ACK)&&qh(t)?this.encodeAsBinary({type:t.type===et.EVENT?et.BINARY_EVENT:et.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let s=""+t.type;return(t.type===et.BINARY_EVENT||t.type===et.BINARY_ACK)&&(s+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(s+=t.nsp+","),t.id!=null&&(s+=t.id),t.data!=null&&(s+=JSON.stringify(t.data,this.replacer)),s}encodeAsBinary(t){const s=WD(t),n=this.encodeAsString(s.packet),a=s.buffers;return a.unshift(n),a}}function XN(e){return Object.prototype.toString.call(e)==="[object Object]"}class Mb extends sr{constructor(t){super(),this.reviver=t}add(t){let s;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");s=this.decodeString(t);const n=s.type===et.BINARY_EVENT;n||s.type===et.BINARY_ACK?(s.type=n?et.EVENT:et.ACK,this.reconstructor=new XD(s),s.attachments===0&&super.emitReserved("decoded",s)):super.emitReserved("decoded",s)}else if(Pb(t)||t.base64)if(this.reconstructor)s=this.reconstructor.takeBinaryData(t),s&&(this.reconstructor=null,super.emitReserved("decoded",s));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let s=0;const n={type:Number(t.charAt(0))};if(et[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===et.BINARY_EVENT||n.type===et.BINARY_ACK){const i=s+1;for(;t.charAt(++s)!=="-"&&s!=t.length;);const l=t.substring(i,s);if(l!=Number(l)||t.charAt(s)!=="-")throw new Error("Illegal attachments");n.attachments=Number(l)}if(t.charAt(s+1)==="/"){const i=s+1;for(;++s&&!(t.charAt(s)===","||s===t.length););n.nsp=t.substring(i,s)}else n.nsp="/";const a=t.charAt(s+1);if(a!==""&&Number(a)==a){const i=s+1;for(;++s;){const l=t.charAt(s);if(l==null||Number(l)!=l){--s;break}if(s===t.length)break}n.id=Number(t.substring(i,s+1))}if(t.charAt(++s)){const i=this.tryParse(t.substr(s));if(Mb.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,s){switch(t){case et.CONNECT:return XN(s);case et.DISCONNECT:return s===void 0;case et.CONNECT_ERROR:return typeof s=="string"||XN(s);case et.EVENT:case et.BINARY_EVENT:return Array.isArray(s)&&(typeof s[0]=="number"||typeof s[0]=="string"&&GD.indexOf(s[0])===-1);case et.ACK:case et.BINARY_ACK:return Array.isArray(s)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class XD{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const s=YD(this.reconPack,this.buffers);return this.finishedReconstruction(),s}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const ZD=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Mb,Encoder:QD,get PacketType(){return et},protocol:KD},Symbol.toStringTag,{value:"Module"}));function Qs(e,t,s){return e.on(t,s),function(){e.off(t,s)}}const JD=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class aE extends sr{constructor(t,s,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=s,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Qs(t,"open",this.onopen.bind(this)),Qs(t,"packet",this.onpacket.bind(this)),Qs(t,"error",this.onerror.bind(this)),Qs(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...s){var n,a,i;if(JD.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(s.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;const l={type:et.EVENT,data:s};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof s[s.length-1]=="function"){const u=this.ids++,h=s.pop();this._registerAckCallback(u,h),l.id=u}const o=(a=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||a===void 0?void 0:a.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!o||(c?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(t,s){var n;const a=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(a===void 0){this.acks[t]=s;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===t&&this.sendBuffer.splice(o,1);s.call(this,new Error("operation has timed out"))},a),l=(...o)=>{this.io.clearTimeoutFn(i),s.apply(this,o)};l.withError=!0,this.acks[t]=l}emitWithAck(t,...s){return new Promise((n,a)=>{const i=(l,o)=>l?a(l):n(o);i.withError=!0,s.push(i),this.emit(t,...s)})}_addToQueue(t){let s;typeof t[t.length-1]=="function"&&(s=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...i)=>n!==this._queue[0]?void 0:(a!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),s&&s(a)):(this._queue.shift(),s&&s(null,...i)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const s=this._queue[0];s.pending&&!t||(s.pending=!0,s.tryCount++,this.flags=s.flags,this.emit.apply(this,s.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:et.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,s){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,s),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case et.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case et.EVENT:case et.BINARY_EVENT:this.onevent(t);break;case et.ACK:case et.BINARY_ACK:this.onack(t);break;case et.DISCONNECT:this.ondisconnect();break;case et.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const s=t.data||[];t.id!=null&&s.push(this.ack(t.id)),this.connected?this.emitEvent(s):this.receiveBuffer.push(Object.freeze(s))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const s=this._anyListeners.slice();for(const n of s)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const s=this;let n=!1;return function(...a){n||(n=!0,s.packet({type:et.ACK,id:t,data:a}))}}onack(t){const s=this.acks[t.id];typeof s=="function"&&(delete this.acks[t.id],s.withError&&t.data.unshift(null),s.apply(this,t.data))}onconnect(t,s){this.id=t,this.recovered=s&&this._pid===s,this._pid=s,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:et.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const s=this._anyListeners;for(let n=0;n<s.length;n++)if(t===s[n])return s.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const s=this._anyOutgoingListeners;for(let n=0;n<s.length;n++)if(t===s[n])return s.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const s=this._anyOutgoingListeners.slice();for(const n of s)n.apply(this,t.data)}}}function xc(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}xc.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),s=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+s:e-s}return Math.min(e,this.max)|0};xc.prototype.reset=function(){this.attempts=0};xc.prototype.setMin=function(e){this.ms=e};xc.prototype.setMax=function(e){this.max=e};xc.prototype.setJitter=function(e){this.jitter=e};class kg extends sr{constructor(t,s){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(s=t,t=void 0),s=s||{},s.path=s.path||"/socket.io",this.opts=s,qm(this,s),this.reconnection(s.reconnection!==!1),this.reconnectionAttempts(s.reconnectionAttempts||1/0),this.reconnectionDelay(s.reconnectionDelay||1e3),this.reconnectionDelayMax(s.reconnectionDelayMax||5e3),this.randomizationFactor((n=s.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new xc({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(s.timeout==null?2e4:s.timeout),this._readyState="closed",this.uri=t;const a=s.parser||ZD;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=s.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var s;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(s=this.backoff)===null||s===void 0||s.setMin(t),this)}randomizationFactor(t){var s;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(s=this.backoff)===null||s===void 0||s.setJitter(t),this)}reconnectionDelayMax(t){var s;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(s=this.backoff)===null||s===void 0||s.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new qD(this.uri,this.opts);const s=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const a=Qs(s,"open",function(){n.onopen(),t&&t()}),i=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),t?t(o):this.maybeReconnectOnOpen()},l=Qs(s,"error",i);if(this._timeout!==!1){const o=this._timeout,c=this.setTimeoutFn(()=>{a(),i(new Error("timeout")),s.close()},o);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(a),this.subs.push(l),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Qs(t,"ping",this.onping.bind(this)),Qs(t,"data",this.ondata.bind(this)),Qs(t,"error",this.onerror.bind(this)),Qs(t,"close",this.onclose.bind(this)),Qs(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(s){this.onclose("parse error",s)}}ondecoded(t){Bm(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,s){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new aE(this,t,s),this.nsps[t]=n),n}_destroy(t){const s=Object.keys(this.nsps);for(const n of s)if(this.nsps[n].active)return;this._close()}_packet(t){const s=this.encoder.encode(t);for(let n=0;n<s.length;n++)this.engine.write(s[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,s){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,s),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const s=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},s);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const $c={};function $h(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const s=$D(e,t.path||"/socket.io"),n=s.source,a=s.id,i=s.path,l=$c[a]&&i in $c[a].nsps,o=t.forceNew||t["force new connection"]||t.multiplex===!1||l;let c;return o?c=new kg(n,t):($c[a]||($c[a]=new kg(n,t)),c=$c[a]),s.query&&!t.query&&(t.query=s.queryKey),c.socket(s.path,t)}Object.assign($h,{Manager:kg,Socket:aE,io:$h,connect:$h});class eL{constructor(){this.socket=null,this.listeners=new Map}connect(t){var n;if((n=this.socket)!=null&&n.connected){console.log("Socket already connected"),t&&this.socket.emit("user_online",t);return}const s="http://localhost:5001/api".replace("/api","")||"http://localhost:5000";this.socket=$h(s,{transports:["websocket","polling"],reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:5}),this.listeners.forEach((a,i)=>{this.socket.on(i,a)}),this.socket.on("connect",()=>{console.log(" Socket connected:",this.socket.id),t&&this.socket.emit("user_online",t)}),this.socket.on("disconnect",a=>{console.log(" Socket disconnected:",a)}),this.socket.on("connect_error",a=>{console.error("Socket connection error:",a)}),this.socket.on("reconnect",a=>{console.log(` Socket reconnected after ${a} attempts`),t&&this.socket.emit("user_online",t)})}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null,this.listeners.clear(),console.log("Socket disconnected and cleaned up"))}userOnline(t){var s;(s=this.socket)!=null&&s.connected&&this.socket.emit("user_online",t)}sendMessage(t){var s;(s=this.socket)!=null&&s.connected&&this.socket.emit("send_message",t)}markAsRead(t,s){var n;(n=this.socket)!=null&&n.connected&&this.socket.emit("mark_read",{message_id:t,user_id:s})}typing(t,s,n){var a;(a=this.socket)!=null&&a.connected&&this.socket.emit("typing",{receiver_id:t,sender_id:s,isTyping:n})}onNewMessage(t){this.socket&&(this.socket.on("new_message",t),this.listeners.set("new_message",t))}onMessageSent(t){this.socket&&(this.socket.on("message_sent",t),this.listeners.set("message_sent",t))}onMessageRead(t){this.socket&&(this.socket.on("message_read",t),this.listeners.set("message_read",t))}onUserTyping(t){this.socket&&(this.socket.on("user_typing",t),this.listeners.set("user_typing",t))}onUserStatusChanged(t){this.socket&&(this.socket.on("user_status_changed",t),this.listeners.set("user_status_changed",t))}onConversationUpdated(t){this.socket&&(this.socket.on("conversation_updated",t),this.listeners.set("conversation_updated",t))}onMessageError(t){this.socket&&(this.socket.on("message_error",t),this.listeners.set("message_error",t))}onNewNotification(t){this.listeners.set("new_notification",t),this.socket&&this.socket.on("new_notification",t)}callUser(t){var s;(s=this.socket)!=null&&s.connected&&this.socket.emit("call_user",t)}answerCall(t){var s;(s=this.socket)!=null&&s.connected&&this.socket.emit("answer_call",t)}endCall(t){var s;(s=this.socket)!=null&&s.connected&&this.socket.emit("end_call",t)}onCallUser(t){this.socket&&(this.socket.on("call_user",t),this.listeners.set("call_user",t))}onCallAccepted(t){this.socket&&(this.socket.on("call_accepted",t),this.listeners.set("call_accepted",t))}onCallEnded(t){this.socket&&(this.socket.on("call_ended",t),this.listeners.set("call_ended",t))}sendIceCandidate(t){var s;(s=this.socket)!=null&&s.connected&&this.socket.emit("ice_candidate",t)}onIceCandidate(t){this.socket&&(this.socket.on("ice_candidate",t),this.listeners.set("ice_candidate",t))}removeAllListeners(){this.socket&&(this.listeners.forEach((t,s)=>{this.socket.off(s,t)}),this.listeners.clear())}removeListener(t){if(this.socket&&this.listeners.has(t)){const s=this.listeners.get(t);this.socket.off(t,s),this.listeners.delete(t)}}isConnected(){var t;return((t=this.socket)==null?void 0:t.connected)||!1}}const nt=new eL,qn={SUPER_ADMIN:"super_admin",PRINCIPAL:"principal",VICE_PRINCIPAL:"vice_principal",HOD:"hod",TEACHER:"teacher",STUDENT:"student",ACCOUNTANT:"accountant",GUARD:"guard",CLEANER:"cleaner"},ie={VIEW_STUDENTS:"view_students",CREATE_STUDENTS:"create_students",EDIT_STUDENTS:"edit_students",DELETE_STUDENTS:"delete_students",VIEW_TEACHERS:"view_teachers",CREATE_TEACHERS:"create_teachers",EDIT_TEACHERS:"edit_teachers",DELETE_TEACHERS:"delete_teachers",VIEW_CLASSES:"view_classes",CREATE_CLASSES:"create_classes",EDIT_CLASSES:"edit_classes",DELETE_CLASSES:"delete_classes",VIEW_CLASS_SUBJECTS:"view_class_subjects",MANAGE_CLASS_SUBJECTS:"manage_class_subjects",VIEW_ATTENDANCE:"view_attendance",MARK_ATTENDANCE:"mark_attendance",VIEW_EXAMS:"view_exams",CREATE_EXAMS:"create_exams",EDIT_EXAMS:"edit_exams",DELETE_EXAMS:"delete_exams",ENTER_RESULTS:"enter_results",VIEW_ASSIGNMENTS:"view_assignments",CREATE_ASSIGNMENTS:"create_assignments",SUBMIT_ASSIGNMENTS:"submit_assignments",VIEW_FEES:"view_fees",MANAGE_FEES:"manage_fees",CREATE_EVENTS:"create_events",VIEW_EVENTS:"view_events",EDIT_EVENTS:"edit_events",DELETE_EVENTS:"delete_events",CREATE_ANNOUNCEMENTS:"create_announcements",VIEW_ANNOUNCEMENTS:"view_announcements",EDIT_ANNOUNCEMENTS:"edit_announcements",DELETE_ANNOUNCEMENTS:"delete_announcements",SEND_MESSAGES:"send_messages",VIEW_MESSAGES:"view_messages",VIEW_SCHEDULE:"view_schedule",MANAGE_SCHEDULE:"manage_schedule",VIEW_PAYROLL:"view_payroll",MANAGE_PAYROLL:"manage_payroll",VIEW_ADMISSIONS:"view_admissions",MANAGE_ADMISSIONS:"manage_admissions",VIEW_BLOGS:"view_blogs",MANAGE_BLOGS:"manage_blogs",VIEW_LEAVES:"view_leaves",MANAGE_LEAVES:"manage_leaves",SUBMIT_LEAVE:"submit_leave"},tL={[qn.SUPER_ADMIN]:[...Object.values(ie)],[qn.PRINCIPAL]:[ie.VIEW_STUDENTS,ie.CREATE_STUDENTS,ie.EDIT_STUDENTS,ie.DELETE_STUDENTS,ie.VIEW_TEACHERS,ie.CREATE_TEACHERS,ie.EDIT_TEACHERS,ie.DELETE_TEACHERS,ie.VIEW_CLASSES,ie.CREATE_CLASSES,ie.EDIT_CLASSES,ie.DELETE_CLASSES,ie.VIEW_CLASS_SUBJECTS,ie.MANAGE_CLASS_SUBJECTS,ie.VIEW_ATTENDANCE,ie.VIEW_EXAMS,ie.CREATE_EXAMS,ie.EDIT_EXAMS,ie.ENTER_RESULTS,ie.VIEW_ASSIGNMENTS,ie.CREATE_ASSIGNMENTS,ie.VIEW_FEES,ie.MANAGE_FEES,ie.VIEW_EVENTS,ie.CREATE_EVENTS,ie.VIEW_ANNOUNCEMENTS,ie.CREATE_ANNOUNCEMENTS,ie.SEND_MESSAGES,ie.VIEW_MESSAGES,ie.VIEW_SCHEDULE,ie.MANAGE_SCHEDULE,ie.VIEW_PAYROLL,ie.MANAGE_PAYROLL,ie.VIEW_ADMISSIONS,ie.MANAGE_ADMISSIONS,ie.VIEW_BLOGS,ie.MANAGE_BLOGS,ie.VIEW_LEAVES,ie.MANAGE_LEAVES],[qn.VICE_PRINCIPAL]:[ie.VIEW_STUDENTS,ie.EDIT_STUDENTS,ie.VIEW_TEACHERS,ie.VIEW_CLASSES,ie.EDIT_CLASSES,ie.VIEW_CLASS_SUBJECTS,ie.MANAGE_CLASS_SUBJECTS,ie.VIEW_ATTENDANCE,ie.VIEW_EXAMS,ie.CREATE_EXAMS,ie.ENTER_RESULTS,ie.VIEW_ASSIGNMENTS,ie.CREATE_ASSIGNMENTS,ie.VIEW_EVENTS,ie.CREATE_EVENTS,ie.VIEW_ANNOUNCEMENTS,ie.CREATE_ANNOUNCEMENTS,ie.SEND_MESSAGES,ie.VIEW_MESSAGES,ie.VIEW_SCHEDULE,ie.MANAGE_SCHEDULE,ie.VIEW_PAYROLL,ie.MANAGE_PAYROLL,ie.VIEW_ADMISSIONS,ie.MANAGE_ADMISSIONS,ie.VIEW_LEAVES,ie.MANAGE_LEAVES],[qn.HOD]:[ie.VIEW_STUDENTS,ie.VIEW_TEACHERS,ie.VIEW_CLASSES,ie.VIEW_CLASS_SUBJECTS,ie.VIEW_ATTENDANCE,ie.MARK_ATTENDANCE,ie.VIEW_EXAMS,ie.CREATE_EXAMS,ie.ENTER_RESULTS,ie.VIEW_ASSIGNMENTS,ie.CREATE_ASSIGNMENTS,ie.VIEW_EVENTS,ie.VIEW_ANNOUNCEMENTS,ie.SEND_MESSAGES,ie.VIEW_MESSAGES,ie.VIEW_SCHEDULE,ie.VIEW_PAYROLL,ie.VIEW_ADMISSIONS,ie.VIEW_BLOGS,ie.SUBMIT_LEAVE],[qn.TEACHER]:[ie.VIEW_BLOGS,ie.VIEW_STUDENTS,ie.VIEW_CLASSES,ie.VIEW_CLASS_SUBJECTS,ie.VIEW_ATTENDANCE,ie.MARK_ATTENDANCE,ie.VIEW_EXAMS,ie.CREATE_EXAMS,ie.ENTER_RESULTS,ie.VIEW_ASSIGNMENTS,ie.CREATE_ASSIGNMENTS,ie.VIEW_EVENTS,ie.VIEW_ANNOUNCEMENTS,ie.SEND_MESSAGES,ie.VIEW_MESSAGES,ie.VIEW_SCHEDULE,ie.VIEW_PAYROLL,ie.SUBMIT_LEAVE],[qn.STUDENT]:[ie.VIEW_CLASSES,ie.VIEW_CLASS_SUBJECTS,ie.VIEW_ATTENDANCE,ie.VIEW_EXAMS,ie.VIEW_ASSIGNMENTS,ie.SUBMIT_ASSIGNMENTS,ie.VIEW_FEES,ie.VIEW_EVENTS,ie.VIEW_ANNOUNCEMENTS,ie.SEND_MESSAGES,ie.VIEW_MESSAGES,ie.VIEW_SCHEDULE,ie.VIEW_BLOGS,ie.SUBMIT_LEAVE],[qn.ACCOUNTANT]:[ie.VIEW_STUDENTS,ie.VIEW_FEES,ie.MANAGE_FEES,ie.SEND_MESSAGES,ie.VIEW_MESSAGES,ie.VIEW_PAYROLL,ie.MANAGE_PAYROLL,ie.SUBMIT_LEAVE],[qn.GUARD]:[ie.VIEW_EVENTS,ie.VIEW_ANNOUNCEMENTS,ie.VIEW_PAYROLL,ie.SUBMIT_LEAVE],[qn.CLEANER]:[ie.VIEW_EVENTS,ie.VIEW_ANNOUNCEMENTS,ie.VIEW_PAYROLL,ie.SUBMIT_LEAVE]},gc=(e,t)=>!e||!t?!1:(tL[e]||[]).includes(t),iE=(e,t=[])=>t.some(s=>gc(e,s)),lE=(e,t=[])=>t.every(s=>gc(e,s)),oE=()=>{const e=Ie(mr);return{hasPermission:t=>gc(e,t),hasAnyPermission:t=>iE(e,t),hasAllPermissions:t=>lE(e,t),role:e}};function Vn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cE(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var hs={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},ec={duration:.5,overwrite:!1,delay:0},Db,yr,Dt,Ms=1e8,yt=1/Ms,Eg=Math.PI*2,rL=Eg/4,sL=0,dE=Math.sqrt,nL=Math.cos,aL=Math.sin,fr=function(t){return typeof t=="string"},Yt=function(t){return typeof t=="function"},va=function(t){return typeof t=="number"},Lb=function(t){return typeof t>"u"},Mn=function(t){return typeof t=="object"},Zr=function(t){return t!==!1},Fb=function(){return typeof window<"u"},hh=function(t){return Yt(t)||fr(t)},uE=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},kr=Array.isArray,Cg=/(?:-?\.?\d|\.)+/gi,hE=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,co=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,lx=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,fE=/[+-]=-?[.\d]+/,mE=/[^,'"\[\]\s]+/gi,iL=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Ft,bn,Ag,Ib,ps={},Bf={},pE,xE=function(t){return(Bf=tc(t,ps))&&ss},Bb=function(t,s){return console.warn("Invalid property",t,"set to",s,"Missing plugin? gsap.registerPlugin()")},Qd=function(t,s){return!s&&console.warn(t)},gE=function(t,s){return t&&(ps[t]=s)&&Bf&&(Bf[t]=s)||ps},Xd=function(){return 0},lL={suppressEvents:!0,isStart:!0,kill:!1},Uh={suppressEvents:!0,kill:!1},oL={suppressEvents:!0},qb={},bi=[],Tg={},yE,is={},ox={},ZN=30,zh=[],$b="",Ub=function(t){var s=t[0],n,a;if(Mn(s)||Yt(s)||(t=[t]),!(n=(s._gsap||{}).harness)){for(a=zh.length;a--&&!zh[a].targetTest(s););n=zh[a]}for(a=t.length;a--;)t[a]&&(t[a]._gsap||(t[a]._gsap=new UE(t[a],n)))||t.splice(a,1);return t},ul=function(t){return t._gsap||Ub(Ds(t))[0]._gsap},bE=function(t,s,n){return(n=t[s])&&Yt(n)?t[s]():Lb(n)&&t.getAttribute&&t.getAttribute(s)||n},Jr=function(t,s){return(t=t.split(",")).forEach(s)||t},Qt=function(t){return Math.round(t*1e5)/1e5||0},tr=function(t){return Math.round(t*1e7)/1e7||0},No=function(t,s){var n=s.charAt(0),a=parseFloat(s.substr(2));return t=parseFloat(t),n==="+"?t+a:n==="-"?t-a:n==="*"?t*a:t/a},cL=function(t,s){for(var n=s.length,a=0;t.indexOf(s[a])<0&&++a<n;);return a<n},qf=function(){var t=bi.length,s=bi.slice(0),n,a;for(Tg={},bi.length=0,n=0;n<t;n++)a=s[n],a&&a._lazy&&(a.render(a._lazy[0],a._lazy[1],!0)._lazy=0)},zb=function(t){return!!(t._initted||t._startAt||t.add)},vE=function(t,s,n,a){bi.length&&!yr&&qf(),t.render(s,n,!!(yr&&s<0&&zb(t))),bi.length&&!yr&&qf()},jE=function(t){var s=parseFloat(t);return(s||s===0)&&(t+"").match(mE).length<2?s:fr(t)?t.trim():t},NE=function(t){return t},xs=function(t,s){for(var n in s)n in t||(t[n]=s[n]);return t},dL=function(t){return function(s,n){for(var a in n)a in s||a==="duration"&&t||a==="ease"||(s[a]=n[a])}},tc=function(t,s){for(var n in s)t[n]=s[n];return t},JN=function e(t,s){for(var n in s)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(t[n]=Mn(s[n])?e(t[n]||(t[n]={}),s[n]):s[n]);return t},$f=function(t,s){var n={},a;for(a in t)a in s||(n[a]=t[a]);return n},vd=function(t){var s=t.parent||Ft,n=t.keyframes?dL(kr(t.keyframes)):xs;if(Zr(t.inherit))for(;s;)n(t,s.vars.defaults),s=s.parent||s._dp;return t},uL=function(t,s){for(var n=t.length,a=n===s.length;a&&n--&&t[n]===s[n];);return n<0},wE=function(t,s,n,a,i){var l=t[a],o;if(i)for(o=s[i];l&&l[i]>o;)l=l._prev;return l?(s._next=l._next,l._next=s):(s._next=t[n],t[n]=s),s._next?s._next._prev=s:t[a]=s,s._prev=l,s.parent=s._dp=t,s},$m=function(t,s,n,a){n===void 0&&(n="_first"),a===void 0&&(a="_last");var i=s._prev,l=s._next;i?i._next=l:t[n]===s&&(t[n]=l),l?l._prev=i:t[a]===s&&(t[a]=i),s._next=s._prev=s.parent=null},Ei=function(t,s){t.parent&&(!s||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},hl=function(t,s){if(t&&(!s||s._end>t._dur||s._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t},hL=function(t){for(var s=t.parent;s&&s.parent;)s._dirty=1,s.totalDuration(),s=s.parent;return t},Og=function(t,s,n,a){return t._startAt&&(yr?t._startAt.revert(Uh):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(s,!0,a))},fL=function e(t){return!t||t._ts&&e(t.parent)},e1=function(t){return t._repeat?rc(t._tTime,t=t.duration()+t._rDelay)*t:0},rc=function(t,s){var n=Math.floor(t=tr(t/s));return t&&n===t?n-1:n},Uf=function(t,s){return(t-s._start)*s._ts+(s._ts>=0?0:s._dirty?s.totalDuration():s._tDur)},Um=function(t){return t._end=tr(t._start+(t._tDur/Math.abs(t._ts||t._rts||yt)||0))},zm=function(t,s){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=tr(n._time-(t._ts>0?s/t._ts:((t._dirty?t.totalDuration():t._tDur)-s)/-t._ts)),Um(t),n._dirty||hl(n,t)),t},_E=function(t,s){var n;if((s._time||!s._dur&&s._initted||s._start<t._time&&(s._dur||!s.add))&&(n=Uf(t.rawTime(),s),(!s._dur||Eu(0,s.totalDuration(),n)-s._tTime>yt)&&s.render(n,!0)),hl(t,s)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-yt}},_n=function(t,s,n,a){return s.parent&&Ei(s),s._start=tr((va(n)?n:n||t!==Ft?ws(t,n,s):t._time)+s._delay),s._end=tr(s._start+(s.totalDuration()/Math.abs(s.timeScale())||0)),wE(t,s,"_first","_last",t._sort?"_start":0),Rg(s)||(t._recent=s),a||_E(t,s),t._ts<0&&zm(t,t._tTime),t},SE=function(t,s){return(ps.ScrollTrigger||Bb("scrollTrigger",s))&&ps.ScrollTrigger.create(s,t)},kE=function(t,s,n,a,i){if(Hb(t,s,i),!t._initted)return 1;if(!n&&t._pt&&!yr&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&yE!==ls.frame)return bi.push(t),t._lazy=[i,a],1},mL=function e(t){var s=t.parent;return s&&s._ts&&s._initted&&!s._lock&&(s.rawTime()<0||e(s))},Rg=function(t){var s=t.data;return s==="isFromStart"||s==="isStart"},pL=function(t,s,n,a){var i=t.ratio,l=s<0||!s&&(!t._start&&mL(t)&&!(!t._initted&&Rg(t))||(t._ts<0||t._dp._ts<0)&&!Rg(t))?0:1,o=t._rDelay,c=0,d,u,h;if(o&&t._repeat&&(c=Eu(0,t._tDur,s),u=rc(c,o),t._yoyo&&u&1&&(l=1-l),u!==rc(t._tTime,o)&&(i=1-l,t.vars.repeatRefresh&&t._initted&&t.invalidate())),l!==i||yr||a||t._zTime===yt||!s&&t._zTime){if(!t._initted&&kE(t,s,a,n,c))return;for(h=t._zTime,t._zTime=s||(n?yt:0),n||(n=s&&!h),t.ratio=l,t._from&&(l=1-l),t._time=0,t._tTime=c,d=t._pt;d;)d.r(l,d.d),d=d._next;s<0&&Og(t,s,n,!0),t._onUpdate&&!n&&ds(t,"onUpdate"),c&&t._repeat&&!n&&t.parent&&ds(t,"onRepeat"),(s>=t._tDur||s<0)&&t.ratio===l&&(l&&Ei(t,1),!n&&!yr&&(ds(t,l?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=s)},xL=function(t,s,n){var a;if(n>s)for(a=t._first;a&&a._start<=n;){if(a.data==="isPause"&&a._start>s)return a;a=a._next}else for(a=t._last;a&&a._start>=n;){if(a.data==="isPause"&&a._start<s)return a;a=a._prev}},sc=function(t,s,n,a){var i=t._repeat,l=tr(s)||0,o=t._tTime/t._tDur;return o&&!a&&(t._time*=l/t._dur),t._dur=l,t._tDur=i?i<0?1e10:tr(l*(i+1)+t._rDelay*i):l,o>0&&!a&&zm(t,t._tTime=t._tDur*o),t.parent&&Um(t),n||hl(t.parent,t),t},t1=function(t){return t instanceof Dr?hl(t):sc(t,t._dur)},gL={_start:0,endTime:Xd,totalDuration:Xd},ws=function e(t,s,n){var a=t.labels,i=t._recent||gL,l=t.duration()>=Ms?i.endTime(!1):t._dur,o,c,d;return fr(s)&&(isNaN(s)||s in a)?(c=s.charAt(0),d=s.substr(-1)==="%",o=s.indexOf("="),c==="<"||c===">"?(o>=0&&(s=s.replace(/=/,"")),(c==="<"?i._start:i.endTime(i._repeat>=0))+(parseFloat(s.substr(1))||0)*(d?(o<0?i:n).totalDuration()/100:1)):o<0?(s in a||(a[s]=l),a[s]):(c=parseFloat(s.charAt(o-1)+s.substr(o+1)),d&&n&&(c=c/100*(kr(n)?n[0]:n).totalDuration()),o>1?e(t,s.substr(0,o-1),n)+c:l+c)):s==null?l:+s},jd=function(t,s,n){var a=va(s[1]),i=(a?2:1)+(t<2?0:1),l=s[i],o,c;if(a&&(l.duration=s[1]),l.parent=n,t){for(o=l,c=n;c&&!("immediateRender"in o);)o=c.vars.defaults||{},c=Zr(c.vars.inherit)&&c.parent;l.immediateRender=Zr(o.immediateRender),t<2?l.runBackwards=1:l.startAt=s[i-1]}return new er(s[0],l,s[i+1])},Mi=function(t,s){return t||t===0?s(t):s},Eu=function(t,s,n){return n<t?t:n>s?s:n},_r=function(t,s){return!fr(t)||!(s=iL.exec(t))?"":s[1]},yL=function(t,s,n){return Mi(n,function(a){return Eu(t,s,a)})},Pg=[].slice,EE=function(t,s){return t&&Mn(t)&&"length"in t&&(!s&&!t.length||t.length-1 in t&&Mn(t[0]))&&!t.nodeType&&t!==bn},bL=function(t,s,n){return n===void 0&&(n=[]),t.forEach(function(a){var i;return fr(a)&&!s||EE(a,1)?(i=n).push.apply(i,Ds(a)):n.push(a)})||n},Ds=function(t,s,n){return Dt&&!s&&Dt.selector?Dt.selector(t):fr(t)&&!n&&(Ag||!nc())?Pg.call((s||Ib).querySelectorAll(t),0):kr(t)?bL(t,n):EE(t)?Pg.call(t,0):t?[t]:[]},Mg=function(t){return t=Ds(t)[0]||Qd("Invalid scope")||{},function(s){var n=t.current||t.nativeElement||t;return Ds(s,n.querySelectorAll?n:n===t?Qd("Invalid scope")||Ib.createElement("div"):t)}},CE=function(t){return t.sort(function(){return .5-Math.random()})},AE=function(t){if(Yt(t))return t;var s=Mn(t)?t:{each:t},n=fl(s.ease),a=s.from||0,i=parseFloat(s.base)||0,l={},o=a>0&&a<1,c=isNaN(a)||o,d=s.axis,u=a,h=a;return fr(a)?u=h={center:.5,edges:.5,end:1}[a]||0:!o&&c&&(u=a[0],h=a[1]),function(f,m,x){var p=(x||s).length,j=l[p],v,g,y,b,N,k,w,_,S;if(!j){if(S=s.grid==="auto"?0:(s.grid||[1,Ms])[1],!S){for(w=-Ms;w<(w=x[S++].getBoundingClientRect().left)&&S<p;);S<p&&S--}for(j=l[p]=[],v=c?Math.min(S,p)*u-.5:a%S,g=S===Ms?0:c?p*h/S-.5:a/S|0,w=0,_=Ms,k=0;k<p;k++)y=k%S-v,b=g-(k/S|0),j[k]=N=d?Math.abs(d==="y"?b:y):dE(y*y+b*b),N>w&&(w=N),N<_&&(_=N);a==="random"&&CE(j),j.max=w-_,j.min=_,j.v=p=(parseFloat(s.amount)||parseFloat(s.each)*(S>p?p-1:d?d==="y"?p/S:S:Math.max(S,p/S))||0)*(a==="edges"?-1:1),j.b=p<0?i-p:i,j.u=_r(s.amount||s.each)||0,n=n&&p<0?BE(n):n}return p=(j[f]-j.min)/j.max||0,tr(j.b+(n?n(p):p)*j.v)+j.u}},Dg=function(t){var s=Math.pow(10,((t+"").split(".")[1]||"").length);return function(n){var a=tr(Math.round(parseFloat(n)/t)*t*s);return(a-a%1)/s+(va(n)?0:_r(n))}},TE=function(t,s){var n=kr(t),a,i;return!n&&Mn(t)&&(a=n=t.radius||Ms,t.values?(t=Ds(t.values),(i=!va(t[0]))&&(a*=a)):t=Dg(t.increment)),Mi(s,n?Yt(t)?function(l){return i=t(l),Math.abs(i-l)<=a?i:l}:function(l){for(var o=parseFloat(i?l.x:l),c=parseFloat(i?l.y:0),d=Ms,u=0,h=t.length,f,m;h--;)i?(f=t[h].x-o,m=t[h].y-c,f=f*f+m*m):f=Math.abs(t[h]-o),f<d&&(d=f,u=h);return u=!a||d<=a?t[u]:l,i||u===l||va(l)?u:u+_r(l)}:Dg(t))},OE=function(t,s,n,a){return Mi(kr(t)?!s:n===!0?!!(n=0):!a,function(){return kr(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(a=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(s-t+n*.99))/n)*n*a)/a})},vL=function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return function(a){return s.reduce(function(i,l){return l(i)},a)}},jL=function(t,s){return function(n){return t(parseFloat(n))+(s||_r(n))}},NL=function(t,s,n){return PE(t,s,0,1,n)},RE=function(t,s,n){return Mi(n,function(a){return t[~~s(a)]})},wL=function e(t,s,n){var a=s-t;return kr(t)?RE(t,e(0,t.length),s):Mi(n,function(i){return(a+(i-t)%a)%a+t})},_L=function e(t,s,n){var a=s-t,i=a*2;return kr(t)?RE(t,e(0,t.length-1),s):Mi(n,function(l){return l=(i+(l-t)%i)%i||0,t+(l>a?i-l:l)})},Zd=function(t){for(var s=0,n="",a,i,l,o;~(a=t.indexOf("random(",s));)l=t.indexOf(")",a),o=t.charAt(a+7)==="[",i=t.substr(a+7,l-a-7).match(o?mE:Cg),n+=t.substr(s,a-s)+OE(o?i:+i[0],o?0:+i[1],+i[2]||1e-5),s=l+1;return n+t.substr(s,t.length-s)},PE=function(t,s,n,a,i){var l=s-t,o=a-n;return Mi(i,function(c){return n+((c-t)/l*o||0)})},SL=function e(t,s,n,a){var i=isNaN(t+s)?0:function(m){return(1-m)*t+m*s};if(!i){var l=fr(t),o={},c,d,u,h,f;if(n===!0&&(a=1)&&(n=null),l)t={p:t},s={p:s};else if(kr(t)&&!kr(s)){for(u=[],h=t.length,f=h-2,d=1;d<h;d++)u.push(e(t[d-1],t[d]));h--,i=function(x){x*=h;var p=Math.min(f,~~x);return u[p](x-p)},n=s}else a||(t=tc(kr(t)?[]:{},t));if(!u){for(c in s)Vb.call(o,t,c,"get",s[c]);i=function(x){return Gb(x,o)||(l?t.p:t)}}}return Mi(n,i)},r1=function(t,s,n){var a=t.labels,i=Ms,l,o,c;for(l in a)o=a[l]-s,o<0==!!n&&o&&i>(o=Math.abs(o))&&(c=l,i=o);return c},ds=function(t,s,n){var a=t.vars,i=a[s],l=Dt,o=t._ctx,c,d,u;if(i)return c=a[s+"Params"],d=a.callbackScope||t,n&&bi.length&&qf(),o&&(Dt=o),u=c?i.apply(d,c):i.call(d),Dt=l,u},rd=function(t){return Ei(t),t.scrollTrigger&&t.scrollTrigger.kill(!!yr),t.progress()<1&&ds(t,"onInterrupt"),t},uo,ME=[],DE=function(t){if(t)if(t=!t.name&&t.default||t,Fb()||t.headless){var s=t.name,n=Yt(t),a=s&&!n&&t.init?function(){this._props=[]}:t,i={init:Xd,render:Gb,add:Vb,kill:$L,modifier:qL,rawVars:0},l={targetTest:0,get:0,getSetter:Yb,aliases:{},register:0};if(nc(),t!==a){if(is[s])return;xs(a,xs($f(t,i),l)),tc(a.prototype,tc(i,$f(t,l))),is[a.prop=s]=a,t.targetTest&&(zh.push(a),qb[s]=1),s=(s==="css"?"CSS":s.charAt(0).toUpperCase()+s.substr(1))+"Plugin"}gE(s,a),t.register&&t.register(ss,a,es)}else ME.push(t)},gt=255,sd={aqua:[0,gt,gt],lime:[0,gt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,gt],navy:[0,0,128],white:[gt,gt,gt],olive:[128,128,0],yellow:[gt,gt,0],orange:[gt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[gt,0,0],pink:[gt,192,203],cyan:[0,gt,gt],transparent:[gt,gt,gt,0]},cx=function(t,s,n){return t+=t<0?1:t>1?-1:0,(t*6<1?s+(n-s)*t*6:t<.5?n:t*3<2?s+(n-s)*(2/3-t)*6:s)*gt+.5|0},LE=function(t,s,n){var a=t?va(t)?[t>>16,t>>8&gt,t&gt]:0:sd.black,i,l,o,c,d,u,h,f,m,x;if(!a){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),sd[t])a=sd[t];else if(t.charAt(0)==="#"){if(t.length<6&&(i=t.charAt(1),l=t.charAt(2),o=t.charAt(3),t="#"+i+i+l+l+o+o+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return a=parseInt(t.substr(1,6),16),[a>>16,a>>8&gt,a&gt,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),a=[t>>16,t>>8&gt,t&gt]}else if(t.substr(0,3)==="hsl"){if(a=x=t.match(Cg),!s)c=+a[0]%360/360,d=+a[1]/100,u=+a[2]/100,l=u<=.5?u*(d+1):u+d-u*d,i=u*2-l,a.length>3&&(a[3]*=1),a[0]=cx(c+1/3,i,l),a[1]=cx(c,i,l),a[2]=cx(c-1/3,i,l);else if(~t.indexOf("="))return a=t.match(hE),n&&a.length<4&&(a[3]=1),a}else a=t.match(Cg)||sd.transparent;a=a.map(Number)}return s&&!x&&(i=a[0]/gt,l=a[1]/gt,o=a[2]/gt,h=Math.max(i,l,o),f=Math.min(i,l,o),u=(h+f)/2,h===f?c=d=0:(m=h-f,d=u>.5?m/(2-h-f):m/(h+f),c=h===i?(l-o)/m+(l<o?6:0):h===l?(o-i)/m+2:(i-l)/m+4,c*=60),a[0]=~~(c+.5),a[1]=~~(d*100+.5),a[2]=~~(u*100+.5)),n&&a.length<4&&(a[3]=1),a},FE=function(t){var s=[],n=[],a=-1;return t.split(vi).forEach(function(i){var l=i.match(co)||[];s.push.apply(s,l),n.push(a+=l.length+1)}),s.c=n,s},s1=function(t,s,n){var a="",i=(t+a).match(vi),l=s?"hsla(":"rgba(",o=0,c,d,u,h;if(!i)return t;if(i=i.map(function(f){return(f=LE(f,s,1))&&l+(s?f[0]+","+f[1]+"%,"+f[2]+"%,"+f[3]:f.join(","))+")"}),n&&(u=FE(t),c=n.c,c.join(a)!==u.c.join(a)))for(d=t.replace(vi,"1").split(co),h=d.length-1;o<h;o++)a+=d[o]+(~c.indexOf(o)?i.shift()||l+"0,0,0,0)":(u.length?u:i.length?i:n).shift());if(!d)for(d=t.split(vi),h=d.length-1;o<h;o++)a+=d[o]+i[o];return a+d[h]},vi=function(){var e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in sd)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),kL=/hsl[a]?\(/,IE=function(t){var s=t.join(" "),n;if(vi.lastIndex=0,vi.test(s))return n=kL.test(s),t[1]=s1(t[1],n),t[0]=s1(t[0],n,FE(t[1])),!0},Jd,ls=function(){var e=Date.now,t=500,s=33,n=e(),a=n,i=1e3/240,l=i,o=[],c,d,u,h,f,m,x=function p(j){var v=e()-a,g=j===!0,y,b,N,k;if((v>t||v<0)&&(n+=v-s),a+=v,N=a-n,y=N-l,(y>0||g)&&(k=++h.frame,f=N-h.time*1e3,h.time=N=N/1e3,l+=y+(y>=i?4:i-y),b=1),g||(c=d(p)),b)for(m=0;m<o.length;m++)o[m](N,f,k,j)};return h={time:0,frame:0,tick:function(){x(!0)},deltaRatio:function(j){return f/(1e3/(j||60))},wake:function(){pE&&(!Ag&&Fb()&&(bn=Ag=window,Ib=bn.document||{},ps.gsap=ss,(bn.gsapVersions||(bn.gsapVersions=[])).push(ss.version),xE(Bf||bn.GreenSockGlobals||!bn.gsap&&bn||{}),ME.forEach(DE)),u=typeof requestAnimationFrame<"u"&&requestAnimationFrame,c&&h.sleep(),d=u||function(j){return setTimeout(j,l-h.time*1e3+1|0)},Jd=1,x(2))},sleep:function(){(u?cancelAnimationFrame:clearTimeout)(c),Jd=0,d=Xd},lagSmoothing:function(j,v){t=j||1/0,s=Math.min(v||33,t)},fps:function(j){i=1e3/(j||240),l=h.time*1e3+i},add:function(j,v,g){var y=v?function(b,N,k,w){j(b,N,k,w),h.remove(y)}:j;return h.remove(j),o[g?"unshift":"push"](y),nc(),y},remove:function(j,v){~(v=o.indexOf(j))&&o.splice(v,1)&&m>=v&&m--},_listeners:o},h}(),nc=function(){return!Jd&&ls.wake()},rt={},EL=/^[\d.\-M][\d.\-,\s]/,CL=/["']/g,AL=function(t){for(var s={},n=t.substr(1,t.length-3).split(":"),a=n[0],i=1,l=n.length,o,c,d;i<l;i++)c=n[i],o=i!==l-1?c.lastIndexOf(","):c.length,d=c.substr(0,o),s[a]=isNaN(d)?d.replace(CL,"").trim():+d,a=c.substr(o+1).trim();return s},TL=function(t){var s=t.indexOf("(")+1,n=t.indexOf(")"),a=t.indexOf("(",s);return t.substring(s,~a&&a<n?t.indexOf(")",n+1):n)},OL=function(t){var s=(t+"").split("("),n=rt[s[0]];return n&&s.length>1&&n.config?n.config.apply(null,~t.indexOf("{")?[AL(s[1])]:TL(t).split(",").map(jE)):rt._CE&&EL.test(t)?rt._CE("",t):n},BE=function(t){return function(s){return 1-t(1-s)}},qE=function e(t,s){for(var n=t._first,a;n;)n instanceof Dr?e(n,s):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==s&&(n.timeline?e(n.timeline,s):(a=n._ease,n._ease=n._yEase,n._yEase=a,n._yoyo=s)),n=n._next},fl=function(t,s){return t&&(Yt(t)?t:rt[t]||OL(t))||s},Ll=function(t,s,n,a){n===void 0&&(n=function(c){return 1-s(1-c)}),a===void 0&&(a=function(c){return c<.5?s(c*2)/2:1-s((1-c)*2)/2});var i={easeIn:s,easeOut:n,easeInOut:a},l;return Jr(t,function(o){rt[o]=ps[o]=i,rt[l=o.toLowerCase()]=n;for(var c in i)rt[l+(c==="easeIn"?".in":c==="easeOut"?".out":".inOut")]=rt[o+"."+c]=i[c]}),i},$E=function(t){return function(s){return s<.5?(1-t(1-s*2))/2:.5+t((s-.5)*2)/2}},dx=function e(t,s,n){var a=s>=1?s:1,i=(n||(t?.3:.45))/(s<1?s:1),l=i/Eg*(Math.asin(1/a)||0),o=function(u){return u===1?1:a*Math.pow(2,-10*u)*aL((u-l)*i)+1},c=t==="out"?o:t==="in"?function(d){return 1-o(1-d)}:$E(o);return i=Eg/i,c.config=function(d,u){return e(t,d,u)},c},ux=function e(t,s){s===void 0&&(s=1.70158);var n=function(l){return l?--l*l*((s+1)*l+s)+1:0},a=t==="out"?n:t==="in"?function(i){return 1-n(1-i)}:$E(n);return a.config=function(i){return e(t,i)},a};Jr("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,t){var s=t<5?t+1:t;Ll(e+",Power"+(s-1),t?function(n){return Math.pow(n,s)}:function(n){return n},function(n){return 1-Math.pow(1-n,s)},function(n){return n<.5?Math.pow(n*2,s)/2:1-Math.pow((1-n)*2,s)/2})});rt.Linear.easeNone=rt.none=rt.Linear.easeIn;Ll("Elastic",dx("in"),dx("out"),dx());(function(e,t){var s=1/t,n=2*s,a=2.5*s,i=function(o){return o<s?e*o*o:o<n?e*Math.pow(o-1.5/t,2)+.75:o<a?e*(o-=2.25/t)*o+.9375:e*Math.pow(o-2.625/t,2)+.984375};Ll("Bounce",function(l){return 1-i(1-l)},i)})(7.5625,2.75);Ll("Expo",function(e){return Math.pow(2,10*(e-1))*e+e*e*e*e*e*e*(1-e)});Ll("Circ",function(e){return-(dE(1-e*e)-1)});Ll("Sine",function(e){return e===1?1:-nL(e*rL)+1});Ll("Back",ux("in"),ux("out"),ux());rt.SteppedEase=rt.steps=ps.SteppedEase={config:function(t,s){t===void 0&&(t=1);var n=1/t,a=t+(s?0:1),i=s?1:0,l=1-yt;return function(o){return((a*Eu(0,l,o)|0)+i)*n}}};ec.ease=rt["quad.out"];Jr("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return $b+=e+","+e+"Params,"});var UE=function(t,s){this.id=sL++,t._gsap=this,this.target=t,this.harness=s,this.get=s?s.get:bE,this.set=s?s.getSetter:Yb},eu=function(){function e(s){this.vars=s,this._delay=+s.delay||0,(this._repeat=s.repeat===1/0?-2:s.repeat||0)&&(this._rDelay=s.repeatDelay||0,this._yoyo=!!s.yoyo||!!s.yoyoEase),this._ts=1,sc(this,+s.duration,1,1),this.data=s.data,Dt&&(this._ctx=Dt,Dt.data.push(this)),Jd||ls.wake()}var t=e.prototype;return t.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},t.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},t.totalDuration=function(n){return arguments.length?(this._dirty=0,sc(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(n,a){if(nc(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(zm(this,n),!i._dp||i.parent||_E(i,this);i&&i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&_n(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!a||this._initted&&Math.abs(this._zTime)===yt||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),vE(this,n,a)),this},t.time=function(n,a){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+e1(this))%(this._dur+this._rDelay)||(n?this._dur:0),a):this._time},t.totalProgress=function(n,a){return arguments.length?this.totalTime(this.totalDuration()*n,a):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(n,a){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+e1(this),a):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(n,a){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*i,a):this._repeat?rc(this._tTime,i)+1:1},t.timeScale=function(n,a){if(!arguments.length)return this._rts===-yt?0:this._rts;if(this._rts===n)return this;var i=this.parent&&this._ts?Uf(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-yt?0:this._rts,this.totalTime(Eu(-Math.abs(this._delay),this.totalDuration(),i),a!==!1),Um(this),hL(this)},t.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(nc(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==yt&&(this._tTime-=yt)))),this):this._ps},t.startTime=function(n){if(arguments.length){this._start=n;var a=this.parent||this._dp;return a&&(a._sort||!this.parent)&&_n(a,this,n-this._delay),this}return this._start},t.endTime=function(n){return this._start+(Zr(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(n){var a=this.parent||this._dp;return a?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Uf(a.rawTime(n),this):this._tTime:this._tTime},t.revert=function(n){n===void 0&&(n=oL);var a=yr;return yr=n,zb(this)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),yr=a,this},t.globalTime=function(n){for(var a=this,i=arguments.length?n:a.rawTime();a;)i=a._start+i/(Math.abs(a._ts)||1),a=a._dp;return!this.parent&&this._sat?this._sat.globalTime(n):i},t.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,t1(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(n){if(arguments.length){var a=this._time;return this._rDelay=n,t1(this),a?this.time(a):this}return this._rDelay},t.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},t.seek=function(n,a){return this.totalTime(ws(this,n),Zr(a))},t.restart=function(n,a){return this.play().totalTime(n?-this._delay:0,Zr(a)),this._dur||(this._zTime=-yt),this},t.play=function(n,a){return n!=null&&this.seek(n,a),this.reversed(!1).paused(!1)},t.reverse=function(n,a){return n!=null&&this.seek(n||this.totalDuration(),a),this.reversed(!0).paused(!1)},t.pause=function(n,a){return n!=null&&this.seek(n,a),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-yt:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-yt,this},t.isActive=function(){var n=this.parent||this._dp,a=this._start,i;return!!(!n||this._ts&&this._initted&&n.isActive()&&(i=n.rawTime(!0))>=a&&i<this.endTime(!0)-yt)},t.eventCallback=function(n,a,i){var l=this.vars;return arguments.length>1?(a?(l[n]=a,i&&(l[n+"Params"]=i),n==="onUpdate"&&(this._onUpdate=a)):delete l[n],this):l[n]},t.then=function(n){var a=this;return new Promise(function(i){var l=Yt(n)?n:NE,o=function(){var d=a.then;a.then=null,Yt(l)&&(l=l(a))&&(l.then||l===a)&&(a.then=d),i(l),a.then=d};a._initted&&a.totalProgress()===1&&a._ts>=0||!a._tTime&&a._ts<0?o():a._prom=o})},t.kill=function(){rd(this)},e}();xs(eu.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-yt,_prom:0,_ps:!1,_rts:1});var Dr=function(e){cE(t,e);function t(n,a){var i;return n===void 0&&(n={}),i=e.call(this,n)||this,i.labels={},i.smoothChildTiming=!!n.smoothChildTiming,i.autoRemoveChildren=!!n.autoRemoveChildren,i._sort=Zr(n.sortChildren),Ft&&_n(n.parent||Ft,Vn(i),a),n.reversed&&i.reverse(),n.paused&&i.paused(!0),n.scrollTrigger&&SE(Vn(i),n.scrollTrigger),i}var s=t.prototype;return s.to=function(a,i,l){return jd(0,arguments,this),this},s.from=function(a,i,l){return jd(1,arguments,this),this},s.fromTo=function(a,i,l,o){return jd(2,arguments,this),this},s.set=function(a,i,l){return i.duration=0,i.parent=this,vd(i).repeatDelay||(i.repeat=0),i.immediateRender=!!i.immediateRender,new er(a,i,ws(this,l),1),this},s.call=function(a,i,l){return _n(this,er.delayedCall(0,a,i),l)},s.staggerTo=function(a,i,l,o,c,d,u){return l.duration=i,l.stagger=l.stagger||o,l.onComplete=d,l.onCompleteParams=u,l.parent=this,new er(a,l,ws(this,c)),this},s.staggerFrom=function(a,i,l,o,c,d,u){return l.runBackwards=1,vd(l).immediateRender=Zr(l.immediateRender),this.staggerTo(a,i,l,o,c,d,u)},s.staggerFromTo=function(a,i,l,o,c,d,u,h){return o.startAt=l,vd(o).immediateRender=Zr(o.immediateRender),this.staggerTo(a,i,o,c,d,u,h)},s.render=function(a,i,l){var o=this._time,c=this._dirty?this.totalDuration():this._tDur,d=this._dur,u=a<=0?0:tr(a),h=this._zTime<0!=a<0&&(this._initted||!d),f,m,x,p,j,v,g,y,b,N,k,w;if(this!==Ft&&u>c&&a>=0&&(u=c),u!==this._tTime||l||h){if(o!==this._time&&d&&(u+=this._time-o,a+=this._time-o),f=u,b=this._start,y=this._ts,v=!y,h&&(d||(o=this._zTime),(a||!i)&&(this._zTime=a)),this._repeat){if(k=this._yoyo,j=d+this._rDelay,this._repeat<-1&&a<0)return this.totalTime(j*100+a,i,l);if(f=tr(u%j),u===c?(p=this._repeat,f=d):(N=tr(u/j),p=~~N,p&&p===N&&(f=d,p--),f>d&&(f=d)),N=rc(this._tTime,j),!o&&this._tTime&&N!==p&&this._tTime-N*j-this._dur<=0&&(N=p),k&&p&1&&(f=d-f,w=1),p!==N&&!this._lock){var _=k&&N&1,S=_===(k&&p&1);if(p<N&&(_=!_),o=_?0:u%d?d:u,this._lock=1,this.render(o||(w?0:tr(p*j)),i,!d)._lock=0,this._tTime=u,!i&&this.parent&&ds(this,"onRepeat"),this.vars.repeatRefresh&&!w&&(this.invalidate()._lock=1),o&&o!==this._time||v!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(d=this._dur,c=this._tDur,S&&(this._lock=2,o=_?d:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!w&&this.invalidate()),this._lock=0,!this._ts&&!v)return this;qE(this,w)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(g=xL(this,tr(o),tr(f)),g&&(u-=f-(f=g._start))),this._tTime=u,this._time=f,this._act=!y,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=a,o=0),!o&&u&&!i&&!N&&(ds(this,"onStart"),this._tTime!==u))return this;if(f>=o&&a>=0)for(m=this._first;m;){if(x=m._next,(m._act||f>=m._start)&&m._ts&&g!==m){if(m.parent!==this)return this.render(a,i,l);if(m.render(m._ts>0?(f-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(f-m._start)*m._ts,i,l),f!==this._time||!this._ts&&!v){g=0,x&&(u+=this._zTime=-yt);break}}m=x}else{m=this._last;for(var E=a<0?a:f;m;){if(x=m._prev,(m._act||E<=m._end)&&m._ts&&g!==m){if(m.parent!==this)return this.render(a,i,l);if(m.render(m._ts>0?(E-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(E-m._start)*m._ts,i,l||yr&&zb(m)),f!==this._time||!this._ts&&!v){g=0,x&&(u+=this._zTime=E?-yt:yt);break}}m=x}}if(g&&!i&&(this.pause(),g.render(f>=o?0:-yt)._zTime=f>=o?1:-1,this._ts))return this._start=b,Um(this),this.render(a,i,l);this._onUpdate&&!i&&ds(this,"onUpdate",!0),(u===c&&this._tTime>=this.totalDuration()||!u&&o)&&(b===this._start||Math.abs(y)!==Math.abs(this._ts))&&(this._lock||((a||!d)&&(u===c&&this._ts>0||!u&&this._ts<0)&&Ei(this,1),!i&&!(a<0&&!o)&&(u||o||!c)&&(ds(this,u===c&&a>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<c&&this.timeScale()>0)&&this._prom())))}return this},s.add=function(a,i){var l=this;if(va(i)||(i=ws(this,i,a)),!(a instanceof eu)){if(kr(a))return a.forEach(function(o){return l.add(o,i)}),this;if(fr(a))return this.addLabel(a,i);if(Yt(a))a=er.delayedCall(0,a);else return this}return this!==a?_n(this,a,i):this},s.getChildren=function(a,i,l,o){a===void 0&&(a=!0),i===void 0&&(i=!0),l===void 0&&(l=!0),o===void 0&&(o=-Ms);for(var c=[],d=this._first;d;)d._start>=o&&(d instanceof er?i&&c.push(d):(l&&c.push(d),a&&c.push.apply(c,d.getChildren(!0,i,l)))),d=d._next;return c},s.getById=function(a){for(var i=this.getChildren(1,1,1),l=i.length;l--;)if(i[l].vars.id===a)return i[l]},s.remove=function(a){return fr(a)?this.removeLabel(a):Yt(a)?this.killTweensOf(a):(a.parent===this&&$m(this,a),a===this._recent&&(this._recent=this._last),hl(this))},s.totalTime=function(a,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=tr(ls.time-(this._ts>0?a/this._ts:(this.totalDuration()-a)/-this._ts))),e.prototype.totalTime.call(this,a,i),this._forcing=0,this):this._tTime},s.addLabel=function(a,i){return this.labels[a]=ws(this,i),this},s.removeLabel=function(a){return delete this.labels[a],this},s.addPause=function(a,i,l){var o=er.delayedCall(0,i||Xd,l);return o.data="isPause",this._hasPause=1,_n(this,o,ws(this,a))},s.removePause=function(a){var i=this._first;for(a=ws(this,a);i;)i._start===a&&i.data==="isPause"&&Ei(i),i=i._next},s.killTweensOf=function(a,i,l){for(var o=this.getTweensOf(a,l),c=o.length;c--;)ti!==o[c]&&o[c].kill(a,i);return this},s.getTweensOf=function(a,i){for(var l=[],o=Ds(a),c=this._first,d=va(i),u;c;)c instanceof er?cL(c._targets,o)&&(d?(!ti||c._initted&&c._ts)&&c.globalTime(0)<=i&&c.globalTime(c.totalDuration())>i:!i||c.isActive())&&l.push(c):(u=c.getTweensOf(o,i)).length&&l.push.apply(l,u),c=c._next;return l},s.tweenTo=function(a,i){i=i||{};var l=this,o=ws(l,a),c=i,d=c.startAt,u=c.onStart,h=c.onStartParams,f=c.immediateRender,m,x=er.to(l,xs({ease:i.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:i.duration||Math.abs((o-(d&&"time"in d?d.time:l._time))/l.timeScale())||yt,onStart:function(){if(l.pause(),!m){var j=i.duration||Math.abs((o-(d&&"time"in d?d.time:l._time))/l.timeScale());x._dur!==j&&sc(x,j,0,1).render(x._time,!0,!0),m=1}u&&u.apply(x,h||[])}},i));return f?x.render(0):x},s.tweenFromTo=function(a,i,l){return this.tweenTo(i,xs({startAt:{time:ws(this,a)}},l))},s.recent=function(){return this._recent},s.nextLabel=function(a){return a===void 0&&(a=this._time),r1(this,ws(this,a))},s.previousLabel=function(a){return a===void 0&&(a=this._time),r1(this,ws(this,a),1)},s.currentLabel=function(a){return arguments.length?this.seek(a,!0):this.previousLabel(this._time+yt)},s.shiftChildren=function(a,i,l){l===void 0&&(l=0);for(var o=this._first,c=this.labels,d;o;)o._start>=l&&(o._start+=a,o._end+=a),o=o._next;if(i)for(d in c)c[d]>=l&&(c[d]+=a);return hl(this)},s.invalidate=function(a){var i=this._first;for(this._lock=0;i;)i.invalidate(a),i=i._next;return e.prototype.invalidate.call(this,a)},s.clear=function(a){a===void 0&&(a=!0);for(var i=this._first,l;i;)l=i._next,this.remove(i),i=l;return this._dp&&(this._time=this._tTime=this._pTime=0),a&&(this.labels={}),hl(this)},s.totalDuration=function(a){var i=0,l=this,o=l._last,c=Ms,d,u,h;if(arguments.length)return l.timeScale((l._repeat<0?l.duration():l.totalDuration())/(l.reversed()?-a:a));if(l._dirty){for(h=l.parent;o;)d=o._prev,o._dirty&&o.totalDuration(),u=o._start,u>c&&l._sort&&o._ts&&!l._lock?(l._lock=1,_n(l,o,u-o._delay,1)._lock=0):c=u,u<0&&o._ts&&(i-=u,(!h&&!l._dp||h&&h.smoothChildTiming)&&(l._start+=u/l._ts,l._time-=u,l._tTime-=u),l.shiftChildren(-u,!1,-1/0),c=0),o._end>i&&o._ts&&(i=o._end),o=d;sc(l,l===Ft&&l._time>i?l._time:i,1,1),l._dirty=0}return l._tDur},t.updateRoot=function(a){if(Ft._ts&&(vE(Ft,Uf(a,Ft)),yE=ls.frame),ls.frame>=ZN){ZN+=hs.autoSleep||120;var i=Ft._first;if((!i||!i._ts)&&hs.autoSleep&&ls._listeners.length<2){for(;i&&!i._ts;)i=i._next;i||ls.sleep()}}},t}(eu);xs(Dr.prototype,{_lock:0,_hasPause:0,_forcing:0});var RL=function(t,s,n,a,i,l,o){var c=new es(this._pt,t,s,0,1,GE,null,i),d=0,u=0,h,f,m,x,p,j,v,g;for(c.b=n,c.e=a,n+="",a+="",(v=~a.indexOf("random("))&&(a=Zd(a)),l&&(g=[n,a],l(g,t,s),n=g[0],a=g[1]),f=n.match(lx)||[];h=lx.exec(a);)x=h[0],p=a.substring(d,h.index),m?m=(m+1)%5:p.substr(-5)==="rgba("&&(m=1),x!==f[u++]&&(j=parseFloat(f[u-1])||0,c._pt={_next:c._pt,p:p||u===1?p:",",s:j,c:x.charAt(1)==="="?No(j,x)-j:parseFloat(x)-j,m:m&&m<4?Math.round:0},d=lx.lastIndex);return c.c=d<a.length?a.substring(d,a.length):"",c.fp=o,(fE.test(a)||v)&&(c.e=0),this._pt=c,c},Vb=function(t,s,n,a,i,l,o,c,d,u){Yt(a)&&(a=a(i||0,t,l));var h=t[s],f=n!=="get"?n:Yt(h)?d?t[s.indexOf("set")||!Yt(t["get"+s.substr(3)])?s:"get"+s.substr(3)](d):t[s]():h,m=Yt(h)?d?FL:WE:Wb,x;if(fr(a)&&(~a.indexOf("random(")&&(a=Zd(a)),a.charAt(1)==="="&&(x=No(f,a)+(_r(f)||0),(x||x===0)&&(a=x))),!u||f!==a||Lg)return!isNaN(f*a)&&a!==""?(x=new es(this._pt,t,s,+f||0,a-(f||0),typeof h=="boolean"?BL:YE,0,m),d&&(x.fp=d),o&&x.modifier(o,this,t),this._pt=x):(!h&&!(s in t)&&Bb(s,a),RL.call(this,t,s,f,a,m,c||hs.stringFilter,d))},PL=function(t,s,n,a,i){if(Yt(t)&&(t=Nd(t,i,s,n,a)),!Mn(t)||t.style&&t.nodeType||kr(t)||uE(t))return fr(t)?Nd(t,i,s,n,a):t;var l={},o;for(o in t)l[o]=Nd(t[o],i,s,n,a);return l},zE=function(t,s,n,a,i,l){var o,c,d,u;if(is[t]&&(o=new is[t]).init(i,o.rawVars?s[t]:PL(s[t],a,i,l,n),n,a,l)!==!1&&(n._pt=c=new es(n._pt,i,t,0,1,o.render,o,0,o.priority),n!==uo))for(d=n._ptLookup[n._targets.indexOf(i)],u=o._props.length;u--;)d[o._props[u]]=c;return o},ti,Lg,Hb=function e(t,s,n){var a=t.vars,i=a.ease,l=a.startAt,o=a.immediateRender,c=a.lazy,d=a.onUpdate,u=a.runBackwards,h=a.yoyoEase,f=a.keyframes,m=a.autoRevert,x=t._dur,p=t._startAt,j=t._targets,v=t.parent,g=v&&v.data==="nested"?v.vars.targets:j,y=t._overwrite==="auto"&&!Db,b=t.timeline,N,k,w,_,S,E,A,C,D,M,L,z,Y;if(b&&(!f||!i)&&(i="none"),t._ease=fl(i,ec.ease),t._yEase=h?BE(fl(h===!0?i:h,ec.ease)):0,h&&t._yoyo&&!t._repeat&&(h=t._yEase,t._yEase=t._ease,t._ease=h),t._from=!b&&!!a.runBackwards,!b||f&&!a.stagger){if(C=j[0]?ul(j[0]).harness:0,z=C&&a[C.prop],N=$f(a,qb),p&&(p._zTime<0&&p.progress(1),s<0&&u&&o&&!m?p.render(-1,!0):p.revert(u&&x?Uh:lL),p._lazy=0),l){if(Ei(t._startAt=er.set(j,xs({data:"isStart",overwrite:!1,parent:v,immediateRender:!0,lazy:!p&&Zr(c),startAt:null,delay:0,onUpdate:d&&function(){return ds(t,"onUpdate")},stagger:0},l))),t._startAt._dp=0,t._startAt._sat=t,s<0&&(yr||!o&&!m)&&t._startAt.revert(Uh),o&&x&&s<=0&&n<=0){s&&(t._zTime=s);return}}else if(u&&x&&!p){if(s&&(o=!1),w=xs({overwrite:!1,data:"isFromStart",lazy:o&&!p&&Zr(c),immediateRender:o,stagger:0,parent:v},N),z&&(w[C.prop]=z),Ei(t._startAt=er.set(j,w)),t._startAt._dp=0,t._startAt._sat=t,s<0&&(yr?t._startAt.revert(Uh):t._startAt.render(-1,!0)),t._zTime=s,!o)e(t._startAt,yt,yt);else if(!s)return}for(t._pt=t._ptCache=0,c=x&&Zr(c)||c&&!x,k=0;k<j.length;k++){if(S=j[k],A=S._gsap||Ub(j)[k]._gsap,t._ptLookup[k]=M={},Tg[A.id]&&bi.length&&qf(),L=g===j?k:g.indexOf(S),C&&(D=new C).init(S,z||N,t,L,g)!==!1&&(t._pt=_=new es(t._pt,S,D.name,0,1,D.render,D,0,D.priority),D._props.forEach(function(X){M[X]=_}),D.priority&&(E=1)),!C||z)for(w in N)is[w]&&(D=zE(w,N,t,L,S,g))?D.priority&&(E=1):M[w]=_=Vb.call(t,S,w,"get",N[w],L,g,0,a.stringFilter);t._op&&t._op[k]&&t.kill(S,t._op[k]),y&&t._pt&&(ti=t,Ft.killTweensOf(S,M,t.globalTime(s)),Y=!t.parent,ti=0),t._pt&&c&&(Tg[A.id]=1)}E&&KE(t),t._onInit&&t._onInit(t)}t._onUpdate=d,t._initted=(!t._op||t._pt)&&!Y,f&&s<=0&&b.render(Ms,!0,!0)},ML=function(t,s,n,a,i,l,o,c){var d=(t._pt&&t._ptCache||(t._ptCache={}))[s],u,h,f,m;if(!d)for(d=t._ptCache[s]=[],f=t._ptLookup,m=t._targets.length;m--;){if(u=f[m][s],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==s&&u.fp!==s;)u=u._next;if(!u)return Lg=1,t.vars[s]="+=0",Hb(t,o),Lg=0,c?Qd(s+" not eligible for reset"):1;d.push(u)}for(m=d.length;m--;)h=d[m],u=h._pt||h,u.s=(a||a===0)&&!i?a:u.s+(a||0)+l*u.c,u.c=n-u.s,h.e&&(h.e=Qt(n)+_r(h.e)),h.b&&(h.b=u.s+_r(h.b))},DL=function(t,s){var n=t[0]?ul(t[0]).harness:0,a=n&&n.aliases,i,l,o,c;if(!a)return s;i=tc({},s);for(l in a)if(l in i)for(c=a[l].split(","),o=c.length;o--;)i[c[o]]=i[l];return i},LL=function(t,s,n,a){var i=s.ease||a||"power1.inOut",l,o;if(kr(s))o=n[t]||(n[t]=[]),s.forEach(function(c,d){return o.push({t:d/(s.length-1)*100,v:c,e:i})});else for(l in s)o=n[l]||(n[l]=[]),l==="ease"||o.push({t:parseFloat(t),v:s[l],e:i})},Nd=function(t,s,n,a,i){return Yt(t)?t.call(s,n,a,i):fr(t)&&~t.indexOf("random(")?Zd(t):t},VE=$b+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",HE={};Jr(VE+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return HE[e]=1});var er=function(e){cE(t,e);function t(n,a,i,l){var o;typeof a=="number"&&(i.duration=a,a=i,i=null),o=e.call(this,l?a:vd(a))||this;var c=o.vars,d=c.duration,u=c.delay,h=c.immediateRender,f=c.stagger,m=c.overwrite,x=c.keyframes,p=c.defaults,j=c.scrollTrigger,v=c.yoyoEase,g=a.parent||Ft,y=(kr(n)||uE(n)?va(n[0]):"length"in a)?[n]:Ds(n),b,N,k,w,_,S,E,A;if(o._targets=y.length?Ub(y):Qd("GSAP target "+n+" not found. https://gsap.com",!hs.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=m,x||f||hh(d)||hh(u)){if(a=o.vars,b=o.timeline=new Dr({data:"nested",defaults:p||{},targets:g&&g.data==="nested"?g.vars.targets:y}),b.kill(),b.parent=b._dp=Vn(o),b._start=0,f||hh(d)||hh(u)){if(w=y.length,E=f&&AE(f),Mn(f))for(_ in f)~VE.indexOf(_)&&(A||(A={}),A[_]=f[_]);for(N=0;N<w;N++)k=$f(a,HE),k.stagger=0,v&&(k.yoyoEase=v),A&&tc(k,A),S=y[N],k.duration=+Nd(d,Vn(o),N,S,y),k.delay=(+Nd(u,Vn(o),N,S,y)||0)-o._delay,!f&&w===1&&k.delay&&(o._delay=u=k.delay,o._start+=u,k.delay=0),b.to(S,k,E?E(N,S,y):0),b._ease=rt.none;b.duration()?d=u=0:o.timeline=0}else if(x){vd(xs(b.vars.defaults,{ease:"none"})),b._ease=fl(x.ease||a.ease||"none");var C=0,D,M,L;if(kr(x))x.forEach(function(z){return b.to(y,z,">")}),b.duration();else{k={};for(_ in x)_==="ease"||_==="easeEach"||LL(_,x[_],k,x.easeEach);for(_ in k)for(D=k[_].sort(function(z,Y){return z.t-Y.t}),C=0,N=0;N<D.length;N++)M=D[N],L={ease:M.e,duration:(M.t-(N?D[N-1].t:0))/100*d},L[_]=M.v,b.to(y,L,C),C+=L.duration;b.duration()<d&&b.to({},{duration:d-b.duration()})}}d||o.duration(d=b.duration())}else o.timeline=0;return m===!0&&!Db&&(ti=Vn(o),Ft.killTweensOf(y),ti=0),_n(g,Vn(o),i),a.reversed&&o.reverse(),a.paused&&o.paused(!0),(h||!d&&!x&&o._start===tr(g._time)&&Zr(h)&&fL(Vn(o))&&g.data!=="nested")&&(o._tTime=-yt,o.render(Math.max(0,-u)||0)),j&&SE(Vn(o),j),o}var s=t.prototype;return s.render=function(a,i,l){var o=this._time,c=this._tDur,d=this._dur,u=a<0,h=a>c-yt&&!u?c:a<yt?0:a,f,m,x,p,j,v,g,y,b;if(!d)pL(this,a,i,l);else if(h!==this._tTime||!a||l||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u||this._lazy){if(f=h,y=this.timeline,this._repeat){if(p=d+this._rDelay,this._repeat<-1&&u)return this.totalTime(p*100+a,i,l);if(f=tr(h%p),h===c?(x=this._repeat,f=d):(j=tr(h/p),x=~~j,x&&x===j?(f=d,x--):f>d&&(f=d)),v=this._yoyo&&x&1,v&&(b=this._yEase,f=d-f),j=rc(this._tTime,p),f===o&&!l&&this._initted&&x===j)return this._tTime=h,this;x!==j&&(y&&this._yEase&&qE(y,v),this.vars.repeatRefresh&&!v&&!this._lock&&f!==p&&this._initted&&(this._lock=l=1,this.render(tr(p*x),!0).invalidate()._lock=0))}if(!this._initted){if(kE(this,u?a:f,l,i,h))return this._tTime=0,this;if(o!==this._time&&!(l&&this.vars.repeatRefresh&&x!==j))return this;if(d!==this._dur)return this.render(a,i,l)}if(this._tTime=h,this._time=f,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=g=(b||this._ease)(f/d),this._from&&(this.ratio=g=1-g),!o&&h&&!i&&!j&&(ds(this,"onStart"),this._tTime!==h))return this;for(m=this._pt;m;)m.r(g,m.d),m=m._next;y&&y.render(a<0?a:y._dur*y._ease(f/this._dur),i,l)||this._startAt&&(this._zTime=a),this._onUpdate&&!i&&(u&&Og(this,a,i,l),ds(this,"onUpdate")),this._repeat&&x!==j&&this.vars.onRepeat&&!i&&this.parent&&ds(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(u&&!this._onUpdate&&Og(this,a,!0,!0),(a||!d)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&Ei(this,1),!i&&!(u&&!o)&&(h||o||v)&&(ds(this,h===c?"onComplete":"onReverseComplete",!0),this._prom&&!(h<c&&this.timeScale()>0)&&this._prom()))}return this},s.targets=function(){return this._targets},s.invalidate=function(a){return(!a||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(a),e.prototype.invalidate.call(this,a)},s.resetTo=function(a,i,l,o,c){Jd||ls.wake(),this._ts||this.play();var d=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||Hb(this,d),u=this._ease(d/this._dur),ML(this,a,i,l,o,u,d,c)?this.resetTo(a,i,l,o,1):(zm(this,0),this.parent||wE(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},s.kill=function(a,i){if(i===void 0&&(i="all"),!a&&(!i||i==="all"))return this._lazy=this._pt=0,this.parent?rd(this):this.scrollTrigger&&this.scrollTrigger.kill(!!yr),this;if(this.timeline){var l=this.timeline.totalDuration();return this.timeline.killTweensOf(a,i,ti&&ti.vars.overwrite!==!0)._first||rd(this),this.parent&&l!==this.timeline.totalDuration()&&sc(this,this._dur*this.timeline._tDur/l,0,1),this}var o=this._targets,c=a?Ds(a):o,d=this._ptLookup,u=this._pt,h,f,m,x,p,j,v;if((!i||i==="all")&&uL(o,c))return i==="all"&&(this._pt=0),rd(this);for(h=this._op=this._op||[],i!=="all"&&(fr(i)&&(p={},Jr(i,function(g){return p[g]=1}),i=p),i=DL(o,i)),v=o.length;v--;)if(~c.indexOf(o[v])){f=d[v],i==="all"?(h[v]=i,x=f,m={}):(m=h[v]=h[v]||{},x=i);for(p in x)j=f&&f[p],j&&((!("kill"in j.d)||j.d.kill(p)===!0)&&$m(this,j,"_pt"),delete f[p]),m!=="all"&&(m[p]=1)}return this._initted&&!this._pt&&u&&rd(this),this},t.to=function(a,i){return new t(a,i,arguments[2])},t.from=function(a,i){return jd(1,arguments)},t.delayedCall=function(a,i,l,o){return new t(i,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:a,onComplete:i,onReverseComplete:i,onCompleteParams:l,onReverseCompleteParams:l,callbackScope:o})},t.fromTo=function(a,i,l){return jd(2,arguments)},t.set=function(a,i){return i.duration=0,i.repeatDelay||(i.repeat=0),new t(a,i)},t.killTweensOf=function(a,i,l){return Ft.killTweensOf(a,i,l)},t}(eu);xs(er.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Jr("staggerTo,staggerFrom,staggerFromTo",function(e){er[e]=function(){var t=new Dr,s=Pg.call(arguments,0);return s.splice(e==="staggerFromTo"?5:4,0,0),t[e].apply(t,s)}});var Wb=function(t,s,n){return t[s]=n},WE=function(t,s,n){return t[s](n)},FL=function(t,s,n,a){return t[s](a.fp,n)},IL=function(t,s,n){return t.setAttribute(s,n)},Yb=function(t,s){return Yt(t[s])?WE:Lb(t[s])&&t.setAttribute?IL:Wb},YE=function(t,s){return s.set(s.t,s.p,Math.round((s.s+s.c*t)*1e6)/1e6,s)},BL=function(t,s){return s.set(s.t,s.p,!!(s.s+s.c*t),s)},GE=function(t,s){var n=s._pt,a="";if(!t&&s.b)a=s.b;else if(t===1&&s.e)a=s.e;else{for(;n;)a=n.p+(n.m?n.m(n.s+n.c*t):Math.round((n.s+n.c*t)*1e4)/1e4)+a,n=n._next;a+=s.c}s.set(s.t,s.p,a,s)},Gb=function(t,s){for(var n=s._pt;n;)n.r(t,n.d),n=n._next},qL=function(t,s,n,a){for(var i=this._pt,l;i;)l=i._next,i.p===a&&i.modifier(t,s,n),i=l},$L=function(t){for(var s=this._pt,n,a;s;)a=s._next,s.p===t&&!s.op||s.op===t?$m(this,s,"_pt"):s.dep||(n=1),s=a;return!n},UL=function(t,s,n,a){a.mSet(t,s,a.m.call(a.tween,n,a.mt),a)},KE=function(t){for(var s=t._pt,n,a,i,l;s;){for(n=s._next,a=i;a&&a.pr>s.pr;)a=a._next;(s._prev=a?a._prev:l)?s._prev._next=s:i=s,(s._next=a)?a._prev=s:l=s,s=n}t._pt=i},es=function(){function e(s,n,a,i,l,o,c,d,u){this.t=n,this.s=i,this.c=l,this.p=a,this.r=o||YE,this.d=c||this,this.set=d||Wb,this.pr=u||0,this._next=s,s&&(s._prev=this)}var t=e.prototype;return t.modifier=function(n,a,i){this.mSet=this.mSet||this.set,this.set=UL,this.m=n,this.mt=i,this.tween=a},e}();Jr($b+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return qb[e]=1});ps.TweenMax=ps.TweenLite=er;ps.TimelineLite=ps.TimelineMax=Dr;Ft=new Dr({sortChildren:!1,defaults:ec,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});hs.stringFilter=IE;var ml=[],Vh={},zL=[],n1=0,VL=0,hx=function(t){return(Vh[t]||zL).map(function(s){return s()})},Fg=function(){var t=Date.now(),s=[];t-n1>2&&(hx("matchMediaInit"),ml.forEach(function(n){var a=n.queries,i=n.conditions,l,o,c,d;for(o in a)l=bn.matchMedia(a[o]).matches,l&&(c=1),l!==i[o]&&(i[o]=l,d=1);d&&(n.revert(),c&&s.push(n))}),hx("matchMediaRevert"),s.forEach(function(n){return n.onMatch(n,function(a){return n.add(null,a)})}),n1=t,hx("matchMedia"))},QE=function(){function e(s,n){this.selector=n&&Mg(n),this.data=[],this._r=[],this.isReverted=!1,this.id=VL++,s&&this.add(s)}var t=e.prototype;return t.add=function(n,a,i){Yt(n)&&(i=a,a=n,n=Yt);var l=this,o=function(){var d=Dt,u=l.selector,h;return d&&d!==l&&d.data.push(l),i&&(l.selector=Mg(i)),Dt=l,h=a.apply(l,arguments),Yt(h)&&l._r.push(h),Dt=d,l.selector=u,l.isReverted=!1,h};return l.last=o,n===Yt?o(l,function(c){return l.add(null,c)}):n?l[n]=o:o},t.ignore=function(n){var a=Dt;Dt=null,n(this),Dt=a},t.getTweens=function(){var n=[];return this.data.forEach(function(a){return a instanceof e?n.push.apply(n,a.getTweens()):a instanceof er&&!(a.parent&&a.parent.data==="nested")&&n.push(a)}),n},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(n,a){var i=this;if(n?function(){for(var o=i.getTweens(),c=i.data.length,d;c--;)d=i.data[c],d.data==="isFlip"&&(d.revert(),d.getChildren(!0,!0,!1).forEach(function(u){return o.splice(o.indexOf(u),1)}));for(o.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,h){return h.g-u.g||-1/0}).forEach(function(u){return u.t.revert(n)}),c=i.data.length;c--;)d=i.data[c],d instanceof Dr?d.data!=="nested"&&(d.scrollTrigger&&d.scrollTrigger.revert(),d.kill()):!(d instanceof er)&&d.revert&&d.revert(n);i._r.forEach(function(u){return u(n,i)}),i.isReverted=!0}():this.data.forEach(function(o){return o.kill&&o.kill()}),this.clear(),a)for(var l=ml.length;l--;)ml[l].id===this.id&&ml.splice(l,1)},t.revert=function(n){this.kill(n||{})},e}(),HL=function(){function e(s){this.contexts=[],this.scope=s,Dt&&Dt.data.push(this)}var t=e.prototype;return t.add=function(n,a,i){Mn(n)||(n={matches:n});var l=new QE(0,i||this.scope),o=l.conditions={},c,d,u;Dt&&!l.selector&&(l.selector=Dt.selector),this.contexts.push(l),a=l.add("onMatch",a),l.queries=n;for(d in n)d==="all"?u=1:(c=bn.matchMedia(n[d]),c&&(ml.indexOf(l)<0&&ml.push(l),(o[d]=c.matches)&&(u=1),c.addListener?c.addListener(Fg):c.addEventListener("change",Fg)));return u&&a(l,function(h){return l.add(null,h)}),this},t.revert=function(n){this.kill(n||{})},t.kill=function(n){this.contexts.forEach(function(a){return a.kill(n,!0)})},e}(),zf={registerPlugin:function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];s.forEach(function(a){return DE(a)})},timeline:function(t){return new Dr(t)},getTweensOf:function(t,s){return Ft.getTweensOf(t,s)},getProperty:function(t,s,n,a){fr(t)&&(t=Ds(t)[0]);var i=ul(t||{}).get,l=n?NE:jE;return n==="native"&&(n=""),t&&(s?l((is[s]&&is[s].get||i)(t,s,n,a)):function(o,c,d){return l((is[o]&&is[o].get||i)(t,o,c,d))})},quickSetter:function(t,s,n){if(t=Ds(t),t.length>1){var a=t.map(function(u){return ss.quickSetter(u,s,n)}),i=a.length;return function(u){for(var h=i;h--;)a[h](u)}}t=t[0]||{};var l=is[s],o=ul(t),c=o.harness&&(o.harness.aliases||{})[s]||s,d=l?function(u){var h=new l;uo._pt=0,h.init(t,n?u+n:u,uo,0,[t]),h.render(1,h),uo._pt&&Gb(1,uo)}:o.set(t,c);return l?d:function(u){return d(t,c,n?u+n:u,o,1)}},quickTo:function(t,s,n){var a,i=ss.to(t,xs((a={},a[s]="+=0.1",a.paused=!0,a.stagger=0,a),n||{})),l=function(c,d,u){return i.resetTo(s,c,d,u)};return l.tween=i,l},isTweening:function(t){return Ft.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=fl(t.ease,ec.ease)),JN(ec,t||{})},config:function(t){return JN(hs,t||{})},registerEffect:function(t){var s=t.name,n=t.effect,a=t.plugins,i=t.defaults,l=t.extendTimeline;(a||"").split(",").forEach(function(o){return o&&!is[o]&&!ps[o]&&Qd(s+" effect requires "+o+" plugin.")}),ox[s]=function(o,c,d){return n(Ds(o),xs(c||{},i),d)},l&&(Dr.prototype[s]=function(o,c,d){return this.add(ox[s](o,Mn(c)?c:(d=c)&&{},this),d)})},registerEase:function(t,s){rt[t]=fl(s)},parseEase:function(t,s){return arguments.length?fl(t,s):rt},getById:function(t){return Ft.getById(t)},exportRoot:function(t,s){t===void 0&&(t={});var n=new Dr(t),a,i;for(n.smoothChildTiming=Zr(t.smoothChildTiming),Ft.remove(n),n._dp=0,n._time=n._tTime=Ft._time,a=Ft._first;a;)i=a._next,(s||!(!a._dur&&a instanceof er&&a.vars.onComplete===a._targets[0]))&&_n(n,a,a._start-a._delay),a=i;return _n(Ft,n,0),n},context:function(t,s){return t?new QE(t,s):Dt},matchMedia:function(t){return new HL(t)},matchMediaRefresh:function(){return ml.forEach(function(t){var s=t.conditions,n,a;for(a in s)s[a]&&(s[a]=!1,n=1);n&&t.revert()})||Fg()},addEventListener:function(t,s){var n=Vh[t]||(Vh[t]=[]);~n.indexOf(s)||n.push(s)},removeEventListener:function(t,s){var n=Vh[t],a=n&&n.indexOf(s);a>=0&&n.splice(a,1)},utils:{wrap:wL,wrapYoyo:_L,distribute:AE,random:OE,snap:TE,normalize:NL,getUnit:_r,clamp:yL,splitColor:LE,toArray:Ds,selector:Mg,mapRange:PE,pipe:vL,unitize:jL,interpolate:SL,shuffle:CE},install:xE,effects:ox,ticker:ls,updateRoot:Dr.updateRoot,plugins:is,globalTimeline:Ft,core:{PropTween:es,globals:gE,Tween:er,Timeline:Dr,Animation:eu,getCache:ul,_removeLinkedListItem:$m,reverting:function(){return yr},context:function(t){return t&&Dt&&(Dt.data.push(t),t._ctx=Dt),Dt},suppressOverwrites:function(t){return Db=t}}};Jr("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return zf[e]=er[e]});ls.add(Dr.updateRoot);uo=zf.to({},{duration:0});var WL=function(t,s){for(var n=t._pt;n&&n.p!==s&&n.op!==s&&n.fp!==s;)n=n._next;return n},YL=function(t,s){var n=t._targets,a,i,l;for(a in s)for(i=n.length;i--;)l=t._ptLookup[i][a],l&&(l=l.d)&&(l._pt&&(l=WL(l,a)),l&&l.modifier&&l.modifier(s[a],t,n[i],a))},fx=function(t,s){return{name:t,headless:1,rawVars:1,init:function(a,i,l){l._onInit=function(o){var c,d;if(fr(i)&&(c={},Jr(i,function(u){return c[u]=1}),i=c),s){c={};for(d in i)c[d]=s(i[d]);i=c}YL(o,i)}}}},ss=zf.registerPlugin({name:"attr",init:function(t,s,n,a,i){var l,o,c;this.tween=n;for(l in s)c=t.getAttribute(l)||"",o=this.add(t,"setAttribute",(c||0)+"",s[l],a,i,0,0,l),o.op=l,o.b=c,this._props.push(l)},render:function(t,s){for(var n=s._pt;n;)yr?n.set(n.t,n.p,n.b,n):n.r(t,n.d),n=n._next}},{name:"endArray",headless:1,init:function(t,s){for(var n=s.length;n--;)this.add(t,n,t[n]||0,s[n],0,0,0,0,0,1)}},fx("roundProps",Dg),fx("modifiers"),fx("snap",TE))||zf;er.version=Dr.version=ss.version="3.13.0";pE=1;Fb()&&nc();rt.Power0;rt.Power1;rt.Power2;rt.Power3;rt.Power4;rt.Linear;rt.Quad;rt.Cubic;rt.Quart;rt.Quint;rt.Strong;rt.Elastic;rt.Back;rt.SteppedEase;rt.Bounce;rt.Sine;rt.Expo;rt.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var a1,ri,wo,Kb,Xi,i1,Qb,GL=function(){return typeof window<"u"},ja={},$i=180/Math.PI,_o=Math.PI/180,Ul=Math.atan2,l1=1e8,Xb=/([A-Z])/g,KL=/(left|right|width|margin|padding|x)/i,QL=/[\s,\(]\S/,Cn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Ig=function(t,s){return s.set(s.t,s.p,Math.round((s.s+s.c*t)*1e4)/1e4+s.u,s)},XL=function(t,s){return s.set(s.t,s.p,t===1?s.e:Math.round((s.s+s.c*t)*1e4)/1e4+s.u,s)},ZL=function(t,s){return s.set(s.t,s.p,t?Math.round((s.s+s.c*t)*1e4)/1e4+s.u:s.b,s)},JL=function(t,s){var n=s.s+s.c*t;s.set(s.t,s.p,~~(n+(n<0?-.5:.5))+s.u,s)},XE=function(t,s){return s.set(s.t,s.p,t?s.e:s.b,s)},ZE=function(t,s){return s.set(s.t,s.p,t!==1?s.b:s.e,s)},eF=function(t,s,n){return t.style[s]=n},tF=function(t,s,n){return t.style.setProperty(s,n)},rF=function(t,s,n){return t._gsap[s]=n},sF=function(t,s,n){return t._gsap.scaleX=t._gsap.scaleY=n},nF=function(t,s,n,a,i){var l=t._gsap;l.scaleX=l.scaleY=n,l.renderTransform(i,l)},aF=function(t,s,n,a,i){var l=t._gsap;l[s]=n,l.renderTransform(i,l)},It="transform",ts=It+"Origin",iF=function e(t,s){var n=this,a=this.target,i=a.style,l=a._gsap;if(t in ja&&i){if(this.tfm=this.tfm||{},t!=="transform")t=Cn[t]||t,~t.indexOf(",")?t.split(",").forEach(function(o){return n.tfm[o]=Yn(a,o)}):this.tfm[t]=l.x?l[t]:Yn(a,t),t===ts&&(this.tfm.zOrigin=l.zOrigin);else return Cn.transform.split(",").forEach(function(o){return e.call(n,o,s)});if(this.props.indexOf(It)>=0)return;l.svg&&(this.svgo=a.getAttribute("data-svg-origin"),this.props.push(ts,s,"")),t=It}(i||s)&&this.props.push(t,s,i[t])},JE=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},lF=function(){var t=this.props,s=this.target,n=s.style,a=s._gsap,i,l;for(i=0;i<t.length;i+=3)t[i+1]?t[i+1]===2?s[t[i]](t[i+2]):s[t[i]]=t[i+2]:t[i+2]?n[t[i]]=t[i+2]:n.removeProperty(t[i].substr(0,2)==="--"?t[i]:t[i].replace(Xb,"-$1").toLowerCase());if(this.tfm){for(l in this.tfm)a[l]=this.tfm[l];a.svg&&(a.renderTransform(),s.setAttribute("data-svg-origin",this.svgo||"")),i=Qb(),(!i||!i.isStart)&&!n[It]&&(JE(n),a.zOrigin&&n[ts]&&(n[ts]+=" "+a.zOrigin+"px",a.zOrigin=0,a.renderTransform()),a.uncache=1)}},e4=function(t,s){var n={target:t,props:[],revert:lF,save:iF};return t._gsap||ss.core.getCache(t),s&&t.style&&t.nodeType&&s.split(",").forEach(function(a){return n.save(a)}),n},t4,Bg=function(t,s){var n=ri.createElementNS?ri.createElementNS((s||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):ri.createElement(t);return n&&n.style?n:ri.createElement(t)},Ls=function e(t,s,n){var a=getComputedStyle(t);return a[s]||a.getPropertyValue(s.replace(Xb,"-$1").toLowerCase())||a.getPropertyValue(s)||!n&&e(t,ac(s)||s,1)||""},o1="O,Moz,ms,Ms,Webkit".split(","),ac=function(t,s,n){var a=s||Xi,i=a.style,l=5;if(t in i&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);l--&&!(o1[l]+t in i););return l<0?null:(l===3?"ms":l>=0?o1[l]:"")+t},qg=function(){GL()&&window.document&&(a1=window,ri=a1.document,wo=ri.documentElement,Xi=Bg("div")||{style:{}},Bg("div"),It=ac(It),ts=It+"Origin",Xi.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",t4=!!ac("perspective"),Qb=ss.core.reverting,Kb=1)},c1=function(t){var s=t.ownerSVGElement,n=Bg("svg",s&&s.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),a=t.cloneNode(!0),i;a.style.display="block",n.appendChild(a),wo.appendChild(n);try{i=a.getBBox()}catch{}return n.removeChild(a),wo.removeChild(n),i},d1=function(t,s){for(var n=s.length;n--;)if(t.hasAttribute(s[n]))return t.getAttribute(s[n])},r4=function(t){var s,n;try{s=t.getBBox()}catch{s=c1(t),n=1}return s&&(s.width||s.height)||n||(s=c1(t)),s&&!s.width&&!s.x&&!s.y?{x:+d1(t,["x","cx","x1"])||0,y:+d1(t,["y","cy","y1"])||0,width:0,height:0}:s},s4=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&r4(t))},Tl=function(t,s){if(s){var n=t.style,a;s in ja&&s!==ts&&(s=It),n.removeProperty?(a=s.substr(0,2),(a==="ms"||s.substr(0,6)==="webkit")&&(s="-"+s),n.removeProperty(a==="--"?s:s.replace(Xb,"-$1").toLowerCase())):n.removeAttribute(s)}},si=function(t,s,n,a,i,l){var o=new es(t._pt,s,n,0,1,l?ZE:XE);return t._pt=o,o.b=a,o.e=i,t._props.push(n),o},u1={deg:1,rad:1,turn:1},oF={grid:1,flex:1},Ci=function e(t,s,n,a){var i=parseFloat(n)||0,l=(n+"").trim().substr((i+"").length)||"px",o=Xi.style,c=KL.test(s),d=t.tagName.toLowerCase()==="svg",u=(d?"client":"offset")+(c?"Width":"Height"),h=100,f=a==="px",m=a==="%",x,p,j,v;if(a===l||!i||u1[a]||u1[l])return i;if(l!=="px"&&!f&&(i=e(t,s,n,"px")),v=t.getCTM&&s4(t),(m||l==="%")&&(ja[s]||~s.indexOf("adius")))return x=v?t.getBBox()[c?"width":"height"]:t[u],Qt(m?i/x*h:i/100*x);if(o[c?"width":"height"]=h+(f?l:a),p=a!=="rem"&&~s.indexOf("adius")||a==="em"&&t.appendChild&&!d?t:t.parentNode,v&&(p=(t.ownerSVGElement||{}).parentNode),(!p||p===ri||!p.appendChild)&&(p=ri.body),j=p._gsap,j&&m&&j.width&&c&&j.time===ls.time&&!j.uncache)return Qt(i/j.width*h);if(m&&(s==="height"||s==="width")){var g=t.style[s];t.style[s]=h+a,x=t[u],g?t.style[s]=g:Tl(t,s)}else(m||l==="%")&&!oF[Ls(p,"display")]&&(o.position=Ls(t,"position")),p===t&&(o.position="static"),p.appendChild(Xi),x=Xi[u],p.removeChild(Xi),o.position="absolute";return c&&m&&(j=ul(p),j.time=ls.time,j.width=p[u]),Qt(f?x*i/h:x&&i?h/x*i:0)},Yn=function(t,s,n,a){var i;return Kb||qg(),s in Cn&&s!=="transform"&&(s=Cn[s],~s.indexOf(",")&&(s=s.split(",")[0])),ja[s]&&s!=="transform"?(i=ru(t,a),i=s!=="transformOrigin"?i[s]:i.svg?i.origin:Hf(Ls(t,ts))+" "+i.zOrigin+"px"):(i=t.style[s],(!i||i==="auto"||a||~(i+"").indexOf("calc("))&&(i=Vf[s]&&Vf[s](t,s,n)||Ls(t,s)||bE(t,s)||(s==="opacity"?1:0))),n&&!~(i+"").trim().indexOf(" ")?Ci(t,s,i,n)+n:i},cF=function(t,s,n,a){if(!n||n==="none"){var i=ac(s,t,1),l=i&&Ls(t,i,1);l&&l!==n?(s=i,n=l):s==="borderColor"&&(n=Ls(t,"borderTopColor"))}var o=new es(this._pt,t.style,s,0,1,GE),c=0,d=0,u,h,f,m,x,p,j,v,g,y,b,N;if(o.b=n,o.e=a,n+="",a+="",a.substring(0,6)==="var(--"&&(a=Ls(t,a.substring(4,a.indexOf(")")))),a==="auto"&&(p=t.style[s],t.style[s]=a,a=Ls(t,s)||a,p?t.style[s]=p:Tl(t,s)),u=[n,a],IE(u),n=u[0],a=u[1],f=n.match(co)||[],N=a.match(co)||[],N.length){for(;h=co.exec(a);)j=h[0],g=a.substring(c,h.index),x?x=(x+1)%5:(g.substr(-5)==="rgba("||g.substr(-5)==="hsla(")&&(x=1),j!==(p=f[d++]||"")&&(m=parseFloat(p)||0,b=p.substr((m+"").length),j.charAt(1)==="="&&(j=No(m,j)+b),v=parseFloat(j),y=j.substr((v+"").length),c=co.lastIndex-y.length,y||(y=y||hs.units[s]||b,c===a.length&&(a+=y,o.e+=y)),b!==y&&(m=Ci(t,s,p,y)||0),o._pt={_next:o._pt,p:g||d===1?g:",",s:m,c:v-m,m:x&&x<4||s==="zIndex"?Math.round:0});o.c=c<a.length?a.substring(c,a.length):""}else o.r=s==="display"&&a==="none"?ZE:XE;return fE.test(a)&&(o.e=0),this._pt=o,o},h1={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},dF=function(t){var s=t.split(" "),n=s[0],a=s[1]||"50%";return(n==="top"||n==="bottom"||a==="left"||a==="right")&&(t=n,n=a,a=t),s[0]=h1[n]||n,s[1]=h1[a]||a,s.join(" ")},uF=function(t,s){if(s.tween&&s.tween._time===s.tween._dur){var n=s.t,a=n.style,i=s.u,l=n._gsap,o,c,d;if(i==="all"||i===!0)a.cssText="",c=1;else for(i=i.split(","),d=i.length;--d>-1;)o=i[d],ja[o]&&(c=1,o=o==="transformOrigin"?ts:It),Tl(n,o);c&&(Tl(n,It),l&&(l.svg&&n.removeAttribute("transform"),a.scale=a.rotate=a.translate="none",ru(n,1),l.uncache=1,JE(a)))}},Vf={clearProps:function(t,s,n,a,i){if(i.data!=="isFromStart"){var l=t._pt=new es(t._pt,s,n,0,0,uF);return l.u=a,l.pr=-10,l.tween=i,t._props.push(n),1}}},tu=[1,0,0,1,0,0],n4={},a4=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},f1=function(t){var s=Ls(t,It);return a4(s)?tu:s.substr(7).match(hE).map(Qt)},Zb=function(t,s){var n=t._gsap||ul(t),a=t.style,i=f1(t),l,o,c,d;return n.svg&&t.getAttribute("transform")?(c=t.transform.baseVal.consolidate().matrix,i=[c.a,c.b,c.c,c.d,c.e,c.f],i.join(",")==="1,0,0,1,0,0"?tu:i):(i===tu&&!t.offsetParent&&t!==wo&&!n.svg&&(c=a.display,a.display="block",l=t.parentNode,(!l||!t.offsetParent&&!t.getBoundingClientRect().width)&&(d=1,o=t.nextElementSibling,wo.appendChild(t)),i=f1(t),c?a.display=c:Tl(t,"display"),d&&(o?l.insertBefore(t,o):l?l.appendChild(t):wo.removeChild(t))),s&&i.length>6?[i[0],i[1],i[4],i[5],i[12],i[13]]:i)},$g=function(t,s,n,a,i,l){var o=t._gsap,c=i||Zb(t,!0),d=o.xOrigin||0,u=o.yOrigin||0,h=o.xOffset||0,f=o.yOffset||0,m=c[0],x=c[1],p=c[2],j=c[3],v=c[4],g=c[5],y=s.split(" "),b=parseFloat(y[0])||0,N=parseFloat(y[1])||0,k,w,_,S;n?c!==tu&&(w=m*j-x*p)&&(_=b*(j/w)+N*(-p/w)+(p*g-j*v)/w,S=b*(-x/w)+N*(m/w)-(m*g-x*v)/w,b=_,N=S):(k=r4(t),b=k.x+(~y[0].indexOf("%")?b/100*k.width:b),N=k.y+(~(y[1]||y[0]).indexOf("%")?N/100*k.height:N)),a||a!==!1&&o.smooth?(v=b-d,g=N-u,o.xOffset=h+(v*m+g*p)-v,o.yOffset=f+(v*x+g*j)-g):o.xOffset=o.yOffset=0,o.xOrigin=b,o.yOrigin=N,o.smooth=!!a,o.origin=s,o.originIsAbsolute=!!n,t.style[ts]="0px 0px",l&&(si(l,o,"xOrigin",d,b),si(l,o,"yOrigin",u,N),si(l,o,"xOffset",h,o.xOffset),si(l,o,"yOffset",f,o.yOffset)),t.setAttribute("data-svg-origin",b+" "+N)},ru=function(t,s){var n=t._gsap||new UE(t);if("x"in n&&!s&&!n.uncache)return n;var a=t.style,i=n.scaleX<0,l="px",o="deg",c=getComputedStyle(t),d=Ls(t,ts)||"0",u,h,f,m,x,p,j,v,g,y,b,N,k,w,_,S,E,A,C,D,M,L,z,Y,X,Z,W,F,q,I,$,G;return u=h=f=p=j=v=g=y=b=0,m=x=1,n.svg=!!(t.getCTM&&s4(t)),c.translate&&((c.translate!=="none"||c.scale!=="none"||c.rotate!=="none")&&(a[It]=(c.translate!=="none"?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(c.rotate!=="none"?"rotate("+c.rotate+") ":"")+(c.scale!=="none"?"scale("+c.scale.split(" ").join(",")+") ":"")+(c[It]!=="none"?c[It]:"")),a.scale=a.rotate=a.translate="none"),w=Zb(t,n.svg),n.svg&&(n.uncache?(X=t.getBBox(),d=n.xOrigin-X.x+"px "+(n.yOrigin-X.y)+"px",Y=""):Y=!s&&t.getAttribute("data-svg-origin"),$g(t,Y||d,!!Y||n.originIsAbsolute,n.smooth!==!1,w)),N=n.xOrigin||0,k=n.yOrigin||0,w!==tu&&(A=w[0],C=w[1],D=w[2],M=w[3],u=L=w[4],h=z=w[5],w.length===6?(m=Math.sqrt(A*A+C*C),x=Math.sqrt(M*M+D*D),p=A||C?Ul(C,A)*$i:0,g=D||M?Ul(D,M)*$i+p:0,g&&(x*=Math.abs(Math.cos(g*_o))),n.svg&&(u-=N-(N*A+k*D),h-=k-(N*C+k*M))):(G=w[6],I=w[7],W=w[8],F=w[9],q=w[10],$=w[11],u=w[12],h=w[13],f=w[14],_=Ul(G,q),j=_*$i,_&&(S=Math.cos(-_),E=Math.sin(-_),Y=L*S+W*E,X=z*S+F*E,Z=G*S+q*E,W=L*-E+W*S,F=z*-E+F*S,q=G*-E+q*S,$=I*-E+$*S,L=Y,z=X,G=Z),_=Ul(-D,q),v=_*$i,_&&(S=Math.cos(-_),E=Math.sin(-_),Y=A*S-W*E,X=C*S-F*E,Z=D*S-q*E,$=M*E+$*S,A=Y,C=X,D=Z),_=Ul(C,A),p=_*$i,_&&(S=Math.cos(_),E=Math.sin(_),Y=A*S+C*E,X=L*S+z*E,C=C*S-A*E,z=z*S-L*E,A=Y,L=X),j&&Math.abs(j)+Math.abs(p)>359.9&&(j=p=0,v=180-v),m=Qt(Math.sqrt(A*A+C*C+D*D)),x=Qt(Math.sqrt(z*z+G*G)),_=Ul(L,z),g=Math.abs(_)>2e-4?_*$i:0,b=$?1/($<0?-$:$):0),n.svg&&(Y=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!a4(Ls(t,It)),Y&&t.setAttribute("transform",Y))),Math.abs(g)>90&&Math.abs(g)<270&&(i?(m*=-1,g+=p<=0?180:-180,p+=p<=0?180:-180):(x*=-1,g+=g<=0?180:-180)),s=s||n.uncache,n.x=u-((n.xPercent=u&&(!s&&n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-u)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+l,n.y=h-((n.yPercent=h&&(!s&&n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-h)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+l,n.z=f+l,n.scaleX=Qt(m),n.scaleY=Qt(x),n.rotation=Qt(p)+o,n.rotationX=Qt(j)+o,n.rotationY=Qt(v)+o,n.skewX=g+o,n.skewY=y+o,n.transformPerspective=b+l,(n.zOrigin=parseFloat(d.split(" ")[2])||!s&&n.zOrigin||0)&&(a[ts]=Hf(d)),n.xOffset=n.yOffset=0,n.force3D=hs.force3D,n.renderTransform=n.svg?fF:t4?i4:hF,n.uncache=0,n},Hf=function(t){return(t=t.split(" "))[0]+" "+t[1]},mx=function(t,s,n){var a=_r(s);return Qt(parseFloat(s)+parseFloat(Ci(t,"x",n+"px",a)))+a},hF=function(t,s){s.z="0px",s.rotationY=s.rotationX="0deg",s.force3D=0,i4(t,s)},Di="0deg",Uc="0px",Li=") ",i4=function(t,s){var n=s||this,a=n.xPercent,i=n.yPercent,l=n.x,o=n.y,c=n.z,d=n.rotation,u=n.rotationY,h=n.rotationX,f=n.skewX,m=n.skewY,x=n.scaleX,p=n.scaleY,j=n.transformPerspective,v=n.force3D,g=n.target,y=n.zOrigin,b="",N=v==="auto"&&t&&t!==1||v===!0;if(y&&(h!==Di||u!==Di)){var k=parseFloat(u)*_o,w=Math.sin(k),_=Math.cos(k),S;k=parseFloat(h)*_o,S=Math.cos(k),l=mx(g,l,w*S*-y),o=mx(g,o,-Math.sin(k)*-y),c=mx(g,c,_*S*-y+y)}j!==Uc&&(b+="perspective("+j+Li),(a||i)&&(b+="translate("+a+"%, "+i+"%) "),(N||l!==Uc||o!==Uc||c!==Uc)&&(b+=c!==Uc||N?"translate3d("+l+", "+o+", "+c+") ":"translate("+l+", "+o+Li),d!==Di&&(b+="rotate("+d+Li),u!==Di&&(b+="rotateY("+u+Li),h!==Di&&(b+="rotateX("+h+Li),(f!==Di||m!==Di)&&(b+="skew("+f+", "+m+Li),(x!==1||p!==1)&&(b+="scale("+x+", "+p+Li),g.style[It]=b||"translate(0, 0)"},fF=function(t,s){var n=s||this,a=n.xPercent,i=n.yPercent,l=n.x,o=n.y,c=n.rotation,d=n.skewX,u=n.skewY,h=n.scaleX,f=n.scaleY,m=n.target,x=n.xOrigin,p=n.yOrigin,j=n.xOffset,v=n.yOffset,g=n.forceCSS,y=parseFloat(l),b=parseFloat(o),N,k,w,_,S;c=parseFloat(c),d=parseFloat(d),u=parseFloat(u),u&&(u=parseFloat(u),d+=u,c+=u),c||d?(c*=_o,d*=_o,N=Math.cos(c)*h,k=Math.sin(c)*h,w=Math.sin(c-d)*-f,_=Math.cos(c-d)*f,d&&(u*=_o,S=Math.tan(d-u),S=Math.sqrt(1+S*S),w*=S,_*=S,u&&(S=Math.tan(u),S=Math.sqrt(1+S*S),N*=S,k*=S)),N=Qt(N),k=Qt(k),w=Qt(w),_=Qt(_)):(N=h,_=f,k=w=0),(y&&!~(l+"").indexOf("px")||b&&!~(o+"").indexOf("px"))&&(y=Ci(m,"x",l,"px"),b=Ci(m,"y",o,"px")),(x||p||j||v)&&(y=Qt(y+x-(x*N+p*w)+j),b=Qt(b+p-(x*k+p*_)+v)),(a||i)&&(S=m.getBBox(),y=Qt(y+a/100*S.width),b=Qt(b+i/100*S.height)),S="matrix("+N+","+k+","+w+","+_+","+y+","+b+")",m.setAttribute("transform",S),g&&(m.style[It]=S)},mF=function(t,s,n,a,i){var l=360,o=fr(i),c=parseFloat(i)*(o&&~i.indexOf("rad")?$i:1),d=c-a,u=a+d+"deg",h,f;return o&&(h=i.split("_")[1],h==="short"&&(d%=l,d!==d%(l/2)&&(d+=d<0?l:-l)),h==="cw"&&d<0?d=(d+l*l1)%l-~~(d/l)*l:h==="ccw"&&d>0&&(d=(d-l*l1)%l-~~(d/l)*l)),t._pt=f=new es(t._pt,s,n,a,d,XL),f.e=u,f.u="deg",t._props.push(n),f},m1=function(t,s){for(var n in s)t[n]=s[n];return t},pF=function(t,s,n){var a=m1({},n._gsap),i="perspective,force3D,transformOrigin,svgOrigin",l=n.style,o,c,d,u,h,f,m,x;a.svg?(d=n.getAttribute("transform"),n.setAttribute("transform",""),l[It]=s,o=ru(n,1),Tl(n,It),n.setAttribute("transform",d)):(d=getComputedStyle(n)[It],l[It]=s,o=ru(n,1),l[It]=d);for(c in ja)d=a[c],u=o[c],d!==u&&i.indexOf(c)<0&&(m=_r(d),x=_r(u),h=m!==x?Ci(n,c,d,x):parseFloat(d),f=parseFloat(u),t._pt=new es(t._pt,o,c,h,f-h,Ig),t._pt.u=x||0,t._props.push(c));m1(o,a)};Jr("padding,margin,Width,Radius",function(e,t){var s="Top",n="Right",a="Bottom",i="Left",l=(t<3?[s,n,a,i]:[s+i,s+n,a+n,a+i]).map(function(o){return t<2?e+o:"border"+o+e});Vf[t>1?"border"+e:e]=function(o,c,d,u,h){var f,m;if(arguments.length<4)return f=l.map(function(x){return Yn(o,x,d)}),m=f.join(" "),m.split(f[0]).length===5?f[0]:m;f=(u+"").split(" "),m={},l.forEach(function(x,p){return m[x]=f[p]=f[p]||f[(p-1)/2|0]}),o.init(c,m,h)}});var l4={name:"css",register:qg,targetTest:function(t){return t.style&&t.nodeType},init:function(t,s,n,a,i){var l=this._props,o=t.style,c=n.vars.startAt,d,u,h,f,m,x,p,j,v,g,y,b,N,k,w,_;Kb||qg(),this.styles=this.styles||e4(t),_=this.styles.props,this.tween=n;for(p in s)if(p!=="autoRound"&&(u=s[p],!(is[p]&&zE(p,s,n,a,t,i)))){if(m=typeof u,x=Vf[p],m==="function"&&(u=u.call(n,a,t,i),m=typeof u),m==="string"&&~u.indexOf("random(")&&(u=Zd(u)),x)x(this,t,p,u,n)&&(w=1);else if(p.substr(0,2)==="--")d=(getComputedStyle(t).getPropertyValue(p)+"").trim(),u+="",vi.lastIndex=0,vi.test(d)||(j=_r(d),v=_r(u)),v?j!==v&&(d=Ci(t,p,d,v)+v):j&&(u+=j),this.add(o,"setProperty",d,u,a,i,0,0,p),l.push(p),_.push(p,0,o[p]);else if(m!=="undefined"){if(c&&p in c?(d=typeof c[p]=="function"?c[p].call(n,a,t,i):c[p],fr(d)&&~d.indexOf("random(")&&(d=Zd(d)),_r(d+"")||d==="auto"||(d+=hs.units[p]||_r(Yn(t,p))||""),(d+"").charAt(1)==="="&&(d=Yn(t,p))):d=Yn(t,p),f=parseFloat(d),g=m==="string"&&u.charAt(1)==="="&&u.substr(0,2),g&&(u=u.substr(2)),h=parseFloat(u),p in Cn&&(p==="autoAlpha"&&(f===1&&Yn(t,"visibility")==="hidden"&&h&&(f=0),_.push("visibility",0,o.visibility),si(this,o,"visibility",f?"inherit":"hidden",h?"inherit":"hidden",!h)),p!=="scale"&&p!=="transform"&&(p=Cn[p],~p.indexOf(",")&&(p=p.split(",")[0]))),y=p in ja,y){if(this.styles.save(p),m==="string"&&u.substring(0,6)==="var(--"&&(u=Ls(t,u.substring(4,u.indexOf(")"))),h=parseFloat(u)),b||(N=t._gsap,N.renderTransform&&!s.parseTransform||ru(t,s.parseTransform),k=s.smoothOrigin!==!1&&N.smooth,b=this._pt=new es(this._pt,o,It,0,1,N.renderTransform,N,0,-1),b.dep=1),p==="scale")this._pt=new es(this._pt,N,"scaleY",N.scaleY,(g?No(N.scaleY,g+h):h)-N.scaleY||0,Ig),this._pt.u=0,l.push("scaleY",p),p+="X";else if(p==="transformOrigin"){_.push(ts,0,o[ts]),u=dF(u),N.svg?$g(t,u,0,k,0,this):(v=parseFloat(u.split(" ")[2])||0,v!==N.zOrigin&&si(this,N,"zOrigin",N.zOrigin,v),si(this,o,p,Hf(d),Hf(u)));continue}else if(p==="svgOrigin"){$g(t,u,1,k,0,this);continue}else if(p in n4){mF(this,N,p,f,g?No(f,g+u):u);continue}else if(p==="smoothOrigin"){si(this,N,"smooth",N.smooth,u);continue}else if(p==="force3D"){N[p]=u;continue}else if(p==="transform"){pF(this,u,t);continue}}else p in o||(p=ac(p)||p);if(y||(h||h===0)&&(f||f===0)&&!QL.test(u)&&p in o)j=(d+"").substr((f+"").length),h||(h=0),v=_r(u)||(p in hs.units?hs.units[p]:j),j!==v&&(f=Ci(t,p,d,v)),this._pt=new es(this._pt,y?N:o,p,f,(g?No(f,g+h):h)-f,!y&&(v==="px"||p==="zIndex")&&s.autoRound!==!1?JL:Ig),this._pt.u=v||0,j!==v&&v!=="%"&&(this._pt.b=d,this._pt.r=ZL);else if(p in o)cF.call(this,t,p,d,g?g+u:u);else if(p in t)this.add(t,p,d||t[p],g?g+u:u,a,i);else if(p!=="parseTransform"){Bb(p,u);continue}y||(p in o?_.push(p,0,o[p]):typeof t[p]=="function"?_.push(p,2,t[p]()):_.push(p,1,d||t[p])),l.push(p)}}w&&KE(this)},render:function(t,s){if(s.tween._time||!Qb())for(var n=s._pt;n;)n.r(t,n.d),n=n._next;else s.styles.revert()},get:Yn,aliases:Cn,getSetter:function(t,s,n){var a=Cn[s];return a&&a.indexOf(",")<0&&(s=a),s in ja&&s!==ts&&(t._gsap.x||Yn(t,"x"))?n&&i1===n?s==="scale"?sF:rF:(i1=n||{})&&(s==="scale"?nF:aF):t.style&&!Lb(t.style[s])?eF:~s.indexOf("-")?tF:Yb(t,s)},core:{_removeProperty:Tl,_getMatrix:Zb}};ss.utils.checkPrefix=ac;ss.core.getStyleSaver=e4;(function(e,t,s,n){var a=Jr(e+","+t+","+s,function(i){ja[i]=1});Jr(t,function(i){hs.units[i]="deg",n4[i]=1}),Cn[a[13]]=e+","+t,Jr(n,function(i){var l=i.split(":");Cn[l[1]]=a[l[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Jr("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){hs.units[e]="px"});ss.registerPlugin(l4);var bt=ss.registerPlugin(l4)||ss;bt.core.Tween;var o4={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},p1=na.createContext&&na.createContext(o4),xF=["attr","size","title"];function gF(e,t){if(e==null)return{};var s=yF(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function yF(e,t){if(e==null)return{};var s={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;s[n]=e[n]}return s}function Wf(){return Wf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Wf.apply(this,arguments)}function x1(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function Yf(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?x1(Object(s),!0).forEach(function(n){bF(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):x1(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function bF(e,t,s){return t=vF(t),t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function vF(e){var t=jF(e,"string");return typeof t=="symbol"?t:t+""}function jF(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function c4(e){return e&&e.map((t,s)=>na.createElement(t.tag,Yf({key:s},t.attr),c4(t.child)))}function ns(e){return t=>na.createElement(NF,Wf({attr:Yf({},e.attr)},t),c4(e.child))}function NF(e){var t=s=>{var{attr:n,size:a,title:i}=e,l=gF(e,xF),o=a||s.size||"1em",c;return s.className&&(c=s.className),e.className&&(c=(c?c+" ":"")+e.className),na.createElement("svg",Wf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,n,l,{className:c,style:Yf(Yf({color:e.color||s.color},s.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),i&&na.createElement("title",null,i),e.children)};return p1!==void 0?na.createElement(p1.Consumer,null,s=>t(s)):t(o4)}function wF(e){return ns({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(e)}function _F(e){return ns({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"},child:[]}]})(e)}function SF(e){return ns({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M208 352c-2.39 0-4.78.35-7.06 1.09C187.98 357.3 174.35 360 160 360c-14.35 0-27.98-2.7-40.95-6.91-2.28-.74-4.66-1.09-7.05-1.09C49.94 352-.33 402.48 0 464.62.14 490.88 21.73 512 48 512h224c26.27 0 47.86-21.12 48-47.38.33-62.14-49.94-112.62-112-112.62zm-48-32c53.02 0 96-42.98 96-96s-42.98-96-96-96-96 42.98-96 96 42.98 96 96 96zM592 0H208c-26.47 0-48 22.25-48 49.59V96c23.42 0 45.1 6.78 64 17.8V64h352v288h-64v-64H384v64h-76.24c19.1 16.69 33.12 38.73 39.69 64H592c26.47 0 48-22.25 48-49.59V49.59C640 22.25 618.47 0 592 0z"},child:[]}]})(e)}function kF(e){return ns({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(e)}function EF(e){return ns({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 448h-80V113.45C544 86.19 522.47 64 496 64H384v64h96v384h144c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM312.24 1.01l-192 49.74C105.99 54.44 96 67.7 96 82.92V448H16c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h336V33.18c0-21.58-19.56-37.41-39.76-32.17zM264 288c-13.25 0-24-14.33-24-32s10.75-32 24-32 24 14.33 24 32-10.75 32-24 32z"},child:[]}]})(e)}function g1(e){return ns({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function px(e){return ns({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(e)}function y1(e){return ns({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function CF(e){return ns({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M448 192V77.25c0-8.49-3.37-16.62-9.37-22.63L393.37 9.37c-6-6-14.14-9.37-22.63-9.37H96C78.33 0 64 14.33 64 32v160c-35.35 0-64 28.65-64 64v112c0 8.84 7.16 16 16 16h48v96c0 17.67 14.33 32 32 32h320c17.67 0 32-14.33 32-32v-96h48c8.84 0 16-7.16 16-16V256c0-35.35-28.65-64-64-64zm-64 256H128v-96h256v96zm0-224H128V64h192v48c0 8.84 7.16 16 16 16h48v96zm48 72c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"},child:[]}]})(e)}function AF(e){return ns({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M308 96c6.627 0 12-5.373 12-12V44c0-6.627-5.373-12-12-12H12C5.373 32 0 37.373 0 44v44.748c0 6.627 5.373 12 12 12h85.28c27.308 0 48.261 9.958 60.97 27.252H12c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h158.757c-6.217 36.086-32.961 58.632-74.757 58.632H12c-6.627 0-12 5.373-12 12v53.012c0 3.349 1.4 6.546 3.861 8.818l165.052 152.356a12.001 12.001 0 0 0 8.139 3.182h82.562c10.924 0 16.166-13.408 8.139-20.818L116.871 319.906c76.499-2.34 131.144-53.395 138.318-127.906H308c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-58.69c-3.486-11.541-8.28-22.246-14.252-32H308z"},child:[]}]})(e)}function TF(e){return ns({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(e)}function OF(e){return ns({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(e)}function RF(e){return ns({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(e)}function PF(e){return ns({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}const MF=({isOpen:e,setIsOpen:t})=>{var f,m;const s=Ie(vs),n=Ie(mr),{hasPermission:a}=oE(),i=O.useRef(null),l=O.useRef(null),o=O.useRef([]),c=O.useRef(null),d=()=>({guard:"Security Guard",cleaner:"Maintenance Staff",accountant:"Accountant",admin:"Administrator",teacher:"Teacher",student:"Student",principal:"Principal",frontdesk:"Front Desk Staff"})[n]||(n==null?void 0:n.replace("_"," ").charAt(0).toUpperCase())+(n==null?void 0:n.slice(1)),h=[{name:"Dashboard",path:"/dashboard",icon:HM,show:!0},{name:"Classes",path:"/classes",icon:De,show:a(ie.VIEW_CLASSES)},{name:"Users",path:"/users",icon:Xe,show:["admin","super_admin"].includes(n)},{name:"Subjects",path:"/subjects",icon:ei,show:a(ie.VIEW_CLASS_SUBJECTS)},{name:"Admissions",path:"/admissions",icon:Ue,show:a(ie.VIEW_ADMISSIONS)},{name:"Visitors",path:"/visitors",icon:oa,permission:"visitors"},{name:"Attendance",path:"/attendance",icon:Zn,show:!1},{name:"Front Desk",path:"/frontdesk",icon:oa,show:["admin","super_admin"].includes(n)},{name:"Exams",path:"/exams",icon:De,show:a(ie.VIEW_EXAMS)},{name:"Results",path:"/results",icon:Ue,show:n==="student"},{name:"My Reports",path:"/my-reports",icon:Zn,show:n==="student"},{name:"Assignments",path:"/assignments",icon:Ue,show:!1},{name:"Fee Management",path:"/fees",icon:AF,show:a(ie.VIEW_FEES)},{name:"Events",path:"/events",icon:Te,show:a(ie.VIEW_EVENTS)},{name:"Announcements",path:"/announcements",icon:Is,show:a(ie.VIEW_ANNOUNCEMENTS)},{name:"Schedule",path:"/schedule",icon:Te,show:a(ie.VIEW_SCHEDULE)},{name:"Messages",path:"/messages",icon:Ab,show:a(ie.VIEW_MESSAGES)},{name:"Library",path:"/library",icon:De,show:!0},{name:"Hostel",path:"/hostel",icon:jo,show:!["teacher","frontdesk","guard","cleaner","accountant"].includes(n)},{name:"Transport",path:"/transport",icon:Xr,show:!["teacher","frontdesk","guard","cleaner","accountant"].includes(n)},{name:"Payroll",path:"/payroll",icon:Si,show:a(ie.VIEW_PAYROLL)},{name:"Leave Management",path:"/leaves",icon:Zn,show:a(ie.MANAGE_LEAVES)&&!["admin","guard","cleaner"].includes(n)},{name:"My Leaves",path:"/my-leaves",icon:Zn,show:(["teacher","student","accountant","guard","cleaner"].includes(n)||a(ie.SUBMIT_LEAVE))&&!["admin","super_admin"].includes(n)},{name:"Reports",path:"/reports",icon:Ue,show:n!=="student"},{name:"Blogs",path:"/blogs",icon:De,show:a(ie.VIEW_BLOGS)},{name:"Bus Attendance",path:"/bus-attendance-reports",icon:Zn,show:!["teacher","frontdesk","guard","cleaner","accountant"].includes(n)},{name:"Discipline",path:"/discipline",icon:If,show:["admin","super_admin"].includes(n)},{name:"Marksheet",path:"/marksheets",icon:Ue,show:["admin","super_admin"].includes(n)}].filter(x=>x.show);return O.useEffect(()=>{if(!e)return;const x=bt.context(()=>{bt.from(l.current,{scale:0,rotation:360,duration:.8,ease:"elastic.out(1, 0.5)"}),bt.to(l.current,{rotation:5,duration:3,repeat:-1,yoyo:!0,ease:"sine.inOut"}),bt.from(o.current,{x:-50,opacity:0,duration:.5,stagger:.05,ease:"power2.out",delay:.2}),bt.from(c.current,{y:50,opacity:0,duration:.6,delay:.5,ease:"power2.out"})},i);return()=>x.revert()},[e]),r.jsxs(r.Fragment,{children:[e&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20 lg:hidden",onClick:()=>t(!1)}),r.jsxs("aside",{ref:i,className:`
    fixed lg:static inset-y-0 left-0 z-30
    w-64 bg-gradient-to-b from-white via-blue-50/30 to-white shadow-2xl flex flex-col
    transform transition-transform duration-300 ease-in-out
    ${e?"translate-x-0":"-translate-x-full lg:translate-x-0"}
    border-r border-gray-200
  `,children:[r.jsxs("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-200 flex-shrink-0 bg-white/80 backdrop-blur-sm",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("div",{ref:l,className:"bg-gradient-to-br from-blue-600 to-blue-400 p-2 rounded-xl shadow-lg shadow-blue-500/20 relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent to-white opacity-20"}),r.jsx(Cl,{className:"w-6 h-6 text-white relative z-10"})]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Gyan School"}),r.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[r.jsx(Al,{className:"w-2 h-2"}),"Management System"]})]})]}),r.jsx("button",{onClick:()=>t(!1),className:"lg:hidden text-gray-500 hover:text-gray-700 hover:bg-gray-100 p-1 rounded-lg transition-all duration-200",children:r.jsx(qr,{className:"w-6 h-6"})})]}),r.jsx("nav",{className:"flex-1 px-4 py-6 overflow-y-auto custom-scrollbar",children:r.jsx("ul",{className:"space-y-1",children:h.map((x,p)=>r.jsx("li",{ref:j=>o.current[p]=j,children:r.jsx(sT,{to:x.path,className:({isActive:j})=>`nav-item flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-300 group relative overflow-hidden ${j?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg":"text-gray-700 hover:bg-gradient-to-r hover:from-blue-50 hover:to-blue-100 hover:shadow-md"}`,onClick:()=>{window.innerWidth<1024&&t(!1)},children:({isActive:j})=>r.jsxs(r.Fragment,{children:[!j&&r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/0 to-purple-600/0 group-hover:from-blue-500/10 group-hover:to-purple-600/10 transition-all duration-300"}),r.jsx(x.icon,{className:`w-5 h-5 relative z-10 transition-transform duration-300 ${j?"":"group-hover:scale-110"}`}),r.jsx("span",{className:"font-medium relative z-10",children:x.name}),j&&r.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1 bg-white rounded-l-full"})]})})},x.path))})}),r.jsx("div",{ref:c,className:"p-4 border-t border-gray-200 flex-shrink-0 bg-gradient-to-r from-blue-50/50 to-purple-50/50",children:r.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-xl bg-white shadow-md hover:shadow-lg transition-all duration-300 cursor-pointer group",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300",children:r.jsx("span",{className:"text-white font-semibold",children:(f=s==null?void 0:s.email)==null?void 0:f.charAt(0).toUpperCase()})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:((m=s==null?void 0:s.details)==null?void 0:m.first_name)||(s==null?void 0:s.email)}),r.jsxs("p",{className:"text-xs text-gray-500 capitalize flex items-center gap-1",children:[r.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),d()]})]})]})})]}),r.jsx("style",{children:`
  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
  }
  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }
  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: linear-gradient(to bottom, #1e40af, #3b82f6);
    border-radius: 10px;
  }
  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(to bottom, #1e3a8a, #2563eb);
  }
`})]})},DF=()=>{const e=We(),t=Me(),[s,n]=O.useState(!1),a=O.useRef(null),{data:i}=me({queryKey:["notifications","unread-count"],queryFn:()=>Ja.getUnreadCount(),refetchInterval:6e4}),l=(i==null?void 0:i.count)||0,{data:o,refetch:c,isLoading:d}=me({queryKey:["notifications","recent"],queryFn:()=>Ja.getAll({limit:5}),enabled:s}),u=(o==null?void 0:o.data)||[];O.useEffect(()=>{const x=p=>{console.log(" Client received notification:",p),K.success(p.title,{icon:"",duration:4e3}),t.invalidateQueries(["notifications"])};return nt.onNewNotification(x),()=>{nt.removeListener("new_notification")}},[t]),O.useEffect(()=>{const x=p=>{a.current&&!a.current.contains(p.target)&&n(!1)};return document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}},[]);const h=_e({mutationFn:x=>Ja.markAsRead(x),onSuccess:()=>{t.invalidateQueries(["notifications"])}}),f=_e({mutationFn:()=>Ja.markAllAsRead(),onSuccess:()=>{t.invalidateQueries(["notifications"]),K.success("All notifications marked as read")}}),m=x=>{x.is_read||h.mutate(x.id),n(!1),x.link?e(x.link):e("/notifications")};return r.jsxs("div",{className:"relative",ref:a,children:[r.jsxs("button",{onClick:()=>n(!s),className:"relative p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-full transition-colors",children:[r.jsx(yg,{className:"w-6 h-6"}),l>0&&r.jsx("span",{className:"absolute top-1 right-1 w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center border-2 border-white",children:l>99?"99+":l})]}),s&&r.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-xl border border-gray-100 z-50 overflow-hidden",children:[r.jsxs("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center bg-gray-50",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Notifications"}),l>0&&r.jsx("button",{onClick:()=>f.mutate(),className:"text-xs text-blue-600 hover:text-blue-800 font-medium",children:"Mark all read"})]}),r.jsx("div",{className:"max-h-96 overflow-y-auto",children:d?r.jsx("div",{className:"p-8 text-center",children:r.jsx("div",{className:"loading mx-auto"})}):u.length===0?r.jsxs("div",{className:"p-8 text-center text-gray-500",children:[r.jsx(yg,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),r.jsx("p",{children:"No notifications yet"})]}):r.jsx("div",{className:"divide-y divide-gray-50",children:u.map(x=>r.jsx("div",{onClick:()=>m(x),className:`p-4 hover:bg-gray-50 cursor-pointer transition-colors ${x.is_read?"":"bg-blue-50/30"}`,children:r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:`mt-1 w-2 h-2 rounded-full flex-shrink-0 ${x.is_read?"bg-transparent":"bg-blue-500"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${x.is_read?"text-gray-700":"font-semibold text-gray-900"}`,children:x.title}),r.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:x.message}),r.jsx("p",{className:"text-xs text-gray-400 mt-2",children:new Date(x.created_at).toLocaleString()})]})]})},x.id))})}),r.jsx("div",{className:"p-3 border-t border-gray-100 bg-gray-50 text-center",children:r.jsx("button",{onClick:()=>{n(!1),e("/notifications")},className:"text-sm text-blue-600 hover:text-blue-800 font-medium w-full",children:"View All Notifications"})})]})]})},LF=({toggleSidebar:e})=>{var c,d,u,h;const t=We(),s=YS(),n=Me(),a=Ie(vs),[i,l]=O.useState(!1),o=()=>{s(CM()),n.clear(),K.success("Logged out successfully"),t("/login")};return r.jsxs("header",{className:"bg-white shadow-sm border-b border-gray-200 h-16 flex items-center justify-between px-6",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{onClick:e,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:r.jsx(YM,{className:"w-6 h-6 text-gray-600"})}),r.jsx("div",{children:r.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Welcome back,"," ",((c=a==null?void 0:a.details)==null?void 0:c.first_name)||((d=a==null?void 0:a.email)==null?void 0:d.split("@")[0]),"!"]})})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(DF,{}),r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>l(!i),className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 transition-colors",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:r.jsx("span",{className:"text-blue-600 font-semibold text-sm",children:(u=a==null?void 0:a.email)==null?void 0:u.charAt(0).toUpperCase()})}),r.jsx(IM,{className:"w-4 h-4 text-gray-600"})]}),i&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>l(!1)}),r.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-20",children:[r.jsxs("div",{className:"px-4 py-2 border-b border-gray-200",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:a==null?void 0:a.email}),r.jsx("p",{className:"text-xs text-gray-500 capitalize",children:(h=a==null?void 0:a.role)==null?void 0:h.replace("_"," ")})]}),r.jsxs("button",{onClick:()=>{t("/profile"),l(!1)},className:"w-full flex items-center space-x-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[r.jsx(tt,{className:"w-4 h-4"}),r.jsx("span",{children:"Profile"})]}),r.jsxs("button",{onClick:()=>{t("/settings"),l(!1)},className:"w-full flex items-center space-x-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[r.jsx(Hk,{className:"w-4 h-4"}),r.jsx("span",{children:"Settings"})]}),r.jsx("div",{className:"border-t border-gray-200 my-2"}),r.jsxs("button",{onClick:o,className:"w-full flex items-center space-x-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:[r.jsx(zk,{className:"w-4 h-4"}),r.jsx("span",{children:"Logout"})]})]})]})]})]})]})},FF=()=>{const[e,t]=O.useState(!0),s=Ie(vs);return O.useEffect(()=>(s!=null&&s.id&&nt.connect(s.id),()=>{nt.disconnect()}),[s]),r.jsxs("div",{className:"flex h-screen bg-gray-100",children:[r.jsx(MF,{isOpen:e,setIsOpen:t}),r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsx(LF,{toggleSidebar:()=>t(!e)}),r.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 p-6",children:r.jsx(z3,{})})]})]})},IF=()=>{const e=We(),t=YS(),s=Ie(AM),n=Ie(TM),[a,i]=O.useState({email:"",password:""}),[l,o]=O.useState(!1),c=O.useRef(null),d=O.useRef(null),u=O.useRef(null),h=O.useRef(null),f=O.useRef(null),m=O.useRef([]);O.useEffect(()=>{const j=bt.context(()=>{bt.from(d.current,{scale:0,rotation:360,duration:1,ease:"elastic.out(1, 0.5)"}),bt.from(u.current,{y:-50,opacity:0,duration:.8,delay:.3,ease:"power3.out"}),bt.from(h.current,{y:100,opacity:0,duration:1,delay:.5,ease:"power3.out"}),bt.from(".form-element",{x:-50,opacity:0,duration:.6,stagger:.1,delay:.8,ease:"power2.out"}),m.current.forEach((v,g)=>{bt.to(v,{y:"+=20",duration:2+g*.5,repeat:-1,yoyo:!0,ease:"sine.inOut",delay:g*.2})}),bt.to(d.current,{rotation:5,duration:3,repeat:-1,yoyo:!0,ease:"sine.inOut"})},c);return()=>j.revert()},[]);const x=j=>{i({...a,[j.target.name]:j.target.value})},p=async j=>{if(j.preventDefault(),!a.email||!a.password){K.error("Please fill in all fields");return}bt.to(j.target,{scale:.95,duration:.1,yoyo:!0,repeat:1});try{const v=await t(Fh(a)).unwrap();bt.to(h.current,{scale:1.05,duration:.3,yoyo:!0,repeat:1,onComplete:()=>{K.success("Login successful!"),e("/dashboard")}})}catch(v){bt.to(h.current,{x:[-10,10,-10,10,0],duration:.5,ease:"power2.out"}),K.error(v||"Login failed")}};return r.jsxs("div",{ref:c,className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-100 via-purple-50 to-pink-100 p-4 relative overflow-hidden",children:[r.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[r.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-blue-400 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob"}),r.jsx("div",{className:"absolute top-40 right-10 w-72 h-72 bg-purple-400 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"}),r.jsx("div",{className:"absolute -bottom-8 left-20 w-72 h-72 bg-pink-400 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"})]}),r.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[r.jsx(De,{ref:j=>m.current[0]=j,className:"absolute top-20 left-1/4 w-8 h-8 text-blue-300 opacity-30"}),r.jsx(Xe,{ref:j=>m.current[1]=j,className:"absolute top-1/3 right-1/4 w-10 h-10 text-purple-300 opacity-30"}),r.jsx(Al,{ref:j=>m.current[2]=j,className:"absolute bottom-1/4 left-1/3 w-6 h-6 text-pink-300 opacity-30"}),r.jsx(Cl,{ref:j=>m.current[3]=j,className:"absolute bottom-1/3 right-1/3 w-12 h-12 text-indigo-300 opacity-30"})]}),r.jsxs("div",{className:"max-w-md w-full relative z-10",children:[r.jsxs("div",{ref:h,className:"bg-white/90 backdrop-blur-lg rounded-3xl shadow-2xl p-10 border border-white/50 relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/50 via-transparent to-transparent pointer-events-none"}),r.jsxs("div",{className:"text-center mb-8 relative z-10",children:[r.jsxs("div",{ref:d,className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl shadow-xl mb-4 border-4 border-white relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent to-white opacity-20"}),r.jsx(Cl,{className:"w-12 h-12 text-white relative z-10"})]}),r.jsxs("div",{ref:u,children:[r.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent mb-2 tracking-tight",children:"Gyan"}),r.jsx("p",{className:"text-gray-600 text-sm font-medium mb-6",children:"School Management System"})]}),r.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent mb-2",children:"Welcome Back"}),r.jsx("p",{className:"text-gray-600",children:"Please sign in to continue"})]}),n&&r.jsx("div",{className:"form-element mb-6 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg animate-shake",children:r.jsx("p",{className:"text-sm text-red-700 font-medium",children:n})}),r.jsxs("form",{ref:f,onSubmit:p,className:"space-y-6 relative z-10",children:[r.jsxs("div",{className:"form-element",children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address"}),r.jsxs("div",{className:"relative group",children:[r.jsx(ya,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5 group-focus-within:text-blue-500 transition-colors duration-200"}),r.jsx("input",{type:"email",name:"email",value:a.email,onChange:x,className:"w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all duration-300 text-gray-700 bg-white/50 backdrop-blur-sm hover:bg-white",placeholder:"your.email@gyan.edu",required:!0})]})]}),r.jsxs("div",{className:"form-element",children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password"}),r.jsxs("div",{className:"relative group",children:[r.jsx(bd,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5 group-focus-within:text-blue-500 transition-colors duration-200"}),r.jsx("input",{type:l?"text":"password",name:"password",value:a.password,onChange:x,className:"w-full pl-12 pr-12 py-4 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all duration-300 text-gray-700 bg-white/50 backdrop-blur-sm hover:bg-white",placeholder:"Enter your password",required:!0}),r.jsx("button",{type:"button",onClick:()=>o(!l),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-blue-600 transition-all duration-200 hover:scale-110",children:l?r.jsx($M,{className:"w-5 h-5"}):r.jsx(ki,{className:"w-5 h-5"})})]})]}),r.jsx("div",{className:"form-element",children:r.jsxs("button",{type:"submit",disabled:s,className:"relative z-20 w-full bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 hover:from-blue-700 hover:via-purple-700 hover:to-pink-700 text-white py-4 rounded-xl text-lg font-semibold shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none overflow-hidden group",children:[r.jsx("span",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),s?r.jsxs("span",{className:"flex items-center justify-center relative z-10",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Logging in..."]}):r.jsx("span",{className:"relative z-10",children:"Sign In"})]})})]}),r.jsx("div",{className:"form-element mt-6 text-center relative z-10",children:r.jsxs("a",{href:"#",className:"text-sm text-blue-600 hover:text-purple-600 font-medium hover:underline transition-colors duration-200 inline-flex items-center gap-1",children:["Forgot your password?",r.jsx(Al,{className:"w-3 h-3"})]})})]}),r.jsxs("div",{className:"mt-8 text-center",children:[r.jsxs("p",{className:"text-gray-700 text-sm flex items-center justify-center gap-2 font-medium",children:[r.jsx("span",{className:"inline-block w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Powered by ",r.jsx("span",{className:"font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Quantum Tech"})]}),r.jsx("p",{className:"text-gray-600 text-xs mt-2",children:" 2025 Gyan School Management System. All rights reserved."})]})]}),r.jsx("style",{jsx:!0,children:`
        @keyframes blob {
          0%, 100% { transform: translate(0, 0) scale(1); }
          25% { transform: translate(20px, -50px) scale(1.1); }
          50% { transform: translate(-20px, 20px) scale(0.9); }
          75% { transform: translate(50px, 50px) scale(1.05); }
        }
        
        .animate-blob {
          animation: blob 7s infinite;
        }
        
        .animation-delay-2000 {
          animation-delay: 2s;
        }
        
        .animation-delay-4000 {
          animation-delay: 4s;
        }

        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          25% { transform: translateX(-10px); }
          75% { transform: translateX(10px); }
        }

        .animate-shake {
          animation: shake 0.5s ease-in-out;
        }
      `})]})},b1=()=>{var m,x,p,j;const e=We(),[t,s]=O.useState(!0),[n,a]=O.useState({students:0,teachers:0,classes:0,staff:0,todayAttendance:{present:0,absent:0,total:0},fees:{collected:0,pending:0,collectionRate:0}}),[i,l]=O.useState([]),[o]=O.useState([{id:1,title:"Annual Sports Day",event_date:new Date(Date.now()+7*24*60*60*1e3),event_type:"event"},{id:2,title:"Parent-Teacher Meeting",event_date:new Date(Date.now()+14*24*60*60*1e3),event_type:"meeting"},{id:3,title:"Summer Vacation",event_date:new Date(Date.now()+21*24*60*60*1e3),event_type:"holiday"}]),c=O.useRef(null),d=O.useRef(null),u=O.useRef([]);O.useEffect(()=>{(async()=>{try{const[g,y]=await Promise.all([ee.get("/dashboard/stats"),ee.get("/dashboard/recent-registrations?limit=5")]);g.data.success&&a(b=>({...b,...g.data.data})),y.data.success&&l(y.data.data)}catch(g){console.error("Error fetching dashboard data:",g)}finally{s(!1)}})()},[]),O.useEffect(()=>{t||u.current.forEach((v,g)=>{if(!v)return;const y=v.querySelector(".stat-number");if(y){const b=parseInt(y.dataset.value)||0;let N=0;const w=b/60,_=setInterval(()=>{N+=w,N>=b?(y.textContent=b.toLocaleString(),clearInterval(_)):y.textContent=Math.ceil(N).toLocaleString()},16)}})},[t,n]);const h=v=>{const g=Math.floor((new Date-new Date(v))/1e3);let y=g/31536e3;return y>1?Math.floor(y)+" year"+(Math.floor(y)>1?"s":"")+" ago":(y=g/2592e3,y>1?Math.floor(y)+" month"+(Math.floor(y)>1?"s":"")+" ago":(y=g/86400,y>1?Math.floor(y)+" day"+(Math.floor(y)>1?"s":"")+" ago":(y=g/3600,y>1?Math.floor(y)+" hour"+(Math.floor(y)>1?"s":"")+" ago":(y=g/60,y>1?Math.floor(y)+" minute"+(Math.floor(y)>1?"s":"")+" ago":"Just now"))))},f=v=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"NTR",minimumFractionDigits:0,maximumFractionDigits:0}).format(v).replace("NTR","");return t?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):r.jsxs("div",{ref:c,className:"min-h-screen bg-gray-50 p-6 space-y-6",children:[r.jsxs("div",{ref:d,className:"relative bg-gradient-to-r from-blue-600 to-blue-700 rounded-2xl p-8 text-white shadow-lg overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-blue-500/20 rounded-full blur-3xl"}),r.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-black/10 rounded-full blur-2xl"}),r.jsxs("div",{className:"relative z-10",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(Al,{className:"w-7 h-7"}),r.jsx("h1",{className:"text-3xl font-bold",children:"Welcome back, Administrator!"})]}),r.jsx("p",{className:"text-blue-100 text-lg mb-6",children:"Here's what's happening in your school today."}),r.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm px-4 py-2 rounded-full border border-white/20",children:[r.jsx(Te,{className:"w-4 h-4"}),r.jsx("span",{className:"font-medium",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),r.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm px-4 py-2 rounded-full border border-white/20",children:[r.jsx(Sr,{className:"w-4 h-4"}),r.jsx("span",{className:"font-medium",children:"All Systems Active"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx("div",{ref:v=>u.current[0]=v,onClick:()=>e("/users?tab=students"),className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-all cursor-pointer group",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1 font-medium",children:"Total Students"}),r.jsx("h3",{className:"stat-number text-4xl font-bold text-gray-900","data-value":n.students,children:"0"}),r.jsxs("div",{className:"flex items-center mt-3 text-xs",children:[r.jsx(qN,{className:"w-4 h-4 text-blue-600 mr-1"}),r.jsx("span",{className:"text-blue-600 font-semibold",children:"Active"})]})]}),r.jsx("div",{className:"w-14 h-14 bg-blue-600 rounded-xl flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform",children:r.jsx(Xe,{className:"w-7 h-7 text-white"})})]})}),r.jsx("div",{ref:v=>u.current[1]=v,onClick:()=>e("/users?tab=teachers"),className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-all cursor-pointer group",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1 font-medium",children:"Total Teachers"}),r.jsx("h3",{className:"stat-number text-4xl font-bold text-gray-900","data-value":n.teachers,children:"0"}),r.jsxs("div",{className:"flex items-center mt-3 text-xs",children:[r.jsx(qN,{className:"w-4 h-4 text-blue-600 mr-1"}),r.jsx("span",{className:"text-blue-600 font-semibold",children:"Active"})]})]}),r.jsx("div",{className:"w-14 h-14 bg-gray-900 rounded-xl flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform",children:r.jsx(oa,{className:"w-7 h-7 text-white"})})]})}),r.jsx("div",{ref:v=>u.current[2]=v,onClick:()=>e("/classes"),className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-all cursor-pointer group",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1 font-medium",children:"Total Classes"}),r.jsx("h3",{className:"stat-number text-4xl font-bold text-gray-900","data-value":n.classes,children:"0"}),r.jsx("div",{className:"flex items-center mt-3 text-xs",children:r.jsx("span",{className:"text-gray-600 font-semibold",children:"Active classes"})})]}),r.jsx("div",{className:"w-14 h-14 bg-blue-600 rounded-xl flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform",children:r.jsx(De,{className:"w-7 h-7 text-white"})})]})}),r.jsx("div",{ref:v=>u.current[3]=v,onClick:()=>e("/users?tab=staffs"),className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-all cursor-pointer group",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1 font-medium",children:"Total Staff"}),r.jsx("h3",{className:"stat-number text-4xl font-bold text-gray-900","data-value":n.staff,children:"0"}),r.jsx("div",{className:"flex items-center mt-3 text-xs",children:r.jsx("span",{className:"text-gray-600 font-semibold",children:"Including teachers"})})]}),r.jsx("div",{className:"w-14 h-14 bg-gray-900 rounded-xl flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform",children:r.jsx(nD,{className:"w-7 h-7 text-white"})})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Today's Attendance"}),r.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"View Details"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-100",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:r.jsx(la,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Present"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Students"})]})]}),r.jsx("span",{className:"text-2xl font-bold text-gray-900",children:n.todayAttendance.present})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-100",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-900 rounded-lg flex items-center justify-center",children:r.jsx(qr,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Absent"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Students"})]})]}),r.jsx("span",{className:"text-2xl font-bold text-gray-900",children:n.todayAttendance.absent})]}),r.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Attendance Rate"}),r.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[n.todayAttendance.total>0?Math.round(n.todayAttendance.present/n.todayAttendance.total*100):0,"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:r.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-500",style:{width:`${n.todayAttendance.total>0?n.todayAttendance.present/n.todayAttendance.total*100:0}%`}})})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Fee Collection (This Month)"}),r.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"View Details"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-100",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:r.jsx(Si,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Collected"}),r.jsx("p",{className:"text-xs text-gray-500",children:"From students"})]})]}),r.jsx("span",{className:"text-lg font-bold text-gray-900",children:f(((m=n.fees)==null?void 0:m.collected)||0)})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-100",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-900 rounded-lg flex items-center justify-center",children:r.jsx(Si,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Pending"}),r.jsx("p",{className:"text-xs text-gray-500",children:"To be collected"})]})]}),r.jsx("span",{className:"text-lg font-bold text-gray-900",children:f(((x=n.fees)==null?void 0:x.pending)||0)})]}),r.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Collection Rate"}),r.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[((p=n.fees)==null?void 0:p.collectionRate)||0,"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:r.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-500",style:{width:`${((j=n.fees)==null?void 0:j.collectionRate)||0}%`}})})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Quick Actions"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("button",{onClick:()=>e("/users?tab=students"),className:"p-5 bg-gray-50 hover:bg-blue-50 rounded-xl transition-all border border-gray-200 hover:border-blue-600 text-center group",children:[r.jsx(Xe,{className:"w-8 h-8 text-blue-600 mx-auto mb-3 group-hover:scale-110 transition-transform"}),r.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Add Student"})]}),r.jsxs("button",{onClick:()=>e("/attendance"),className:"p-5 bg-gray-50 hover:bg-blue-50 rounded-xl transition-all border border-gray-200 hover:border-blue-600 text-center group",children:[r.jsx(la,{className:"w-8 h-8 text-gray-900 mx-auto mb-3 group-hover:scale-110 transition-transform"}),r.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Mark Attendance"})]}),r.jsxs("button",{onClick:()=>e("/exams"),className:"p-5 bg-gray-50 hover:bg-blue-50 rounded-xl transition-all border border-gray-200 hover:border-blue-600 text-center group",children:[r.jsx(De,{className:"w-8 h-8 text-blue-600 mx-auto mb-3 group-hover:scale-110 transition-transform"}),r.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Create Exam"})]}),r.jsxs("button",{onClick:()=>e("/events"),className:"p-5 bg-gray-50 hover:bg-blue-50 rounded-xl transition-all border border-gray-200 hover:border-blue-600 text-center group",children:[r.jsx(Te,{className:"w-8 h-8 text-gray-900 mx-auto mb-3 group-hover:scale-110 transition-transform"}),r.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Add Event"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Registrations"}),r.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"View All"})]}),r.jsx("div",{className:"space-y-3",children:i.length===0?r.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No recent registrations found."}):i.map(v=>r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-blue-50 transition-all cursor-pointer border border-gray-100 hover:border-blue-600",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center overflow-hidden",children:v.profile_photo?r.jsx("img",{src:`http://localhost:5000/${v.profile_photo}`,alt:v.first_name,className:"w-full h-full object-cover"}):r.jsx("span",{className:"text-white font-semibold text-sm",children:v.first_name.charAt(0)})}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[v.first_name," ",v.last_name]}),r.jsxs("p",{className:"text-xs text-gray-500",children:[r.jsx("span",{className:"capitalize",children:v.type}),v.class_name&&r.jsxs(r.Fragment,{children:["  ",v.class_name,v.section_name&&`-${v.section_name}`]})]})]})]}),r.jsx("span",{className:"text-xs text-gray-500 font-medium",children:h(v.created_at)})]},`${v.type}-${v.id}`))})]}),r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Upcoming Events"}),r.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"View All"})]}),r.jsx("div",{className:"space-y-3",children:o.map(v=>r.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg hover:bg-blue-50 transition-all cursor-pointer border border-gray-100 hover:border-blue-600",children:[r.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center",children:r.jsx(Te,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:v.title}),r.jsx("p",{className:"text-xs text-gray-500",children:new Date(v.event_date).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})})]}),r.jsx("span",{className:`text-xs px-3 py-1 rounded-full font-semibold ${v.event_type==="holiday"?"bg-gray-900 text-white":"bg-blue-600 text-white"}`,children:v.event_type})]},v.id))})]})]})]})},nd=O.forwardRef(({title:e,value:t,subtitle:s,icon:n,gradient:a="from-blue-500 to-blue-600",bgGradient:i="from-white to-blue-50/30",iconGradient:l,textColor:o,onClick:c,className:d=""},u)=>{const h=l||a;return r.jsx("div",{ref:u,onClick:c,className:`card hover:shadow-2xl transition-all duration-500 cursor-pointer transform hover:-translate-y-2 hover:scale-105 bg-gradient-to-br ${i} ${d}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 mb-1 font-medium",children:e}),o?r.jsx("h3",{className:`stat-number text-4xl font-bold ${o}`,children:t}):r.jsx("h3",{className:`stat-number text-4xl font-bold bg-gradient-to-r ${a} bg-clip-text text-transparent`,children:t}),s&&r.jsx("div",{className:"flex items-center mt-3 text-xs",children:r.jsx("span",{className:"text-gray-600 font-semibold",children:s})})]}),n&&r.jsx("div",{className:`w-16 h-16 bg-gradient-to-br ${h} rounded-2xl flex items-center justify-center shadow-xl transform hover:rotate-12 transition-transform duration-300`,children:r.jsx(n,{className:"w-8 h-8 text-white"})})]})})});nd.displayName="StatCard";const d4=O.forwardRef(({title:e,subtitle:t,date:s=!0,stats:n=[],gradient:a="from-blue-600 via-purple-600 to-pink-600"},i)=>r.jsxs("div",{ref:i,className:`bg-gradient-to-r ${a} rounded-2xl p-8 text-white shadow-2xl relative overflow-hidden`,children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent pointer-events-none"}),r.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl"}),r.jsxs("div",{className:"relative z-10",children:[r.jsx("h2",{className:"text-3xl font-bold mb-2",children:e}),t&&r.jsx("p",{className:"text-lg opacity-90 mb-6",children:t}),s&&r.jsx("p",{className:"text-sm opacity-80 mb-6",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),n.length>0&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:n.map((l,o)=>r.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl p-4 border border-white/30",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.icon&&r.jsx(l.icon,{className:"w-5 h-5"}),r.jsx("p",{className:"text-sm opacity-90",children:l.label})]}),r.jsx("p",{className:"text-3xl font-bold",children:l.value}),l.subtitle&&r.jsx("p",{className:"text-sm opacity-80 mt-2",children:l.subtitle})]},o))})]})]}));d4.displayName="WelcomeBanner";const ad=O.forwardRef(({title:e,icon:t,action:s,actionLabel:n="View All",children:a,className:i=""},l)=>r.jsxs("div",{ref:l,className:`card ${i}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[t&&r.jsx(t,{className:"w-6 h-6 text-blue-600"}),e]}),s&&r.jsx("button",{onClick:s,className:"text-sm text-blue-600 hover:text-blue-700 font-medium hover:underline",children:n})]}),a]}));ad.displayName="SectionCard";const fh=({icon:e,label:t,description:s,onClick:n,color:a="blue"})=>{const i={blue:{bg:"bg-blue-50 hover:bg-blue-100",gradient:"from-blue-500 to-blue-600",border:"border-blue-100"},green:{bg:"bg-green-50 hover:bg-green-100",gradient:"from-green-500 to-green-600",border:"border-green-100"},purple:{bg:"bg-purple-50 hover:bg-purple-100",gradient:"from-purple-500 to-purple-600",border:"border-purple-100"},orange:{bg:"bg-orange-50 hover:bg-orange-100",gradient:"from-orange-500 to-orange-600",border:"border-orange-100"},red:{bg:"bg-red-50 hover:bg-red-100",gradient:"from-red-500 to-red-600",border:"border-red-100"}},l=i[a]||i.blue;return r.jsx("button",{onClick:n,className:`w-full p-4 ${l.bg} rounded-xl transition-all duration-300 text-left group hover:shadow-lg border ${l.border}`,children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${l.gradient} rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform shadow-lg`,children:r.jsx(e,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-900",children:t}),s&&r.jsx("p",{className:"text-xs text-gray-600",children:s})]})]})})},BF=({size:e="md",className:t=""})=>{const s={sm:"h-8 w-8",md:"h-12 w-12",lg:"h-16 w-16"};return r.jsx("div",{className:`flex items-center justify-center ${t}`,children:r.jsx("div",{className:`animate-spin rounded-full ${s[e]} border-b-2 border-blue-600`})})},v1=({icon:e,title:t,description:s,action:n,actionLabel:a})=>r.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl",children:[e&&r.jsx(e,{className:"w-16 h-16 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-900 font-semibold mb-1",children:t}),s&&r.jsx("p",{className:"text-gray-500 text-sm mb-4",children:s}),n&&r.jsx("button",{onClick:n,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:a})]}),qF=()=>{var y,b;const e=We(),t=Ie(vs),{hasPermission:s}=oE(),[n,a]=O.useState(null),[i,l]=O.useState([]),[o,c]=O.useState(!0),d=O.useRef(null),u=O.useRef(null),h=O.useRef([]),f=O.useRef([]);O.useEffect(()=>{m()},[]),O.useEffect(()=>{if(o)return;const N=bt.context(()=>{bt.fromTo(u.current,{y:-30,opacity:0},{y:0,opacity:1,duration:.8,ease:"power3.out"}),h.current.forEach((k,w)=>{if(!k)return;bt.set(k,{opacity:1,y:0,scale:1});const _=k.querySelector(".stat-number");if(_){const S=parseInt(_.textContent)||0;_.textContent="0",bt.to(_,{textContent:S,duration:1.5,delay:.2+w*.1,ease:"power2.out",snap:{textContent:1},onUpdate:function(){_.textContent=Math.ceil(this.targets()[0].textContent)}})}}),f.current.forEach(k=>{k&&bt.set(k,{opacity:1,y:0})})},d);return()=>N.revert()},[o]);const m=async()=>{var N;try{c(!0);let k={},w=0,_=[],S=null;try{const A=(N=(await Pt.getAll()).data)==null?void 0:N.find(C=>C.user_id===t.id);A?(S=A.id,console.log("Found teacher ID:",S,"for user:",t.id)):console.error("Teacher record not found for user:",t.id)}catch(E){console.error("Teacher fetch error:",E)}if(!S){c(!1),K.error("Teacher profile not found");return}try{k=(await Eb.getTeacherStats(S)).data||{},w=k.students||0}catch(E){console.error("Stats fetch error:",E)}try{_=(await Pt.getSchedule(S)).data||[]}catch(E){console.error("Schedule fetch error:",E)}a(k),l(_)}catch(k){console.error("Dashboard fetch error:",k),K.error("Failed to load dashboard data")}finally{c(!1)}},x=()=>{const k=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][new Date().getDay()];return i.filter(w=>{var _;return((_=w.day_of_week)==null?void 0:_.toLowerCase())===k})},p=()=>{const N=x(),k=new Date,w=k.getHours()*60+k.getMinutes();return N.find(_=>{const[S,E]=_.start_time.split(":");return parseInt(S)*60+parseInt(E)>w})};if(o)return r.jsx(BF,{size:"lg",className:"h-64"});const j=x(),v=p(),g=((y=n==null?void 0:n.todayAttendance)==null?void 0:y.total)>0?Math.round(n.todayAttendance.present/n.todayAttendance.total*100):0;return r.jsxs("div",{ref:d,className:"space-y-6",children:[r.jsx(d4,{ref:u,title:`Welcome back, ${((b=t==null?void 0:t.details)==null?void 0:b.first_name)||"Teacher"}!`,subtitle:v?`Next Class: ${v.subject_name} - ${v.class_name}${v.section_name?` ${v.section_name}`:""}`:"No upcoming classes today",gradient:"from-blue-600 to-blue-700",stats:v?[{icon:Nt,label:"Next Class",value:`${v.start_time} - ${v.end_time}`,subtitle:`Room ${v.room_number||"TBA"}`}]:[]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s(ie.VIEW_STUDENTS)&&r.jsx(nd,{ref:N=>h.current[0]=N,title:"Total Students",value:(n==null?void 0:n.students)||0,subtitle:"Under your classes",icon:Xe,iconGradient:"from-blue-600 to-blue-700",textColor:"text-gray-900",bgGradient:"from-white to-white",className:"border border-gray-200 shadow-sm",onClick:()=>e("/students")}),s(ie.VIEW_CLASSES)&&r.jsx(nd,{ref:N=>h.current[1]=N,title:"Subjects Taught",value:(n==null?void 0:n.subjects)||0,subtitle:"Unique subjects",icon:De,iconGradient:"from-blue-600 to-blue-700",textColor:"text-gray-900",bgGradient:"from-white to-white",className:"border border-gray-200 shadow-sm",onClick:()=>e("/classes")}),s(ie.VIEW_ATTENDANCE)&&r.jsx(nd,{ref:N=>h.current[2]=N,title:"Attendance Rate",value:`${g}%`,subtitle:"Today's average",icon:la,iconGradient:"from-blue-600 to-blue-700",textColor:"text-gray-900",bgGradient:"from-white to-white",className:"border border-gray-200 shadow-sm",onClick:()=>e("/attendance")}),s(ie.VIEW_ASSIGNMENTS)&&r.jsx(nd,{ref:N=>h.current[3]=N,title:"Pending Reviews",value:(n==null?void 0:n.pendingAssignments)||0,subtitle:"Assignments to grade",icon:rs,iconGradient:"from-gray-700 to-gray-800",textColor:"text-gray-900",bgGradient:"from-white to-white",className:"border border-gray-200 shadow-sm",onClick:()=>e("/assignments")})]}),r.jsxs("div",{ref:N=>f.current[0]=N,className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx(ad,{className:"lg:col-span-2",title:"Today's Schedule",icon:Te,action:()=>e("/schedule"),actionLabel:"View Full Schedule",children:j.length>0?r.jsx("div",{className:"space-y-3",children:j.map(N=>{const k=()=>{const _=new Date,[S,E]=N.end_time.split(":"),A=new Date;return A.setHours(parseInt(S),parseInt(E)),_>A},w=()=>{const _=new Date,[S,E]=N.start_time.split(":"),[A,C]=N.end_time.split(":"),D=new Date;D.setHours(parseInt(S),parseInt(E));const M=new Date;return M.setHours(parseInt(A),parseInt(C)),_>=D&&_<=M};return r.jsx("div",{className:`p-4 rounded-xl border-l-4 transition-all duration-300 ${w()?"bg-green-50 border-green-500 shadow-md border border-gray-100":k()?"bg-gray-50 border-gray-300 opacity-60":"bg-white border-blue-500 border border-gray-100 shadow-sm"}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[w()&&r.jsx("span",{className:"px-3 py-1 bg-green-500 text-white text-xs rounded-full font-semibold animate-pulse",children:"Current"}),r.jsxs("h4",{className:"font-bold text-gray-900",children:["Period ",N.period_number]})]}),r.jsx("p",{className:"text-sm text-gray-700 font-semibold mb-1",children:N.subject_name||"Subject"}),r.jsxs("p",{className:"text-sm text-gray-600",children:[N.class_name," ",N.section_name&&`- ${N.section_name}`]}),r.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[r.jsxs("span",{className:"flex items-center space-x-1",children:[r.jsx(Nt,{className:"w-3 h-3"}),r.jsxs("span",{children:[N.start_time," - ",N.end_time]})]}),N.room_number&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(DM,{className:"w-3 h-3"}),"Room ",N.room_number]})]})]}),!k()&&r.jsx("button",{onClick:()=>e("/attendance"),className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white text-sm rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-300 shadow-lg hover:shadow-xl font-semibold",children:"Mark Attendance"})]})},N.id)})}):r.jsx(v1,{icon:Te,title:"No classes scheduled for today",description:"Enjoy your day off!"})}),r.jsx(ad,{title:"Quick Actions",icon:Al,children:r.jsxs("div",{className:"space-y-3",children:[r.jsx(fh,{icon:la,label:"Mark Attendance",description:"Record student presence",onClick:()=>e("/attendance"),color:"blue"}),r.jsx(fh,{icon:Ue,label:"Create Assignment",description:"Add new homework",onClick:()=>e("/assignments"),color:"green"}),r.jsx(fh,{icon:rs,label:"Enter Results",description:"Update exam marks",onClick:()=>e("/exams"),color:"purple"}),r.jsx(fh,{icon:Xe,label:"View Students",description:"Class roster",onClick:()=>e("/students"),color:"orange"})]})})]}),r.jsxs("div",{ref:N=>f.current[1]=N,className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsx(ad,{title:"Class Performance",icon:Sr,action:()=>{},actionLabel:"View Details",children:r.jsx("div",{className:"space-y-3",children:[{class:"Grade 10-A",subject:"Mathematics",score:85,color:"from-blue-600 to-blue-700"},{class:"Grade 9-B",subject:"Physics",score:78,color:"from-blue-600 to-blue-700"},{class:"Grade 8-A",subject:"Science",score:72,color:"from-blue-600 to-blue-700"}].map((N,k)=>r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-blue-50 transition-all duration-300 border border-gray-100 hover:border-blue-200",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-12 h-12 bg-white rounded-xl flex items-center justify-center shadow-sm border border-gray-200",children:r.jsx(Dl,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-gray-900",children:N.class}),r.jsx("p",{className:"text-xs text-gray-600",children:N.subject})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[N.score,"%"]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Avg Score"})]})]},k))})}),r.jsx(ad,{title:"Announcements",icon:Is,action:()=>e("/announcements"),actionLabel:"View All",children:n!=null&&n.announcements&&n.announcements.length>0?r.jsx("div",{className:"space-y-3",children:n.announcements.slice(0,3).map(N=>r.jsx("div",{className:"p-4 bg-white border border-gray-200 border-l-4 border-l-blue-600 rounded-xl hover:shadow-md transition-all duration-300",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Is,{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-1",children:N.title}),r.jsx("p",{className:"text-xs text-gray-600",children:new Date(N.published_at).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})]})]})},N.id))}):r.jsx(v1,{icon:Is,title:"No announcements",description:"Check back later for updates"})})]})]})},$F=()=>{var x;const e=We(),t=Ie(vs),[s,n]=O.useState(null),[a,i]=O.useState(!0),l=O.useRef(null),o=O.useRef(null),c=O.useRef([]),d=O.useRef([]);O.useEffect(()=>{u()},[]),O.useEffect(()=>{if(a)return;const p=bt.context(()=>{bt.fromTo(o.current,{y:-30,opacity:0},{y:0,opacity:1,duration:.8,ease:"power3.out"}),c.current.forEach((j,v)=>{if(!j)return;bt.set(j,{opacity:1,y:0,scale:1});const g=j.querySelector(".stat-number");if(g){const y=parseInt(g.textContent)||0;g.textContent="0",bt.to(g,{textContent:y,duration:1.5,delay:.2+v*.1,ease:"power2.out",snap:{textContent:1},onUpdate:function(){g.textContent=Math.ceil(this.targets()[0].textContent)}})}}),d.current.forEach(j=>{j&&bt.set(j,{opacity:1,y:0})})},l);return()=>p.revert()},[a]);const u=async()=>{try{const p=await Eb.getStats();n(p.data)}catch{K.error("Failed to fetch dashboard data")}finally{i(!1)}};if(a)return r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});const h=92,f=15e3,m=85;return r.jsxs("div",{ref:l,className:"space-y-6",children:[r.jsxs("div",{ref:o,className:"bg-gradient-to-r from-blue-600 to-blue-700 rounded-2xl p-8 text-white shadow-lg relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent pointer-events-none"}),r.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl"}),r.jsxs("div",{className:"relative z-10",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Al,{className:"w-6 h-6 animate-pulse"}),r.jsxs("h2",{className:"text-3xl font-bold",children:["Welcome back, ",((x=t==null?void 0:t.details)==null?void 0:x.first_name)||"Student","!"]})]}),r.jsx("p",{className:"text-blue-100 text-lg mb-6",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(la,{className:"w-5 h-5 text-blue-100"}),r.jsx("p",{className:"text-sm text-blue-100",children:"Attendance"})]}),r.jsxs("p",{className:"text-3xl font-bold",children:[h,"%"]}),r.jsx("div",{className:"mt-2 w-full bg-white/20 rounded-full h-2",children:r.jsx("div",{className:"bg-white h-2 rounded-full",style:{width:`${h}%`}})})]}),r.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(eD,{className:"w-5 h-5 text-blue-100"}),r.jsx("p",{className:"text-sm text-blue-100",children:"Average Grade"})]}),r.jsxs("p",{className:"text-3xl font-bold",children:[m,"%"]}),r.jsx("p",{className:"text-sm text-blue-100 mt-2",children:"Grade: B+"})]}),r.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Dl,{className:"w-5 h-5 text-blue-100"}),r.jsx("p",{className:"text-sm text-blue-100",children:"Class Rank"})]}),r.jsx("p",{className:"text-3xl font-bold",children:"5th"}),r.jsx("p",{className:"text-sm text-blue-100 mt-2",children:"Out of 45"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx("div",{ref:p=>c.current[0]=p,className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-all cursor-pointer group",onClick:()=>e("/attendance"),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1 font-medium",children:"My Attendance"}),r.jsx("h3",{className:"stat-number text-4xl font-bold text-gray-900",children:h}),r.jsxs("div",{className:"flex items-center mt-3 text-xs",children:[r.jsx(Sr,{className:"w-4 h-4 text-green-600 mr-1"}),r.jsx("span",{className:"text-green-600 font-semibold",children:"Good standing"})]})]}),r.jsx("div",{className:"w-14 h-14 bg-blue-600 rounded-xl flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform",children:r.jsx(la,{className:"w-7 h-7 text-white"})})]})}),r.jsx("div",{ref:p=>c.current[1]=p,className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-all cursor-pointer group",onClick:()=>e("/assignments"),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1 font-medium",children:"Assignments"}),r.jsx("h3",{className:"stat-number text-4xl font-bold text-gray-900",children:"5"}),r.jsxs("div",{className:"flex items-center mt-3 text-xs",children:[r.jsx($t,{className:"w-4 h-4 text-orange-600 mr-1"}),r.jsx("span",{className:"text-orange-600 font-semibold",children:"3 pending"})]})]}),r.jsx("div",{className:"w-14 h-14 bg-gray-900 rounded-xl flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform",children:r.jsx(Ue,{className:"w-7 h-7 text-white"})})]})}),r.jsx("div",{ref:p=>c.current[2]=p,className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-all cursor-pointer group",onClick:()=>e("/exams"),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1 font-medium",children:"Average Grade"}),r.jsx("h3",{className:"stat-number text-4xl font-bold text-gray-900",children:m}),r.jsx("div",{className:"flex items-center mt-3 text-xs",children:r.jsx("span",{className:"text-blue-600 font-semibold",children:"Grade: B+"})})]}),r.jsx("div",{className:"w-14 h-14 bg-blue-600 rounded-xl flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform",children:r.jsx(rs,{className:"w-7 h-7 text-white"})})]})}),r.jsx("div",{ref:p=>c.current[3]=p,className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-all cursor-pointer group",onClick:()=>e("/fees"),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1 font-medium",children:"Pending Fees"}),r.jsx("h3",{className:"stat-number text-4xl font-bold text-gray-900",children:f.toLocaleString()}),r.jsxs("div",{className:"flex items-center mt-3 text-xs",children:[r.jsx(Nt,{className:"w-4 h-4 text-red-600 mr-1"}),r.jsx("span",{className:"text-red-600 font-semibold",children:"Due soon"})]})]}),r.jsx("div",{className:"w-14 h-14 bg-gray-900 rounded-xl flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform",children:r.jsx(Si,{className:"w-7 h-7 text-white"})})]})})]}),r.jsxs("div",{ref:p=>d.current[0]=p,className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[r.jsx(De,{className:"w-6 h-6 text-blue-600"}),"Subject Performance"]}),r.jsx("button",{onClick:()=>e("/exams"),className:"text-sm text-blue-600 hover:text-blue-700 font-medium hover:underline",children:"View All Results"})]}),r.jsx("div",{className:"space-y-3",children:[{subject:"Mathematics",score:92,grade:"A",trend:"up"},{subject:"Physics",score:88,grade:"A-",trend:"up"},{subject:"Chemistry",score:78,grade:"B+",trend:"down"},{subject:"English",score:85,grade:"A-",trend:"up"},{subject:"Computer Science",score:95,grade:"A+",trend:"up"}].map((p,j)=>r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-blue-50 transition-all duration-300 border border-gray-100 hover:border-blue-200",children:[r.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[r.jsx("div",{className:"w-12 h-12 bg-white rounded-xl flex items-center justify-center shadow-sm border border-gray-200",children:r.jsx(De,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-semibold text-gray-900 mb-2",children:p.subject}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2.5",children:r.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-500",style:{width:`${p.score}%`}})}),r.jsxs("span",{className:"text-sm font-bold text-gray-700 w-14",children:[p.score,"%"]})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-3 ml-4",children:[r.jsx("span",{className:"px-3 py-1.5 bg-blue-100 text-blue-700 text-sm font-bold rounded-full",children:p.grade}),p.trend==="up"?r.jsx(Sr,{className:"w-6 h-6 text-green-600"}):r.jsx(Sr,{className:"w-6 h-6 text-red-600 transform rotate-180"})]})]},j))})]}),r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-6 flex items-center gap-2",children:[r.jsx(Al,{className:"w-6 h-6 text-blue-600"}),"Quick Access"]}),r.jsx("div",{className:"space-y-3",children:[{icon:la,label:"My Attendance",desc:"View records",path:"/attendance"},{icon:Ue,label:"Assignments",desc:"Submit work",path:"/assignments"},{icon:rs,label:"Exam Results",desc:"View scores",path:"/exams"},{icon:Si,label:"Fee Payment",desc:"Pay online",path:"/fees"}].map((p,j)=>r.jsx("button",{onClick:()=>e(p.path),className:"w-full p-4 bg-gray-50 hover:bg-blue-50 rounded-xl transition-all duration-300 text-left group hover:shadow-md border border-gray-100 hover:border-blue-200",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-12 h-12 bg-white rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform shadow-sm border border-gray-200",children:r.jsx(p.icon,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-900",children:p.label}),r.jsx("p",{className:"text-xs text-gray-600",children:p.desc})]})]})},j))})]})]}),r.jsxs("div",{ref:p=>d.current[1]=p,className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[r.jsx(Te,{className:"w-6 h-6 text-blue-600"}),"Upcoming Events"]}),r.jsx("button",{onClick:()=>e("/events"),className:"text-sm text-blue-600 hover:text-blue-700 font-medium hover:underline",children:"View All"})]}),s!=null&&s.upcomingEvents&&s.upcomingEvents.length>0?r.jsx("div",{className:"space-y-3",children:s.upcomingEvents.map(p=>r.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-gray-50 rounded-xl hover:bg-blue-50 transition-all duration-300 cursor-pointer border border-gray-100 hover:border-blue-200",children:[r.jsx("div",{className:"flex-shrink-0 w-14 h-14 bg-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:r.jsx(Te,{className:"w-7 h-7 text-white"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:p.title}),r.jsx("p",{className:"text-xs text-gray-600",children:new Date(p.event_date).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})})]}),r.jsx("span",{className:`text-xs px-3 py-1.5 rounded-full font-semibold ${p.event_type==="holiday"?"bg-gray-900 text-white":"bg-blue-100 text-blue-700"}`,children:p.event_type})]},p.id))}):r.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl",children:[r.jsx(Te,{className:"w-16 h-16 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500",children:"No upcoming events"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[r.jsx(Is,{className:"w-6 h-6 text-blue-600"}),"Important Announcements"]}),r.jsx("button",{onClick:()=>e("/announcements"),className:"text-sm text-blue-600 hover:text-blue-700 font-medium hover:underline",children:"View All"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"p-4 bg-white border border-gray-200 border-l-4 border-l-red-600 rounded-xl hover:shadow-md transition-all duration-300",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx($t,{className:"w-6 h-6 text-red-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Fee Payment Deadline"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Please clear your pending fees before October 30th to avoid late fees."})]})]})}),r.jsx("div",{className:"p-4 bg-white border border-gray-200 border-l-4 border-l-blue-600 rounded-xl hover:shadow-md transition-all duration-300",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Is,{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Mid-term Exams Schedule"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Mid-term examinations will begin from November 5th. Check the schedule."})]})]})}),r.jsx("div",{className:"p-4 bg-white border border-gray-200 border-l-4 border-l-green-600 rounded-xl hover:shadow-md transition-all duration-300",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Is,{className:"w-6 h-6 text-green-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Annual Sports Day"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Registration open for Annual Sports Day on November 15th."})]})]})})]})]})]})]})},UF=()=>{const e=We(),t=Ie(mr),[s,n]=O.useState(null),[a,i]=O.useState(!0);O.useEffect(()=>{l()},[]);const l=async()=>{try{const d=await Eb.getStats();n(d.data)}catch{K.error("Failed to fetch dashboard data")}finally{i(!1)}};if(a)return r.jsx("div",{className:"p-8 flex justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});const o=()=>({guard:"Security Guard",cleaner:"Maintenance Staff",accountant:"Accountant"})[t]||"Staff Member",c=()=>({guard:"Keep the school safe and secure!",cleaner:"Thank you for keeping our school clean!",accountant:"Manage school finances efficiently."})[t]||"Welcome to the school management system!";return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 rounded-2xl p-8 text-white shadow-lg",children:[r.jsxs("h2",{className:"text-3xl font-bold mb-2",children:["Welcome back, ",o(),"!"]}),r.jsx("p",{className:"text-blue-100 text-lg",children:c()})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-all",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1 font-medium",children:"Current Time"}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),r.jsx("div",{className:"w-14 h-14 bg-blue-600 rounded-xl flex items-center justify-center shadow-sm",children:r.jsx(Nt,{className:"w-7 h-7 text-white"})})]})}),r.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-all",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1 font-medium",children:"Total Students"}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:(s==null?void 0:s.students)||0}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Active students"})]}),r.jsx("div",{className:"w-14 h-14 bg-blue-600 rounded-xl flex items-center justify-center shadow-sm",children:r.jsx(Xe,{className:"w-7 h-7 text-white"})})]})}),r.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-all",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1 font-medium",children:"Total Teachers"}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:(s==null?void 0:s.teachers)||0}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Teaching staff"})]}),r.jsx("div",{className:"w-14 h-14 bg-gray-900 rounded-xl flex items-center justify-center shadow-sm",children:r.jsx(Xe,{className:"w-7 h-7 text-white"})})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[r.jsx(Te,{className:"w-5 h-5 text-blue-600"}),"Upcoming Events"]}),r.jsx("button",{onClick:()=>e("/events"),className:"text-sm text-blue-600 hover:text-blue-700 font-medium hover:underline",children:"View All"})]}),s!=null&&s.upcomingEvents&&s.upcomingEvents.length>0?r.jsx("div",{className:"space-y-3",children:s.upcomingEvents.map(d=>r.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-gray-50 rounded-xl border border-gray-100 hover:bg-blue-50 transition-colors",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center flex-shrink-0 shadow-sm",children:r.jsx(Te,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:d.title}),r.jsx("p",{className:"text-xs text-gray-600",children:new Date(d.event_date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})]})]},d.id))}):r.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl",children:[r.jsx(Te,{className:"w-16 h-16 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500",children:"No upcoming events"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[r.jsx(Is,{className:"w-5 h-5 text-blue-600"}),"Announcements"]}),r.jsx("button",{onClick:()=>e("/announcements"),className:"text-sm text-blue-600 hover:text-blue-700 font-medium hover:underline",children:"View All"})]}),r.jsx("div",{className:"space-y-3",children:r.jsx("div",{className:"p-4 bg-white border border-gray-200 border-l-4 border-l-blue-600 rounded-xl hover:shadow-md transition-all",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Is,{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Check Announcements"}),r.jsx("p",{className:"text-xs text-gray-600",children:"View important updates and notifications from the administration"})]})]})})})]})]}),t==="guard"&&r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 border-l-4 border-l-blue-600",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Security Reminders"}),r.jsxs("ul",{className:"space-y-3 text-sm text-gray-600",children:[r.jsxs("li",{className:"flex items-start space-x-3",children:[r.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2 flex-shrink-0"}),r.jsx("span",{children:"Check all entry and exit points regularly"})]}),r.jsxs("li",{className:"flex items-start space-x-3",children:[r.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2 flex-shrink-0"}),r.jsx("span",{children:"Verify visitor identification before allowing entry"})]}),r.jsxs("li",{className:"flex items-start space-x-3",children:[r.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2 flex-shrink-0"}),r.jsx("span",{children:"Report any suspicious activity immediately"})]}),r.jsxs("li",{className:"flex items-start space-x-3",children:[r.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2 flex-shrink-0"}),r.jsx("span",{children:"Maintain visitor log and attendance records"})]})]})]}),t==="cleaner"&&r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 border-l-4 border-l-green-600",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Maintenance Schedule"}),r.jsxs("ul",{className:"space-y-3 text-sm text-gray-600",children:[r.jsxs("li",{className:"flex items-start space-x-3",children:[r.jsx("span",{className:"w-2 h-2 bg-green-600 rounded-full mt-2 flex-shrink-0"}),r.jsx("span",{children:"Morning: Clean all classrooms before 8:00 AM"})]}),r.jsxs("li",{className:"flex items-start space-x-3",children:[r.jsx("span",{className:"w-2 h-2 bg-green-600 rounded-full mt-2 flex-shrink-0"}),r.jsx("span",{children:"Afternoon: Sanitize common areas and restrooms"})]}),r.jsxs("li",{className:"flex items-start space-x-3",children:[r.jsx("span",{className:"w-2 h-2 bg-green-600 rounded-full mt-2 flex-shrink-0"}),r.jsx("span",{children:"Evening: Deep cleaning of designated areas"})]}),r.jsxs("li",{className:"flex items-start space-x-3",children:[r.jsx("span",{className:"w-2 h-2 bg-green-600 rounded-full mt-2 flex-shrink-0"}),r.jsx("span",{children:"Report any maintenance issues immediately"})]})]})]})]})},zF=()=>{const e=Ie(mr),t=()=>{switch(e){case"super_admin":case"principal":case"vice_principal":case"hod":return r.jsx(b1,{});case"teacher":return r.jsx(qF,{});case"student":return r.jsx($F,{});case"accountant":case"guard":case"cleaner":return r.jsx(UF,{});default:return r.jsx(b1,{})}};return r.jsx("div",{className:"space-y-6",children:t()})},Ae=({isOpen:e,onClose:t,title:s,children:n,size:a="md"})=>{if(O.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),!e)return null;const i={sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl"};return r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:r.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:t}),r.jsxs("div",{className:`inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle w-full ${i[a]}`,children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500 transition-colors",children:r.jsx(qr,{className:"w-6 h-6"})})]}),r.jsx("div",{className:"px-6 py-4 max-h-[70vh] overflow-y-auto",children:n})]})]})})},u4=({classItem:e=null,onSubmit:t,onCancel:s,isSubmitting:n,teachers:a=[]})=>{const[i,l]=O.useState({name:(e==null?void 0:e.name)||"",grade_level:(e==null?void 0:e.grade_level)||"",class_teacher_id:(e==null?void 0:e.class_teacher_id)||"",academic_year:(e==null?void 0:e.academic_year)||new Date().getFullYear().toString(),room_number:(e==null?void 0:e.room_number)||"",capacity:(e==null?void 0:e.capacity)||"40",description:(e==null?void 0:e.description)||"",status:(e==null?void 0:e.status)||"active"}),[o,c]=O.useState([]),[d,u]=O.useState(""),h=p=>{const{name:j,value:v}=p.target;l({...i,[j]:v})},f=()=>{if(!d.trim()){K.error("Please enter a section name");return}if(o.includes(d.trim().toUpperCase())){K.error("This section already exists");return}c([...o,d.trim().toUpperCase()]),u("")},m=p=>{c(o.filter(j=>j!==p))},x=p=>{if(p.preventDefault(),!i.name||!i.grade_level||!i.academic_year){K.error("Please fill all required fields");return}const j={...i,class_teacher_id:i.class_teacher_id||null,room_number:i.room_number||null,capacity:i.capacity?parseInt(i.capacity):40,description:i.description||null};!e&&o.length>0&&(j.sections=o),t(j)};return r.jsxs("form",{onSubmit:x,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Class Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Class Name *"}),r.jsx("input",{type:"text",name:"name",value:i.name,onChange:h,className:"input",placeholder:"e.g., Class 10 or Grade 10",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Grade Level *"}),r.jsx("input",{type:"number",name:"grade_level",value:i.grade_level,onChange:h,className:"input",placeholder:"e.g., 10",min:"1",max:"12",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Academic Year *"}),r.jsx("input",{type:"text",name:"academic_year",value:i.academic_year,onChange:h,className:"input",placeholder:"e.g., 2024-2025",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Class Teacher"}),r.jsxs("select",{name:"class_teacher_id",value:i.class_teacher_id,onChange:h,className:"input",children:[r.jsx("option",{value:"",children:"Select Teacher (Optional)"}),a.filter(p=>p.status==="active").map(p=>r.jsxs("option",{value:p.id,children:[p.first_name," ",p.last_name," (",p.employee_id,")"]},p.id))]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Assign a primary teacher for this class"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Room Number"}),r.jsx("input",{type:"text",name:"room_number",value:i.room_number,onChange:h,className:"input",placeholder:"e.g., Room 101 or A-Block 201"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacity"}),r.jsx("input",{type:"number",name:"capacity",value:i.capacity,onChange:h,className:"input",placeholder:"e.g., 40",min:"1",max:"100"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum number of students"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),r.jsxs("select",{name:"status",value:i.status,onChange:h,className:"input",children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"}),r.jsx("option",{value:"archived",children:"Archived"})]})]})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsx("textarea",{name:"description",value:i.description,onChange:h,className:"input",rows:"3",placeholder:"Optional description about the class (e.g., science stream, commerce stream, etc.)"})]})]}),!e&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Class Sections (Optional)"}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Add sections for this class (e.g., A, B, C). You can also add sections later."}),r.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx("input",{type:"text",value:d,onChange:p=>u(p.target.value.toUpperCase()),onKeyPress:p=>{p.key==="Enter"&&(p.preventDefault(),f())},className:"input flex-1",placeholder:"e.g., A, B, C",maxLength:"2"}),r.jsxs("button",{type:"button",onClick:f,className:"btn btn-primary flex items-center space-x-1",children:[r.jsx(Be,{className:"w-4 h-4"}),r.jsx("span",{children:"Add"})]})]}),o.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(p=>r.jsxs("div",{className:"bg-purple-100 text-purple-800 px-3 py-2 rounded-full flex items-center space-x-2",children:[r.jsxs("span",{className:"font-medium",children:["Section ",p]}),r.jsx("button",{type:"button",onClick:()=>m(p),className:"text-purple-600 hover:text-purple-900",children:r.jsx(qr,{className:"w-4 h-4"})})]},p))})]}),r.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[r.jsx("button",{type:"button",onClick:s,className:"btn btn-outline",disabled:n,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?"Saving...":e?"Update Class":"Add Class"})]})]})},st=({permission:e,permissions:t=[],requireAll:s=!1,redirect:n=!1,redirectTo:a="/unauthorized",fallback:i=null,children:l})=>{const o=Ie(mr);if(!o)return n?r.jsx(zd,{to:a,replace:!0}):i;let c=!0;return e&&(c=gc(o,e)),t.length>0&&(c=s?lE(o,t):iE(o,t)),c?r.jsx(r.Fragment,{children:l}):n?r.jsx(zd,{to:a,replace:!0}):i},VF=({classes:e,isLoading:t,teachers:s})=>{const n=Me(),a=We(),[i,l]=O.useState(null),[o,c]=O.useState(null),[d,u]=O.useState(!1),[h,f]=O.useState(!1),[m,x]=O.useState(null),p=b=>{l(b),u(!0)},j=b=>{c(b),f(!0)},v=async b=>{try{await He.update(i.id,b),K.success("Class updated successfully!"),u(!1),l(null),n.invalidateQueries({queryKey:["classes"]})}catch(N){K.error(N.message||"Failed to update class")}},g=async()=>{try{await He.delete(o.id),K.success("Class deleted successfully!"),f(!1),c(null),n.invalidateQueries({queryKey:["classes"]})}catch(b){K.error(b.message||"Failed to delete class")}},y=b=>{x(b)};return t?r.jsxs("div",{className:"flex h-screen bg-gray-50",children:[r.jsx("div",{className:"w-80 bg-white border-r border-gray-200 p-4",children:r.jsx("div",{className:"animate-pulse space-y-3",children:[...Array(8)].map((b,N)=>r.jsx("div",{className:"h-16 bg-gray-200 rounded-lg"},N))})}),r.jsx("div",{className:"flex-1 p-8",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-6"}),r.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})})]}):!e||e.length===0?r.jsx("div",{className:"flex h-screen bg-gray-50 items-center justify-center",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[r.jsx(De,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500 text-lg",children:"No classes found"})]})}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex h-screen bg-gray-50",children:[r.jsxs("div",{className:"w-80 bg-white border-r border-gray-300 overflow-y-auto",children:[r.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-white",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Classes"}),r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.length," Total Classes"]})]}),r.jsx("div",{className:"p-4 space-y-2",children:e.map(b=>r.jsx("div",{onClick:()=>y(b),className:`p-4 rounded-lg cursor-pointer transition-all duration-200 border ${(m==null?void 0:m.id)===b.id?"bg-blue-50 border-blue-500 shadow-md":"bg-white border-gray-200 hover:border-blue-300 hover:shadow-sm"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[r.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${(m==null?void 0:m.id)===b.id?"bg-blue-500":"bg-gray-100"}`,children:r.jsx(De,{className:`w-5 h-5 ${(m==null?void 0:m.id)===b.id?"text-white":"text-gray-600"}`})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-900 truncate",children:b.name}),r.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[r.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full bg-blue-100 text-blue-700 font-medium",children:["Grade ",b.grade_level]}),r.jsxs("span",{className:"text-xs text-gray-500",children:[b.student_count||0," students"]})]})]})]}),r.jsx(Pi,{className:`w-5 h-5 transition-transform ${(m==null?void 0:m.id)===b.id?"text-blue-500 transform translate-x-1":"text-gray-400"}`})]})},b.id))})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:m?r.jsx("div",{className:"p-8",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 p-6 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-16 h-16 rounded-xl bg-white/20 backdrop-blur-sm flex items-center justify-center",children:r.jsx(De,{className:"w-8 h-8 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:m.name}),r.jsxs("p",{className:"text-blue-100 mt-1",children:["Grade ",m.grade_level]})]})]}),r.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-semibold ${m.status==="active"?"bg-green-500 text-white":"bg-gray-200 text-gray-700"}`,children:m.status||"active"})]})}),r.jsxs("div",{className:"p-6 grid grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Class Teacher"}),m.class_teacher_name?r.jsxs("div",{children:[r.jsx("div",{className:"text-lg font-semibold text-gray-900",children:m.class_teacher_name}),m.teacher_employee_id&&r.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["ID: ",m.teacher_employee_id]})]}):r.jsx("span",{className:"text-gray-400 italic",children:"No teacher assigned"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Academic Year"}),r.jsx("div",{className:"text-lg font-semibold text-gray-900",children:m.academic_year})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Class Capacity"}),r.jsx("div",{className:"text-lg font-semibold text-gray-900",children:m.capacity||"40"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Room Number"}),r.jsx("div",{className:"text-lg font-semibold text-gray-900",children:m.room_number||r.jsx("span",{className:"text-gray-400 italic",children:"N/A"})})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Total Students"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Xe,{className:"w-5 h-5 text-blue-500"}),r.jsx("span",{className:"text-lg font-semibold text-gray-900",children:m.student_count||0})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Grade Level"}),r.jsxs("span",{className:"inline-flex px-3 py-1 text-sm font-semibold rounded-full bg-blue-100 text-blue-800",children:["Grade ",m.grade_level]})]})]}),r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("button",{onClick:()=>a(`/classes/${m.id}`),className:"flex items-center space-x-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors shadow-sm",children:[r.jsx(ki,{className:"w-4 h-4"}),r.jsx("span",{children:"View Details"})]}),r.jsx(st,{permission:ie.EDIT_CLASSES,children:r.jsxs("button",{onClick:()=>p(m),className:"flex items-center space-x-2 px-4 py-2 bg-white hover:bg-gray-50 text-gray-700 border border-gray-300 rounded-lg transition-colors shadow-sm",children:[r.jsx(ct,{className:"w-4 h-4"}),r.jsx("span",{children:"Edit"})]})}),r.jsx(st,{permission:ie.DELETE_CLASSES,children:r.jsxs("button",{onClick:()=>j(m),className:"flex items-center space-x-2 px-4 py-2 bg-red-50 hover:bg-red-100 text-red-600 border border-red-200 rounded-lg transition-colors shadow-sm",children:[r.jsx(ut,{className:"w-4 h-4"}),r.jsx("span",{children:"Delete"})]})})]})]})})]})}):r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsxs("div",{className:"text-center",children:[r.jsx(De,{className:"w-20 h-20 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Select a Class"}),r.jsx("p",{className:"text-gray-500",children:"Choose a class from the sidebar to view details"})]})})})]}),r.jsx(Ae,{isOpen:d,onClose:()=>{u(!1),l(null)},title:"Edit Class",size:"large",children:r.jsx(u4,{classItem:i,onSubmit:v,onCancel:()=>{u(!1),l(null)},teachers:s})}),r.jsx(Ae,{isOpen:h,onClose:()=>{f(!1),c(null)},title:"Delete Class",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("p",{className:"text-gray-600",children:["Are you sure you want to delete ",r.jsx("strong",{children:o==null?void 0:o.name}),"? This action cannot be undone."]}),r.jsxs("div",{className:"flex justify-end space-x-4",children:[r.jsx("button",{onClick:()=>{f(!1),c(null)},className:"px-4 py-2 bg-white hover:bg-gray-50 text-gray-700 border border-gray-300 rounded-lg transition-colors",children:"Cancel"}),r.jsx("button",{onClick:g,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:"Delete"})]})]})})]})},HF=()=>{const e=Me(),[t,s]=O.useState(!1),[n,a]=O.useState({search:""}),{data:i,isLoading:l}=me({queryKey:["classes",n],queryFn:()=>He.getAll(n)}),{data:o}=me({queryKey:["teachers"],queryFn:()=>Pt.getAll({limit:1e3})}),c=async d=>{try{await He.create(d),K.success("Class added successfully!"),s(!1),e.invalidateQueries({queryKey:["classes"]})}catch(u){K.error(u.message||"Failed to add class")}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Classes"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage classes and sections"})]}),r.jsx(st,{permission:ie.CREATE_CLASSES,children:r.jsxs("button",{onClick:()=>s(!0),className:"btn btn-primary flex items-center space-x-2",children:[r.jsx(Be,{className:"w-5 h-5"}),r.jsx("span",{children:"Add Class"})]})})]}),r.jsx("div",{className:"card",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"relative md:col-span-2",children:[r.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Search classes...",value:n.search,onChange:d=>a({...n,search:d.target.value}),className:"input pl-10"})]}),r.jsxs("button",{onClick:()=>a({search:""}),className:"btn btn-outline flex items-center justify-center space-x-2",children:[r.jsx(cn,{className:"w-4 h-4"}),r.jsx("span",{children:"Reset"})]})]})}),r.jsx(VF,{classes:(i==null?void 0:i.data)||[],isLoading:l,teachers:(o==null?void 0:o.data)||[]}),r.jsx(Ae,{isOpen:t,onClose:()=>s(!1),title:"Add New Class",size:"large",children:r.jsx(u4,{onSubmit:c,onCancel:()=>s(!1),teachers:(o==null?void 0:o.data)||[]})})]})},Jb=({student:e=null,onSubmit:t,onCancel:s,isSubmitting:n})=>{var j,v;const[a,i]=O.useState({admission_number:(e==null?void 0:e.admission_number)||"",first_name:(e==null?void 0:e.first_name)||"",middle_name:(e==null?void 0:e.middle_name)||"",last_name:(e==null?void 0:e.last_name)||"",email:(e==null?void 0:e.email)||"",password:"",phone:(e==null?void 0:e.phone)||"",date_of_birth:((j=e==null?void 0:e.date_of_birth)==null?void 0:j.split("T")[0])||"",gender:(e==null?void 0:e.gender)||"male",blood_group:(e==null?void 0:e.blood_group)||"",class_id:(e==null?void 0:e.class_id)||"",section_id:(e==null?void 0:e.section_id)||"",roll_number:(e==null?void 0:e.roll_number)||"",admission_date:((v=e==null?void 0:e.admission_date)==null?void 0:v.split("T")[0])||new Date().toISOString().split("T")[0],father_name:(e==null?void 0:e.father_name)||"",mother_name:(e==null?void 0:e.mother_name)||"",parent_phone:(e==null?void 0:e.parent_phone)||"",parent_email:(e==null?void 0:e.parent_email)||"",address:(e==null?void 0:e.address)||"",city:(e==null?void 0:e.city)||"",state:(e==null?void 0:e.state)||"",pincode:(e==null?void 0:e.pincode)||"",status:(e==null?void 0:e.status)||"active",profile_photo:null}),{data:l,isLoading:o,error:c}=me({queryKey:["classes"],queryFn:He.getAll}),{data:d,isLoading:u,error:h}=me({queryKey:["sections",a.class_id],queryFn:()=>He.getSections(a.class_id),enabled:!!a.class_id}),f=(l==null?void 0:l.data)||[],m=(d==null?void 0:d.data)||[];O.useEffect(()=>{console.log("Classes available:",f),console.log("Sections available:",m),console.log("Selected class_id:",a.class_id)},[f,m,a.class_id]);const x=g=>{const{name:y,value:b,files:N}=g.target;i(y==="class_id"?{...a,class_id:b,section_id:""}:{...a,[y]:N?N[0]:b})},p=g=>{if(g.preventDefault(),!a.first_name||!a.last_name||!a.email||!a.parent_phone){K.error("Please fill all required fields");return}if(!a.date_of_birth||!a.class_id||!a.admission_number){K.error("Please fill all required fields");return}if(!e&&!a.password){K.error("Password is required for new students");return}t(a)};return r.jsxs("form",{onSubmit:p,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Personal Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admission Number *"}),r.jsx("input",{type:"text",name:"admission_number",value:a.admission_number,onChange:x,className:"input",placeholder:"e.g., STU2024001",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),r.jsx("input",{type:"text",name:"first_name",value:a.first_name,onChange:x,className:"input",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Middle Name"}),r.jsx("input",{type:"text",name:"middle_name",value:a.middle_name,onChange:x,className:"input"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),r.jsx("input",{type:"text",name:"last_name",value:a.last_name,onChange:x,className:"input",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),r.jsx("input",{type:"email",name:"email",value:a.email,onChange:x,className:"input",required:!0})]}),!e&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),r.jsx("input",{type:"password",name:"password",value:a.password,onChange:x,className:"input",placeholder:"Min 6 characters",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),r.jsx("input",{type:"tel",name:"phone",value:a.phone,onChange:x,className:"input"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth *"}),r.jsx("input",{type:"date",name:"date_of_birth",value:a.date_of_birth,onChange:x,className:"input",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender *"}),r.jsxs("select",{name:"gender",value:a.gender,onChange:x,className:"input",required:!0,children:[r.jsx("option",{value:"male",children:"Male"}),r.jsx("option",{value:"female",children:"Female"}),r.jsx("option",{value:"other",children:"Other"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blood Group"}),r.jsxs("select",{name:"blood_group",value:a.blood_group,onChange:x,className:"input",children:[r.jsx("option",{value:"",children:"Select Blood Group"}),r.jsx("option",{value:"A+",children:"A+"}),r.jsx("option",{value:"A-",children:"A-"}),r.jsx("option",{value:"B+",children:"B+"}),r.jsx("option",{value:"B-",children:"B-"}),r.jsx("option",{value:"AB+",children:"AB+"}),r.jsx("option",{value:"AB-",children:"AB-"}),r.jsx("option",{value:"O+",children:"O+"}),r.jsx("option",{value:"O-",children:"O-"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Photo"}),r.jsx("input",{type:"file",name:"profile_photo",onChange:x,accept:"image/*",className:"input"})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Academic Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Class *"}),o?r.jsx("div",{className:"input bg-gray-50",children:"Loading classes..."}):c?r.jsx("div",{className:"text-red-500 text-sm",children:"Error loading classes"}):r.jsxs("select",{name:"class_id",value:a.class_id,onChange:x,className:"input",required:!0,children:[r.jsx("option",{value:"",children:"Select Class"}),f.map(g=>r.jsx("option",{value:g.id,children:g.name},g.id))]}),f.length===0&&!o&&r.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"No classes available. Please create a class first."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Section"}),u?r.jsx("div",{className:"input bg-gray-50",children:"Loading sections..."}):r.jsxs("select",{name:"section_id",value:a.section_id,onChange:x,className:"input",disabled:!a.class_id,children:[r.jsx("option",{value:"",children:"Select Section"}),m.map(g=>r.jsx("option",{value:g.id,children:g.name},g.id))]}),!a.class_id&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select a class first to see sections"}),a.class_id&&m.length===0&&!u&&r.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"No sections available for this class"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Roll Number"}),r.jsx("input",{type:"text",name:"roll_number",value:a.roll_number,onChange:x,className:"input"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admission Date"}),r.jsx("input",{type:"date",name:"admission_date",value:a.admission_date,onChange:x,className:"input"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),r.jsxs("select",{name:"status",value:a.status,onChange:x,className:"input",children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"}),r.jsx("option",{value:"graduated",children:"Graduated"}),r.jsx("option",{value:"transferred",children:"Transferred"})]})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Parent Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Father's Name"}),r.jsx("input",{type:"text",name:"father_name",value:a.father_name,onChange:x,className:"input"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mother's Name"}),r.jsx("input",{type:"text",name:"mother_name",value:a.mother_name,onChange:x,className:"input"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Parent Phone *"}),r.jsx("input",{type:"tel",name:"parent_phone",value:a.parent_phone,onChange:x,className:"input",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Parent Email"}),r.jsx("input",{type:"email",name:"parent_email",value:a.parent_email,onChange:x,className:"input"})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Address Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),r.jsx("textarea",{name:"address",value:a.address,onChange:x,className:"input",rows:"3"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),r.jsx("input",{type:"text",name:"city",value:a.city,onChange:x,className:"input"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State"}),r.jsx("input",{type:"text",name:"state",value:a.state,onChange:x,className:"input"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pincode"}),r.jsx("input",{type:"text",name:"pincode",value:a.pincode,onChange:x,className:"input"})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[r.jsx("button",{type:"button",onClick:s,className:"btn btn-outline",disabled:n,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?"Saving...":e?"Update Student":"Add Student"})]})]})},h4=({students:e,isLoading:t})=>{const s=Me(),n=We(),[a,i]=O.useState(null),[l,o]=O.useState(null),[c,d]=O.useState(!1),[u,h]=O.useState(!1),[f,m]=O.useState(null),x=y=>{i(y),d(!0)},p=y=>{o(y),h(!0)},j=async y=>{try{await Fr.update(a.id,y),K.success("Student updated successfully!"),d(!1),i(null),s.invalidateQueries({queryKey:["students"]}),s.invalidateQueries({queryKey:["classes"]}),s.invalidateQueries({queryKey:["class"]})}catch(b){K.error(b.message||"Failed to update student")}},v=async()=>{try{await Fr.delete(l.id),K.success("Student deleted successfully!"),h(!1),o(null),s.invalidateQueries({queryKey:["students"]}),s.invalidateQueries({queryKey:["classes"]}),s.invalidateQueries({queryKey:["class"]})}catch(y){K.error(y.message||"Failed to delete student")}},g=y=>{m(y)};return t?r.jsxs("div",{className:"flex h-screen bg-gray-50",children:[r.jsx("div",{className:"w-80 bg-white border-r border-gray-200 p-4",children:r.jsx("div",{className:"animate-pulse space-y-3",children:[...Array(8)].map((y,b)=>r.jsx("div",{className:"h-16 bg-gray-200 rounded-lg"},b))})}),r.jsx("div",{className:"flex-1 p-8",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-6"}),r.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})})]}):!e||e.length===0?r.jsx("div",{className:"flex h-screen bg-gray-50 items-center justify-center",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[r.jsx(Xe,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500 text-lg",children:"No students found"})]})}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex h-screen bg-gray-50",children:[r.jsxs("div",{className:"w-80 bg-white border-r border-gray-300 overflow-y-auto",children:[r.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-white",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Students"}),r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.length," Total Students"]})]}),r.jsx("div",{className:"p-4 space-y-2",children:e.map(y=>r.jsx("div",{onClick:()=>g(y),className:`p-4 rounded-lg cursor-pointer transition-all duration-200 border ${(f==null?void 0:f.id)===y.id?"bg-blue-50 border-blue-500 shadow-md":"bg-white border-gray-200 hover:border-blue-300 hover:shadow-sm"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[r.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${(f==null?void 0:f.id)===y.id?"bg-blue-500":"bg-gray-100"}`,children:r.jsx(tt,{className:`w-5 h-5 ${(f==null?void 0:f.id)===y.id?"text-white":"text-gray-600"}`})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"text-sm font-semibold text-gray-900 truncate",children:[y.first_name," ",y.last_name]}),r.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[r.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-blue-100 text-blue-700 font-medium",children:y.class_name}),r.jsx("span",{className:"text-xs text-gray-500",children:y.admission_number})]})]})]}),r.jsx(Pi,{className:`w-5 h-5 transition-transform ${(f==null?void 0:f.id)===y.id?"text-blue-500 transform translate-x-1":"text-gray-400"}`})]})},y.id))})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:f?r.jsx("div",{className:"p-8",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 p-6 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-16 h-16 rounded-xl bg-white/20 backdrop-blur-sm flex items-center justify-center",children:r.jsx(tt,{className:"w-8 h-8 text-white"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold",children:[f.first_name," ",f.last_name]}),r.jsx("p",{className:"text-blue-100 mt-1",children:f.admission_number})]})]}),r.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-semibold ${f.status==="active"?"bg-green-500 text-white":"bg-gray-200 text-gray-700"}`,children:f.status||"active"})]})}),r.jsxs("div",{className:"p-6 grid grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Class"}),r.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:[f.class_name,f.section_name&&` - ${f.section_name}`]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Parent Contact"}),r.jsx("div",{className:"text-lg font-semibold text-gray-900",children:f.parent_phone})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Email"}),r.jsx("div",{className:"text-lg font-semibold text-gray-900",children:f.email})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Status"}),r.jsx("span",{className:"inline-flex px-4 py-2 text-sm font-semibold rounded-full bg-blue-100 text-blue-800 border border-blue-200",children:f.status})]})]}),r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("button",{onClick:()=>n(`/students/${f.id}`),className:"flex items-center space-x-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors shadow-sm",children:[r.jsx(ki,{className:"w-4 h-4"}),r.jsx("span",{children:"View Details"})]}),r.jsx(st,{permission:ie.EDIT_STUDENTS,children:r.jsxs("button",{onClick:()=>x(f),className:"flex items-center space-x-2 px-4 py-2 bg-white hover:bg-gray-50 text-gray-700 border border-gray-300 rounded-lg transition-colors shadow-sm",children:[r.jsx(ct,{className:"w-4 h-4"}),r.jsx("span",{children:"Edit"})]})}),r.jsx(st,{permission:ie.DELETE_STUDENTS,children:r.jsxs("button",{onClick:()=>p(f),className:"flex items-center space-x-2 px-4 py-2 bg-red-50 hover:bg-red-100 text-red-600 border border-red-200 rounded-lg transition-colors shadow-sm",children:[r.jsx(ut,{className:"w-4 h-4"}),r.jsx("span",{children:"Delete"})]})})]})]})})]})}):r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Xe,{className:"w-20 h-20 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Select a Student"}),r.jsx("p",{className:"text-gray-500",children:"Choose a student from the sidebar to view details"})]})})})]}),r.jsx(Ae,{isOpen:c,onClose:()=>{d(!1),i(null)},title:"Edit Student",size:"large",children:r.jsx(Jb,{student:a,onSubmit:j,onCancel:()=>{d(!1),i(null)}})}),r.jsx(Ae,{isOpen:u,onClose:()=>{h(!1),o(null)},title:"Delete Student",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("p",{className:"text-gray-600",children:["Are you sure you want to delete"," ",r.jsxs("strong",{children:[l==null?void 0:l.first_name," ",l==null?void 0:l.last_name]}),"? This action cannot be undone."]}),r.jsxs("div",{className:"flex justify-end space-x-4",children:[r.jsx("button",{onClick:()=>{h(!1),o(null)},className:"px-4 py-2 bg-white hover:bg-gray-50 text-gray-700 border border-gray-300 rounded-lg transition-colors",children:"Cancel"}),r.jsx("button",{onClick:v,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:"Delete"})]})]})})]})},WF=()=>{var d;const[e,t]=O.useState(!1),[s,n]=O.useState({class_id:"",section_id:"",status:"active",search:""}),a=Me(),{data:i,isLoading:l}=me({queryKey:["students",s],queryFn:()=>Fr.getAll(s)}),{data:o}=me({queryKey:["classes"],queryFn:He.getAll}),c=async u=>{try{await Fr.create(u),K.success("Student added successfully!"),t(!1),a.invalidateQueries({queryKey:["students"]}),a.invalidateQueries({queryKey:["classes"]}),a.invalidateQueries({queryKey:["class"]})}catch(h){K.error(h.message||"Failed to add student")}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Students"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage student information"})]}),r.jsx(st,{permission:ie.CREATE_STUDENTS,children:r.jsxs("button",{onClick:()=>t(!0),className:"btn btn-primary flex items-center space-x-2",children:[r.jsx(Be,{className:"w-5 h-5"}),r.jsx("span",{children:"Add Student"})]})})]}),r.jsx("div",{className:"card",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Search students...",value:s.search,onChange:u=>n({...s,search:u.target.value}),className:"input pl-10"})]}),r.jsxs("select",{value:s.class_id,onChange:u=>n({...s,class_id:u.target.value,section_id:""}),className:"input",children:[r.jsx("option",{value:"",children:"All Classes"}),(d=o==null?void 0:o.data)==null?void 0:d.map(u=>r.jsx("option",{value:u.id,children:u.name},u.id))]}),r.jsxs("select",{value:s.status,onChange:u=>n({...s,status:u.target.value}),className:"input",children:[r.jsx("option",{value:"",children:"All Status"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"}),r.jsx("option",{value:"graduated",children:"Graduated"}),r.jsx("option",{value:"transferred",children:"Transferred"})]}),r.jsxs("button",{onClick:()=>n({class_id:"",section_id:"",status:"active",search:""}),className:"btn btn-outline flex items-center justify-center space-x-2",children:[r.jsx(cn,{className:"w-4 h-4"}),r.jsx("span",{children:"Reset"})]})]})}),r.jsx(h4,{students:(i==null?void 0:i.data)||[],isLoading:l}),r.jsx(Ae,{isOpen:e,onClose:()=>t(!1),title:"Add New Student",size:"md",children:r.jsx(Jb,{onSubmit:c,onCancel:()=>t(!1)})})]})},YF=()=>{const{id:e}=bs(),t=We(),{data:s,isLoading:n}=me({queryKey:["student",e],queryFn:()=>Fr.getById(e)}),a=s==null?void 0:s.data;return n?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"loading"})}):a?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("button",{onClick:()=>t("/students"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[r.jsx(js,{className:"w-5 h-5"}),r.jsx("span",{children:"Back to Students"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("button",{onClick:()=>t(`/student-reports/${e}`),className:"btn btn-secondary flex items-center space-x-2",children:[r.jsx(Ue,{className:"w-5 h-5"}),r.jsx("span",{children:"View Reports"})]}),r.jsxs("button",{onClick:()=>t(`/students/${e}/edit`),className:"btn btn-primary flex items-center space-x-2",children:[r.jsx(ct,{className:"w-5 h-5"}),r.jsx("span",{children:"Edit Student"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-32"}),r.jsxs("div",{className:"px-6 pb-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-end -mt-16 mb-6",children:[r.jsx("div",{className:"w-32 h-32 rounded-full border-4 border-white bg-white flex items-center justify-center mb-4 md:mb-0",children:a.profile_photo?r.jsx("img",{src:`http://localhost:5000/${a.profile_photo}`,alt:a.first_name,className:"w-full h-full rounded-full object-cover"}):r.jsx("span",{className:"text-4xl font-bold text-blue-600",children:a.first_name.charAt(0)})}),r.jsxs("div",{className:"md:ml-6 flex-1",children:[r.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:[a.first_name," ",a.middle_name," ",a.last_name]}),r.jsxs("p",{className:"text-gray-600",children:[a.class_name," - ",a.section_name,"  Roll No: ",a.roll_number]})]}),r.jsx("div",{className:"mt-4 md:mt-0",children:r.jsx("span",{className:`badge ${a.status==="active"?"badge-success":"badge-danger"} text-lg px-4 py-2`,children:a.status})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Personal Information"}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(tt,{className:"w-5 h-5 text-gray-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Admission Number"}),r.jsx("p",{className:"font-medium text-gray-900",children:a.admission_number})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Te,{className:"w-5 h-5 text-gray-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Date of Birth"}),r.jsx("p",{className:"font-medium text-gray-900",children:new Date(a.date_of_birth).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(tt,{className:"w-5 h-5 text-gray-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Gender"}),r.jsx("p",{className:"font-medium text-gray-900 capitalize",children:a.gender})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(tt,{className:"w-5 h-5 text-gray-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Blood Group"}),r.jsx("p",{className:"font-medium text-gray-900",children:a.blood_group||"N/A"})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(ya,{className:"w-5 h-5 text-gray-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),r.jsx("p",{className:"font-medium text-gray-900",children:a.email})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(ba,{className:"w-5 h-5 text-gray-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Phone"}),r.jsx("p",{className:"font-medium text-gray-900",children:a.phone||"N/A"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Parent & Address Information"}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(tt,{className:"w-5 h-5 text-gray-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Father's Name"}),r.jsx("p",{className:"font-medium text-gray-900",children:a.father_name||"N/A"})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(tt,{className:"w-5 h-5 text-gray-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Mother's Name"}),r.jsx("p",{className:"font-medium text-gray-900",children:a.mother_name||"N/A"})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(ba,{className:"w-5 h-5 text-gray-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Parent Phone"}),r.jsx("p",{className:"font-medium text-gray-900",children:a.parent_phone})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(ya,{className:"w-5 h-5 text-gray-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Parent Email"}),r.jsx("p",{className:"font-medium text-gray-900",children:a.parent_email||"N/A"})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Rn,{className:"w-5 h-5 text-gray-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Address"}),r.jsx("p",{className:"font-medium text-gray-900",children:a.address?r.jsxs(r.Fragment,{children:[a.address,r.jsx("br",{}),a.city,", ",a.state," ",a.pincode]}):"N/A"})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Te,{className:"w-5 h-5 text-gray-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Admission Date"}),r.jsx("p",{className:"font-medium text-gray-900",children:new Date(a.admission_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h3",{className:"text-sm text-gray-600 mb-2",children:"Attendance Rate"}),r.jsx("p",{className:"text-3xl font-bold text-green-600",children:"95%"})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h3",{className:"text-sm text-gray-600 mb-2",children:"Average Grade"}),r.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"A"})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h3",{className:"text-sm text-gray-600 mb-2",children:"Assignments Completed"}),r.jsx("p",{className:"text-3xl font-bold text-purple-600",children:"24/26"})]})]})]}):r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-gray-500",children:"Student not found"})})},ev=({teacher:e=null,onSubmit:t,onCancel:s,isSubmitting:n})=>{var c,d;const[a,i]=O.useState({employee_id:(e==null?void 0:e.employee_id)||"",first_name:(e==null?void 0:e.first_name)||"",middle_name:(e==null?void 0:e.middle_name)||"",last_name:(e==null?void 0:e.last_name)||"",email:(e==null?void 0:e.email)||"",password:"",phone:(e==null?void 0:e.phone)||"",date_of_birth:((c=e==null?void 0:e.date_of_birth)==null?void 0:c.split("T")[0])||"",gender:(e==null?void 0:e.gender)||"male",qualification:(e==null?void 0:e.qualification)||"",specialization:(e==null?void 0:e.specialization)||"",experience_years:(e==null?void 0:e.experience_years)||"",joining_date:((d=e==null?void 0:e.joining_date)==null?void 0:d.split("T")[0])||new Date().toISOString().split("T")[0],salary:(e==null?void 0:e.salary)||"",emergency_contact:(e==null?void 0:e.emergency_contact)||"",address:(e==null?void 0:e.address)||"",city:(e==null?void 0:e.city)||"",state:(e==null?void 0:e.state)||"",pincode:(e==null?void 0:e.pincode)||"",status:(e==null?void 0:e.status)||"active",employment_type:(e==null?void 0:e.employment_type)||"full_time",profile_photo:null}),l=u=>{const{name:h,value:f,files:m}=u.target;i({...a,[h]:m?m[0]:f})},o=u=>{if(u.preventDefault(),!a.first_name||!a.last_name||!a.email||!a.phone){K.error("Please fill all required fields");return}if(!a.employee_id||!a.date_of_birth||!a.qualification){K.error("Please fill all required fields");return}if(!e&&!a.password){K.error("Password is required for new teachers");return}t(a)};return r.jsxs("form",{onSubmit:o,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Personal Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee ID *"}),r.jsx("input",{type:"text",name:"employee_id",value:a.employee_id,onChange:l,className:"input",placeholder:"e.g., TCH2024001",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),r.jsx("input",{type:"text",name:"first_name",value:a.first_name,onChange:l,className:"input",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Middle Name"}),r.jsx("input",{type:"text",name:"middle_name",value:a.middle_name,onChange:l,className:"input"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),r.jsx("input",{type:"text",name:"last_name",value:a.last_name,onChange:l,className:"input",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),r.jsx("input",{type:"email",name:"email",value:a.email,onChange:l,className:"input",required:!0})]}),!e&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),r.jsx("input",{type:"password",name:"password",value:a.password,onChange:l,className:"input",placeholder:"Min 6 characters",required:!0}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Default: Teacher@123 (if left empty)"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone *"}),r.jsx("input",{type:"tel",name:"phone",value:a.phone,onChange:l,className:"input",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth *"}),r.jsx("input",{type:"date",name:"date_of_birth",value:a.date_of_birth,onChange:l,className:"input",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender *"}),r.jsxs("select",{name:"gender",value:a.gender,onChange:l,className:"input",required:!0,children:[r.jsx("option",{value:"male",children:"Male"}),r.jsx("option",{value:"female",children:"Female"}),r.jsx("option",{value:"other",children:"Other"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Photo"}),r.jsx("input",{type:"file",name:"profile_photo",onChange:l,accept:"image/*",className:"input"})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Professional Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Qualification *"}),r.jsx("input",{type:"text",name:"qualification",value:a.qualification,onChange:l,className:"input",placeholder:"e.g., B.Ed, M.A.",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Specialization"}),r.jsx("input",{type:"text",name:"specialization",value:a.specialization,onChange:l,className:"input",placeholder:"e.g., Mathematics, Science"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Experience (Years)"}),r.jsx("input",{type:"number",name:"experience_years",value:a.experience_years,onChange:l,className:"input",min:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Joining Date"}),r.jsx("input",{type:"date",name:"joining_date",value:a.joining_date,onChange:l,className:"input"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Salary"}),r.jsx("input",{type:"number",name:"salary",value:a.salary,onChange:l,className:"input",min:"0",step:"0.01"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Emergency Contact"}),r.jsx("input",{type:"tel",name:"emergency_contact",value:a.emergency_contact,onChange:l,className:"input"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),r.jsxs("select",{name:"status",value:a.status,onChange:l,className:"input",children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"on_leave",children:"On Leave"}),r.jsx("option",{value:"resigned",children:"Resigned"}),r.jsx("option",{value:"terminated",children:"Terminated"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employment Type"}),r.jsxs("select",{name:"employment_type",value:a.employment_type,onChange:l,className:"input",children:[r.jsx("option",{value:"full_time",children:"Full Time"}),r.jsx("option",{value:"part_time",children:"Part Time"})]})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Address Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),r.jsx("textarea",{name:"address",value:a.address,onChange:l,className:"input",rows:"3"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),r.jsx("input",{type:"text",name:"city",value:a.city,onChange:l,className:"input"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State"}),r.jsx("input",{type:"text",name:"state",value:a.state,onChange:l,className:"input"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pincode"}),r.jsx("input",{type:"text",name:"pincode",value:a.pincode,onChange:l,className:"input"})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[r.jsx("button",{type:"button",onClick:s,className:"btn btn-outline",disabled:n,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?"Saving...":e?"Update Teacher":"Add Teacher"})]})]})},j1="http://localhost:5001",f4=({teachers:e,isLoading:t,onUpdate:s})=>{const n=We(),[a,i]=O.useState(null),[l,o]=O.useState(null),[c,d]=O.useState(null),[u,h]=O.useState(!1),[f,m]=O.useState(!1);O.useEffect(()=>{e&&e.length>0&&!a?i(e[0]):(!e||e.length===0)&&i(null)},[e,a]);const x=y=>{i(y)},p=y=>{o(y),h(!0)},j=y=>{d(y),m(!0)},v=async y=>{try{await Pt.update(l.id,y),K.success("Teacher updated successfully!"),h(!1),o(null),s&&s(),a&&a.id===l.id&&i({...a,...y})}catch(b){K.error(b.message||"Failed to update teacher")}},g=async()=>{try{await Pt.delete(c.id),K.success("Teacher deleted successfully!"),m(!1),d(null),a&&a.id===c.id&&i(null),s&&s()}catch(y){K.error(y.message||"Failed to delete teacher")}};return t?r.jsxs("div",{className:"flex h-screen bg-gray-50",children:[r.jsx("div",{className:"w-80 bg-white border-r border-gray-200 p-4",children:r.jsx("div",{className:"animate-pulse space-y-3",children:[...Array(8)].map((y,b)=>r.jsx("div",{className:"h-16 bg-gray-200 rounded-lg"},b))})}),r.jsx("div",{className:"flex-1 p-8",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-32 bg-gray-200 rounded-lg mb-6"}),r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsx("div",{className:"h-40 bg-gray-200 rounded"}),r.jsx("div",{className:"h-40 bg-gray-200 rounded"})]})]})})]}):!e||e.length===0?r.jsx("div",{className:"flex h-[calc(100vh-200px)] bg-gray-50 items-center justify-center",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[r.jsx(tt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500 text-lg",children:"No teachers found"})]})}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex h-[calc(100vh-200px)] bg-gray-50 border border-gray-200 rounded-xl overflow-hidden shadow-sm",children:[r.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 overflow-y-auto flex-shrink-0",children:[r.jsx("div",{className:"p-4 border-b border-gray-100 bg-gray-50/50 sticky top-0 z-10 backdrop-blur-sm",children:r.jsxs("h2",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider",children:["Staff Directory (",e.length,")"]})}),r.jsx("div",{className:"divide-y divide-gray-50",children:e.map(y=>r.jsx("div",{onClick:()=>x(y),className:`p-4 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${(a==null?void 0:a.id)===y.id?"bg-blue-50 border-l-4 border-blue-500":"border-l-4 border-transparent"}`,children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center overflow-hidden border border-gray-200",children:y.profile_photo?r.jsx("img",{src:`${j1}/${y.profile_photo}`,alt:y.first_name,className:"w-full h-full object-cover"}):r.jsx("span",{className:"text-sm font-bold text-gray-500",children:y.first_name.charAt(0)})}),r.jsx("span",{className:`absolute bottom-0 right-0 w-3 h-3 rounded-full border-2 border-white ${y.status==="active"?"bg-green-500":"bg-gray-400"}`})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:`text-sm font-medium truncate ${(a==null?void 0:a.id)===y.id?"text-blue-700":"text-gray-900"}`,children:[y.first_name," ",y.last_name]}),r.jsx("div",{className:"text-xs text-gray-500 truncate",children:y.employee_id})]}),(a==null?void 0:a.id)===y.id&&r.jsx(Pi,{className:"w-4 h-4 text-blue-500"})]})},y.id))})]}),r.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50",children:a?r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"h-32 bg-gradient-to-r from-blue-600 to-indigo-700"}),r.jsxs("div",{className:"px-8 pb-8",children:[r.jsxs("div",{className:"relative flex items-end -mt-12 mb-6 space-x-5",children:[r.jsx("div",{className:"w-32 h-32 rounded-xl bg-white p-1 shadow-lg",children:r.jsx("div",{className:"w-full h-full rounded-lg bg-gray-100 flex items-center justify-center overflow-hidden",children:a.profile_photo?r.jsx("img",{src:`${j1}/${a.profile_photo}`,alt:a.first_name,className:"w-full h-full object-cover"}):r.jsx(tt,{className:"w-12 h-12 text-gray-300"})})}),r.jsx("div",{className:"flex-1 pb-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[a.first_name," ",a.middle_name," ",a.last_name]}),r.jsxs("p",{className:"text-gray-600 flex items-center space-x-2",children:[r.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-0.5 rounded text-gray-600",children:a.employee_id}),a.specialization&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-gray-300",children:""}),r.jsx("span",{className:"text-blue-600 font-medium",children:a.specialization})]})]})]}),r.jsx("div",{className:"flex items-center space-x-2",children:r.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium border ${a.status==="active"?"bg-green-50 text-green-700 border-green-200":"bg-gray-100 text-gray-600 border-gray-200"}`,children:[r.jsx("span",{className:`w-2 h-2 rounded-full inline-block mr-2 ${a.status==="active"?"bg-green-500":"bg-gray-400"}`}),r.jsx("span",{className:"capitalize",children:a.status})]})})]})})]}),r.jsxs("div",{className:"flex items-center justify-between mb-8 pb-6 border-b border-gray-200",children:[r.jsxs("div",{className:"flex space-x-8",children:[r.jsx("button",{className:"text-blue-600 font-medium border-b-2 border-blue-600 pb-6 -mb-6.5",children:"Overview"}),r.jsx("button",{onClick:()=>n(`/teachers/${a.id}`),className:"text-gray-500 hover:text-gray-800 font-medium pb-6 -mb-6.5 transition-colors",children:"Full Profile"}),r.jsx("button",{className:"text-gray-500 hover:text-gray-800 font-medium pb-6 -mb-6.5 transition-colors",children:"Schedule"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("button",{onClick:()=>p(a),className:"btn btn-sm btn-outline flex items-center space-x-1",children:[r.jsx(ct,{className:"w-4 h-4"}),r.jsx("span",{children:"Edit"})]}),r.jsxs("button",{onClick:()=>j(a),className:"btn btn-sm text-red-600 hover:bg-red-50 border border-red-200 hover:border-red-300 flex items-center space-x-1",children:[r.jsx(ut,{className:"w-4 h-4"}),r.jsx("span",{children:"Delete"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[r.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(ya,{className:"w-5 h-5 mr-2 text-gray-400"}),"Contact Information"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Email"}),r.jsx("p",{className:"text-gray-900 mt-1",children:a.email})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Phone"}),r.jsx("p",{className:"text-gray-900 mt-1",children:a.phone})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Address"}),r.jsxs("p",{className:"text-gray-900 mt-1",children:[a.address||"N/A",a.city&&`, ${a.city}`]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[r.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(Cb,{className:"w-5 h-5 mr-2 text-gray-400"}),"Employment Details"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Qualification"}),r.jsxs("p",{className:"text-gray-900 mt-1 flex items-center",children:[r.jsx(Cl,{className:"w-4 h-4 mr-1 text-gray-400"}),a.qualification||"N/A"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Experience"}),r.jsx("p",{className:"text-gray-900 mt-1",children:a.experience_years?`${a.experience_years} Years`:"N/A"})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Join Date"}),r.jsx("p",{className:"text-gray-900 mt-1",children:a.joining_date?new Date(a.joining_date).toLocaleDateString():"N/A"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Type"}),r.jsx("span",{className:"inline-flex mt-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-50 text-blue-700",children:a.employment_type==="full_time"?"Full Time":"Part Time"})]})]})]})]})]})]}):r.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-8",children:[r.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:r.jsx(tt,{className:"w-10 h-10 text-gray-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"No Teacher Selected"}),r.jsx("p",{className:"text-gray-500 max-w-sm mt-2",children:"Select a teacher from the list to view their details, schedule, and assignments."})]})})]}),r.jsx(Ae,{isOpen:u,onClose:()=>{h(!1),o(null)},title:"Edit Teacher",size:"lg",children:r.jsx(ev,{teacher:l,onSubmit:v,onCancel:()=>{h(!1),o(null)}})}),r.jsx(Ae,{isOpen:f,onClose:()=>{m(!1),d(null)},title:"Delete Teacher",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("p",{className:"text-gray-600",children:["Are you sure you want to delete ",r.jsxs("strong",{children:[c==null?void 0:c.first_name," ",c==null?void 0:c.last_name]}),"? This action cannot be undone."]}),r.jsxs("div",{className:"flex justify-end space-x-4",children:[r.jsx("button",{onClick:()=>{m(!1),d(null)},className:"btn btn-outline",children:"Cancel"}),r.jsx("button",{onClick:g,className:"btn bg-red-600 hover:bg-red-700 text-white",children:"Delete"})]})]})})]})},tv=({staff:e=null,onSubmit:t,onCancel:s,isSubmitting:n})=>{var c,d;const[a,i]=O.useState({employee_id:(e==null?void 0:e.employee_id)||"",first_name:(e==null?void 0:e.first_name)||"",middle_name:(e==null?void 0:e.middle_name)||"",last_name:(e==null?void 0:e.last_name)||"",email:(e==null?void 0:e.email)||"",password:"",phone:(e==null?void 0:e.phone)||"",date_of_birth:((c=e==null?void 0:e.date_of_birth)==null?void 0:c.split("T")[0])||"",gender:(e==null?void 0:e.gender)||"male",blood_group:(e==null?void 0:e.blood_group)||"",emergency_contact:(e==null?void 0:e.emergency_contact)||"",designation:(e==null?void 0:e.designation)||"",department:(e==null?void 0:e.department)||"",joining_date:((d=e==null?void 0:e.joining_date)==null?void 0:d.split("T")[0])||new Date().toISOString().split("T")[0],salary:(e==null?void 0:e.salary)||"",shift_timing:(e==null?void 0:e.shift_timing)||"",is_frontdesk:(e==null?void 0:e.is_frontdesk)||!1,address:(e==null?void 0:e.address)||"",city:(e==null?void 0:e.city)||"",state:(e==null?void 0:e.state)||"",pincode:(e==null?void 0:e.pincode)||"",status:(e==null?void 0:e.status)||"active",profile_photo:null}),l=u=>{const{name:h,value:f,files:m,type:x,checked:p}=u.target;i({...a,[h]:m?m[0]:x==="checkbox"?p:f})},o=u=>{if(u.preventDefault(),!a.first_name||!a.last_name||!a.email||!a.phone){K.error("Please fill all required fields");return}if(!a.employee_id||!a.date_of_birth||!a.designation||!a.gender){K.error("Please fill all required fields");return}if(!e&&!a.password){K.error("Password is required for new staff");return}t(a)};return r.jsxs("form",{onSubmit:o,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Personal Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee ID *"}),r.jsx("input",{type:"text",name:"employee_id",value:a.employee_id,onChange:l,className:"input",placeholder:"e.g., STF2024001",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),r.jsx("input",{type:"text",name:"first_name",value:a.first_name,onChange:l,className:"input",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Middle Name"}),r.jsx("input",{type:"text",name:"middle_name",value:a.middle_name,onChange:l,className:"input"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),r.jsx("input",{type:"text",name:"last_name",value:a.last_name,onChange:l,className:"input",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),r.jsx("input",{type:"email",name:"email",value:a.email,onChange:l,className:"input",required:!0})]}),!e&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),r.jsx("input",{type:"password",name:"password",value:a.password,onChange:l,className:"input",placeholder:"Min 6 characters",required:!0}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Default: Staff@123 (if left empty)"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone *"}),r.jsx("input",{type:"tel",name:"phone",value:a.phone,onChange:l,className:"input",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth *"}),r.jsx("input",{type:"date",name:"date_of_birth",value:a.date_of_birth,onChange:l,className:"input",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender *"}),r.jsxs("select",{name:"gender",value:a.gender,onChange:l,className:"input",required:!0,children:[r.jsx("option",{value:"male",children:"Male"}),r.jsx("option",{value:"female",children:"Female"}),r.jsx("option",{value:"other",children:"Other"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blood Group"}),r.jsxs("select",{name:"blood_group",value:a.blood_group,onChange:l,className:"input",children:[r.jsx("option",{value:"",children:"Select Blood Group"}),r.jsx("option",{value:"A+",children:"A+"}),r.jsx("option",{value:"A-",children:"A-"}),r.jsx("option",{value:"B+",children:"B+"}),r.jsx("option",{value:"B-",children:"B-"}),r.jsx("option",{value:"AB+",children:"AB+"}),r.jsx("option",{value:"AB-",children:"AB-"}),r.jsx("option",{value:"O+",children:"O+"}),r.jsx("option",{value:"O-",children:"O-"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Emergency Contact"}),r.jsx("input",{type:"tel",name:"emergency_contact",value:a.emergency_contact,onChange:l,className:"input"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Photo"}),r.jsx("input",{type:"file",name:"profile_photo",onChange:l,accept:"image/*",className:"input"})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Employment Details"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Designation *"}),r.jsx("input",{type:"text",name:"designation",value:a.designation,onChange:l,className:"input",placeholder:"e.g., Accountant, Guard, Cleaner",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),r.jsx("input",{type:"text",name:"department",value:a.department,onChange:l,className:"input",placeholder:"e.g., Administration, Security"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Joining Date"}),r.jsx("input",{type:"date",name:"joining_date",value:a.joining_date,onChange:l,className:"input"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Salary"}),r.jsx("input",{type:"number",name:"salary",value:a.salary,onChange:l,className:"input",min:"0",step:"0.01"})]}),r.jsx("div",{className:"md:col-span-2",children:r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",name:"is_frontdesk",checked:a.is_frontdesk,onChange:l,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Related to Front Desk"})]})}),a.is_frontdesk&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shift Timing"}),r.jsx("input",{type:"text",name:"shift_timing",value:a.shift_timing,onChange:l,className:"input",placeholder:"e.g., 9 AM - 5 PM"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),r.jsxs("select",{name:"status",value:a.status,onChange:l,className:"input",children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"}),r.jsx("option",{value:"resigned",children:"Resigned"}),r.jsx("option",{value:"retired",children:"Retired"})]})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Address Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),r.jsx("textarea",{name:"address",value:a.address,onChange:l,className:"input",rows:"3"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),r.jsx("input",{type:"text",name:"city",value:a.city,onChange:l,className:"input"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State"}),r.jsx("input",{type:"text",name:"state",value:a.state,onChange:l,className:"input"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pincode"}),r.jsx("input",{type:"text",name:"pincode",value:a.pincode,onChange:l,className:"input"})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[r.jsx("button",{type:"button",onClick:s,className:"btn btn-outline",disabled:n,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?"Saving...":e?"Update Staff":"Add Staff"})]})]})},N1="http://localhost:5001",GF=({searchTerm:e})=>{const[t,s]=O.useState([]),[n,a]=O.useState(!0),[i,l]=O.useState(null),[o,c]=O.useState(!1),[d,u]=O.useState(null),[h,f]=O.useState(!1);O.useEffect(()=>{(async()=>{a(!0);try{const b=await Cs.getAll({search:e});s(b.data||[]),b.data&&b.data.length>0&&l(b.data[0])}catch(b){console.error("Failed to fetch staff:",b),K.error("Failed to load staff list")}finally{a(!1)}})()},[e]);const m=y=>{l(y)},x=()=>{u(null),c(!0)},p=y=>{u(y),c(!0)},j=()=>{c(!1),u(null)},v=async y=>{f(!0);try{d?(await Cs.update(d.id,y),K.success("Staff updated successfully")):(await Cs.create(y),K.success("Staff added successfully"));const b=await Cs.getAll({search:e});if(s(b.data||[]),d&&(i==null?void 0:i.id)===d.id){const N=b.data.find(k=>k.id===d.id);l(N)}j()}catch(b){console.error("Failed to save staff:",b),K.error(b.message||"Failed to save staff")}finally{f(!1)}},g=async y=>{if(window.confirm("Are you sure you want to delete this staff member?"))try{await Cs.delete(y),K.success("Staff deleted successfully");const b=await Cs.getAll({search:e});s(b.data||[]),(i==null?void 0:i.id)===y&&l(b.data[0]||null)}catch(b){console.error("Failed to delete staff:",b),K.error(b.message||"Failed to delete staff")}};return n?r.jsx("div",{className:"flex h-[calc(100vh-200px)] bg-gray-50 items-center justify-center",children:r.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[r.jsx("div",{className:"h-12 w-12 bg-gray-200 rounded-full mb-4"}),r.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded"})]})}):!t||t.length===0?r.jsx("div",{className:"flex h-[calc(100vh-200px)] bg-gray-50 items-center justify-center",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[r.jsx(tt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500 text-lg",children:"No staff found"})]})}):r.jsxs("div",{className:"flex h-[calc(100vh-200px)] bg-gray-50 border border-gray-200 rounded-xl overflow-hidden shadow-sm",children:[r.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 overflow-y-auto flex-shrink-0",children:[r.jsx("div",{className:"p-4 border-b border-gray-100 bg-gray-50/50 sticky top-0 z-10 backdrop-blur-sm",children:r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("h2",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider",children:["Staff Directory (",t.length,")"]}),r.jsx("button",{onClick:x,className:"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",title:"Add Staff",children:r.jsx(Be,{className:"w-4 h-4"})})]})}),r.jsx("div",{className:"divide-y divide-gray-50",children:t.map(y=>{var b;return r.jsx("div",{onClick:()=>m(y),className:`p-4 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${(i==null?void 0:i.id)===y.id?"bg-blue-50 border-l-4 border-blue-500":"border-l-4 border-transparent"}`,children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center overflow-hidden border border-gray-200",children:y.profile_photo?r.jsx("img",{src:`${N1}/${y.profile_photo}`,alt:y.first_name,className:"w-full h-full object-cover"}):r.jsx("span",{className:"text-sm font-bold text-gray-500",children:(b=y.first_name)==null?void 0:b.charAt(0)})}),r.jsx("span",{className:`absolute bottom-0 right-0 w-3 h-3 rounded-full border-2 border-white ${y.status==="active"?"bg-green-500":"bg-gray-400"}`})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:`text-sm font-medium truncate ${(i==null?void 0:i.id)===y.id?"text-blue-700":"text-gray-900"}`,children:[y.first_name," ",y.last_name]}),r.jsx("div",{className:"text-xs text-gray-500 truncate",children:y.designation||"Staff Member"})]}),(i==null?void 0:i.id)===y.id&&r.jsx(Pi,{className:"w-4 h-4 text-blue-500"})]})},y.id)})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50",children:i?r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"h-32 bg-gradient-to-r from-gray-600 to-gray-700"}),r.jsxs("div",{className:"px-8 pb-8",children:[r.jsxs("div",{className:"relative flex items-end -mt-12 mb-6 space-x-5",children:[r.jsx("div",{className:"w-32 h-32 rounded-xl bg-white p-1 shadow-lg",children:r.jsx("div",{className:"w-full h-full rounded-lg bg-gray-100 flex items-center justify-center overflow-hidden",children:i.profile_photo?r.jsx("img",{src:`${N1}/${i.profile_photo}`,alt:i.first_name,className:"w-full h-full object-cover"}):r.jsx(tt,{className:"w-12 h-12 text-gray-300"})})}),r.jsx("div",{className:"flex-1 pb-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[i.first_name," ",i.last_name]}),r.jsx("p",{className:"text-gray-600 flex items-center space-x-2",children:r.jsx("span",{className:"font-medium text-blue-600",children:i.designation||"Staff Member"})})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>p(i),className:"p-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors",title:"Edit Staff",children:r.jsx(ct,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>g(i.id),className:"p-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors",title:"Delete Staff",children:r.jsx(ut,{className:"w-4 h-4"})}),r.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium border ${i.status==="active"?"bg-green-50 text-green-700 border-green-200":"bg-gray-100 text-gray-600 border-gray-200"}`,children:[r.jsx("span",{className:`w-2 h-2 rounded-full inline-block mr-2 ${i.status==="active"?"bg-green-500":"bg-gray-400"}`}),r.jsx("span",{className:"capitalize",children:i.status||"Active"})]})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[r.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(ya,{className:"w-5 h-5 mr-2 text-gray-400"}),"Contact Information"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Email"}),r.jsx("p",{className:"text-gray-900 mt-1",children:i.email||"N/A"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Phone"}),r.jsx("p",{className:"text-gray-900 mt-1",children:i.phone||"N/A"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[r.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(Cb,{className:"w-5 h-5 mr-2 text-gray-400"}),"Employment Details"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Department"}),r.jsx("p",{className:"text-gray-900 mt-1",children:i.department||"General"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Join Date"}),r.jsx("p",{className:"text-gray-900 mt-1",children:i.joining_date?new Date(i.joining_date).toLocaleDateString():"N/A"})]})]})]})]})]})]}):r.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-8",children:[r.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:r.jsx(tt,{className:"w-10 h-10 text-gray-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"No Staff Selected"}),r.jsx("p",{className:"text-gray-500 max-w-sm mt-2",children:"Select a staff member from the list to view their details."})]})}),o&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:d?"Edit Staff Member":"Add New Staff Member"}),r.jsx("button",{onClick:j,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",disabled:h,children:r.jsx(qr,{className:"w-5 h-5 text-gray-500"})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:r.jsx(tv,{staff:d,onSubmit:v,onCancel:j,isSubmitting:h})})]})})]})},KF=()=>{var k;const[e,t]=iT(),[s,n]=O.useState(e.get("tab")||"students"),[a,i]=O.useState({class_id:"",section_id:"",status:"active",search:""});O.useEffect(()=>{const w=e.get("tab");w&&n(w)},[e]);const l=Me(),[o,c]=O.useState(!1),[d,u]=O.useState(!1),[h,f]=O.useState(!1),{data:m,isLoading:x}=me({queryKey:["students",a],queryFn:()=>Fr.getAll(a),enabled:s==="students"}),{data:p}=me({queryKey:["classes"],queryFn:He.getAll}),{data:j,isLoading:v}=me({queryKey:["teachers",a.search],queryFn:()=>Pt.getAll({search:a.search}),enabled:s==="teachers"}),g=async w=>{try{await Fr.create(w),K.success("Student added successfully!"),c(!1),l.invalidateQueries({queryKey:["students"]})}catch(_){K.error(_.message||"Failed to add student")}},y=async w=>{try{await Pt.create(w),K.success("Teacher added successfully!"),u(!1),l.invalidateQueries({queryKey:["teachers"]})}catch(_){K.error(_.message||"Failed to add teacher")}},b=async w=>{try{await Cs.create(w),K.success("Staff added successfully!"),f(!1),l.invalidateQueries({queryKey:["staff"]})}catch(_){K.error(_.message||"Failed to add staff")}},N=[{id:"students",label:"Students"},{id:"teachers",label:"Teachers"},{id:"staffs",label:"Staffs"}];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("div",{}),s==="students"&&r.jsx(st,{permission:ie.CREATE_STUDENTS,children:r.jsxs("button",{onClick:()=>c(!0),className:"btn btn-primary flex items-center space-x-2",children:[r.jsx(Be,{className:"w-5 h-5"}),r.jsx("span",{children:"Add Student"})]})}),s==="teachers"&&r.jsx(st,{permission:ie.CREATE_TEACHERS,children:r.jsxs("button",{onClick:()=>u(!0),className:"btn btn-primary flex items-center space-x-2",children:[r.jsx(Be,{className:"w-5 h-5"}),r.jsx("span",{children:"Add Teacher"})]})}),s==="staffs"&&r.jsx(st,{permission:ie.CREATE_TEACHERS,children:r.jsxs("button",{onClick:()=>f(!0),className:"btn btn-primary flex items-center space-x-2",children:[r.jsx(Be,{className:"w-5 h-5"}),r.jsx("span",{children:"Add Staff"})]})})]}),r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:N.map(w=>r.jsx("button",{onClick:()=>{const _=w.id;n(_),t({tab:_}),_!==s&&i(S=>({...S,class_id:"",section_id:""}))},className:`
                whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200
                ${s===w.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
              `,children:w.label},w.id))})}),r.jsxs("div",{className:"card",children:[" ",r.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[s==="students"&&r.jsxs(r.Fragment,{children:[r.jsxs("select",{className:"input md:w-48",children:[r.jsx("option",{value:"",children:"All Program"}),r.jsx("option",{value:"science",children:"Science"}),r.jsx("option",{value:"management",children:"Management"}),r.jsx("option",{value:"humanities",children:"Humanities"})]}),r.jsxs("select",{value:a.class_id,onChange:w=>i({...a,class_id:w.target.value,section_id:""}),className:"input md:w-48",children:[r.jsx("option",{value:"",children:"All class"}),(k=p==null?void 0:p.data)==null?void 0:k.map(w=>r.jsx("option",{value:w.id,children:w.name},w.id))]}),r.jsx("select",{value:a.section_id,onChange:w=>i({...a,section_id:w.target.value}),className:"input md:w-48",children:r.jsx("option",{value:"",children:"All section"})})]}),r.jsxs("div",{className:`relative flex-1 ${s!=="students"?"w-full":""}`,children:[r.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Search",value:a.search,onChange:w=>i({...a,search:w.target.value}),className:"input pl-10 w-full"})]})]})]}),r.jsxs("div",{children:[s==="students"&&r.jsx(h4,{students:(m==null?void 0:m.data)||[],isLoading:x}),s==="teachers"&&r.jsx(f4,{teachers:(j==null?void 0:j.data)||[],isLoading:v,onUpdate:()=>l.invalidateQueries(["teachers"])}),s==="staffs"&&r.jsx(GF,{searchTerm:a.search})]}),r.jsx(Ae,{isOpen:o,onClose:()=>c(!1),title:"Add New Student",size:"md",children:r.jsx(Jb,{onSubmit:g,onCancel:()=>c(!1)})}),r.jsx(Ae,{isOpen:d,onClose:()=>u(!1),title:"Add New Teacher",size:"lg",children:r.jsx(ev,{onSubmit:y,onCancel:()=>u(!1)})}),r.jsx(Ae,{isOpen:h,onClose:()=>f(!1),title:"Add New Staff",size:"lg",children:r.jsx(tv,{onSubmit:b,onCancel:()=>f(!1)})})]})},QF=()=>{const e=Me(),[t,s]=O.useState(""),[n,a]=O.useState(!1),{data:i,isLoading:l}=me({queryKey:["teachers",t],queryFn:()=>Pt.getAll({search:t})}),o=(i==null?void 0:i.data)||[],c=_e({mutationFn:Pt.create,onSuccess:()=>{K.success("Teacher added successfully"),a(!1),e.invalidateQueries(["teachers"])},onError:h=>{K.error(h.message||"Failed to add teacher")}}),d=()=>{a(!0)},u=()=>{e.invalidateQueries(["teachers"])};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Teachers"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage teaching staff"})]}),r.jsx(st,{permission:ie.CREATE_TEACHERS,children:r.jsxs("button",{onClick:d,className:"btn btn-primary flex items-center space-x-2",children:[r.jsx(Be,{className:"w-5 h-5"}),r.jsx("span",{children:"Add Teacher"})]})})]}),r.jsx("div",{className:"card",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"relative md:col-span-2",children:[r.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Search teachers by name or ID...",value:t,onChange:h=>s(h.target.value),className:"input pl-10 w-full"})]}),r.jsxs("button",{onClick:()=>s(""),className:"btn btn-outline flex items-center justify-center space-x-2",children:[r.jsx(cn,{className:"w-4 h-4"}),r.jsx("span",{children:"Reset"})]})]})}),r.jsx(f4,{teachers:o,isLoading:l,onUpdate:u}),r.jsx(Ae,{isOpen:n,onClose:()=>a(!1),title:"Add New Teacher",size:"lg",children:r.jsx(ev,{onSubmit:h=>c.mutate(h),onCancel:()=>a(!1),isSubmitting:c.isPending})})]})},XF="http://localhost:5001",ZF=()=>{const{id:e}=bs(),t=We(),{data:s,isLoading:n}=me({queryKey:["teacher",e],queryFn:()=>Pt.getById(e)}),a=s==null?void 0:s.data;return n?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"loading"})}):a?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("button",{onClick:()=>t("/teachers"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[r.jsx(js,{className:"w-5 h-5"}),r.jsx("span",{children:"Back to Teachers"})]}),r.jsxs("button",{onClick:()=>t(`/teachers/${e}/edit`),className:"btn btn-primary flex items-center space-x-2",children:[r.jsx(ct,{className:"w-5 h-5"}),r.jsx("span",{children:"Edit Teacher"})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 h-32"}),r.jsxs("div",{className:"px-6 pb-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-end -mt-16 mb-6",children:[r.jsx("div",{className:"w-32 h-32 rounded-full border-4 border-white bg-white flex items-center justify-center mb-4 md:mb-0",children:a!=null&&a.profile_photo?r.jsx("img",{src:`${XF}/${a.profile_photo}`,alt:a.first_name,className:"w-full h-full rounded-full object-cover"}):r.jsx("span",{className:"text-4xl font-bold text-green-600",children:a.first_name.charAt(0)})}),r.jsxs("div",{className:"md:ml-6 flex-1",children:[r.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:[a.first_name," ",a.middle_name," ",a.last_name]}),r.jsxs("p",{className:"text-gray-600",children:["Employee ID: ",a.employee_id]}),a.specialization&&r.jsx("p",{className:"text-blue-600 mt-1",children:a.specialization})]}),r.jsxs("div",{className:"mt-4 md:mt-0",children:[r.jsx("span",{className:`badge ${a.status==="active"?"badge-success":"badge-danger"} text-lg px-4 py-2`,children:a.status}),r.jsx("span",{className:"badge badge-info text-lg px-4 py-2 ml-2",children:a.employment_type==="full_time"?"Full Time":"Part Time"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Personal Information"}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(ya,{className:"w-5 h-5 text-gray-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),r.jsx("p",{className:"font-medium text-gray-900",children:a.email})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(ba,{className:"w-5 h-5 text-gray-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Phone"}),r.jsx("p",{className:"font-medium text-gray-900",children:a.phone})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Te,{className:"w-5 h-5 text-gray-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Date of Birth"}),r.jsx("p",{className:"font-medium text-gray-900",children:new Date(a.date_of_birth).toLocaleDateString()})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(rs,{className:"w-5 h-5 text-gray-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Gender"}),r.jsx("p",{className:"font-medium text-gray-900 capitalize",children:a.gender})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Professional Information"}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(rs,{className:"w-5 h-5 text-gray-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Qualification"}),r.jsx("p",{className:"font-medium text-gray-900",children:a.qualification||"N/A"})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Cb,{className:"w-5 h-5 text-gray-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Experience"}),r.jsx("p",{className:"font-medium text-gray-900",children:a.experience_years?`${a.experience_years} years`:"N/A"})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Te,{className:"w-5 h-5 text-gray-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Joining Date"}),r.jsx("p",{className:"font-medium text-gray-900",children:new Date(a.joining_date).toLocaleDateString()})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(ba,{className:"w-5 h-5 text-gray-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Emergency Contact"}),r.jsx("p",{className:"font-medium text-gray-900",children:a.emergency_contact||"N/A"})]})]})]})]})]})]}),a.assignments&&a.assignments.length>0&&r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Class Assignments"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.assignments.map(i=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-500 transition-colors",children:[r.jsxs("h4",{className:"font-semibold text-gray-900",children:[i.class_name," - Grade ",i.grade_level]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[i.subject_name," (",i.subject_code,")"]})]},i.id))})]})]}):r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-gray-500",children:"Teacher not found"})})},JF=({stats:e})=>{const{present_count:t=0,absent_count:s=0,late_count:n=0,excused_count:a=0,total_days:i=0,attendance_percentage:l=0}=e,c=(d=>d>=80?"text-emerald-500":d>=75?"text-yellow-500":"text-rose-500")(l);return r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[r.jsxs("div",{className:"md:col-span-1 bg-white rounded-2xl p-6 shadow-sm border border-gray-100 flex items-center justify-between relative overflow-hidden",children:[r.jsxs("div",{className:"z-10",children:[r.jsx("h3",{className:"text-gray-500 font-medium text-sm mb-1 uppercase tracking-wider",children:"Overall Attendance"}),r.jsxs("div",{className:"text-4xl font-bold text-gray-800",children:[l,"%"]}),r.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Total ",i," working days"]})]}),r.jsx("div",{className:"relative w-24 h-24 flex items-center justify-center",children:r.jsxs("svg",{className:"transform -rotate-90 w-24 h-24",children:[r.jsx("circle",{cx:"48",cy:"48",r:"40",stroke:"currentColor",strokeWidth:"8",fill:"transparent",className:"text-gray-100"}),r.jsx("circle",{cx:"48",cy:"48",r:"40",stroke:"currentColor",strokeWidth:"8",fill:"transparent",strokeDasharray:2*Math.PI*40,strokeDashoffset:2*Math.PI*40-l/100*2*Math.PI*40,className:`${c} transition-all duration-1000 ease-out`,strokeLinecap:"round"})]})}),r.jsx("div",{className:"absolute -bottom-4 -right-4 w-24 h-24 bg-gray-50 rounded-full z-0"})]}),r.jsxs("div",{className:"md:col-span-2 grid grid-cols-2 sm:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100 flex flex-col items-center justify-center hover:shadow-md transition-shadow",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center mb-2",children:r.jsx(Jo,{className:"w-5 h-5"})}),r.jsx("span",{className:"text-2xl font-bold text-gray-800",children:t}),r.jsx("span",{className:"text-xs text-gray-500 font-medium uppercase tracking-wide",children:"Present"})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100 flex flex-col items-center justify-center hover:shadow-md transition-shadow",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-rose-100 text-rose-600 flex items-center justify-center mb-2",children:r.jsx(qr,{className:"w-5 h-5"})}),r.jsx("span",{className:"text-2xl font-bold text-gray-800",children:s}),r.jsx("span",{className:"text-xs text-gray-500 font-medium uppercase tracking-wide",children:"Absent"})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100 flex flex-col items-center justify-center hover:shadow-md transition-shadow",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-yellow-100 text-yellow-600 flex items-center justify-center mb-2",children:r.jsx(Nt,{className:"w-5 h-5"})}),r.jsx("span",{className:"text-2xl font-bold text-gray-800",children:n}),r.jsx("span",{className:"text-xs text-gray-500 font-medium uppercase tracking-wide",children:"Late"})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100 flex flex-col items-center justify-center hover:shadow-md transition-shadow",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center mb-2",children:r.jsx($t,{className:"w-5 h-5"})}),r.jsx("span",{className:"text-2xl font-bold text-gray-800",children:a}),r.jsx("span",{className:"text-xs text-gray-500 font-medium uppercase tracking-wide",children:"Excused"})]})]})]})},e8=({attendanceList:e,viewMonth:t,viewYear:s,onMonthChange:n,onYearChange:a})=>{const i=(p,j)=>new Date(p,j+1,0).getDate(),l=(p,j)=>new Date(p,j,1).getDay(),o=i(s,t),c=l(s,t),d=["January","February","March","April","May","June","July","August","September","October","November","December"],u=e.reduce((p,j)=>{const v=new Date(j.date).toISOString().split("T")[0];return p[v]=j,p},{}),h=()=>{t===0?(n(11),a(s-1)):n(t-1)},f=()=>{t===11?(n(0),a(s+1)):n(t+1)},m=p=>{switch(p){case"present":return"bg-emerald-100 text-emerald-700 border-emerald-200 hover:bg-emerald-200";case"absent":return"bg-rose-100 text-rose-700 border-rose-200 hover:bg-rose-200";case"late":return"bg-yellow-100 text-yellow-700 border-yellow-200 hover:bg-yellow-200";case"excused":return"bg-blue-100 text-blue-700 border-blue-200 hover:bg-blue-200";default:return"bg-gray-50 text-gray-500 hover:bg-gray-100"}},x=()=>{const p=[];for(let j=0;j<c;j++)p.push(r.jsx("div",{className:"h-24 bg-gray-50/50"},`empty-${j}`));for(let j=1;j<=o;j++){const v=`${s}-${String(t+1).padStart(2,"0")}-${String(j).padStart(2,"0")}`,g=u[v],y=g?m(g.status):"bg-white hover:bg-gray-50";p.push(r.jsxs("div",{className:`h-24 p-2 border border-gray-100 relative transition-colors group ${y} ${g?"cursor-default":""}`,children:[r.jsx("span",{className:`text-sm font-medium ${g?"":"text-gray-700"}`,children:j}),g&&r.jsxs("div",{className:"mt-1",children:[r.jsx("span",{className:"text-xs font-semibold capitalize block truncate",children:g.status}),g.remarks&&r.jsx("p",{className:"text-[10px] mt-1 line-clamp-2 opacity-80 leading-tight",children:g.remarks})]})]},j))}return p};return r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-white",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Attendance Calendar"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:h,className:"p-2 hover:bg-gray-100 rounded-full text-gray-600 transition-colors",children:r.jsx(BM,{className:"w-5 h-5"})}),r.jsxs("span",{className:"text-lg font-medium text-gray-700 w-32 text-center select-none",children:[d[t]," ",s]}),r.jsx("button",{onClick:f,className:"p-2 hover:bg-gray-100 rounded-full text-gray-600 transition-colors",children:r.jsx(Pi,{className:"w-5 h-5"})})]})]}),r.jsx("div",{className:"grid grid-cols-7 border-b border-gray-100 bg-gray-50",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(p=>r.jsx("div",{className:"py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:p},p))}),r.jsx("div",{className:"grid grid-cols-7 bg-white",children:x()})]})},t8=({students:e,attendanceData:t,onAttendanceChange:s,isSubmitted:n,isAdmin:a,subjectName:i})=>{const l=()=>{n&&!a||e.forEach(o=>{s(o.id,"present")})};return r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[r.jsxs("div",{className:"p-4 border-b border-gray-100 flex flex-col sm:flex-row justify-between items-center gap-4 bg-gray-50/50",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:["Student List",i&&r.jsx("span",{className:"text-sm font-normal text-black bg-white border border-gray-200 px-2 py-0.5 rounded-md",children:i})]}),r.jsxs("p",{className:"text-xs text-black mt-0.5",children:["Total Students: ",e.length]})]}),(!n||a)&&r.jsxs("button",{onClick:l,className:"btn btn-sm bg-blue-600 hover:bg-blue-700 text-white border-0 gap-2 normal-case font-normal",children:[r.jsx(Jo,{className:"w-4 h-4"}),"Mark All Present"]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left",children:[r.jsx("thead",{className:"bg-gray-50 text-black text-xs uppercase font-semibold",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 w-16 text-center",children:"#"}),r.jsx("th",{className:"px-6 py-4",children:"Student Name"}),r.jsx("th",{className:"px-6 py-4 w-1/3 min-w-[200px] text-center",children:"Attendance Status"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:e.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"3",className:"px-6 py-12 text-center text-gray-400",children:"No students found in this class."})}):e.map((o,c)=>{const d=t[o.id],u=n&&!a;return r.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 text-center text-black font-medium text-sm",children:c+1}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"avatar placeholder",children:r.jsxs("div",{className:"bg-blue-100 text-blue-600 rounded-full w-8 h-8 flex items-center justify-center text-xs font-bold",children:[o.first_name[0],o.last_name[0]]})}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-semibold text-black text-sm",children:[o.first_name," ",o.last_name]}),r.jsx("p",{className:"text-xs text-black",children:o.roll_number})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex gap-2 max-w-[200px] mx-auto",children:[r.jsx("button",{disabled:u,onClick:()=>s(o.id,"present"),className:`flex-1 btn btn-sm border-0 ${d==="present"?"bg-blue-600 hover:bg-blue-700 text-white shadow-md":"bg-gray-100 hover:bg-gray-200 text-gray-400"}`,title:"Present",children:r.jsx(Jo,{className:"w-5 h-5"})}),r.jsx("button",{disabled:u,onClick:()=>s(o.id,"absent"),className:`flex-1 btn btn-sm border-0 ${d==="absent"?"bg-rose-500 hover:bg-rose-600 text-white shadow-md":"bg-gray-100 hover:bg-gray-200 text-gray-400"}`,title:"Absent",children:r.jsx(qr,{className:"w-5 h-5"})})]})})]},o.id)})})]})})]})},r8=()=>{var G;const[e,t]=O.useState(new Date().toISOString().split("T")[0]),[s,n]=O.useState(""),[a,i]=O.useState(""),[l,o]=O.useState(""),[c,d]=O.useState({}),[u,h]=O.useState(!1),[f,m]=O.useState(!1),[x,p]=O.useState(null),[j,v]=O.useState("subject"),g=Me(),y=Ie(vs),b=Ie(mr),N=["super_admin","principal","vice_principal"].includes(b),{data:k}=me({queryKey:["my-classes"],queryFn:He.getMyClasses,enabled:b!=="student"}),w=(k==null?void 0:k.data)||[],{data:_}=me({queryKey:["my-sections",s],queryFn:()=>He.getMySections(s),enabled:!!s&&b!=="student"}),S=(_==null?void 0:_.data)||[],{data:E}=me({queryKey:["section-subjects",a],queryFn:()=>kb.getBySection(a),enabled:!!a&&b!=="student"}),A=(E==null?void 0:E.data)||[],C=b==="teacher"?A.filter(R=>R.section_teacher_email===(y==null?void 0:y.email)||!R.section_teacher_email&&R.default_teacher_email===(y==null?void 0:y.email)):A,D=O.useMemo(()=>e===new Date().toISOString().split("T")[0],[e]),{data:M}=me({queryKey:["subject-schedule",s,a,l],queryFn:async()=>{if(!s||!a||!l||j==="class")return null;const B=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date().getDay()],Q=await fetch(`http://localhost:5001/api/timetable?class_id=${s}&section_id=${a}&subject_id=${l}&day_of_week=${B}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!Q.ok)return null;const te=await Q.json();return te.data&&te.data.length>0?te.data[0]:null},enabled:!!s&&!!a&&!!l&&D&&b==="teacher"&&j==="subject",refetchInterval:6e4}),L=O.useMemo(()=>{if(N)return!0;if(!D)return!1;if(j==="class")return!0;if(!M)return!1;const R=new Date,B=R.getHours()*60+R.getMinutes(),[Q,te]=M.start_time.split(":").map(Number),[ae,U]=M.end_time.split(":").map(Number),V=Q*60+te,ne=ae*60+U;return B>=V&&B<=ne},[M,D,N,j]),{data:z}=me({queryKey:["students",s,a],queryFn:()=>Fr.getAll({class_id:s,section_id:a,status:"active"}),enabled:!!s&&!!a&&b!=="student"}),Y=(z==null?void 0:z.data)||[],{data:X,refetch:Z}=me({queryKey:["attendance",s,a,l,e,j],queryFn:()=>xn.get({class_id:s,section_id:a,subject_id:j==="subject"?l:void 0,date:e}),enabled:!!s&&!!a&&(j==="class"||!!l)&&!!e&&b!=="student"}),{data:W}=me({queryKey:["attendance-submission",s,a,l,e,j],queryFn:()=>xn.checkSubmission({class_id:s,section_id:a,subject_id:j==="subject"?l:void 0,date:e}),enabled:!!s&&!!a&&(j==="class"||!!l)&&!!e&&b!=="student"});O.useEffect(()=>{W!=null&&W.data?(m(W.data.is_submitted||!1),p(W.data)):(m(!1),p(null))},[W]),O.useEffect(()=>{if(Y.length>0){const R={};Y.forEach(B=>{var te;const Q=(te=X==null?void 0:X.data)==null?void 0:te.find(ae=>ae.student_id===B.id);R[B.id]=(Q==null?void 0:Q.status)||void 0}),d(R)}},[Y,X]);const F=(R,B)=>{if(f&&!N){K.error("Attendance is already submitted. Contact admin to make changes.");return}d({...c,[R]:B})},q=async()=>{if(!s||!a){K.error("Please select class and section");return}if(j==="subject"&&!l){K.error("Please select a subject");return}if(!L&&b==="teacher"){K.error("You can only mark attendance during the scheduled class time.");return}if(f&&!N){K.error("Attendance is already submitted. Contact admin to make changes.");return}const R=Object.entries(c).filter(([B,Q])=>Q!=null).map(([B,Q])=>({student_id:parseInt(B),class_id:parseInt(s),section_id:parseInt(a),date:e,status:Q,remarks:""}));if(R.length===0){K.error("Please mark attendance for at least one student");return}h(!0);try{await xn.mark({date:e,class_id:parseInt(s),section_id:parseInt(a),subject_id:j==="subject"?parseInt(l):void 0,attendance_records:R}),K.success("Attendance saved successfully"),Z(),g.invalidateQueries(["attendance-submission"])}catch(B){K.error(B.message||"Failed to save attendance")}finally{h(!1)}},I=async()=>{if(!s||!a){K.error("Please select class and section");return}if(j==="subject"&&!l){K.error("Please select a subject");return}if(f){K.error("Attendance is already submitted");return}const R=Object.entries(c).filter(([B,Q])=>Q!=null).map(([B,Q])=>({student_id:parseInt(B),class_id:parseInt(s),section_id:parseInt(a),date:e,status:Q,remarks:""}));if(R.length===0){K.error("Please mark attendance for at least one student");return}h(!0);try{await xn.mark({date:e,class_id:parseInt(s),section_id:parseInt(a),subject_id:j==="subject"?parseInt(l):void 0,attendance_records:R}),await xn.submit({class_id:parseInt(s),section_id:parseInt(a),subject_id:j==="subject"?parseInt(l):void 0,date:e}),K.success("Attendance submitted and locked successfully"),m(!0),Z(),g.invalidateQueries(["attendance-submission"])}catch(B){K.error(B.message||"Failed to submit attendance")}finally{h(!1)}},$=async()=>{if(N&&window.confirm("Are you sure you want to unlock this attendance? Teachers will be able to modify it again.")){h(!0);try{await xn.unlock({class_id:parseInt(s),section_id:parseInt(a),subject_id:j==="subject"?parseInt(l):void 0,date:e}),K.success("Attendance unlocked"),m(!1),Z(),g.invalidateQueries(["attendance-submission"])}catch(R){K.error(R.message||"Failed to unlock attendance")}finally{h(!1)}}};if(b==="student"){const[R,B]=O.useState(new Date().getMonth()),[Q,te]=O.useState(new Date().getFullYear()),ae=(be,ce)=>{const re=new Date(be,ce,1).toISOString().split("T")[0],ge=new Date(be,ce+1,0).toISOString().split("T")[0];return{startDate:re,endDate:ge}},{startDate:U,endDate:V}=ae(Q,R),{data:ne}=me({queryKey:["my-attendance",U,V],queryFn:()=>xn.get({start_date:U,end_date:V})}),{data:fe}=me({queryKey:["my-attendance-stats",U,V],queryFn:()=>xn.getStats({start_date:U,end_date:V})}),ye=(ne==null?void 0:ne.data)||[],oe=(fe==null?void 0:fe.data)||{};return r.jsxs("div",{className:"max-w-7xl mx-auto space-y-8 p-4 md:p-6",children:[r.jsx("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 tracking-tight",children:"My Attendance"}),r.jsx("p",{className:"text-black mt-2",children:"Track your daily attendance and performance stats."})]})}),r.jsx(JF,{stats:oe}),r.jsx(e8,{attendanceList:ye,viewMonth:R,viewYear:Q,onMonthChange:B,onYearChange:te})]})}return r.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-8",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-black tracking-tight",children:"Mark Attendance"}),r.jsx("p",{className:"text-black mt-2",children:"Select class details to view or mark attendance."})]}),r.jsx("div",{className:"flex items-center gap-3",children:f?r.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-blue-100 text-blue-700 rounded-full text-sm font-medium border border-blue-200",children:[r.jsx(bd,{className:"w-4 h-4"}),"Locked"]}):r.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 text-black rounded-full text-sm font-medium border border-gray-200",children:[r.jsx(VN,{className:"w-4 h-4"}),"Open for Marking"]})})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-800 font-semibold",children:[r.jsx(cn,{className:"w-5 h-5 text-blue-600"}),"Attendance Filters"]}),r.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-lg",children:[r.jsx("button",{onClick:()=>v("subject"),className:`px-4 py-1.5 text-sm font-medium rounded-md transition-all ${j==="subject"?"bg-blue-600 text-white shadow-sm":"text-black hover:text-black"}`,children:"Subject Wise"}),r.jsx("button",{onClick:()=>{v("class"),o("")},className:`px-4 py-1.5 text-sm font-medium rounded-md transition-all ${j==="class"?"bg-blue-600 text-white shadow-sm":"text-black hover:text-black"}`,children:"Class Wise"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"form-control",children:[r.jsx("label",{className:"label text-xs font-semibold text-black uppercase",children:"Date"}),r.jsx("input",{type:"date",value:e,onChange:R=>t(R.target.value),className:"input input-bordered w-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all font-medium text-black"})]}),r.jsxs("div",{className:"form-control",children:[r.jsx("label",{className:"label text-xs font-semibold text-black uppercase",children:"Class"}),r.jsxs("select",{value:s,onChange:R=>{n(R.target.value),i(""),o("")},className:"select select-bordered w-full bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all font-medium text-black",children:[r.jsx("option",{value:"",className:"bg-white text-black",children:"Select Class"}),w.map(R=>r.jsx("option",{value:R.id,className:"bg-white text-black",children:R.name},R.id))]})]}),r.jsxs("div",{className:"form-control",children:[r.jsx("label",{className:"label text-xs font-semibold text-black uppercase",children:"Section"}),r.jsxs("select",{value:a,onChange:R=>{i(R.target.value),o("")},disabled:!s,className:"select select-bordered w-full bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all font-medium text-black",children:[r.jsx("option",{value:"",className:"bg-white text-black",children:"Select Section"}),S.map(R=>r.jsx("option",{value:R.id,className:"bg-white text-black",children:R.name},R.id))]})]}),j==="subject"&&r.jsxs("div",{className:"form-control",children:[r.jsx("label",{className:"label text-xs font-semibold text-black uppercase",children:"Subject"}),r.jsxs("select",{value:l,onChange:R=>o(R.target.value),disabled:!a,className:"select select-bordered w-full bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all font-medium text-black",children:[r.jsx("option",{value:"",className:"bg-white text-black",children:"Select Subject"}),C.map(R=>r.jsx("option",{value:R.id,className:"bg-white text-black",children:R.name},R.id))]})]})]})]}),s8({selectedSubject:l,attendanceMode:j,isWithinScheduledTime:L,userRole:b,isAdmin:N})?r.jsxs(r.Fragment,{children:[r.jsx(t8,{students:Y,attendanceData:c,onAttendanceChange:F,isSubmitted:f,isAdmin:N,subjectName:(G=C.find(R=>R.id==l))==null?void 0:G.name}),r.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-white border-t z-50 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] md:static md:bg-transparent md:border-0 md:shadow-none md:p-0",children:r.jsxs("div",{className:"max-w-7xl mx-auto flex justify-end gap-3",children:[f&&N&&r.jsxs("button",{onClick:$,disabled:u,className:"btn bg-white hover:bg-gray-50 text-blue-600 border-blue-200 gap-2",children:[r.jsx(VN,{className:"w-5 h-5"}),"Unlock Attendance"]}),f?r.jsxs("div",{className:"flex items-center gap-2 text-blue-600 font-medium px-4 py-2 bg-blue-50 rounded-lg border border-blue-100",children:[r.jsx(Ar,{className:"w-5 h-5"}),"Attendance Submitted on"," ",new Date(x==null?void 0:x.submitted_at).toLocaleString()]}):r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:q,className:"btn bg-white text-blue-600 border-blue-600 hover:bg-blue-50 gap-2",children:"Save Draft"}),r.jsxs("button",{onClick:I,disabled:u,className:"btn bg-blue-600 hover:bg-blue-700 text-white gap-2 border-0",children:[u&&r.jsx("span",{className:"loading loading-spinner"}),"Submit & Lock"]})]})]})})]}):n8({selectedClass:s,selectedSection:a,selectedSubject:l,attendanceMode:j,isWithinScheduledTime:L,userRole:b,isAdmin:N})]})};function s8({selectedSubject:e,attendanceMode:t,isWithinScheduledTime:s,userRole:n,isAdmin:a}){return!(t==="subject"&&!e||!s&&n==="teacher"&&!a)}function n8({selectedClass:e,selectedSection:t,selectedSubject:s,attendanceMode:n,isWithinScheduledTime:a,userRole:i,isAdmin:l}){return!e||!t||n==="subject"&&!s?r.jsxs("div",{className:"text-center py-20 bg-gray-50 rounded-2xl border-2 border-dashed border-gray-200",children:[r.jsx(cn,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-600",children:"Select filters to view attendance"}),r.jsxs("p",{className:"text-gray-400 max-w-sm mx-auto mt-2",children:["Please select a class, section, ",n==="subject"&&"and subject"," from the filters above."]})]}):!a&&i==="teacher"&&!l?r.jsxs("div",{className:"text-center py-20 bg-orange-50 rounded-2xl border border-orange-100",children:[r.jsx(Nt,{className:"w-12 h-12 text-orange-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-bold text-orange-700",children:"Outside Scheduled Time"}),r.jsx("p",{className:"text-orange-600 max-w-md mx-auto mt-2",children:"You can only mark attendance during the scheduled class time."})]}):null}const m4=({exam:e=null,onSubmit:t,onCancel:s,isSubmitting:n})=>{var u,h;const[a,i]=O.useState({name:(e==null?void 0:e.name)||"",exam_type:(e==null?void 0:e.exam_type)||"term",class_id:(e==null?void 0:e.class_id)||"",start_date:((u=e==null?void 0:e.start_date)==null?void 0:u.split("T")[0])||"",end_date:((h=e==null?void 0:e.end_date)==null?void 0:h.split("T")[0])||"",total_marks:(e==null?void 0:e.total_marks)||"",passing_marks:(e==null?void 0:e.passing_marks)||"",academic_year:(e==null?void 0:e.academic_year)||"2024-2025",description:(e==null?void 0:e.description)||""}),{data:l}=me({queryKey:["classes"],queryFn:He.getAll}),o=(l==null?void 0:l.data)||[],c=f=>{const{name:m,value:x}=f.target;i({...a,[m]:x})},d=f=>{if(f.preventDefault(),!a.name||!a.class_id||!a.start_date||!a.end_date){K.error("Please fill all required fields");return}if(new Date(a.start_date)>new Date(a.end_date)){K.error("End date must be after start date");return}if(parseInt(a.passing_marks)>parseInt(a.total_marks)){K.error("Passing marks cannot be greater than total marks");return}t(a)};return r.jsxs("form",{onSubmit:d,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black mb-2",children:"Exam Name *"}),r.jsx("input",{type:"text",name:"name",value:a.name,onChange:c,className:"input",placeholder:"e.g., First Term Exam",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black mb-2",children:"Exam Type *"}),r.jsxs("select",{name:"exam_type",value:a.exam_type,onChange:c,className:"input",required:!0,children:[r.jsx("option",{value:"term",children:"Term Exam"}),r.jsx("option",{value:"midterm",children:"Midterm"}),r.jsx("option",{value:"final",children:"Final Exam"}),r.jsx("option",{value:"unit_test",children:"Unit Test"}),r.jsx("option",{value:"monthly",children:"Monthly Test"}),r.jsx("option",{value:"quarterly",children:"Quarterly Exam"}),r.jsx("option",{value:"annual",children:"Annual Exam"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black mb-2",children:"Class *"}),r.jsxs("select",{name:"class_id",value:a.class_id,onChange:c,className:"input",required:!0,children:[r.jsx("option",{value:"",children:"Select Class"}),o.map(f=>r.jsx("option",{value:f.id,children:f.name},f.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black mb-2",children:"Academic Year *"}),r.jsxs("select",{name:"academic_year",value:a.academic_year,onChange:c,className:"input",required:!0,children:[r.jsx("option",{value:"2024-2025",children:"2024-2025"}),r.jsx("option",{value:"2023-2024",children:"2023-2024"}),r.jsx("option",{value:"2025-2026",children:"2025-2026"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black mb-2",children:"Start Date *"}),r.jsx("input",{type:"date",name:"start_date",value:a.start_date,onChange:c,className:"input",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black mb-2",children:"End Date *"}),r.jsx("input",{type:"date",name:"end_date",value:a.end_date,onChange:c,className:"input",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black mb-2",children:"Total Marks *"}),r.jsx("input",{type:"number",name:"total_marks",value:a.total_marks,onChange:c,className:"input",min:"1",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black mb-2",children:"Passing Marks *"}),r.jsx("input",{type:"number",name:"passing_marks",value:a.passing_marks,onChange:c,className:"input",min:"1",required:!0})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-black mb-2",children:"Description"}),r.jsx("textarea",{name:"description",value:a.description,onChange:c,className:"input",rows:"3",placeholder:"Enter exam description or instructions..."})]})]}),r.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[r.jsx("button",{type:"button",onClick:s,className:"btn btn-outline",disabled:n,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?"Creating...":e?"Update Exam":"Create Exam"})]})]})},a8=({exams:e,isLoading:t,onRefetch:s})=>{const n=We(),[a,i]=O.useState(null),[l,o]=O.useState(null),[c,d]=O.useState(null),[u,h]=O.useState(!1),[f,m]=O.useState(!1);O.useEffect(()=>{e&&e.length>0&&!a?i(e[0]):(!e||e.length===0)&&i(null)},[e,a]);const x=w=>{i(w)},p=w=>{o(w),h(!0)},j=w=>{d(w),m(!0)},v=async w=>{try{await Rs.update(l.id,w),K.success("Exam updated successfully!"),h(!1),o(null),s(),a&&a.id===l.id&&i({...a,...w})}catch(_){K.error(_.message||"Failed to update exam")}},g=async()=>{try{await Rs.delete(c.id),K.success("Exam deleted successfully!"),m(!1),d(null),a&&a.id===c.id&&i(null),s()}catch(w){K.error(w.message||"Failed to delete exam")}},y=w=>{const _=new Date,S=new Date(w.start_date),E=new Date(w.end_date);return _<S?{status:"upcoming",color:"bg-white text-black",borderColor:"border-blue-600",icon:Te}:_>=S&&_<=E?{status:"ongoing",color:"bg-blue-600 text-white",borderColor:"border-blue-600",icon:Sr}:_>E?{status:"completed",color:"bg-white text-black",borderColor:"border-gray-200",icon:Ar}:{status:"unknown",color:"bg-white text-black",borderColor:"border-gray-200",icon:Te}},b=w=>({term:"bg-white text-black border-blue-200",midterm:"bg-white text-black border-blue-200",final:"bg-white text-black border-blue-200",unit_test:"bg-white text-black border-blue-200",monthly:"bg-white text-black border-blue-200",quarterly:"bg-white text-black border-blue-200",annual:"bg-white text-black border-blue-200"})[w]||"bg-white text-black border-gray-200",N=w=>new Date(w).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),k=w=>{const _=new Date(w.start_date),S=new Date(w.end_date),E=Math.abs(S-_);return Math.ceil(E/(1e3*60*60*24))+1};return t?r.jsxs("div",{className:"flex h-screen bg-gray-50",children:[r.jsx("div",{className:"w-80 bg-white border-r border-gray-200 p-4",children:r.jsx("div",{className:"animate-pulse space-y-3",children:[...Array(8)].map((w,_)=>r.jsx("div",{className:"h-16 bg-gray-200 rounded-lg"},_))})}),r.jsx("div",{className:"flex-1 p-8",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-32 bg-gray-200 rounded-lg mb-6"}),r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsx("div",{className:"h-40 bg-gray-200 rounded"}),r.jsx("div",{className:"h-40 bg-gray-200 rounded"})]})]})})]}):!e||e.length===0?r.jsx("div",{className:"flex h-[calc(100vh-200px)] bg-gray-50 items-center justify-center",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mb-4 mx-auto",children:r.jsx(De,{className:"w-10 h-10 text-gray-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Exams Found"}),r.jsx("p",{className:"text-gray-500 mb-6",children:"Create your first exam to get started"})]})}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex h-[calc(100vh-200px)] bg-gray-50 border border-gray-200 rounded-xl overflow-hidden shadow-sm",children:[r.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 overflow-y-auto flex-shrink-0",children:[r.jsx("div",{className:"p-4 border-b border-gray-100 bg-gray-50/50 sticky top-0 z-10 backdrop-blur-sm",children:r.jsxs("h2",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider",children:["Exam List (",e.length,")"]})}),r.jsx("div",{className:"divide-y divide-gray-50",children:e.map(w=>{var S;const _=y(w);return r.jsx("div",{onClick:()=>x(w),className:`p-4 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${(a==null?void 0:a.id)===w.id?"bg-blue-50 border-l-4 border-blue-500":"border-l-4 border-transparent"}`,children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${(a==null?void 0:a.id)===w.id?"bg-blue-500 text-white":"bg-gray-100 text-gray-500"}`,children:r.jsx("span",{className:"font-bold text-sm",children:(S=w.name)==null?void 0:S.charAt(0)})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:`text-sm font-medium truncate ${(a==null?void 0:a.id)===w.id?"text-blue-700":"text-gray-900"}`,children:w.name}),r.jsxs("div",{className:"flex items-center text-xs text-black mt-0.5",children:[r.jsx("span",{className:`w-2 h-2 rounded-full mr-1 ${_.status==="ongoing"?"bg-blue-600":"bg-black"}`}),r.jsx("span",{className:"capitalize",children:_.status})]})]}),(a==null?void 0:a.id)===w.id&&r.jsx(Pi,{className:"w-4 h-4 text-blue-500"})]})},w.id)})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50",children:a?r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"h-32 bg-blue-600"}),r.jsxs("div",{className:"px-8 pb-8",children:[r.jsxs("div",{className:"relative flex items-end -mt-12 mb-6 space-x-5",children:[r.jsx("div",{className:"w-32 h-32 rounded-xl bg-white p-1 shadow-lg",children:r.jsx("div",{className:"w-full h-full rounded-lg bg-gray-100 flex items-center justify-center overflow-hidden",children:r.jsx(De,{className:"w-12 h-12 text-blue-500"})})}),r.jsx("div",{className:"flex-1 pb-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:a.name}),r.jsxs("p",{className:"text-gray-600 flex items-center space-x-2 mt-1",children:[r.jsx("span",{className:"font-medium text-gray-900",children:a.academic_year}),r.jsx("span",{className:"text-gray-300",children:""}),r.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium border ${b(a.exam_type)}`,children:a.exam_type.replace("_"," ").toUpperCase()})]})]}),r.jsx("div",{className:"flex items-center space-x-2",children:(()=>{const w=y(a),_=w.icon;return r.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium border flex items-center ${w.color} ${w.borderColor}`,children:[r.jsx(_,{className:"w-4 h-4 mr-1.5"}),r.jsx("span",{className:"capitalize",children:w.status})]})})()})]})})]}),r.jsxs("div",{className:"flex items-center justify-between mb-8 pb-6 border-b border-gray-200",children:[r.jsxs("div",{className:"flex space-x-8",children:[r.jsx("button",{className:"text-blue-600 font-medium border-b-2 border-blue-600 pb-6 -mb-6.5",children:"Overview"}),r.jsx("button",{onClick:()=>n(`/exams/${a.id}`),className:"text-gray-500 hover:text-gray-800 font-medium pb-6 -mb-6.5 transition-colors",children:"View Details"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(st,{permission:ie.EDIT_EXAMS,children:r.jsxs("button",{onClick:()=>p(a),className:"btn btn-sm btn-outline flex items-center space-x-1",children:[r.jsx(ct,{className:"w-4 h-4"}),r.jsx("span",{children:"Edit"})]})}),r.jsx(st,{permission:ie.DELETE_EXAMS,children:r.jsxs("button",{onClick:()=>j(a),className:"btn btn-sm text-black hover:bg-gray-100 border border-black hover:border-black flex items-center space-x-1",children:[r.jsx(ut,{className:"w-4 h-4"}),r.jsx("span",{children:"Delete"})]})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[r.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(Te,{className:"w-5 h-5 mr-2 text-gray-400"}),"Schedule Information"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Start Date"}),r.jsx("p",{className:"text-gray-900 mt-1",children:N(a.start_date)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"End Date"}),r.jsx("p",{className:"text-gray-900 mt-1",children:N(a.end_date)})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Duration"}),r.jsxs("p",{className:"text-gray-900 mt-1 flex items-center",children:[r.jsx(Nt,{className:"w-4 h-4 mr-1 text-gray-400"}),k(a)," Days"]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[r.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx($t,{className:"w-5 h-5 mr-2 text-gray-400"}),"Exam Details"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Class"}),r.jsxs("p",{className:"text-gray-900 mt-1 flex items-center",children:[r.jsx(Xe,{className:"w-4 h-4 mr-1 text-gray-400"}),a.class_name||`Class ${a.class_id}`]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Total Marks"}),r.jsx("p",{className:"text-gray-900 mt-1 font-semibold",children:a.total_marks})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Pass Marks"}),r.jsx("p",{className:"text-gray-900 mt-1 text-black",children:a.passing_marks})]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-2",children:r.jsx("div",{className:"bg-black h-1.5 rounded-full",style:{width:`${a.passing_marks/a.total_marks*100}%`}})}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1 text-right",children:["Pass requires ",(a.passing_marks/a.total_marks*100).toFixed(0),"%"]})]})]})]}),a.description&&r.jsxs("div",{className:"col-span-2 bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[r.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:"Description"}),r.jsx("p",{className:"text-gray-600 text-sm",children:a.description})]})]})]})]}):r.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-8",children:[r.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:r.jsx(De,{className:"w-10 h-10 text-gray-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"No Exam Selected"}),r.jsx("p",{className:"text-gray-500 max-w-sm mt-2",children:"Select an exam from the list to view its details, schedule, and performance metrics."})]})})]}),r.jsx(Ae,{isOpen:u,onClose:()=>h(!1),title:"Edit Exam",size:"lg",children:r.jsx(m4,{exam:l,onSubmit:v,onCancel:()=>h(!1)})}),r.jsx(Ae,{isOpen:f,onClose:()=>m(!1),title:"Delete Exam",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center",children:r.jsx(ut,{className:"w-6 h-6 text-blue-600"})})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Are you sure you want to delete this exam?"}),r.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["You are about to delete"," ",r.jsx("span",{className:"font-semibold",children:c==null?void 0:c.name}),". This action cannot be undone."]}),r.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-3 mt-3",children:r.jsx("p",{className:"text-xs text-black",children:" All exam schedules, results, and related data will be permanently removed."})})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[r.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-black font-medium rounded-lg transition-colors",children:"Cancel"}),r.jsxs("button",{onClick:g,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors flex items-center space-x-2",children:[r.jsx(ut,{className:"w-4 h-4"}),r.jsx("span",{children:"Delete Exam"})]})]})]})})]})},i8=()=>{var g;const e=Me(),t=()=>{const y=new Date().getFullYear();return new Date().getMonth()<6?`${y-1}-${y}`:`${y}-${y+1}`},[s,n]=O.useState(t()),[a,i]=O.useState(!1),[l,o]=O.useState("all"),{data:c}=me({queryKey:["academic-years"],queryFn:Rs.getAcademicYears}),d=(c==null?void 0:c.data)||[];O.useEffect(()=>{d.length>0&&!d.includes(s)&&n(d[0])},[d,s]);const{data:u,isLoading:h}=me({queryKey:["exams",s],queryFn:()=>Rs.getAll({academic_year:s})}),f=(u==null?void 0:u.data)||[],m=O.useMemo(()=>l==="all"?f:f.filter(y=>y.exam_type===l),[f,l]),x=_e({mutationFn:Rs.create,onSuccess:()=>{K.success("Exam created successfully"),i(!1),e.invalidateQueries(["exams"])},onError:y=>{K.error(y.message||"Failed to create exam")}}),p=y=>{x.mutate(y)},j=O.useMemo(()=>{const y=new Date;return{total:f.length,completed:f.filter(b=>new Date(b.end_date)<y).length,ongoing:f.filter(b=>new Date(b.start_date)<=y&&new Date(b.end_date)>=y).length,upcoming:f.filter(b=>new Date(b.start_date)>y).length}},[f]),v=[{value:"all",label:"All Exams",color:"text-black"},{value:"term",label:"Term",color:"text-black"},{value:"midterm",label:"Midterm",color:"text-black"},{value:"final",label:"Final",color:"text-black"},{value:"unit_test",label:"Unit Test",color:"text-black"},{value:"monthly",label:"Monthly",color:"text-black"},{value:"quarterly",label:"Quarterly",color:"text-black"},{value:"annual",label:"Annual",color:"text-black"}];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[r.jsx(De,{className:"w-8 h-8 mr-3 text-blue-600"}),"Examinations"]}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Manage exams, schedules, and results"})]}),r.jsx(st,{permissions:[ie.CREATE_EXAMS],children:r.jsxs("button",{onClick:()=>i(!0),className:"btn btn-primary flex items-center space-x-2 shadow-lg hover:shadow-xl transition-shadow",children:[r.jsx(Be,{className:"w-5 h-5"}),r.jsx("span",{children:"Create Exam"})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"text-sm font-medium text-black opacity-90",children:"Total Exams"}),r.jsx(De,{className:"w-6 h-6 text-blue-600"})]}),r.jsx("p",{className:"text-4xl font-bold text-black",children:j.total}),r.jsxs("p",{className:"text-xs text-black opacity-80 mt-2",children:["In ",s]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"text-sm font-medium text-black opacity-90",children:"Completed"}),r.jsx(Ue,{className:"w-6 h-6 text-blue-600"})]}),r.jsx("p",{className:"text-4xl font-bold text-black",children:j.completed}),r.jsxs("p",{className:"text-xs text-black opacity-80 mt-2",children:[j.total>0?Math.round(j.completed/j.total*100):0,"% of total"]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"text-sm font-medium text-black opacity-90",children:"Ongoing"}),r.jsx(Sr,{className:"w-6 h-6 text-blue-600"})]}),r.jsx("p",{className:"text-4xl font-bold text-black",children:j.ongoing}),r.jsx("p",{className:"text-xs text-black opacity-80 mt-2",children:"Active right now"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"text-sm font-medium text-black opacity-90",children:"Upcoming"}),r.jsx(Te,{className:"w-6 h-6 text-blue-600"})]}),r.jsx("p",{className:"text-4xl font-bold text-black",children:j.upcoming}),r.jsx("p",{className:"text-xs text-black opacity-80 mt-2",children:"Scheduled ahead"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(cn,{className:"w-5 h-5 text-gray-600 mr-2"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filters"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Academic Year"}),r.jsx("select",{value:s,onChange:y=>n(y.target.value),className:"input w-full",children:d.map(y=>r.jsx("option",{value:y,children:y},y))})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exam Type"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(y=>r.jsxs("button",{onClick:()=>o(y.value),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${l===y.value?"bg-blue-600 text-white shadow-md":"bg-white text-black border border-gray-200 hover:bg-gray-50"}`,children:[y.label,y.value!=="all"&&r.jsxs("span",{className:"ml-2 text-xs opacity-75",children:["(",f.filter(b=>b.exam_type===y.value).length,")"]})]},y.value))})]})]}),(l!=="all"||s!==t())&&r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[r.jsx($t,{className:"w-4 h-4"}),r.jsx("span",{children:"Active filters:"}),s!==t()&&r.jsx("span",{className:"px-2 py-1 bg-white text-black border border-blue-600 rounded-md font-medium",children:s}),l!=="all"&&r.jsx("span",{className:"px-2 py-1 bg-blue-600 text-white rounded-md font-medium",children:(g=v.find(y=>y.value===l))==null?void 0:g.label})]}),r.jsx("button",{onClick:()=>{n(t()),o("all")},className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Clear all filters"})]})})]}),r.jsx(a8,{exams:m,isLoading:h,onRefetch:()=>e.invalidateQueries(["exams"])}),r.jsx(Ae,{isOpen:a,onClose:()=>i(!1),title:"Create New Exam",size:"lg",children:r.jsx(m4,{onSubmit:p,onCancel:()=>i(!1),isSubmitting:x.isPending})})]})},p4=({assignment:e=null,initialValues:t=null,onSubmit:s,onCancel:n,isSubmitting:a})=>{var g;const i=Ie(mr),[l,o]=O.useState({title:(e==null?void 0:e.title)||"",description:(e==null?void 0:e.description)||"",class_id:(e==null?void 0:e.class_id)||(t==null?void 0:t.class_id)||"",section_id:e!=null&&e.section_id?[e.section_id]:t!=null&&t.section_id?[t.section_id]:[],subject_id:(e==null?void 0:e.subject_id)||(t==null?void 0:t.subject_id)||"",due_date:((g=e==null?void 0:e.due_date)==null?void 0:g.split("T")[0])||"",total_marks:(e==null?void 0:e.total_marks)||"",teacher_id:(e==null?void 0:e.teacher_id)||"",attachments:null}),{data:c}=me({queryKey:["classes",i],queryFn:()=>i==="teacher"?He.getMyClasses():He.getAll()}),{data:d}=me({queryKey:["sections",l.class_id],queryFn:()=>He.getSections(l.class_id),enabled:!!l.class_id}),{data:u}=me({queryKey:["class-subjects",l.class_id],queryFn:()=>kb.getByClass(l.class_id),enabled:!!l.class_id}),{data:h}=me({queryKey:["teachers"],queryFn:()=>Pt.getAll(),enabled:i==="admin"||i==="super_admin"}),f=(c==null?void 0:c.data)||[],m=(d==null?void 0:d.data)||[],x=(u==null?void 0:u.data)||[],p=(h==null?void 0:h.data)||[],j=y=>{const{name:b,value:N,files:k}=y.target;o(b==="class_id"?{...l,class_id:N,section_id:[],subject_id:""}:b==="attachments"?{...l,[b]:k}:{...l,[b]:N})},v=y=>{if(y.preventDefault(),!l.title||!l.class_id||!l.section_id||Array.isArray(l.section_id)&&l.section_id.length===0||!l.due_date){K.error("Please fill all required fields and select at least one section");return}if((i==="admin"||i==="super_admin")&&!l.teacher_id){K.error("Please select a teacher");return}const b={title:l.title,description:l.description||"",class_id:l.class_id,section_id:l.section_id,due_date:l.due_date};l.subject_id&&(b.subject_id=l.subject_id),l.total_marks&&(b.total_marks=l.total_marks),l.teacher_id&&(i==="admin"||i==="super_admin")&&(b.teacher_id=l.teacher_id),l.attachments&&(b.attachments=l.attachments),s(b)};return r.jsxs("form",{onSubmit:v,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(i==="admin"||i==="super_admin")&&r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Teacher *"}),r.jsxs("select",{name:"teacher_id",value:l.teacher_id,onChange:j,className:"input",required:!0,children:[r.jsx("option",{value:"",children:"Select Teacher"}),p.map(y=>r.jsxs("option",{value:y.id,children:[y.first_name," ",y.last_name," - ",y.email]},y.id))]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"The assignment will be created on behalf of this teacher"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assignment Title *"}),r.jsx("input",{type:"text",name:"title",value:l.title,onChange:j,className:"input",placeholder:"e.g., Mathematics Chapter 5 - Homework",required:!0})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsx("textarea",{name:"description",value:l.description,onChange:j,className:"input",rows:"4",placeholder:"Enter assignment instructions and details..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Class *"}),r.jsxs("select",{name:"class_id",value:l.class_id,onChange:j,className:"input",required:!0,children:[r.jsx("option",{value:"",children:"Select Class"}),f.map(y=>r.jsx("option",{value:y.id,children:y.name},y.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Section(s) *"}),l.class_id?m.length===0?r.jsx("p",{className:"text-sm text-gray-500 italic",children:"No sections available for this class"}):r.jsxs("div",{className:"space-y-2 border rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-100 p-2 rounded",children:[r.jsx("input",{type:"checkbox",checked:Array.isArray(l.section_id)&&l.section_id.length===m.length,onChange:y=>{y.target.checked?o({...l,section_id:m.map(b=>b.id)}):o({...l,section_id:[]})},className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),r.jsx("span",{className:"font-medium text-gray-700",children:"Select All"})]}),r.jsx("hr",{className:"my-2"}),m.map(y=>r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-100 p-2 rounded",children:[r.jsx("input",{type:"checkbox",checked:Array.isArray(l.section_id)?l.section_id.includes(y.id):l.section_id===y.id,onChange:b=>{const N=Array.isArray(l.section_id)?l.section_id:l.section_id?[l.section_id]:[];b.target.checked?o({...l,section_id:[...N,y.id]}):o({...l,section_id:N.filter(k=>k!==y.id)})},className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),r.jsx("span",{className:"text-gray-700",children:y.name})]},y.id))]}):r.jsx("p",{className:"text-sm text-gray-500 italic",children:"Please select a class first"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select one or more sections to assign this assignment"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject"}),r.jsxs("select",{name:"subject_id",value:l.subject_id,onChange:j,className:"input",disabled:!l.class_id,children:[r.jsx("option",{value:"",children:l.class_id?"Select Subject (Optional)":"Select Class First"}),x.map(y=>r.jsxs("option",{value:y.subject_id,children:[y.subject_name," (",y.subject_code,")"]},y.subject_id))]}),!l.class_id&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Please select a class to see available subjects"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date *"}),r.jsx("input",{type:"date",name:"due_date",value:l.due_date,onChange:j,className:"input",min:new Date().toISOString().split("T")[0],required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Marks"}),r.jsx("input",{type:"number",name:"total_marks",value:l.total_marks,onChange:j,className:"input",min:"1",placeholder:"Default: 100"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Attachments"}),r.jsx("input",{type:"file",name:"attachments",onChange:j,className:"input",multiple:!0,accept:".pdf,.doc,.docx,.png,.jpg,.jpeg"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Accepted formats: PDF, DOC, DOCX, PNG, JPG (Max 5 files)"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[r.jsx("button",{type:"button",onClick:n,className:"btn btn-outline",disabled:a,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a,children:a?"Creating...":e?"Update Assignment":"Create Assignment"})]})]})},l8=()=>{var M;const e=Me(),t=We(),s=ka(),[n,a]=O.useState("all"),[i,l]=O.useState(!1),[o,c]=O.useState(null),[d,u]=O.useState(null),[h,f]=O.useState({subject_id:null,class_id:null,section_id:null});O.useEffect(()=>{s.state&&(s.state.filter&&a(s.state.filter),f({subject_id:s.state.subject_id||null,class_id:s.state.class_id||null,section_id:s.state.section_id||null}))},[s.state]);const[m,x]=O.useState(null);O.useEffect(()=>{var L;(L=s.state)!=null&&L.openCreateModal&&(x({subject_id:s.state.subject_id,class_id:s.state.class_id,section_id:s.state.section_id}),l(!0),t(s.pathname,{replace:!0,state:{}}))},[s.state,t]);const{data:p}=me({queryKey:["profile"],queryFn:Zo.getProfile}),j=(M=p==null?void 0:p.data)==null?void 0:M.role,{data:v,isLoading:g}=me({queryKey:["assignments",h],queryFn:()=>Ps.getAll(h)}),y=(v==null?void 0:v.data)||[],b=()=>{f({subject_id:null,class_id:null,section_id:null}),t(s.pathname,{replace:!0,state:{}})},N=_e({mutationFn:Ps.create,onSuccess:()=>{K.success("Assignment created successfully"),l(!1),e.invalidateQueries(["assignments"])},onError:L=>{K.error(L.message||"Failed to create assignment")}}),k=_e({mutationFn:({id:L,data:z})=>Ps.update(L,z),onSuccess:()=>{K.success("Assignment updated successfully"),l(!1),c(null),e.invalidateQueries(["assignments"])},onError:L=>{K.error(L.message||"Failed to update assignment")}}),w=_e({mutationFn:Ps.delete,onSuccess:()=>{K.success("Assignment deleted successfully"),u(null),e.invalidateQueries(["assignments"])},onError:L=>{K.error(L.message||"Failed to delete assignment"),u(null)}}),_=L=>{o?k.mutate({id:o.id,data:L}):N.mutate(L)},S=L=>{c(L),l(!0)},E=L=>{window.confirm("Are you sure you want to delete this assignment?")&&(u(L),w.mutate(L))},A=()=>{l(!1),c(null)},C=L=>{const z=new Date,Y=new Date(L),X=Math.ceil((Y-z)/(1e3*60*60*24));return X<0?"text-red-600":X<=3?"text-orange-600":"text-green-600"},D=y.filter(L=>{if(n==="all")return!0;const z=new Date,Y=new Date(L.due_date);return n==="upcoming"?Y>z:n==="overdue"?Y<z:!0});return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Assignments"}),r.jsx("p",{className:"text-gray-600 mt-1",children:j==="admin"||j==="super_admin"?"Manage homework and assignments for teachers":"Manage homework and assignments"})]}),r.jsx(st,{permissions:[ie.CREATE_ASSIGNMENTS],children:r.jsxs("button",{onClick:()=>l(!0),className:"btn btn-primary flex items-center space-x-2",children:[r.jsx(Be,{className:"w-5 h-5"}),r.jsx("span",{children:j==="admin"||j==="super_admin"?"Create Assignment (as Teacher)":"Create Assignment"})]})})]}),(j==="admin"||j==="super_admin")&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(tt,{className:"w-5 h-5 text-blue-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-blue-900",children:"Admin Mode"}),r.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"As an admin, you can create assignments on behalf of any teacher. Select the teacher when creating a new assignment."})]})]})}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("div",{className:"flex space-x-4",children:[r.jsx("button",{onClick:()=>a("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="all"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All Assignments"}),r.jsx("button",{onClick:()=>a("upcoming"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="upcoming"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Upcoming"}),r.jsx("button",{onClick:()=>a("overdue"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="overdue"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Overdue"})]}),(h.subject_id||h.class_id||h.section_id)&&r.jsxs("div",{className:"mt-4 flex items-center justify-between bg-blue-50 p-3 rounded-lg border border-blue-100",children:[r.jsxs("div",{className:"text-sm text-blue-800",children:[r.jsx("span",{className:"font-semibold",children:"Filtered by:"}),h.subject_id&&" Subject",h.class_id&&"  Class",h.section_id&&"  Section"]}),r.jsxs("button",{onClick:b,className:"text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[r.jsx(qr,{className:"w-4 h-4"}),"Clear Filters"]})]})]}),g?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"loading"})}):D.length===0?r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[r.jsx(Ue,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"No assignments found"})]}):r.jsx("div",{className:"space-y-4",children:D.map(L=>{const z=j==="super_admin"||j==="admin"||j==="teacher",Y=j==="super_admin"||j==="admin";return r.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:r.jsx(Ue,{className:"w-5 h-5 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900",children:L.title}),r.jsxs("p",{className:"text-sm text-gray-600",children:[L.class_name," - ",L.section_name,L.subject_name&&`  ${L.subject_name}`]})]})]}),L.description&&r.jsx("p",{className:"text-gray-700 mt-2 mb-4 line-clamp-2",children:L.description}),r.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Te,{className:"w-4 h-4 text-gray-400"}),r.jsxs("span",{className:"text-gray-600",children:["Due:"," ",new Date(L.due_date).toLocaleDateString()]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Nt,{className:`w-4 h-4 ${C(L.due_date)}`}),r.jsx("span",{className:C(L.due_date),children:(()=>{const X=Math.ceil((new Date(L.due_date)-new Date)/864e5);return X<0?`${Math.abs(X)} days overdue`:`${X} days left`})()})]}),r.jsxs("div",{className:"text-gray-600",children:["Total Marks:"," ",r.jsx("span",{className:"font-semibold",children:L.total_marks})]})]}),L.attachments&&L.attachments.length>0&&r.jsxs("div",{className:"mt-3 flex items-center space-x-2",children:[r.jsx(Ue,{className:"w-4 h-4 text-gray-400"}),r.jsxs("span",{className:"text-sm text-gray-600",children:[L.attachments.length," attachment(s)"]})]})]}),r.jsxs("div",{className:"ml-4 flex flex-col space-y-2",children:[r.jsxs("button",{onClick:()=>t(`/assignments/${L.id}`),className:"btn btn-outline flex items-center space-x-2",children:[r.jsx(ki,{className:"w-4 h-4"}),r.jsx("span",{children:"View"})]}),z&&r.jsxs("button",{onClick:()=>S(L),className:"btn btn-outline flex items-center space-x-2",children:[r.jsx(ct,{className:"w-4 h-4"}),r.jsx("span",{children:"Edit"})]}),Y&&r.jsxs("button",{onClick:()=>E(L.id),className:"btn btn-danger flex items-center space-x-2",disabled:d===L.id,children:[r.jsx(ut,{className:"w-4 h-4"}),r.jsx("span",{children:d===L.id?"Deleting...":"Delete"})]})]})]})},L.id)})}),r.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.length}),r.jsx("p",{className:"text-sm text-gray-600",children:"Total Assignments"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:y.filter(L=>new Date(L.due_date)>new Date).length}),r.jsx("p",{className:"text-sm text-gray-600",children:"Upcoming"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-red-600",children:y.filter(L=>new Date(L.due_date)<new Date).length}),r.jsx("p",{className:"text-sm text-gray-600",children:"Overdue"})]})]})}),r.jsx(Ae,{isOpen:i,onClose:A,title:o?"Edit Assignment":j==="admin"||j==="super_admin"?"Create Assignment (as Teacher)":"Create New Assignment",size:"lg",children:r.jsx(p4,{assignment:o,initialValues:m,onSubmit:_,onCancel:()=>{A(),x(null)},isSubmitting:N.isPending||k.isPending})})]})},o8=()=>{const[e,t]=O.useState("dashboard");Me();const s=Ie(mr),n=[{id:"dashboard",label:"Dashboard",icon:Si},{id:"collect",label:"Collect Fee",icon:qM},{id:"structure",label:"Fee Structure",icon:Ue},{id:"heads",label:"Fee Heads",icon:Hk}],a=s==="student"?n.filter(i=>i.id!=="structure"&&i.id!=="heads"):n;return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between p-6 bg-white rounded-2xl border border-gray-200 shadow-sm",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-black",children:"Fee Management"}),r.jsx("p",{className:"text-black mt-1 opacity-70",children:"Manage fee structures, collections, and reports"})]})}),r.jsx("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-5 shadow-xl border border-white/50",children:r.jsx("div",{className:"flex space-x-1",children:a.map(i=>r.jsxs("button",{onClick:()=>t(i.id),className:`group flex items-center px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 shadow-md ${e===i.id?"bg-blue-600 text-white shadow-blue-500/50 scale-105":"text-black bg-white hover:bg-gray-50 hover:text-black hover:shadow-lg hover:scale-[1.02]"}`,children:[r.jsx(i.icon,{className:`w-4 h-4 mr-2 transition-transform ${e===i.id?"scale-110":"group-hover:scale-110"}`}),i.label]},i.id))})}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6 min-h-[500px] hover:shadow-2xl transition-shadow",children:[e==="dashboard"&&r.jsx(c8,{}),e==="collect"&&r.jsx(h8,{}),e==="structure"&&r.jsx(u8,{}),e==="heads"&&r.jsx(d8,{})]})]})},c8=()=>{const[e,t]=O.useState(""),[s,n]=O.useState({start:"",end:""}),{data:a=[],isLoading:i}=me({queryKey:["fee-payments",s],queryFn:()=>En.getPayments({start_date:s.start,end_date:s.end})}),l=a.reduce((c,d)=>c+parseFloat(d.amount_paid),0),o=a.filter(c=>{var d;return c.student_name.toLowerCase().includes(e.toLowerCase())||((d=c.receipt_number)==null?void 0:d.toLowerCase().includes(e.toLowerCase()))});return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-md",children:[r.jsx("p",{className:"text-sm text-black font-medium opacity-70",children:"Total Collected"}),r.jsxs("p",{className:"text-3xl font-bold text-black mt-2",children:["",l.toLocaleString()]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-md",children:[r.jsx("p",{className:"text-sm text-black font-medium opacity-70",children:"Total Transactions"}),r.jsx("p",{className:"text-3xl font-bold text-black mt-2",children:a.length})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-md",children:[r.jsx("p",{className:"text-sm text-black font-medium opacity-70",children:"Today's Collection"}),r.jsxs("p",{className:"text-3xl font-bold text-black mt-2",children:["",a.filter(c=>new Date(c.payment_date).toDateString()===new Date().toDateString()).reduce((c,d)=>c+parseFloat(d.amount_paid),0).toLocaleString()]})]})]}),r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Search by student or receipt...",value:e,onChange:c=>t(c.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsx("input",{type:"date",value:s.start,onChange:c=>n({...s,start:c.target.value}),className:"border rounded-lg px-4 py-2"}),r.jsx("input",{type:"date",value:s.end,onChange:c=>n({...s,end:c.target.value}),className:"border rounded-lg px-4 py-2"})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-white border-b border-gray-200",children:[r.jsx("th",{className:"p-4 font-medium text-black",children:"Receipt"}),r.jsx("th",{className:"p-4 font-medium text-black",children:"Student"}),r.jsx("th",{className:"p-4 font-medium text-black",children:"Fee Head"}),r.jsx("th",{className:"p-4 font-medium text-black",children:"Amount"}),r.jsx("th",{className:"p-4 font-medium text-black",children:"Date"}),r.jsx("th",{className:"p-4 font-medium text-black",children:"Method"})]})}),r.jsx("tbody",{className:"divide-y",children:i?r.jsx("tr",{children:r.jsx("td",{colSpan:"6",className:"p-8 text-center",children:"Loading..."})}):o.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"6",className:"p-8 text-center text-gray-500",children:"No records found"})}):o.map(c=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"p-4 font-mono text-sm",children:c.receipt_number||"-"}),r.jsxs("td",{className:"p-4",children:[r.jsx("div",{className:"font-medium text-black",children:c.student_name}),r.jsx("div",{className:"text-xs text-black opacity-60",children:c.admission_number})]}),r.jsx("td",{className:"p-4 text-black opacity-70",children:c.fee_type}),r.jsxs("td",{className:"p-4 font-medium text-black",children:["",parseFloat(c.amount_paid).toLocaleString()]}),r.jsx("td",{className:"p-4 text-black opacity-70",children:new Date(c.payment_date).toLocaleDateString()}),r.jsx("td",{className:"p-4",children:r.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-white text-black border border-gray-200",children:c.payment_method.replace("_"," ")})})]},c.id))})]})})]})},d8=()=>{const e=Me(),[t,s]=O.useState({name:"",description:""}),[n,a]=O.useState(null),{data:i=[],isLoading:l}=me({queryKey:["fee-heads"],queryFn:En.getHeads}),o=_e({mutationFn:En.createHead,onSuccess:()=>{e.invalidateQueries(["fee-heads"]),s({name:"",description:""}),K.success("Fee Head created successfully")},onError:x=>{var p,j;return K.error(((j=(p=x.response)==null?void 0:p.data)==null?void 0:j.message)||"Failed to create fee head")}}),c=_e({mutationFn:({id:x,data:p})=>En.updateHead(x,p),onSuccess:()=>{e.invalidateQueries(["fee-heads"]),s({name:"",description:""}),a(null),K.success("Fee Head updated successfully")},onError:x=>{var p,j;return K.error(((j=(p=x.response)==null?void 0:p.data)==null?void 0:j.message)||"Failed to update fee head")}}),d=_e({mutationFn:En.deleteHead,onSuccess:()=>{e.invalidateQueries(["fee-heads"]),K.success("Fee Head deleted successfully")},onError:x=>{var p,j;return K.error(((j=(p=x.response)==null?void 0:p.data)==null?void 0:j.message)||"Failed to delete fee head")}}),u=x=>{x.preventDefault(),t.name&&(n?c.mutate({id:n,data:t}):o.mutate(t))},h=x=>{a(x.id),s({name:x.name,description:x.description})},f=x=>{window.confirm("Are you sure you want to delete this fee head?")&&d.mutate(x)},m=()=>{a(null),s({name:"",description:""})};return r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"md:col-span-1 space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:n?"Edit Fee Head":"Add Fee Head"}),r.jsxs("form",{onSubmit:u,className:"space-y-4 bg-gray-50 p-4 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),r.jsx("input",{type:"text",value:t.name,onChange:x=>s({...t,name:x.target.value}),className:"w-full border rounded-md px-3 py-2",placeholder:"e.g. Tuition Fee",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:t.description,onChange:x=>s({...t,description:x.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"submit",disabled:o.isPending||c.isPending,className:"flex-1 bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700 disabled:opacity-50",children:o.isPending||c.isPending?"Saving...":n?"Update Fee Head":"Create Fee Head"}),n&&r.jsx("button",{type:"button",onClick:m,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300",children:"Cancel"})]})]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Existing Fee Heads"}),l?r.jsx("p",{children:"Loading..."}):r.jsx("div",{className:"bg-white border rounded-lg overflow-hidden",children:r.jsxs("table",{className:"w-full text-left",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-3 font-medium text-black",children:"Name"}),r.jsx("th",{className:"p-3 font-medium text-black",children:"Description"}),r.jsx("th",{className:"p-3 font-medium text-black",children:"Status"}),r.jsx("th",{className:"p-3 font-medium text-black text-right",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y",children:i.map(x=>r.jsxs("tr",{children:[r.jsx("td",{className:"p-3 font-medium",children:x.name}),r.jsx("td",{className:"p-3 text-gray-600",children:x.description||"-"}),r.jsx("td",{className:"p-3",children:r.jsx("span",{className:"px-2 py-1 bg-white text-black border border-gray-200 rounded-full text-xs",children:"Active"})}),r.jsx("td",{className:"p-3 text-right",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>h(x),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",title:"Edit",children:r.jsx(ct,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>f(x.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",title:"Delete",children:r.jsx(JM,{className:"w-4 h-4"})})]})})]},x.id))})]})})]})]})},u8=()=>{const e=Me(),[t,s]=O.useState({class_id:"",fee_head_id:"",amount:"",academic_year:"2024-2025",period_type:"monthly",period_value:"1",due_date:"",description:""}),{data:n=[]}=me({queryKey:["classes"],queryFn:async()=>{const u=await He.getAll();return console.log("Classes API Response:",u),u.data||[]}}),{data:a=[]}=me({queryKey:["fee-heads"],queryFn:En.getHeads}),{data:i=[],isLoading:l}=me({queryKey:["fee-structures",t.class_id],queryFn:()=>En.getStructure({class_id:t.class_id,academic_year:t.academic_year}),enabled:!!t.class_id}),o=_e({mutationFn:En.createStructure,onSuccess:()=>{e.invalidateQueries(["fee-structures"]),K.success("Fee Structure added"),s(u=>({...u,amount:"",description:""}))},onError:u=>{var h,f;return K.error(((f=(h=u.response)==null?void 0:h.data)==null?void 0:f.message)||"Failed to add structure")}}),c=u=>{u.preventDefault(),o.mutate(t)},d=[{value:"1",label:"Baisakh"},{value:"2",label:"Jestha"},{value:"3",label:"Ashad"},{value:"4",label:"Shrawan"},{value:"5",label:"Bhadra"},{value:"6",label:"Ashwin"},{value:"7",label:"Kartik"},{value:"8",label:"Mangsir"},{value:"9",label:"Poush"},{value:"10",label:"Magh"},{value:"11",label:"Falgun"},{value:"12",label:"Chaitra"}];return r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Define Fee Structure"}),r.jsxs("form",{onSubmit:c,className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class"}),r.jsxs("select",{className:"w-full border rounded-md px-3 py-2",value:t.class_id,onChange:u=>s({...t,class_id:u.target.value}),required:!0,children:[r.jsx("option",{value:"",children:"Select Class"}),Array.isArray(n)&&n.map(u=>r.jsx("option",{value:u.id,children:u.name},u.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fee Head"}),r.jsxs("select",{className:"w-full border rounded-md px-3 py-2",value:t.fee_head_id,onChange:u=>s({...t,fee_head_id:u.target.value}),required:!0,children:[r.jsx("option",{value:"",children:"Select Fee Head"}),a.map(u=>r.jsx("option",{value:u.id,children:u.name},u.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Frequency"}),r.jsxs("select",{className:"w-full border rounded-md px-3 py-2",value:t.period_type,onChange:u=>s({...t,period_type:u.target.value}),children:[r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"semester",children:"Semester"}),r.jsx("option",{value:"yearly",children:"Yearly"}),r.jsx("option",{value:"one_time",children:"One Time"}),r.jsx("option",{value:"custom",children:"Custom"})]})]}),t.period_type==="monthly"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Month"}),r.jsx("select",{className:"w-full border rounded-md px-3 py-2",value:t.period_value,onChange:u=>s({...t,period_value:u.target.value}),children:d.map(u=>r.jsx("option",{value:u.value,children:u.label},u.value))})]}),(t.period_type==="semester"||t.period_type==="custom")&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Period Name/Value"}),r.jsx("input",{type:"text",value:t.period_value,onChange:u=>s({...t,period_value:u.target.value}),className:"w-full border rounded-md px-3 py-2",placeholder:t.period_type==="semester"?"e.g. 1":"e.g. Winter Camp"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),r.jsx("input",{type:"number",value:t.amount,onChange:u=>s({...t,amount:u.target.value}),className:"w-full border rounded-md px-3 py-2",placeholder:"0.00",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),r.jsx("input",{type:"date",value:t.due_date,onChange:u=>s({...t,due_date:u.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),r.jsx("div",{className:"md:col-span-3",children:r.jsx("button",{type:"submit",disabled:o.isPending,className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50",children:o.isPending?"Saving...":"Add Fee Structure"})})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:["Current Fee Structure ",t.class_id&&"for Class"]}),t.class_id?l?r.jsx("p",{children:"Loading..."}):r.jsx("div",{className:"bg-white border rounded-lg overflow-hidden",children:r.jsxs("table",{className:"w-full text-left",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-3 font-medium text-black",children:"Fee Head"}),r.jsx("th",{className:"p-3 font-medium text-black",children:"Type/Period"}),r.jsx("th",{className:"p-3 font-medium text-black",children:"Amount"}),r.jsx("th",{className:"p-3 font-medium text-black",children:"Due Date"})]})}),r.jsx("tbody",{className:"divide-y",children:i.map(u=>{let h=u.period_type;if(u.period_type==="monthly"){const f=d.find(m=>m.value===u.period_value);h=`Monthly (${f?f.label:u.period_value})`}else u.period_type==="semester"?h=`Semester ${u.period_value}`:u.period_value&&(h=`${u.period_type} (${u.period_value})`);return r.jsxs("tr",{children:[r.jsx("td",{className:"p-3 font-medium",children:u.fee_head_name}),r.jsx("td",{className:"p-3 capitalize",children:h}),r.jsxs("td",{className:"p-3 font-medium",children:["",parseFloat(u.amount).toLocaleString()]}),r.jsx("td",{className:"p-3 text-gray-600",children:u.due_date?new Date(u.due_date).toLocaleDateString():"-"})]},u.id)})})]})}):r.jsx("p",{className:"text-gray-500 italic",children:"Select a class above to view its fee structure."})]})]})},h8=()=>{const[e,t]=O.useState(""),[s,n]=O.useState(null),{data:a=[]}=me({queryKey:["all-students"],queryFn:()=>Fr.getAll().then(i=>i.data||[])});return r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"md:col-span-1 border-r pr-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Select Student"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Search or Enter Student ID"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Select from List"}),r.jsxs("select",{className:"w-full border rounded px-3 py-2",onChange:i=>{t(i.target.value),n(i.target.value)},value:e,children:[r.jsx("option",{value:"",children:"-- Select Student --"}),a.map(i=>r.jsxs("option",{value:i.id,children:[i.first_name," ",i.last_name," (",i.admission_number,")"]},i.id))]})]}),r.jsxs("div",{className:"relative flex items-center py-2",children:[r.jsx("div",{className:"flex-grow border-t border-gray-300"}),r.jsx("span",{className:"flex-shrink-0 mx-4 text-gray-400 text-xs",children:"OR"}),r.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Enter ID Directly"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:e,onChange:i=>t(i.target.value),className:"border rounded px-3 py-2 w-full",placeholder:"Student ID"}),r.jsx("button",{onClick:()=>n(e),className:"bg-blue-600 text-white px-4 py-2 rounded",children:"Go"})]})]})]})]}),r.jsx("div",{className:"md:col-span-2",children:s?r.jsx(f8,{studentId:s}):r.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Select a student to collect fees"})})]})},f8=({studentId:e})=>{const t=Me(),{data:s=[],isLoading:n}=me({queryKey:["student-fees",e],queryFn:()=>En.getStudentStatus(e)}),a=_e({mutationFn:En.collectFee,onSuccess:()=>{t.invalidateQueries(["student-fees",e]),t.invalidateQueries(["fee-payments"]),K.success("Payment recorded successfully")},onError:l=>K.error("Failed to record payment")}),i=l=>{const o=prompt(`Enter amount to pay for ${l.fee_head_name} (Balance: ${l.balance})`,l.balance);o&&a.mutate({student_id:e,fee_structure_id:l.id,amount_paid:o,payment_method:"cash",remarks:"Counter collection"})};return n?r.jsx("p",{children:"Loading student details..."}):r.jsxs("div",{className:"space-y-6",children:[r.jsx("h3",{className:"text-lg font-bold",children:"Fee Status"}),r.jsx("div",{className:"bg-white border rounded-lg overflow-hidden",children:r.jsxs("table",{className:"w-full text-left",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-3 font-medium text-black",children:"Fee Head"}),r.jsx("th",{className:"p-3 font-medium text-black",children:"Period"}),r.jsx("th",{className:"p-3 font-medium text-right text-black",children:"Total"}),r.jsx("th",{className:"p-3 font-medium text-right text-black",children:"Paid"}),r.jsx("th",{className:"p-3 font-medium text-right text-black",children:"Balance"}),r.jsx("th",{className:"p-3 font-medium text-black",children:"Status"}),r.jsx("th",{className:"p-3 font-medium text-black",children:"Action"})]})}),r.jsx("tbody",{className:"divide-y",children:s.map(l=>r.jsxs("tr",{children:[r.jsx("td",{className:"p-3",children:l.fee_head_name}),r.jsxs("td",{className:"p-3 capitalize",children:[l.period_type," ",l.period_value]}),r.jsxs("td",{className:"p-3 text-right",children:["",parseFloat(l.amount).toLocaleString()]}),r.jsxs("td",{className:"p-3 text-right text-black",children:["",l.paid_amount.toLocaleString()]}),r.jsxs("td",{className:"p-3 text-right text-black font-medium",children:["",l.balance.toLocaleString()]}),r.jsx("td",{className:"p-3",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${l.status==="Paid"||l.status==="Partial","bg-white text-black border border-gray-200"}`,children:l.status})}),r.jsx("td",{className:"p-3",children:l.balance>0&&r.jsx("button",{onClick:()=>i(l),className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700",children:"Pay"})})]},l.id))})]})})]})},x4=({event:e=null,onSubmit:t,onCancel:s,isSubmitting:n})=>{var c;const[a,i]=O.useState({title:(e==null?void 0:e.title)||"",description:(e==null?void 0:e.description)||"",event_type:(e==null?void 0:e.event_type)||"academic",event_date:((c=e==null?void 0:e.event_date)==null?void 0:c.split("T")[0])||"",start_time:(e==null?void 0:e.start_time)||"",end_time:(e==null?void 0:e.end_time)||"",location:(e==null?void 0:e.location)||"",target_audience:(e==null?void 0:e.target_audience)||"all",is_holiday:(e==null?void 0:e.is_holiday)||!1}),l=d=>{const{name:u,value:h,type:f,checked:m}=d.target;i({...a,[u]:f==="checkbox"?m:h})},o=d=>{if(d.preventDefault(),!a.title||!a.event_date){K.error("Please fill all required fields");return}if(a.start_time&&a.end_time&&a.start_time>=a.end_time){K.error("End time must be after start time");return}t(a)};return r.jsxs("form",{onSubmit:o,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Title *"}),r.jsx("input",{type:"text",name:"title",value:a.title,onChange:l,className:"input",placeholder:"e.g., Annual Sports Day",required:!0})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsx("textarea",{name:"description",value:a.description,onChange:l,className:"input",rows:"3",placeholder:"Enter event description..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Type *"}),r.jsxs("select",{name:"event_type",value:a.event_type,onChange:l,className:"input",required:!0,children:[r.jsx("option",{value:"academic",children:"Academic"}),r.jsx("option",{value:"sports",children:"Sports"}),r.jsx("option",{value:"cultural",children:"Cultural"}),r.jsx("option",{value:"meeting",children:"Meeting"}),r.jsx("option",{value:"holiday",children:"Holiday"}),r.jsx("option",{value:"exam",children:"Exam"}),r.jsx("option",{value:"parent_teacher",children:"Parent-Teacher Meet"}),r.jsx("option",{value:"other",children:"Other"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Date *"}),r.jsx("input",{type:"date",name:"event_date",value:a.event_date,onChange:l,className:"input",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Time"}),r.jsx("input",{type:"time",name:"start_time",value:a.start_time,onChange:l,className:"input"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Time"}),r.jsx("input",{type:"time",name:"end_time",value:a.end_time,onChange:l,className:"input"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),r.jsx("input",{type:"text",name:"location",value:a.location,onChange:l,className:"input",placeholder:"e.g., School Auditorium"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target Audience *"}),r.jsxs("select",{name:"target_audience",value:a.target_audience,onChange:l,className:"input",required:!0,children:[r.jsx("option",{value:"all",children:"All"}),r.jsx("option",{value:"students",children:"Students Only"}),r.jsx("option",{value:"teachers",children:"Teachers Only"}),r.jsx("option",{value:"parents",children:"Parents Only"}),r.jsx("option",{value:"staff",children:"Staff Only"})]})]}),r.jsx("div",{className:"md:col-span-2",children:r.jsxs("label",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",name:"is_holiday",checked:a.is_holiday,onChange:l,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Mark as Holiday"})]})})]}),r.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[r.jsx("button",{type:"button",onClick:s,className:"btn btn-outline",disabled:n,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?"Creating...":e?"Update Event":"Create Event"})]})]})},m8=()=>{const e=Me(),t=We(),[s,n]=O.useState("upcoming"),[a,i]=O.useState(!1),{data:l,isLoading:o}=me({queryKey:["events"],queryFn:()=>xd.getAll()}),c=(l==null?void 0:l.data)||[],d=_e({mutationFn:xd.create,onSuccess:()=>{K.success("Event created successfully"),i(!1),e.invalidateQueries(["events"])},onError:x=>{K.error(x.message||"Failed to create event")}}),u=x=>{d.mutate(x)},h=x=>{const p={academic:"bg-blue-100 text-blue-800 border-blue-500",sports:"bg-green-100 text-green-800 border-green-500",cultural:"bg-purple-100 text-purple-800 border-purple-500",meeting:"bg-orange-100 text-orange-800 border-orange-500",holiday:"bg-red-100 text-red-800 border-red-500",exam:"bg-yellow-100 text-yellow-800 border-yellow-500",parent_teacher:"bg-pink-100 text-pink-800 border-pink-500",other:"bg-gray-100 text-gray-800 border-gray-500"};return p[x]||p.other},m=[...c.filter(x=>{const p=new Date(x.event_date),j=new Date;return j.setHours(0,0,0,0),s==="upcoming"?p>=j:s==="past"?p<j:!0})].sort((x,p)=>new Date(x.event_date)-new Date(p.event_date));return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Events Calendar"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage school events and activities"})]}),r.jsx(st,{permissions:[ie.CREATE_EVENTS],children:r.jsxs("button",{onClick:()=>i(!0),className:"btn btn-primary flex items-center space-x-2",children:[r.jsx(Be,{className:"w-5 h-5"}),r.jsx("span",{children:"Create Event"})]})})]}),r.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:r.jsxs("div",{className:"flex space-x-4",children:[r.jsx("button",{onClick:()=>n("upcoming"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${s==="upcoming"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Upcoming Events"}),r.jsx("button",{onClick:()=>n("past"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${s==="past"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Past Events"}),r.jsx("button",{onClick:()=>n("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${s==="all"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All Events"})]})}),o?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"loading"})}):m.length===0?r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[r.jsx(Te,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"No events found"}),r.jsx(st,{permissions:[ie.CREATE_EVENTS],children:r.jsx("button",{onClick:()=>i(!0),className:"btn btn-primary",children:"Create First Event"})})]}):r.jsx("div",{className:"space-y-4",children:m.map(x=>r.jsx("div",{className:`bg-white rounded-lg shadow-md p-6 border-l-4 hover:shadow-lg transition-shadow ${h(x.event_type).split(" ")[2]}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"flex items-start space-x-4 mb-4",children:[r.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 text-center min-w-[80px]",children:[r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:new Date(x.event_date).getDate()}),r.jsx("p",{className:"text-sm text-blue-600",children:new Date(x.event_date).toLocaleDateString("en-US",{month:"short"})})]}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900",children:x.title}),r.jsx("span",{className:`badge ${h(x.event_type).split("border")[0]}`,children:x.event_type.replace("_"," ")})]}),x.description&&r.jsx("p",{className:"text-gray-700 mb-4",children:x.description}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[x.start_time&&x.end_time&&r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[r.jsx(Nt,{className:"w-4 h-4"}),r.jsxs("span",{children:[x.start_time," - ",x.end_time]})]}),x.location&&r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[r.jsx(Rn,{className:"w-4 h-4"}),r.jsx("span",{children:x.location})]}),x.target_audience&&r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[r.jsx(Xe,{className:"w-4 h-4"}),r.jsx("span",{className:"capitalize",children:x.target_audience.replace("_"," ")})]})]}),x.is_holiday&&r.jsx("div",{className:"mt-3",children:r.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800",children:"Holiday"})})]})]})}),r.jsx("div",{className:"ml-4 flex flex-col space-y-2",children:r.jsx("button",{onClick:()=>t(`/events/${x.id}`),className:"btn btn-outline text-sm",children:"View Details"})})]})},x.id))}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Event Statistics"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.length}),r.jsx("p",{className:"text-sm text-gray-600",children:"Total Events"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:c.filter(x=>new Date(x.event_date)>=new Date).length}),r.jsx("p",{className:"text-sm text-gray-600",children:"Upcoming"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:c.filter(x=>x.event_type==="academic").length}),r.jsx("p",{className:"text-sm text-gray-600",children:"Academic"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-red-600",children:c.filter(x=>x.is_holiday).length}),r.jsx("p",{className:"text-sm text-gray-600",children:"Holidays"})]})]})]}),r.jsx(Ae,{isOpen:a,onClose:()=>i(!1),title:"Create New Event",size:"lg",children:r.jsx(x4,{onSubmit:u,onCancel:()=>i(!1),isSubmitting:d.isPending})})]})},p8=()=>{const{id:e}=bs(),t=We(),s=Me(),[n,a]=O.useState(!1),[i,l]=O.useState(!1),{data:o,isLoading:c}=me({queryKey:["event",e],queryFn:()=>xd.getById(e)}),d=o==null?void 0:o.data,u=_e({mutationFn:p=>xd.update(e,p),onSuccess:()=>{K.success("Event updated successfully"),a(!1),s.invalidateQueries(["event",e]),s.invalidateQueries(["events"])},onError:p=>{K.error(p.message||"Failed to update event")}}),h=_e({mutationFn:()=>xd.delete(e),onSuccess:()=>{K.success("Event deleted successfully"),t("/events"),s.invalidateQueries(["events"])},onError:p=>{K.error(p.message||"Failed to delete event")}}),f=p=>{u.mutate(p)},m=()=>{h.mutate()},x=p=>{const j={academic:"bg-blue-100 text-blue-800 border-blue-500",sports:"bg-green-100 text-green-800 border-green-500",cultural:"bg-purple-100 text-purple-800 border-purple-500",meeting:"bg-orange-100 text-orange-800 border-orange-500",holiday:"bg-red-100 text-red-800 border-red-500",exam:"bg-yellow-100 text-yellow-800 border-yellow-500",parent_teacher:"bg-pink-100 text-pink-800 border-pink-500",other:"bg-gray-100 text-gray-800 border-gray-500"};return j[p]||j.other};return c?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"loading"})}):d?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("button",{onClick:()=>t("/events"),className:"btn btn-outline flex items-center space-x-2",children:[r.jsx(js,{className:"w-4 h-4"}),r.jsx("span",{children:"Back"})]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Event Details"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"View and manage event information"})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(st,{permission:ie.EDIT_EVENTS,children:r.jsxs("button",{onClick:()=>a(!0),className:"btn btn-primary flex items-center space-x-2",children:[r.jsx(ct,{className:"w-4 h-4"}),r.jsx("span",{children:"Edit"})]})}),r.jsx(st,{permission:ie.DELETE_EVENTS,children:r.jsxs("button",{onClick:()=>l(!0),className:"btn btn-danger flex items-center space-x-2",children:[r.jsx(ut,{className:"w-4 h-4"}),r.jsx("span",{children:"Delete"})]})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2 space-y-6",children:r.jsxs("div",{className:`bg-white rounded-lg shadow-md p-6 border-t-4 ${x(d.event_type).split(" ")[2]}`,children:[r.jsxs("div",{className:"flex justify-between items-start mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:d.title}),r.jsx("span",{className:`badge ${x(d.event_type).split("border")[0]}`,children:d.event_type.replace("_"," ")})]}),r.jsx("div",{className:"prose max-w-none text-gray-700 mb-8",children:r.jsx("p",{children:d.description||"No description provided."})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Te,{className:"w-5 h-5 text-gray-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Date"}),r.jsx("p",{className:"font-semibold text-gray-900",children:new Date(d.event_date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),d.start_time&&r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Nt,{className:"w-5 h-5 text-gray-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Time"}),r.jsxs("p",{className:"font-semibold text-gray-900",children:[d.start_time,d.end_time?` - ${d.end_time}`:""]})]})]}),d.location&&r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Rn,{className:"w-5 h-5 text-gray-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Location"}),r.jsx("p",{className:"font-semibold text-gray-900",children:d.location})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Xe,{className:"w-5 h-5 text-gray-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Target Audience"}),r.jsx("p",{className:"font-semibold text-gray-900 capitalize",children:d.target_audience.replace("_"," ")})]})]})]}),d.is_holiday&&r.jsxs("div",{className:"mt-8 p-4 bg-red-50 rounded-lg flex items-center space-x-3 text-red-800",children:[r.jsx($t,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"This event is marked as a holiday."})]})]})}),r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Meta Information"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Created By"}),r.jsx("p",{className:"font-medium text-gray-900",children:d.created_by_name||"Unknown"}),r.jsx("p",{className:"text-xs text-gray-500",children:d.created_by_email})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Created At"}),r.jsx("p",{className:"font-medium text-gray-900",children:new Date(d.created_at).toLocaleString()})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Last Updated"}),r.jsx("p",{className:"font-medium text-gray-900",children:new Date(d.updated_at).toLocaleString()})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:d.is_active?"Active":"Inactive"})]})]})]})})]}),r.jsx(Ae,{isOpen:n,onClose:()=>a(!1),title:"Edit Event",size:"lg",children:r.jsx(x4,{event:d,onSubmit:f,onCancel:()=>a(!1),isSubmitting:u.isPending})}),r.jsx(Ae,{isOpen:i,onClose:()=>l(!1),title:"Delete Event",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-gray-700",children:"Are you sure you want to delete this event? This action cannot be undone."}),r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-red-800 font-medium",children:d.title}),r.jsx("p",{className:"text-xs text-red-600 mt-1",children:new Date(d.event_date).toLocaleDateString()})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{onClick:()=>l(!1),className:"btn btn-outline",disabled:h.isPending,children:"Cancel"}),r.jsx("button",{onClick:m,className:"btn btn-danger",disabled:h.isPending,children:h.isPending?"Deleting...":"Delete Event"})]})]})})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Te,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"Event not found"}),r.jsx("button",{onClick:()=>t("/events"),className:"btn btn-primary mt-4",children:"Back to Events"})]})},Ug=({announcement:e=null,onSubmit:t,onCancel:s,isSubmitting:n})=>{var c,d;const[a,i]=O.useState({title:(e==null?void 0:e.title)||"",content:(e==null?void 0:e.content)||"",priority:(e==null?void 0:e.priority)||"medium",target_audience:(e==null?void 0:e.target_audience)||"all",published_at:((c=e==null?void 0:e.published_at)==null?void 0:c.split("T")[0])||new Date().toISOString().split("T")[0],expires_at:((d=e==null?void 0:e.expires_at)==null?void 0:d.split("T")[0])||""}),l=u=>{const{name:h,value:f}=u.target;i({...a,[h]:f})},o=u=>{if(u.preventDefault(),!a.title||!a.content){K.error("Please fill all required fields");return}if(a.expires_at&&new Date(a.expires_at)<new Date(a.published_at)){K.error("Expiry date must be after publish date");return}t(a)};return r.jsxs("form",{onSubmit:o,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Announcement Title *"}),r.jsx("input",{type:"text",name:"title",value:a.title,onChange:l,className:"input",placeholder:"e.g., School Reopening Date",required:!0})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content *"}),r.jsx("textarea",{name:"content",value:a.content,onChange:l,className:"input",rows:"6",placeholder:"Enter announcement content...",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority *"}),r.jsxs("select",{name:"priority",value:a.priority,onChange:l,className:"input",required:!0,children:[r.jsx("option",{value:"low",children:"Low"}),r.jsx("option",{value:"medium",children:"Medium"}),r.jsx("option",{value:"high",children:"High"}),r.jsx("option",{value:"urgent",children:"Urgent"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target Audience *"}),r.jsxs("select",{name:"target_audience",value:a.target_audience,onChange:l,className:"input",required:!0,children:[r.jsx("option",{value:"all",children:"All"}),r.jsx("option",{value:"students",children:"Students Only"}),r.jsx("option",{value:"teachers",children:"Teachers Only"}),r.jsx("option",{value:"parents",children:"Parents Only"}),r.jsx("option",{value:"staff",children:"Staff Only"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Publish Date *"}),r.jsx("input",{type:"date",name:"published_at",value:a.published_at,onChange:l,className:"input",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Date (Optional)"}),r.jsx("input",{type:"date",name:"expires_at",value:a.expires_at,onChange:l,className:"input",min:a.published_at}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty if announcement doesn't expire"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[r.jsx("button",{type:"button",onClick:s,className:"btn btn-outline",disabled:n,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?"Publishing...":e?"Update Announcement":"Publish Announcement"})]})]})},x8=()=>{const e=Me(),t=We(),[s,n]=O.useState(!1),[a,i]=O.useState(!1),[l,o]=O.useState(!1),[c,d]=O.useState(null),{data:u,isLoading:h}=me({queryKey:["announcements"],queryFn:Ki.getAll}),f=(u==null?void 0:u.data)||[],m=_e({mutationFn:Ki.create,onSuccess:()=>{K.success("Announcement published successfully"),n(!1),e.invalidateQueries(["announcements"])},onError:w=>{K.error(w.message||"Failed to publish announcement")}}),x=_e({mutationFn:w=>Ki.update(c.id,w),onSuccess:()=>{K.success("Announcement updated successfully"),i(!1),d(null),e.invalidateQueries(["announcements"])},onError:w=>{K.error(w.message||"Failed to update announcement")}}),p=_e({mutationFn:()=>Ki.delete(c.id),onSuccess:()=>{K.success("Announcement deleted successfully"),o(!1),d(null),e.invalidateQueries(["announcements"])},onError:w=>{K.error(w.message||"Failed to delete announcement")}}),j=w=>{m.mutate(w)},v=w=>{x.mutate(w)},g=()=>{p.mutate()},y=w=>{d(w),i(!0)},b=w=>{d(w),o(!0)},N=w=>{switch(w){case"urgent":return r.jsx($t,{className:"w-5 h-5 text-red-600"});case"high":return r.jsx($t,{className:"w-5 h-5 text-orange-600"});case"medium":return r.jsx(Yd,{className:"w-5 h-5 text-blue-600"});default:return r.jsx(Yd,{className:"w-5 h-5 text-gray-600"})}},k=w=>{const _={urgent:"border-red-500 bg-red-50",high:"border-orange-500 bg-orange-50",medium:"border-blue-500 bg-blue-50",low:"border-gray-500 bg-gray-50"};return _[w]||_.low};return r.jsxs("div",{className:"p-8 max-w-7xl mx-auto space-y-8 bg-gradient-to-br from-gray-50/50 to-white/50",children:[r.jsxs("div",{className:"flex justify-between items-center bg-white rounded-2xl shadow-sm p-8 border border-gray-100",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"Announcements"}),r.jsx("p",{className:"text-gray-600 mt-2 text-lg font-medium",children:"Important notices and updates"})]}),r.jsx(st,{permissions:[ie.CREATE_ANNOUNCEMENTS],children:r.jsxs("button",{onClick:()=>n(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300 flex items-center space-x-2 whitespace-nowrap",children:[r.jsx(Be,{className:"w-5 h-5"}),r.jsx("span",{children:"New Announcement"})]})})]}),h?r.jsx("div",{className:"flex justify-center items-center h-64 bg-white rounded-2xl shadow-sm p-8",children:r.jsx("div",{className:"w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin shadow-lg"})}):f.length===0?r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-16 text-center border border-gray-100 hover:shadow-2xl transition-shadow",children:[r.jsx(Is,{className:"w-20 h-20 text-gray-300 mx-auto mb-6"}),r.jsx("p",{className:"text-xl text-gray-500 mb-6 font-medium",children:"No announcements yet"}),r.jsx("button",{onClick:()=>n(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-10 py-4 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300",children:"Publish First Announcement"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-1 gap-6",children:f.map(w=>r.jsx("div",{className:`bg-white rounded-2xl shadow-lg p-8 border-l-4 hover:shadow-2xl hover:-translate-y-2 transition-all duration-300 ${k(w.priority)}`,children:r.jsxs("div",{className:"flex items-start space-x-6",children:[r.jsx("div",{className:"flex-shrink-0 mt-1 p-3 bg-white/60 rounded-xl shadow-md border",children:N(w.priority)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3 cursor-pointer hover:text-blue-600 transition-colors line-clamp-1",onClick:()=>t(`/announcements/${w.id}`),children:w.title}),r.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-sm text-gray-600 font-medium",children:[r.jsx("span",{children:new Date(w.published_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}),r.jsxs("span",{className:"capitalize",children:["Target:"," ",w.target_audience.replace("_"," ")]})]})]}),r.jsxs("div",{className:"flex items-center space-x-3 flex-shrink-0",children:[r.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-semibold shadow-sm ${w.priority==="urgent"?"bg-red-100 text-red-800 border border-red-200":w.priority==="high"?"bg-orange-100 text-orange-800 border border-orange-200":w.priority==="medium"?"bg-blue-100 text-blue-800 border border-blue-200":"bg-gray-100 text-gray-800 border border-gray-200"}`,children:w.priority.toUpperCase()}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(st,{permission:ie.EDIT_ANNOUNCEMENTS,children:r.jsx("button",{onClick:()=>y(w),className:"p-3 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-xl transition-all duration-200 shadow-sm hover:shadow-md",title:"Edit",children:r.jsx(ct,{className:"w-5 h-5"})})}),r.jsx(st,{permission:ie.DELETE_ANNOUNCEMENTS,children:r.jsx("button",{onClick:()=>b(w),className:"p-3 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all duration-200 shadow-sm hover:shadow-md",title:"Delete",children:r.jsx(ut,{className:"w-5 h-5"})})})]})]})]}),r.jsx("div",{className:"prose prose-sm max-w-none mb-6",children:r.jsx("p",{className:"text-gray-700 leading-relaxed line-clamp-3 font-medium",children:w.content})}),w.expires_at&&r.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl border border-gray-200 text-sm text-gray-600 font-medium flex items-center space-x-2",children:[r.jsx("span",{children:""}),r.jsxs("span",{children:["Expires on"," ",new Date(w.expires_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]})]})]})},w.id))}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-8 bg-gradient-to-r from-gray-900/80 to-gray-700/80 bg-clip-text",children:"Announcement Statistics"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:[r.jsxs("div",{className:"text-center p-8 bg-gradient-to-br from-gray-50 to-white/0 rounded-2xl shadow-sm hover:shadow-md transition-all",children:[r.jsx("p",{className:"text-4xl font-bold text-gray-900 mb-2",children:f.length}),r.jsx("p",{className:"text-sm text-gray-600 font-semibold tracking-wide",children:"Total"})]}),r.jsxs("div",{className:"text-center p-8 bg-gradient-to-br from-red-50/80 to-white/0 rounded-2xl shadow-sm hover:shadow-md transition-all",children:[r.jsx("p",{className:"text-4xl font-bold text-red-600 mb-2",children:f.filter(w=>w.priority==="urgent").length}),r.jsx("p",{className:"text-sm text-gray-600 font-semibold tracking-wide",children:"Urgent"})]}),r.jsxs("div",{className:"text-center p-8 bg-gradient-to-br from-orange-50/80 to-white/0 rounded-2xl shadow-sm hover:shadow-md transition-all",children:[r.jsx("p",{className:"text-4xl font-bold text-orange-600 mb-2",children:f.filter(w=>w.priority==="high").length}),r.jsx("p",{className:"text-sm text-gray-600 font-semibold tracking-wide",children:"High Priority"})]}),r.jsxs("div",{className:"text-center p-8 bg-gradient-to-br from-blue-50/80 to-white/0 rounded-2xl shadow-sm hover:shadow-md transition-all",children:[r.jsx("p",{className:"text-4xl font-bold text-blue-600 mb-2",children:f.filter(w=>w.target_audience==="all").length}),r.jsx("p",{className:"text-sm text-gray-600 font-semibold tracking-wide",children:"For Everyone"})]})]})]}),r.jsx(Ae,{isOpen:s,onClose:()=>n(!1),title:"Create New Announcement",children:r.jsx(Ug,{onSubmit:j,onCancel:()=>n(!1),isSubmitting:m.isPending})}),r.jsx(Ae,{isOpen:a,onClose:()=>{i(!1),d(null)},title:"Edit Announcement",children:c&&r.jsx(Ug,{announcement:c,onSubmit:v,onCancel:()=>{i(!1),d(null)},isSubmitting:x.isPending})}),r.jsx(Ae,{isOpen:l,onClose:()=>{o(!1),d(null)},title:"Delete Announcement",size:"sm",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-gray-600",children:"Are you sure you want to delete this announcement? This action cannot be undone."}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{onClick:()=>{o(!1),d(null)},className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),r.jsx("button",{onClick:g,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",disabled:p.isPending,children:p.isPending?"Deleting...":"Delete"})]})]})})]})},mh={getUsers:(e="")=>ee.get("/messages/users",{params:{search:e}}),getConversations:()=>ee.get("/messages/conversations"),getMessages:e=>ee.get(`/messages/${e}`),sendMessage:e=>ee.post("/messages",e),markAsRead:e=>ee.put(`/messages/${e}/read`),deleteMessage:e=>ee.delete(`/messages/${e}`)};var zg={exports:{}},xx,w1;function g8(){if(w1)return xx;w1=1;var e=1e3,t=e*60,s=t*60,n=s*24,a=n*7,i=n*365.25;xx=function(u,h){h=h||{};var f=typeof u;if(f==="string"&&u.length>0)return l(u);if(f==="number"&&isFinite(u))return h.long?c(u):o(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function l(u){if(u=String(u),!(u.length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(h){var f=parseFloat(h[1]),m=(h[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return f*i;case"weeks":case"week":case"w":return f*a;case"days":case"day":case"d":return f*n;case"hours":case"hour":case"hrs":case"hr":case"h":return f*s;case"minutes":case"minute":case"mins":case"min":case"m":return f*t;case"seconds":case"second":case"secs":case"sec":case"s":return f*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function o(u){var h=Math.abs(u);return h>=n?Math.round(u/n)+"d":h>=s?Math.round(u/s)+"h":h>=t?Math.round(u/t)+"m":h>=e?Math.round(u/e)+"s":u+"ms"}function c(u){var h=Math.abs(u);return h>=n?d(u,h,n,"day"):h>=s?d(u,h,s,"hour"):h>=t?d(u,h,t,"minute"):h>=e?d(u,h,e,"second"):u+" ms"}function d(u,h,f,m){var x=h>=f*1.5;return Math.round(u/f)+" "+m+(x?"s":"")}return xx}function y8(e){s.debug=s,s.default=s,s.coerce=c,s.disable=l,s.enable=a,s.enabled=o,s.humanize=g8(),s.destroy=d,Object.keys(e).forEach(u=>{s[u]=e[u]}),s.names=[],s.skips=[],s.formatters={};function t(u){let h=0;for(let f=0;f<u.length;f++)h=(h<<5)-h+u.charCodeAt(f),h|=0;return s.colors[Math.abs(h)%s.colors.length]}s.selectColor=t;function s(u){let h,f=null,m,x;function p(...j){if(!p.enabled)return;const v=p,g=Number(new Date),y=g-(h||g);v.diff=y,v.prev=h,v.curr=g,h=g,j[0]=s.coerce(j[0]),typeof j[0]!="string"&&j.unshift("%O");let b=0;j[0]=j[0].replace(/%([a-zA-Z%])/g,(k,w)=>{if(k==="%%")return"%";b++;const _=s.formatters[w];if(typeof _=="function"){const S=j[b];k=_.call(v,S),j.splice(b,1),b--}return k}),s.formatArgs.call(v,j),(v.log||s.log).apply(v,j)}return p.namespace=u,p.useColors=s.useColors(),p.color=s.selectColor(u),p.extend=n,p.destroy=s.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(m!==s.namespaces&&(m=s.namespaces,x=s.enabled(u)),x),set:j=>{f=j}}),typeof s.init=="function"&&s.init(p),p}function n(u,h){const f=s(this.namespace+(typeof h>"u"?":":h)+u);return f.log=this.log,f}function a(u){s.save(u),s.namespaces=u,s.names=[],s.skips=[];const h=(typeof u=="string"?u:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const f of h)f[0]==="-"?s.skips.push(f.slice(1)):s.names.push(f)}function i(u,h){let f=0,m=0,x=-1,p=0;for(;f<u.length;)if(m<h.length&&(h[m]===u[f]||h[m]==="*"))h[m]==="*"?(x=m,p=f,m++):(f++,m++);else if(x!==-1)m=x+1,p++,f=p;else return!1;for(;m<h.length&&h[m]==="*";)m++;return m===h.length}function l(){const u=[...s.names,...s.skips.map(h=>"-"+h)].join(",");return s.enable(""),u}function o(u){for(const h of s.skips)if(i(u,h))return!1;for(const h of s.names)if(i(u,h))return!0;return!1}function c(u){return u instanceof Error?u.stack||u.message:u}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s.enable(s.load()),s}var b8=y8;(function(e,t){var s={};t.formatArgs=a,t.save=i,t.load=l,t.useColors=n,t.storage=o(),t.destroy=(()=>{let d=!1;return()=>{d||(d=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let d;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(d=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(d[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function a(d){if(d[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+d[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;d.splice(1,0,u,"color: inherit");let h=0,f=0;d[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(h++,m==="%c"&&(f=h))}),d.splice(f,0,u)}t.log=console.debug||console.log||(()=>{});function i(d){try{d?t.storage.setItem("debug",d):t.storage.removeItem("debug")}catch{}}function l(){let d;try{d=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!d&&typeof Ve<"u"&&"env"in Ve&&(d=s.DEBUG),d}function o(){try{return localStorage}catch{}}e.exports=b8(t);const{formatters:c}=e.exports;c.j=function(d){try{return JSON.stringify(d)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(zg,zg.exports);var v8=zg.exports,j8=function(){if(typeof globalThis>"u")return null;var t={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return t.RTCPeerConnection?t:null},Vg={exports:{}},Hg={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(e,t){var s=Ml,n=s.Buffer;function a(l,o){for(var c in l)o[c]=l[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=s:(a(s,t),t.Buffer=i);function i(l,o,c){return n(l,o,c)}i.prototype=Object.create(n.prototype),a(n,i),i.from=function(l,o,c){if(typeof l=="number")throw new TypeError("Argument must not be a number");return n(l,o,c)},i.alloc=function(l,o,c){if(typeof l!="number")throw new TypeError("Argument must be a number");var d=n(l);return o!==void 0?typeof c=="string"?d.fill(o,c):d.fill(o):d.fill(0),d},i.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return n(l)},i.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return s.SlowBuffer(l)}})(Hg,Hg.exports);var g4=Hg.exports,gx=65536,N8=4294967295;function w8(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var _8=g4.Buffer,Gf=kt.crypto||kt.msCrypto;Gf&&Gf.getRandomValues?Vg.exports=S8:Vg.exports=w8;function S8(e,t){if(e>N8)throw new RangeError("requested too many random bytes");var s=_8.allocUnsafe(e);if(e>0)if(e>gx)for(var n=0;n<e;n+=gx)Gf.getRandomValues(s.slice(n,n+gx));else Gf.getRandomValues(s);return typeof t=="function"?Ve.nextTick(function(){t(null,s)}):s}var k8=Vg.exports,Wg={exports:{}},rv={exports:{}},So=typeof Reflect=="object"?Reflect:null,_1=So&&typeof So.apply=="function"?So.apply:function(t,s,n){return Function.prototype.apply.call(t,s,n)},Hh;So&&typeof So.ownKeys=="function"?Hh=So.ownKeys:Object.getOwnPropertySymbols?Hh=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Hh=function(t){return Object.getOwnPropertyNames(t)};function E8(e){console&&console.warn&&console.warn(e)}var y4=Number.isNaN||function(t){return t!==t};function mt(){mt.init.call(this)}rv.exports=mt;rv.exports.once=O8;mt.EventEmitter=mt;mt.prototype._events=void 0;mt.prototype._eventsCount=0;mt.prototype._maxListeners=void 0;var S1=10;function Vm(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(mt,"defaultMaxListeners",{enumerable:!0,get:function(){return S1},set:function(e){if(typeof e!="number"||e<0||y4(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");S1=e}});mt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};mt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||y4(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function b4(e){return e._maxListeners===void 0?mt.defaultMaxListeners:e._maxListeners}mt.prototype.getMaxListeners=function(){return b4(this)};mt.prototype.emit=function(t){for(var s=[],n=1;n<arguments.length;n++)s.push(arguments[n]);var a=t==="error",i=this._events;if(i!==void 0)a=a&&i.error===void 0;else if(!a)return!1;if(a){var l;if(s.length>0&&(l=s[0]),l instanceof Error)throw l;var o=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw o.context=l,o}var c=i[t];if(c===void 0)return!1;if(typeof c=="function")_1(c,this,s);else for(var d=c.length,u=_4(c,d),n=0;n<d;++n)_1(u[n],this,s);return!0};function v4(e,t,s,n){var a,i,l;if(Vm(s),i=e._events,i===void 0?(i=e._events=Object.create(null),e._eventsCount=0):(i.newListener!==void 0&&(e.emit("newListener",t,s.listener?s.listener:s),i=e._events),l=i[t]),l===void 0)l=i[t]=s,++e._eventsCount;else if(typeof l=="function"?l=i[t]=n?[s,l]:[l,s]:n?l.unshift(s):l.push(s),a=b4(e),a>0&&l.length>a&&!l.warned){l.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=l.length,E8(o)}return e}mt.prototype.addListener=function(t,s){return v4(this,t,s,!1)};mt.prototype.on=mt.prototype.addListener;mt.prototype.prependListener=function(t,s){return v4(this,t,s,!0)};function C8(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function j4(e,t,s){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:s},a=C8.bind(n);return a.listener=s,n.wrapFn=a,a}mt.prototype.once=function(t,s){return Vm(s),this.on(t,j4(this,t,s)),this};mt.prototype.prependOnceListener=function(t,s){return Vm(s),this.prependListener(t,j4(this,t,s)),this};mt.prototype.removeListener=function(t,s){var n,a,i,l,o;if(Vm(s),a=this._events,a===void 0)return this;if(n=a[t],n===void 0)return this;if(n===s||n.listener===s)--this._eventsCount===0?this._events=Object.create(null):(delete a[t],a.removeListener&&this.emit("removeListener",t,n.listener||s));else if(typeof n!="function"){for(i=-1,l=n.length-1;l>=0;l--)if(n[l]===s||n[l].listener===s){o=n[l].listener,i=l;break}if(i<0)return this;i===0?n.shift():A8(n,i),n.length===1&&(a[t]=n[0]),a.removeListener!==void 0&&this.emit("removeListener",t,o||s)}return this};mt.prototype.off=mt.prototype.removeListener;mt.prototype.removeAllListeners=function(t){var s,n,a;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var i=Object.keys(n),l;for(a=0;a<i.length;++a)l=i[a],l!=="removeListener"&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(s=n[t],typeof s=="function")this.removeListener(t,s);else if(s!==void 0)for(a=s.length-1;a>=0;a--)this.removeListener(t,s[a]);return this};function N4(e,t,s){var n=e._events;if(n===void 0)return[];var a=n[t];return a===void 0?[]:typeof a=="function"?s?[a.listener||a]:[a]:s?T8(a):_4(a,a.length)}mt.prototype.listeners=function(t){return N4(this,t,!0)};mt.prototype.rawListeners=function(t){return N4(this,t,!1)};mt.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):w4.call(e,t)};mt.prototype.listenerCount=w4;function w4(e){var t=this._events;if(t!==void 0){var s=t[e];if(typeof s=="function")return 1;if(s!==void 0)return s.length}return 0}mt.prototype.eventNames=function(){return this._eventsCount>0?Hh(this._events):[]};function _4(e,t){for(var s=new Array(t),n=0;n<t;++n)s[n]=e[n];return s}function A8(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function T8(e){for(var t=new Array(e.length),s=0;s<t.length;++s)t[s]=e[s].listener||e[s];return t}function O8(e,t){return new Promise(function(s,n){function a(l){e.removeListener(t,i),n(l)}function i(){typeof e.removeListener=="function"&&e.removeListener("error",a),s([].slice.call(arguments))}S4(e,t,i,{once:!0}),t!=="error"&&R8(e,a,{once:!0})})}function R8(e,t,s){typeof e.on=="function"&&S4(e,"error",t,s)}function S4(e,t,s,n){if(typeof e.on=="function")n.once?e.once(t,s):e.on(t,s);else if(typeof e.addEventListener=="function")e.addEventListener(t,function a(i){n.once&&e.removeEventListener(t,a),s(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var k4=rv.exports,E4=k4.EventEmitter,sv={},C4={},A4=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},s=Symbol("test"),n=Object(s);if(typeof s=="string"||Object.prototype.toString.call(s)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var a=42;t[s]=a;for(var i in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var l=Object.getOwnPropertySymbols(t);if(l.length!==1||l[0]!==s||!Object.prototype.propertyIsEnumerable.call(t,s))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(t,s);if(o.value!==a||o.enumerable!==!0)return!1}return!0},P8=A4,Hm=function(){return P8()&&!!Symbol.toStringTag},T4=Object,M8=Error,D8=EvalError,L8=RangeError,F8=ReferenceError,O4=SyntaxError,Cu=TypeError,I8=URIError,B8=Math.abs,q8=Math.floor,$8=Math.max,U8=Math.min,z8=Math.pow,V8=Math.round,H8=Number.isNaN||function(t){return t!==t},W8=H8,Y8=function(t){return W8(t)||t===0?t:t<0?-1:1},G8=Object.getOwnPropertyDescriptor,Wh=G8;if(Wh)try{Wh([],"length")}catch{Wh=null}var yc=Wh,Yh=Object.defineProperty||!1;if(Yh)try{Yh({},"a",{value:1})}catch{Yh=!1}var Wm=Yh,yx,k1;function K8(){if(k1)return yx;k1=1;var e=typeof Symbol<"u"&&Symbol,t=A4;return yx=function(){return typeof e!="function"||typeof Symbol!="function"||typeof e("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},yx}var R4=typeof Reflect<"u"&&Reflect.getPrototypeOf||null,Q8=T4,P4=Q8.getPrototypeOf||null,X8="Function.prototype.bind called on incompatible ",Z8=Object.prototype.toString,J8=Math.max,eI="[object Function]",E1=function(t,s){for(var n=[],a=0;a<t.length;a+=1)n[a]=t[a];for(var i=0;i<s.length;i+=1)n[i+t.length]=s[i];return n},tI=function(t,s){for(var n=[],a=s,i=0;a<t.length;a+=1,i+=1)n[i]=t[a];return n},rI=function(e,t){for(var s="",n=0;n<e.length;n+=1)s+=e[n],n+1<e.length&&(s+=t);return s},sI=function(t){var s=this;if(typeof s!="function"||Z8.apply(s)!==eI)throw new TypeError(X8+s);for(var n=tI(arguments,1),a,i=function(){if(this instanceof a){var u=s.apply(this,E1(n,arguments));return Object(u)===u?u:this}return s.apply(t,E1(n,arguments))},l=J8(0,s.length-n.length),o=[],c=0;c<l;c++)o[c]="$"+c;if(a=Function("binder","return function ("+rI(o,",")+"){ return binder.apply(this,arguments); }")(i),s.prototype){var d=function(){};d.prototype=s.prototype,a.prototype=new d,d.prototype=null}return a},nI=sI,Au=Function.prototype.bind||nI,nv=Function.prototype.call,av=Function.prototype.apply,aI=typeof Reflect<"u"&&Reflect&&Reflect.apply,iI=Au,lI=av,oI=nv,cI=aI,M4=cI||iI.call(oI,lI),dI=Au,uI=Cu,hI=nv,fI=M4,iv=function(t){if(t.length<1||typeof t[0]!="function")throw new uI("a function is required");return fI(dI,hI,t)},mI=iv,C1=yc,D4;try{D4=[].__proto__===Array.prototype}catch(e){if(!e||typeof e!="object"||!("code"in e)||e.code!=="ERR_PROTO_ACCESS")throw e}var bx=!!D4&&C1&&C1(Object.prototype,"__proto__"),L4=Object,A1=L4.getPrototypeOf,pI=bx&&typeof bx.get=="function"?mI([bx.get]):typeof A1=="function"?function(t){return A1(t==null?t:L4(t))}:!1,T1=R4,O1=P4,R1=pI,lv=T1?function(t){return T1(t)}:O1?function(t){if(!t||typeof t!="object"&&typeof t!="function")throw new TypeError("getProto: not an object");return O1(t)}:R1?function(t){return R1(t)}:null,xI=Function.prototype.call,gI=Object.prototype.hasOwnProperty,yI=Au,F4=yI.call(xI,gI),Ge,bI=T4,vI=M8,jI=D8,NI=L8,wI=F8,ic=O4,ko=Cu,_I=I8,SI=B8,kI=q8,EI=$8,CI=U8,AI=z8,TI=V8,OI=Y8,I4=Function,vx=function(e){try{return I4('"use strict"; return ('+e+").constructor;")()}catch{}},su=yc,RI=Wm,jx=function(){throw new ko},PI=su?function(){try{return arguments.callee,jx}catch{try{return su(arguments,"callee").get}catch{return jx}}}():jx,zl=K8()(),dr=lv,MI=P4,DI=R4,B4=av,Tu=nv,Gl={},LI=typeof Uint8Array>"u"||!dr?Ge:dr(Uint8Array),pl={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Ge:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ge:ArrayBuffer,"%ArrayIteratorPrototype%":zl&&dr?dr([][Symbol.iterator]()):Ge,"%AsyncFromSyncIteratorPrototype%":Ge,"%AsyncFunction%":Gl,"%AsyncGenerator%":Gl,"%AsyncGeneratorFunction%":Gl,"%AsyncIteratorPrototype%":Gl,"%Atomics%":typeof Atomics>"u"?Ge:Atomics,"%BigInt%":typeof BigInt>"u"?Ge:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ge:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ge:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ge:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":vI,"%eval%":eval,"%EvalError%":jI,"%Float16Array%":typeof Float16Array>"u"?Ge:Float16Array,"%Float32Array%":typeof Float32Array>"u"?Ge:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ge:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ge:FinalizationRegistry,"%Function%":I4,"%GeneratorFunction%":Gl,"%Int8Array%":typeof Int8Array>"u"?Ge:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ge:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ge:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":zl&&dr?dr(dr([][Symbol.iterator]())):Ge,"%JSON%":typeof JSON=="object"?JSON:Ge,"%Map%":typeof Map>"u"?Ge:Map,"%MapIteratorPrototype%":typeof Map>"u"||!zl||!dr?Ge:dr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":bI,"%Object.getOwnPropertyDescriptor%":su,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ge:Promise,"%Proxy%":typeof Proxy>"u"?Ge:Proxy,"%RangeError%":NI,"%ReferenceError%":wI,"%Reflect%":typeof Reflect>"u"?Ge:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ge:Set,"%SetIteratorPrototype%":typeof Set>"u"||!zl||!dr?Ge:dr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ge:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":zl&&dr?dr(""[Symbol.iterator]()):Ge,"%Symbol%":zl?Symbol:Ge,"%SyntaxError%":ic,"%ThrowTypeError%":PI,"%TypedArray%":LI,"%TypeError%":ko,"%Uint8Array%":typeof Uint8Array>"u"?Ge:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ge:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ge:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ge:Uint32Array,"%URIError%":_I,"%WeakMap%":typeof WeakMap>"u"?Ge:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ge:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ge:WeakSet,"%Function.prototype.call%":Tu,"%Function.prototype.apply%":B4,"%Object.defineProperty%":RI,"%Object.getPrototypeOf%":MI,"%Math.abs%":SI,"%Math.floor%":kI,"%Math.max%":EI,"%Math.min%":CI,"%Math.pow%":AI,"%Math.round%":TI,"%Math.sign%":OI,"%Reflect.getPrototypeOf%":DI};if(dr)try{null.error}catch(e){var FI=dr(dr(e));pl["%Error.prototype%"]=FI}var II=function e(t){var s;if(t==="%AsyncFunction%")s=vx("async function () {}");else if(t==="%GeneratorFunction%")s=vx("function* () {}");else if(t==="%AsyncGeneratorFunction%")s=vx("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(s=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var a=e("%AsyncGenerator%");a&&dr&&(s=dr(a.prototype))}return pl[t]=s,s},P1={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ou=Au,Kf=F4,BI=Ou.call(Tu,Array.prototype.concat),qI=Ou.call(B4,Array.prototype.splice),M1=Ou.call(Tu,String.prototype.replace),Qf=Ou.call(Tu,String.prototype.slice),$I=Ou.call(Tu,RegExp.prototype.exec),UI=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,zI=/\\(\\)?/g,VI=function(t){var s=Qf(t,0,1),n=Qf(t,-1);if(s==="%"&&n!=="%")throw new ic("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&s!=="%")throw new ic("invalid intrinsic syntax, expected opening `%`");var a=[];return M1(t,UI,function(i,l,o,c){a[a.length]=o?M1(c,zI,"$1"):l||i}),a},HI=function(t,s){var n=t,a;if(Kf(P1,n)&&(a=P1[n],n="%"+a[0]+"%"),Kf(pl,n)){var i=pl[n];if(i===Gl&&(i=II(n)),typeof i>"u"&&!s)throw new ko("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:a,name:n,value:i}}throw new ic("intrinsic "+t+" does not exist!")},q4=function(t,s){if(typeof t!="string"||t.length===0)throw new ko("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof s!="boolean")throw new ko('"allowMissing" argument must be a boolean');if($I(/^%?[^%]*%?$/,t)===null)throw new ic("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=VI(t),a=n.length>0?n[0]:"",i=HI("%"+a+"%",s),l=i.name,o=i.value,c=!1,d=i.alias;d&&(a=d[0],qI(n,BI([0,1],d)));for(var u=1,h=!0;u<n.length;u+=1){var f=n[u],m=Qf(f,0,1),x=Qf(f,-1);if((m==='"'||m==="'"||m==="`"||x==='"'||x==="'"||x==="`")&&m!==x)throw new ic("property names with quotes must have matching quotes");if((f==="constructor"||!h)&&(c=!0),a+="."+f,l="%"+a+"%",Kf(pl,l))o=pl[l];else if(o!=null){if(!(f in o)){if(!s)throw new ko("base intrinsic for "+t+" exists, but the property is not available.");return}if(su&&u+1>=n.length){var p=su(o,f);h=!!p,h&&"get"in p&&!("originalValue"in p.get)?o=p.get:o=o[f]}else h=Kf(o,f),o=o[f];h&&!c&&(pl[l]=o)}}return o},$4=q4,U4=iv,WI=U4([$4("%String.prototype.indexOf%")]),Ru=function(t,s){var n=$4(t,!!s);return typeof n=="function"&&WI(t,".prototype.")>-1?U4([n]):n},YI=Hm(),GI=Ru,Yg=GI("Object.prototype.toString"),Ym=function(t){return YI&&t&&typeof t=="object"&&Symbol.toStringTag in t?!1:Yg(t)==="[object Arguments]"},z4=function(t){return Ym(t)?!0:t!==null&&typeof t=="object"&&"length"in t&&typeof t.length=="number"&&t.length>=0&&Yg(t)!=="[object Array]"&&"callee"in t&&Yg(t.callee)==="[object Function]"},KI=function(){return Ym(arguments)}();Ym.isLegacyArguments=z4;var QI=KI?Ym:z4,D1=Ru,XI=Hm(),ZI=F4,JI=yc,Gg;if(XI){var e7=D1("RegExp.prototype.exec"),L1={},Nx=function(){throw L1},F1={toString:Nx,valueOf:Nx};typeof Symbol.toPrimitive=="symbol"&&(F1[Symbol.toPrimitive]=Nx),Gg=function(t){if(!t||typeof t!="object")return!1;var s=JI(t,"lastIndex"),n=s&&ZI(s,"value");if(!n)return!1;try{e7(t,F1)}catch(a){return a===L1}}}else{var t7=D1("Object.prototype.toString"),r7="[object RegExp]";Gg=function(t){return!t||typeof t!="object"&&typeof t!="function"?!1:t7(t)===r7}}var s7=Gg,n7=Ru,a7=s7,i7=n7("RegExp.prototype.exec"),l7=Cu,o7=function(t){if(!a7(t))throw new l7("`regex` must be a RegExp");return function(n){return i7(t,n)!==null}},wx,I1;function c7(){if(I1)return wx;I1=1;const e=(function*(){}).constructor;return wx=()=>e,wx}var V4=Ru,d7=o7,u7=d7(/^\s*(?:function)?\*/),h7=Hm(),B1=lv,f7=V4("Object.prototype.toString"),m7=V4("Function.prototype.toString"),p7=c7(),x7=function(t){if(typeof t!="function")return!1;if(u7(m7(t)))return!0;if(!h7){var s=f7(t);return s==="[object GeneratorFunction]"}if(!B1)return!1;var n=p7();return n&&B1(t)===n.prototype},H4=Function.prototype.toString,ho=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,Kg,Gh;if(typeof ho=="function"&&typeof Object.defineProperty=="function")try{Kg=Object.defineProperty({},"length",{get:function(){throw Gh}}),Gh={},ho(function(){throw 42},null,Kg)}catch(e){e!==Gh&&(ho=null)}else ho=null;var g7=/^\s*class\b/,Qg=function(t){try{var s=H4.call(t);return g7.test(s)}catch{return!1}},_x=function(t){try{return Qg(t)?!1:(H4.call(t),!0)}catch{return!1}},Kh=Object.prototype.toString,y7="[object Object]",b7="[object Function]",v7="[object GeneratorFunction]",j7="[object HTMLAllCollection]",N7="[object HTML document.all class]",w7="[object HTMLCollection]",_7=typeof Symbol=="function"&&!!Symbol.toStringTag,S7=!(0 in[,]),Xg=function(){return!1};if(typeof document=="object"){var k7=document.all;Kh.call(k7)===Kh.call(document.all)&&(Xg=function(t){if((S7||!t)&&(typeof t>"u"||typeof t=="object"))try{var s=Kh.call(t);return(s===j7||s===N7||s===w7||s===y7)&&t("")==null}catch{}return!1})}var E7=ho?function(t){if(Xg(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;try{ho(t,null,Kg)}catch(s){if(s!==Gh)return!1}return!Qg(t)&&_x(t)}:function(t){if(Xg(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;if(_7)return _x(t);if(Qg(t))return!1;var s=Kh.call(t);return s!==b7&&s!==v7&&!/^\[object HTML/.test(s)?!1:_x(t)},C7=E7,A7=Object.prototype.toString,W4=Object.prototype.hasOwnProperty,T7=function(t,s,n){for(var a=0,i=t.length;a<i;a++)W4.call(t,a)&&(n==null?s(t[a],a,t):s.call(n,t[a],a,t))},O7=function(t,s,n){for(var a=0,i=t.length;a<i;a++)n==null?s(t.charAt(a),a,t):s.call(n,t.charAt(a),a,t)},R7=function(t,s,n){for(var a in t)W4.call(t,a)&&(n==null?s(t[a],a,t):s.call(n,t[a],a,t))};function P7(e){return A7.call(e)==="[object Array]"}var M7=function(t,s,n){if(!C7(s))throw new TypeError("iterator must be a function");var a;arguments.length>=3&&(a=n),P7(t)?T7(t,s,a):typeof t=="string"?O7(t,s,a):R7(t,s,a)},D7=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"],Sx=D7,L7=typeof globalThis>"u"?kt:globalThis,F7=function(){for(var t=[],s=0;s<Sx.length;s++)typeof L7[Sx[s]]=="function"&&(t[t.length]=Sx[s]);return t},Y4={exports:{}},q1=Wm,I7=O4,Vl=Cu,$1=yc,B7=function(t,s,n){if(!t||typeof t!="object"&&typeof t!="function")throw new Vl("`obj` must be an object or a function`");if(typeof s!="string"&&typeof s!="symbol")throw new Vl("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Vl("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Vl("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Vl("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Vl("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,l=arguments.length>5?arguments[5]:null,o=arguments.length>6?arguments[6]:!1,c=!!$1&&$1(t,s);if(q1)q1(t,s,{configurable:l===null&&c?c.configurable:!l,enumerable:a===null&&c?c.enumerable:!a,value:n,writable:i===null&&c?c.writable:!i});else if(o||!a&&!i&&!l)t[s]=n;else throw new I7("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Zg=Wm,G4=function(){return!!Zg};G4.hasArrayLengthDefineBug=function(){if(!Zg)return null;try{return Zg([],"length",{value:1}).length!==1}catch{return!0}};var q7=G4,$7=q4,U1=B7,U7=q7(),z1=yc,V1=Cu,z7=$7("%Math.floor%"),V7=function(t,s){if(typeof t!="function")throw new V1("`fn` is not a function");if(typeof s!="number"||s<0||s>4294967295||z7(s)!==s)throw new V1("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],a=!0,i=!0;if("length"in t&&z1){var l=z1(t,"length");l&&!l.configurable&&(a=!1),l&&!l.writable&&(i=!1)}return(a||i||!n)&&(U7?U1(t,"length",s,!0,!0):U1(t,"length",s)),t},H7=Au,W7=av,Y7=M4,G7=function(){return Y7(H7,W7,arguments)};(function(e){var t=V7,s=Wm,n=iv,a=G7;e.exports=function(l){var o=n(arguments),c=l.length-(arguments.length-1);return t(o,1+(c>0?c:0),!0)},s?s(e.exports,"apply",{value:a}):e.exports.apply=a})(Y4);var K7=Y4.exports,Xf=M7,Q7=F7,H1=K7,ov=Ru,Qh=yc,ph=lv,X7=ov("Object.prototype.toString"),K4=Hm(),W1=typeof globalThis>"u"?kt:globalThis,Jg=Q7(),cv=ov("String.prototype.slice"),Z7=ov("Array.prototype.indexOf",!0)||function(t,s){for(var n=0;n<t.length;n+=1)if(t[n]===s)return n;return-1},Zf={__proto__:null};K4&&Qh&&ph?Xf(Jg,function(e){var t=new W1[e];if(Symbol.toStringTag in t&&ph){var s=ph(t),n=Qh(s,Symbol.toStringTag);if(!n&&s){var a=ph(s);n=Qh(a,Symbol.toStringTag)}Zf["$"+e]=H1(n.get)}}):Xf(Jg,function(e){var t=new W1[e],s=t.slice||t.set;s&&(Zf["$"+e]=H1(s))});var J7=function(t){var s=!1;return Xf(Zf,function(n,a){if(!s)try{"$"+n(t)===a&&(s=cv(a,1))}catch{}}),s},e9=function(t){var s=!1;return Xf(Zf,function(n,a){if(!s)try{n(t),s=cv(a,1)}catch{}}),s},Q4=function(t){if(!t||typeof t!="object")return!1;if(!K4){var s=cv(X7(t),8,-1);return Z7(Jg,s)>-1?s:s!=="Object"?!1:e9(t)}return Qh?J7(t):null},t9=Q4,r9=function(t){return!!t9(t)};(function(e){var t=QI,s=x7,n=Q4,a=r9;function i(re){return re.call.bind(re)}var l=typeof BigInt<"u",o=typeof Symbol<"u",c=i(Object.prototype.toString),d=i(Number.prototype.valueOf),u=i(String.prototype.valueOf),h=i(Boolean.prototype.valueOf);if(l)var f=i(BigInt.prototype.valueOf);if(o)var m=i(Symbol.prototype.valueOf);function x(re,ge){if(typeof re!="object")return!1;try{return ge(re),!0}catch{return!1}}e.isArgumentsObject=t,e.isGeneratorFunction=s,e.isTypedArray=a;function p(re){return typeof Promise<"u"&&re instanceof Promise||re!==null&&typeof re=="object"&&typeof re.then=="function"&&typeof re.catch=="function"}e.isPromise=p;function j(re){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(re):a(re)||I(re)}e.isArrayBufferView=j;function v(re){return n(re)==="Uint8Array"}e.isUint8Array=v;function g(re){return n(re)==="Uint8ClampedArray"}e.isUint8ClampedArray=g;function y(re){return n(re)==="Uint16Array"}e.isUint16Array=y;function b(re){return n(re)==="Uint32Array"}e.isUint32Array=b;function N(re){return n(re)==="Int8Array"}e.isInt8Array=N;function k(re){return n(re)==="Int16Array"}e.isInt16Array=k;function w(re){return n(re)==="Int32Array"}e.isInt32Array=w;function _(re){return n(re)==="Float32Array"}e.isFloat32Array=_;function S(re){return n(re)==="Float64Array"}e.isFloat64Array=S;function E(re){return n(re)==="BigInt64Array"}e.isBigInt64Array=E;function A(re){return n(re)==="BigUint64Array"}e.isBigUint64Array=A;function C(re){return c(re)==="[object Map]"}C.working=typeof Map<"u"&&C(new Map);function D(re){return typeof Map>"u"?!1:C.working?C(re):re instanceof Map}e.isMap=D;function M(re){return c(re)==="[object Set]"}M.working=typeof Set<"u"&&M(new Set);function L(re){return typeof Set>"u"?!1:M.working?M(re):re instanceof Set}e.isSet=L;function z(re){return c(re)==="[object WeakMap]"}z.working=typeof WeakMap<"u"&&z(new WeakMap);function Y(re){return typeof WeakMap>"u"?!1:z.working?z(re):re instanceof WeakMap}e.isWeakMap=Y;function X(re){return c(re)==="[object WeakSet]"}X.working=typeof WeakSet<"u"&&X(new WeakSet);function Z(re){return X(re)}e.isWeakSet=Z;function W(re){return c(re)==="[object ArrayBuffer]"}W.working=typeof ArrayBuffer<"u"&&W(new ArrayBuffer);function F(re){return typeof ArrayBuffer>"u"?!1:W.working?W(re):re instanceof ArrayBuffer}e.isArrayBuffer=F;function q(re){return c(re)==="[object DataView]"}q.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&q(new DataView(new ArrayBuffer(1),0,1));function I(re){return typeof DataView>"u"?!1:q.working?q(re):re instanceof DataView}e.isDataView=I;var $=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function G(re){return c(re)==="[object SharedArrayBuffer]"}function R(re){return typeof $>"u"?!1:(typeof G.working>"u"&&(G.working=G(new $)),G.working?G(re):re instanceof $)}e.isSharedArrayBuffer=R;function B(re){return c(re)==="[object AsyncFunction]"}e.isAsyncFunction=B;function Q(re){return c(re)==="[object Map Iterator]"}e.isMapIterator=Q;function te(re){return c(re)==="[object Set Iterator]"}e.isSetIterator=te;function ae(re){return c(re)==="[object Generator]"}e.isGeneratorObject=ae;function U(re){return c(re)==="[object WebAssembly.Module]"}e.isWebAssemblyCompiledModule=U;function V(re){return x(re,d)}e.isNumberObject=V;function ne(re){return x(re,u)}e.isStringObject=ne;function fe(re){return x(re,h)}e.isBooleanObject=fe;function ye(re){return l&&x(re,f)}e.isBigIntObject=ye;function oe(re){return o&&x(re,m)}e.isSymbolObject=oe;function be(re){return V(re)||ne(re)||fe(re)||ye(re)||oe(re)}e.isBoxedPrimitive=be;function ce(re){return typeof Uint8Array<"u"&&(F(re)||R(re))}e.isAnyArrayBuffer=ce,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(re){Object.defineProperty(e,re,{enumerable:!1,value:function(){throw new Error(re+" is not supported in userland")}})})})(C4);var s9=function(t){return t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function"},ey={exports:{}};typeof Object.create=="function"?ey.exports=function(t,s){s&&(t.super_=s,t.prototype=Object.create(s.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:ey.exports=function(t,s){if(s){t.super_=s;var n=function(){};n.prototype=s.prototype,t.prototype=new n,t.prototype.constructor=t}};var bc=ey.exports;(function(e){var t={},s=Object.getOwnPropertyDescriptors||function($){for(var G=Object.keys($),R={},B=0;B<G.length;B++)R[G[B]]=Object.getOwnPropertyDescriptor($,G[B]);return R},n=/%[sdj%]/g;e.format=function(I){if(!k(I)){for(var $=[],G=0;G<arguments.length;G++)$.push(o(arguments[G]));return $.join(" ")}for(var G=1,R=arguments,B=R.length,Q=String(I).replace(n,function(ae){if(ae==="%%")return"%";if(G>=B)return ae;switch(ae){case"%s":return String(R[G++]);case"%d":return Number(R[G++]);case"%j":try{return JSON.stringify(R[G++])}catch{return"[Circular]"}default:return ae}}),te=R[G];G<B;te=R[++G])y(te)||!E(te)?Q+=" "+te:Q+=" "+o(te);return Q},e.deprecate=function(I,$){if(typeof Ve<"u"&&Ve.noDeprecation===!0)return I;if(typeof Ve>"u")return function(){return e.deprecate(I,$).apply(this,arguments)};var G=!1;function R(){if(!G){if(Ve.throwDeprecation)throw new Error($);Ve.traceDeprecation?console.trace($):console.error($),G=!0}return I.apply(this,arguments)}return R};var a={},i=/^$/;if(t.NODE_DEBUG){var l=t.NODE_DEBUG;l=l.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+l+"$","i")}e.debuglog=function(I){if(I=I.toUpperCase(),!a[I])if(i.test(I)){var $=Ve.pid;a[I]=function(){var G=e.format.apply(e,arguments);console.error("%s %d: %s",I,$,G)}}else a[I]=function(){};return a[I]};function o(I,$){var G={seen:[],stylize:d};return arguments.length>=3&&(G.depth=arguments[2]),arguments.length>=4&&(G.colors=arguments[3]),g($)?G.showHidden=$:$&&e._extend(G,$),_(G.showHidden)&&(G.showHidden=!1),_(G.depth)&&(G.depth=2),_(G.colors)&&(G.colors=!1),_(G.customInspect)&&(G.customInspect=!0),G.colors&&(G.stylize=c),h(G,I,G.depth)}e.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function c(I,$){var G=o.styles[$];return G?"\x1B["+o.colors[G][0]+"m"+I+"\x1B["+o.colors[G][1]+"m":I}function d(I,$){return I}function u(I){var $={};return I.forEach(function(G,R){$[G]=!0}),$}function h(I,$,G){if(I.customInspect&&$&&D($.inspect)&&$.inspect!==e.inspect&&!($.constructor&&$.constructor.prototype===$)){var R=$.inspect(G,I);return k(R)||(R=h(I,R,G)),R}var B=f(I,$);if(B)return B;var Q=Object.keys($),te=u(Q);if(I.showHidden&&(Q=Object.getOwnPropertyNames($)),C($)&&(Q.indexOf("message")>=0||Q.indexOf("description")>=0))return m($);if(Q.length===0){if(D($)){var ae=$.name?": "+$.name:"";return I.stylize("[Function"+ae+"]","special")}if(S($))return I.stylize(RegExp.prototype.toString.call($),"regexp");if(A($))return I.stylize(Date.prototype.toString.call($),"date");if(C($))return m($)}var U="",V=!1,ne=["{","}"];if(v($)&&(V=!0,ne=["[","]"]),D($)){var fe=$.name?": "+$.name:"";U=" [Function"+fe+"]"}if(S($)&&(U=" "+RegExp.prototype.toString.call($)),A($)&&(U=" "+Date.prototype.toUTCString.call($)),C($)&&(U=" "+m($)),Q.length===0&&(!V||$.length==0))return ne[0]+U+ne[1];if(G<0)return S($)?I.stylize(RegExp.prototype.toString.call($),"regexp"):I.stylize("[Object]","special");I.seen.push($);var ye;return V?ye=x(I,$,G,te,Q):ye=Q.map(function(oe){return p(I,$,G,te,oe,V)}),I.seen.pop(),j(ye,U,ne)}function f(I,$){if(_($))return I.stylize("undefined","undefined");if(k($)){var G="'"+JSON.stringify($).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return I.stylize(G,"string")}if(N($))return I.stylize(""+$,"number");if(g($))return I.stylize(""+$,"boolean");if(y($))return I.stylize("null","null")}function m(I){return"["+Error.prototype.toString.call(I)+"]"}function x(I,$,G,R,B){for(var Q=[],te=0,ae=$.length;te<ae;++te)Z($,String(te))?Q.push(p(I,$,G,R,String(te),!0)):Q.push("");return B.forEach(function(U){U.match(/^\d+$/)||Q.push(p(I,$,G,R,U,!0))}),Q}function p(I,$,G,R,B,Q){var te,ae,U;if(U=Object.getOwnPropertyDescriptor($,B)||{value:$[B]},U.get?U.set?ae=I.stylize("[Getter/Setter]","special"):ae=I.stylize("[Getter]","special"):U.set&&(ae=I.stylize("[Setter]","special")),Z(R,B)||(te="["+B+"]"),ae||(I.seen.indexOf(U.value)<0?(y(G)?ae=h(I,U.value,null):ae=h(I,U.value,G-1),ae.indexOf(`
`)>-1&&(Q?ae=ae.split(`
`).map(function(V){return"  "+V}).join(`
`).slice(2):ae=`
`+ae.split(`
`).map(function(V){return"   "+V}).join(`
`))):ae=I.stylize("[Circular]","special")),_(te)){if(Q&&B.match(/^\d+$/))return ae;te=JSON.stringify(""+B),te.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(te=te.slice(1,-1),te=I.stylize(te,"name")):(te=te.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),te=I.stylize(te,"string"))}return te+": "+ae}function j(I,$,G){var R=I.reduce(function(B,Q){return Q.indexOf(`
`)>=0,B+Q.replace(/\u001b\[\d\d?m/g,"").length+1},0);return R>60?G[0]+($===""?"":$+`
 `)+" "+I.join(`,
  `)+" "+G[1]:G[0]+$+" "+I.join(", ")+" "+G[1]}e.types=C4;function v(I){return Array.isArray(I)}e.isArray=v;function g(I){return typeof I=="boolean"}e.isBoolean=g;function y(I){return I===null}e.isNull=y;function b(I){return I==null}e.isNullOrUndefined=b;function N(I){return typeof I=="number"}e.isNumber=N;function k(I){return typeof I=="string"}e.isString=k;function w(I){return typeof I=="symbol"}e.isSymbol=w;function _(I){return I===void 0}e.isUndefined=_;function S(I){return E(I)&&L(I)==="[object RegExp]"}e.isRegExp=S,e.types.isRegExp=S;function E(I){return typeof I=="object"&&I!==null}e.isObject=E;function A(I){return E(I)&&L(I)==="[object Date]"}e.isDate=A,e.types.isDate=A;function C(I){return E(I)&&(L(I)==="[object Error]"||I instanceof Error)}e.isError=C,e.types.isNativeError=C;function D(I){return typeof I=="function"}e.isFunction=D;function M(I){return I===null||typeof I=="boolean"||typeof I=="number"||typeof I=="string"||typeof I=="symbol"||typeof I>"u"}e.isPrimitive=M,e.isBuffer=s9;function L(I){return Object.prototype.toString.call(I)}function z(I){return I<10?"0"+I.toString(10):I.toString(10)}var Y=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function X(){var I=new Date,$=[z(I.getHours()),z(I.getMinutes()),z(I.getSeconds())].join(":");return[I.getDate(),Y[I.getMonth()],$].join(" ")}e.log=function(){console.log("%s - %s",X(),e.format.apply(e,arguments))},e.inherits=bc,e._extend=function(I,$){if(!$||!E($))return I;for(var G=Object.keys($),R=G.length;R--;)I[G[R]]=$[G[R]];return I};function Z(I,$){return Object.prototype.hasOwnProperty.call(I,$)}var W=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;e.promisify=function($){if(typeof $!="function")throw new TypeError('The "original" argument must be of type Function');if(W&&$[W]){var G=$[W];if(typeof G!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(G,W,{value:G,enumerable:!1,writable:!1,configurable:!0}),G}function G(){for(var R,B,Q=new Promise(function(U,V){R=U,B=V}),te=[],ae=0;ae<arguments.length;ae++)te.push(arguments[ae]);te.push(function(U,V){U?B(U):R(V)});try{$.apply(this,te)}catch(U){B(U)}return Q}return Object.setPrototypeOf(G,Object.getPrototypeOf($)),W&&Object.defineProperty(G,W,{value:G,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(G,s($))},e.promisify.custom=W;function F(I,$){if(!I){var G=new Error("Promise was rejected with a falsy value");G.reason=I,I=G}return $(I)}function q(I){if(typeof I!="function")throw new TypeError('The "original" argument must be of type Function');function $(){for(var G=[],R=0;R<arguments.length;R++)G.push(arguments[R]);var B=G.pop();if(typeof B!="function")throw new TypeError("The last argument must be of type Function");var Q=this,te=function(){return B.apply(Q,arguments)};I.apply(this,G).then(function(ae){Ve.nextTick(te.bind(null,null,ae))},function(ae){Ve.nextTick(F.bind(null,ae,te))})}return Object.setPrototypeOf($,Object.getPrototypeOf(I)),Object.defineProperties($,s(I)),$}e.callbackify=q})(sv);var kx,Y1;function n9(){if(Y1)return kx;Y1=1;function e(x,p){var j=Object.keys(x);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(x);p&&(v=v.filter(function(g){return Object.getOwnPropertyDescriptor(x,g).enumerable})),j.push.apply(j,v)}return j}function t(x){for(var p=1;p<arguments.length;p++){var j=arguments[p]!=null?arguments[p]:{};p%2?e(Object(j),!0).forEach(function(v){s(x,v,j[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(j)):e(Object(j)).forEach(function(v){Object.defineProperty(x,v,Object.getOwnPropertyDescriptor(j,v))})}return x}function s(x,p,j){return p=l(p),p in x?Object.defineProperty(x,p,{value:j,enumerable:!0,configurable:!0,writable:!0}):x[p]=j,x}function n(x,p){if(!(x instanceof p))throw new TypeError("Cannot call a class as a function")}function a(x,p){for(var j=0;j<p.length;j++){var v=p[j];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(x,l(v.key),v)}}function i(x,p,j){return p&&a(x.prototype,p),Object.defineProperty(x,"prototype",{writable:!1}),x}function l(x){var p=o(x,"string");return typeof p=="symbol"?p:String(p)}function o(x,p){if(typeof x!="object"||x===null)return x;var j=x[Symbol.toPrimitive];if(j!==void 0){var v=j.call(x,p);if(typeof v!="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}var c=Ml,d=c.Buffer,u=sv,h=u.inspect,f=h&&h.custom||"inspect";function m(x,p,j){d.prototype.copy.call(x,p,j)}return kx=function(){function x(){n(this,x),this.head=null,this.tail=null,this.length=0}return i(x,[{key:"push",value:function(j){var v={data:j,next:null};this.length>0?this.tail.next=v:this.head=v,this.tail=v,++this.length}},{key:"unshift",value:function(j){var v={data:j,next:this.head};this.length===0&&(this.tail=v),this.head=v,++this.length}},{key:"shift",value:function(){if(this.length!==0){var j=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,j}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(j){if(this.length===0)return"";for(var v=this.head,g=""+v.data;v=v.next;)g+=j+v.data;return g}},{key:"concat",value:function(j){if(this.length===0)return d.alloc(0);for(var v=d.allocUnsafe(j>>>0),g=this.head,y=0;g;)m(g.data,v,y),y+=g.data.length,g=g.next;return v}},{key:"consume",value:function(j,v){var g;return j<this.head.data.length?(g=this.head.data.slice(0,j),this.head.data=this.head.data.slice(j)):j===this.head.data.length?g=this.shift():g=v?this._getString(j):this._getBuffer(j),g}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(j){var v=this.head,g=1,y=v.data;for(j-=y.length;v=v.next;){var b=v.data,N=j>b.length?b.length:j;if(N===b.length?y+=b:y+=b.slice(0,j),j-=N,j===0){N===b.length?(++g,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=b.slice(N));break}++g}return this.length-=g,y}},{key:"_getBuffer",value:function(j){var v=d.allocUnsafe(j),g=this.head,y=1;for(g.data.copy(v),j-=g.data.length;g=g.next;){var b=g.data,N=j>b.length?b.length:j;if(b.copy(v,v.length-j,0,N),j-=N,j===0){N===b.length?(++y,g.next?this.head=g.next:this.head=this.tail=null):(this.head=g,g.data=b.slice(N));break}++y}return this.length-=y,v}},{key:f,value:function(j,v){return h(this,t(t({},v),{},{depth:0,customInspect:!1}))}}]),x}(),kx}function a9(e,t){var s=this,n=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return n||a?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Ve.nextTick(ty,this,e)):Ve.nextTick(ty,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(i){!t&&i?s._writableState?s._writableState.errorEmitted?Ve.nextTick(Xh,s):(s._writableState.errorEmitted=!0,Ve.nextTick(G1,s,i)):Ve.nextTick(G1,s,i):t?(Ve.nextTick(Xh,s),t(i)):Ve.nextTick(Xh,s)}),this)}function G1(e,t){ty(e,t),Xh(e)}function Xh(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i9(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function ty(e,t){e.emit("error",t)}function l9(e,t){var s=e._readableState,n=e._writableState;s&&s.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}var X4={destroy:a9,undestroy:i9,errorOrDestroy:l9},Fl={};function o9(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Z4={};function $s(e,t,s){s||(s=Error);function n(i,l,o){return typeof t=="string"?t:t(i,l,o)}var a=function(i){o9(l,i);function l(o,c,d){return i.call(this,n(o,c,d))||this}return l}(s);a.prototype.name=s.name,a.prototype.code=e,Z4[e]=a}function K1(e,t){if(Array.isArray(e)){var s=e.length;return e=e.map(function(n){return String(n)}),s>2?"one of ".concat(t," ").concat(e.slice(0,s-1).join(", "),", or ")+e[s-1]:s===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function c9(e,t,s){return e.substr(0,t.length)===t}function d9(e,t,s){return(s===void 0||s>e.length)&&(s=e.length),e.substring(s-t.length,s)===t}function u9(e,t,s){return typeof s!="number"&&(s=0),s+t.length>e.length?!1:e.indexOf(t,s)!==-1}$s("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError);$s("ERR_INVALID_ARG_TYPE",function(e,t,s){var n;typeof t=="string"&&c9(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be";var a;if(d9(e," argument"))a="The ".concat(e," ").concat(n," ").concat(K1(t,"type"));else{var i=u9(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(i," ").concat(n," ").concat(K1(t,"type"))}return a+=". Received type ".concat(typeof s),a},TypeError);$s("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");$s("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"});$s("ERR_STREAM_PREMATURE_CLOSE","Premature close");$s("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});$s("ERR_MULTIPLE_CALLBACK","Callback called multiple times");$s("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");$s("ERR_STREAM_WRITE_AFTER_END","write after end");$s("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);$s("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError);$s("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Fl.codes=Z4;var h9=Fl.codes.ERR_INVALID_OPT_VALUE;function f9(e,t,s){return e.highWaterMark!=null?e.highWaterMark:t?e[s]:null}function m9(e,t,s,n){var a=f9(t,n,s);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var i=n?s:"highWaterMark";throw new h9(i,a)}return Math.floor(a)}return e.objectMode?16:16*1024}var J4={getHighWaterMark:m9},p9=x9;function x9(e,t){if(Ex("noDeprecation"))return e;var s=!1;function n(){if(!s){if(Ex("throwDeprecation"))throw new Error(t);Ex("traceDeprecation")?console.trace(t):console.warn(t),s=!0}return e.apply(this,arguments)}return n}function Ex(e){try{if(!kt.localStorage)return!1}catch{return!1}var t=kt.localStorage[e];return t==null?!1:String(t).toLowerCase()==="true"}var Cx,Q1;function eC(){if(Q1)return Cx;Q1=1,Cx=_;function e(R){var B=this;this.next=null,this.entry=null,this.finish=function(){G(B,R)}}var t;_.WritableState=k;var s={deprecate:p9},n=E4,a=Ml.Buffer,i=(typeof kt<"u"?kt:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function l(R){return a.from(R)}function o(R){return a.isBuffer(R)||R instanceof i}var c=X4,d=J4,u=d.getHighWaterMark,h=Fl.codes,f=h.ERR_INVALID_ARG_TYPE,m=h.ERR_METHOD_NOT_IMPLEMENTED,x=h.ERR_MULTIPLE_CALLBACK,p=h.ERR_STREAM_CANNOT_PIPE,j=h.ERR_STREAM_DESTROYED,v=h.ERR_STREAM_NULL_VALUES,g=h.ERR_STREAM_WRITE_AFTER_END,y=h.ERR_UNKNOWN_ENCODING,b=c.errorOrDestroy;bc(_,n);function N(){}function k(R,B,Q){t=t||lc(),R=R||{},typeof Q!="boolean"&&(Q=B instanceof t),this.objectMode=!!R.objectMode,Q&&(this.objectMode=this.objectMode||!!R.writableObjectMode),this.highWaterMark=u(this,R,"writableHighWaterMark",Q),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var te=R.decodeStrings===!1;this.decodeStrings=!te,this.defaultEncoding=R.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ae){z(B,ae)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=R.emitClose!==!1,this.autoDestroy=!!R.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}k.prototype.getBuffer=function(){for(var B=this.bufferedRequest,Q=[];B;)Q.push(B),B=B.next;return Q},function(){try{Object.defineProperty(k.prototype,"buffer",{get:s.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var w;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(w=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(B){return w.call(this,B)?!0:this!==_?!1:B&&B._writableState instanceof k}})):w=function(B){return B instanceof this};function _(R){t=t||lc();var B=this instanceof t;if(!B&&!w.call(_,this))return new _(R);this._writableState=new k(R,this,B),this.writable=!0,R&&(typeof R.write=="function"&&(this._write=R.write),typeof R.writev=="function"&&(this._writev=R.writev),typeof R.destroy=="function"&&(this._destroy=R.destroy),typeof R.final=="function"&&(this._final=R.final)),n.call(this)}_.prototype.pipe=function(){b(this,new p)};function S(R,B){var Q=new g;b(R,Q),Ve.nextTick(B,Q)}function E(R,B,Q,te){var ae;return Q===null?ae=new v:typeof Q!="string"&&!B.objectMode&&(ae=new f("chunk",["string","Buffer"],Q)),ae?(b(R,ae),Ve.nextTick(te,ae),!1):!0}_.prototype.write=function(R,B,Q){var te=this._writableState,ae=!1,U=!te.objectMode&&o(R);return U&&!a.isBuffer(R)&&(R=l(R)),typeof B=="function"&&(Q=B,B=null),U?B="buffer":B||(B=te.defaultEncoding),typeof Q!="function"&&(Q=N),te.ending?S(this,Q):(U||E(this,te,R,Q))&&(te.pendingcb++,ae=C(this,te,U,R,B,Q)),ae},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var R=this._writableState;R.corked&&(R.corked--,!R.writing&&!R.corked&&!R.bufferProcessing&&R.bufferedRequest&&Z(this,R))},_.prototype.setDefaultEncoding=function(B){if(typeof B=="string"&&(B=B.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((B+"").toLowerCase())>-1))throw new y(B);return this._writableState.defaultEncoding=B,this},Object.defineProperty(_.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function A(R,B,Q){return!R.objectMode&&R.decodeStrings!==!1&&typeof B=="string"&&(B=a.from(B,Q)),B}Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function C(R,B,Q,te,ae,U){if(!Q){var V=A(B,te,ae);te!==V&&(Q=!0,ae="buffer",te=V)}var ne=B.objectMode?1:te.length;B.length+=ne;var fe=B.length<B.highWaterMark;if(fe||(B.needDrain=!0),B.writing||B.corked){var ye=B.lastBufferedRequest;B.lastBufferedRequest={chunk:te,encoding:ae,isBuf:Q,callback:U,next:null},ye?ye.next=B.lastBufferedRequest:B.bufferedRequest=B.lastBufferedRequest,B.bufferedRequestCount+=1}else D(R,B,!1,ne,te,ae,U);return fe}function D(R,B,Q,te,ae,U,V){B.writelen=te,B.writecb=V,B.writing=!0,B.sync=!0,B.destroyed?B.onwrite(new j("write")):Q?R._writev(ae,B.onwrite):R._write(ae,U,B.onwrite),B.sync=!1}function M(R,B,Q,te,ae){--B.pendingcb,Q?(Ve.nextTick(ae,te),Ve.nextTick(I,R,B),R._writableState.errorEmitted=!0,b(R,te)):(ae(te),R._writableState.errorEmitted=!0,b(R,te),I(R,B))}function L(R){R.writing=!1,R.writecb=null,R.length-=R.writelen,R.writelen=0}function z(R,B){var Q=R._writableState,te=Q.sync,ae=Q.writecb;if(typeof ae!="function")throw new x;if(L(Q),B)M(R,Q,te,B,ae);else{var U=W(Q)||R.destroyed;!U&&!Q.corked&&!Q.bufferProcessing&&Q.bufferedRequest&&Z(R,Q),te?Ve.nextTick(Y,R,Q,U,ae):Y(R,Q,U,ae)}}function Y(R,B,Q,te){Q||X(R,B),B.pendingcb--,te(),I(R,B)}function X(R,B){B.length===0&&B.needDrain&&(B.needDrain=!1,R.emit("drain"))}function Z(R,B){B.bufferProcessing=!0;var Q=B.bufferedRequest;if(R._writev&&Q&&Q.next){var te=B.bufferedRequestCount,ae=new Array(te),U=B.corkedRequestsFree;U.entry=Q;for(var V=0,ne=!0;Q;)ae[V]=Q,Q.isBuf||(ne=!1),Q=Q.next,V+=1;ae.allBuffers=ne,D(R,B,!0,B.length,ae,"",U.finish),B.pendingcb++,B.lastBufferedRequest=null,U.next?(B.corkedRequestsFree=U.next,U.next=null):B.corkedRequestsFree=new e(B),B.bufferedRequestCount=0}else{for(;Q;){var fe=Q.chunk,ye=Q.encoding,oe=Q.callback,be=B.objectMode?1:fe.length;if(D(R,B,!1,be,fe,ye,oe),Q=Q.next,B.bufferedRequestCount--,B.writing)break}Q===null&&(B.lastBufferedRequest=null)}B.bufferedRequest=Q,B.bufferProcessing=!1}_.prototype._write=function(R,B,Q){Q(new m("_write()"))},_.prototype._writev=null,_.prototype.end=function(R,B,Q){var te=this._writableState;return typeof R=="function"?(Q=R,R=null,B=null):typeof B=="function"&&(Q=B,B=null),R!=null&&this.write(R,B),te.corked&&(te.corked=1,this.uncork()),te.ending||$(this,te,Q),this},Object.defineProperty(_.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function W(R){return R.ending&&R.length===0&&R.bufferedRequest===null&&!R.finished&&!R.writing}function F(R,B){R._final(function(Q){B.pendingcb--,Q&&b(R,Q),B.prefinished=!0,R.emit("prefinish"),I(R,B)})}function q(R,B){!B.prefinished&&!B.finalCalled&&(typeof R._final=="function"&&!B.destroyed?(B.pendingcb++,B.finalCalled=!0,Ve.nextTick(F,R,B)):(B.prefinished=!0,R.emit("prefinish")))}function I(R,B){var Q=W(B);if(Q&&(q(R,B),B.pendingcb===0&&(B.finished=!0,R.emit("finish"),B.autoDestroy))){var te=R._readableState;(!te||te.autoDestroy&&te.endEmitted)&&R.destroy()}return Q}function $(R,B,Q){B.ending=!0,I(R,B),Q&&(B.finished?Ve.nextTick(Q):R.once("finish",Q)),B.ended=!0,R.writable=!1}function G(R,B,Q){var te=R.entry;for(R.entry=null;te;){var ae=te.callback;B.pendingcb--,ae(Q),te=te.next}B.corkedRequestsFree.next=R}return Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(B){this._writableState&&(this._writableState.destroyed=B)}}),_.prototype.destroy=c.destroy,_.prototype._undestroy=c.undestroy,_.prototype._destroy=function(R,B){B(R)},Cx}var Ax,X1;function lc(){if(X1)return Ax;X1=1;var e=Object.keys||function(d){var u=[];for(var h in d)u.push(h);return u};Ax=l;var t=rC(),s=eC();bc(l,t);for(var n=e(s.prototype),a=0;a<n.length;a++){var i=n[a];l.prototype[i]||(l.prototype[i]=s.prototype[i])}function l(d){if(!(this instanceof l))return new l(d);t.call(this,d),s.call(this,d),this.allowHalfOpen=!0,d&&(d.readable===!1&&(this.readable=!1),d.writable===!1&&(this.writable=!1),d.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",o)))}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function o(){this._writableState.ended||Ve.nextTick(c,this)}function c(d){d.end()}return Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(u){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=u,this._writableState.destroyed=u)}}),Ax}var Tx={},Z1;function J1(){if(Z1)return Tx;Z1=1;var e=g4.Buffer,t=e.isEncoding||function(v){switch(v=""+v,v&&v.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(v){if(!v)return"utf8";for(var g;;)switch(v){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return v;default:if(g)return;v=(""+v).toLowerCase(),g=!0}}function n(v){var g=s(v);if(typeof g!="string"&&(e.isEncoding===t||!t(v)))throw new Error("Unknown encoding: "+v);return g||v}Tx.StringDecoder=a;function a(v){this.encoding=n(v);var g;switch(this.encoding){case"utf16le":this.text=h,this.end=f,g=4;break;case"utf8":this.fillLast=c,g=4;break;case"base64":this.text=m,this.end=x,g=3;break;default:this.write=p,this.end=j;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(g)}a.prototype.write=function(v){if(v.length===0)return"";var g,y;if(this.lastNeed){if(g=this.fillLast(v),g===void 0)return"";y=this.lastNeed,this.lastNeed=0}else y=0;return y<v.length?g?g+this.text(v,y):this.text(v,y):g||""},a.prototype.end=u,a.prototype.text=d,a.prototype.fillLast=function(v){if(this.lastNeed<=v.length)return v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,v.length),this.lastNeed-=v.length};function i(v){return v<=127?0:v>>5===6?2:v>>4===14?3:v>>3===30?4:v>>6===2?-1:-2}function l(v,g,y){var b=g.length-1;if(b<y)return 0;var N=i(g[b]);return N>=0?(N>0&&(v.lastNeed=N-1),N):--b<y||N===-2?0:(N=i(g[b]),N>=0?(N>0&&(v.lastNeed=N-2),N):--b<y||N===-2?0:(N=i(g[b]),N>=0?(N>0&&(N===2?N=0:v.lastNeed=N-3),N):0))}function o(v,g,y){if((g[0]&192)!==128)return v.lastNeed=0,"";if(v.lastNeed>1&&g.length>1){if((g[1]&192)!==128)return v.lastNeed=1,"";if(v.lastNeed>2&&g.length>2&&(g[2]&192)!==128)return v.lastNeed=2,""}}function c(v){var g=this.lastTotal-this.lastNeed,y=o(this,v);if(y!==void 0)return y;if(this.lastNeed<=v.length)return v.copy(this.lastChar,g,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);v.copy(this.lastChar,g,0,v.length),this.lastNeed-=v.length}function d(v,g){var y=l(this,v,g);if(!this.lastNeed)return v.toString("utf8",g);this.lastTotal=y;var b=v.length-(y-this.lastNeed);return v.copy(this.lastChar,0,b),v.toString("utf8",g,b)}function u(v){var g=v&&v.length?this.write(v):"";return this.lastNeed?g+"":g}function h(v,g){if((v.length-g)%2===0){var y=v.toString("utf16le",g);if(y){var b=y.charCodeAt(y.length-1);if(b>=55296&&b<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1],y.slice(0,-1)}return y}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=v[v.length-1],v.toString("utf16le",g,v.length-1)}function f(v){var g=v&&v.length?this.write(v):"";if(this.lastNeed){var y=this.lastTotal-this.lastNeed;return g+this.lastChar.toString("utf16le",0,y)}return g}function m(v,g){var y=(v.length-g)%3;return y===0?v.toString("base64",g):(this.lastNeed=3-y,this.lastTotal=3,y===1?this.lastChar[0]=v[v.length-1]:(this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1]),v.toString("base64",g,v.length-y))}function x(v){var g=v&&v.length?this.write(v):"";return this.lastNeed?g+this.lastChar.toString("base64",0,3-this.lastNeed):g}function p(v){return v.toString(this.encoding)}function j(v){return v&&v.length?this.write(v):""}return Tx}var ew=Fl.codes.ERR_STREAM_PREMATURE_CLOSE;function g9(e){var t=!1;return function(){if(!t){t=!0;for(var s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];e.apply(this,n)}}}function y9(){}function b9(e){return e.setHeader&&typeof e.abort=="function"}function tC(e,t,s){if(typeof t=="function")return tC(e,null,t);t||(t={}),s=g9(s||y9);var n=t.readable||t.readable!==!1&&e.readable,a=t.writable||t.writable!==!1&&e.writable,i=function(){e.writable||o()},l=e._writableState&&e._writableState.finished,o=function(){a=!1,l=!0,n||s.call(e)},c=e._readableState&&e._readableState.endEmitted,d=function(){n=!1,c=!0,a||s.call(e)},u=function(x){s.call(e,x)},h=function(){var x;if(n&&!c)return(!e._readableState||!e._readableState.ended)&&(x=new ew),s.call(e,x);if(a&&!l)return(!e._writableState||!e._writableState.ended)&&(x=new ew),s.call(e,x)},f=function(){e.req.on("finish",o)};return b9(e)?(e.on("complete",o),e.on("abort",h),e.req?f():e.on("request",f)):a&&!e._writableState&&(e.on("end",i),e.on("close",i)),e.on("end",d),e.on("finish",o),t.error!==!1&&e.on("error",u),e.on("close",h),function(){e.removeListener("complete",o),e.removeListener("abort",h),e.removeListener("request",f),e.req&&e.req.removeListener("finish",o),e.removeListener("end",i),e.removeListener("close",i),e.removeListener("finish",o),e.removeListener("end",d),e.removeListener("error",u),e.removeListener("close",h)}}var dv=tC,Ox,tw;function v9(){if(tw)return Ox;tw=1;var e;function t(y,b,N){return b=s(b),b in y?Object.defineProperty(y,b,{value:N,enumerable:!0,configurable:!0,writable:!0}):y[b]=N,y}function s(y){var b=n(y,"string");return typeof b=="symbol"?b:String(b)}function n(y,b){if(typeof y!="object"||y===null)return y;var N=y[Symbol.toPrimitive];if(N!==void 0){var k=N.call(y,b);if(typeof k!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(y)}var a=dv,i=Symbol("lastResolve"),l=Symbol("lastReject"),o=Symbol("error"),c=Symbol("ended"),d=Symbol("lastPromise"),u=Symbol("handlePromise"),h=Symbol("stream");function f(y,b){return{value:y,done:b}}function m(y){var b=y[i];if(b!==null){var N=y[h].read();N!==null&&(y[d]=null,y[i]=null,y[l]=null,b(f(N,!1)))}}function x(y){Ve.nextTick(m,y)}function p(y,b){return function(N,k){y.then(function(){if(b[c]){N(f(void 0,!0));return}b[u](N,k)},k)}}var j=Object.getPrototypeOf(function(){}),v=Object.setPrototypeOf((e={get stream(){return this[h]},next:function(){var b=this,N=this[o];if(N!==null)return Promise.reject(N);if(this[c])return Promise.resolve(f(void 0,!0));if(this[h].destroyed)return new Promise(function(S,E){Ve.nextTick(function(){b[o]?E(b[o]):S(f(void 0,!0))})});var k=this[d],w;if(k)w=new Promise(p(k,this));else{var _=this[h].read();if(_!==null)return Promise.resolve(f(_,!1));w=new Promise(this[u])}return this[d]=w,w}},t(e,Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var b=this;return new Promise(function(N,k){b[h].destroy(null,function(w){if(w){k(w);return}N(f(void 0,!0))})})}),e),j),g=function(b){var N,k=Object.create(v,(N={},t(N,h,{value:b,writable:!0}),t(N,i,{value:null,writable:!0}),t(N,l,{value:null,writable:!0}),t(N,o,{value:null,writable:!0}),t(N,c,{value:b._readableState.endEmitted,writable:!0}),t(N,u,{value:function(_,S){var E=k[h].read();E?(k[d]=null,k[i]=null,k[l]=null,_(f(E,!1))):(k[i]=_,k[l]=S)},writable:!0}),N));return k[d]=null,a(b,function(w){if(w&&w.code!=="ERR_STREAM_PREMATURE_CLOSE"){var _=k[l];_!==null&&(k[d]=null,k[i]=null,k[l]=null,_(w)),k[o]=w;return}var S=k[i];S!==null&&(k[d]=null,k[i]=null,k[l]=null,S(f(void 0,!0))),k[c]=!0}),b.on("readable",x.bind(null,k)),k};return Ox=g,Ox}var Rx,rw;function j9(){return rw||(rw=1,Rx=function(){throw new Error("Readable.from is not available in the browser")}),Rx}var Px,sw;function rC(){if(sw)return Px;sw=1,Px=S;var e;S.ReadableState=_,k4.EventEmitter;var t=function(V,ne){return V.listeners(ne).length},s=E4,n=Ml.Buffer,a=(typeof kt<"u"?kt:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function i(U){return n.from(U)}function l(U){return n.isBuffer(U)||U instanceof a}var o=sv,c;o&&o.debuglog?c=o.debuglog("stream"):c=function(){};var d=n9(),u=X4,h=J4,f=h.getHighWaterMark,m=Fl.codes,x=m.ERR_INVALID_ARG_TYPE,p=m.ERR_STREAM_PUSH_AFTER_EOF,j=m.ERR_METHOD_NOT_IMPLEMENTED,v=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,g,y,b;bc(S,s);var N=u.errorOrDestroy,k=["error","close","destroy","pause","resume"];function w(U,V,ne){if(typeof U.prependListener=="function")return U.prependListener(V,ne);!U._events||!U._events[V]?U.on(V,ne):Array.isArray(U._events[V])?U._events[V].unshift(ne):U._events[V]=[ne,U._events[V]]}function _(U,V,ne){e=e||lc(),U=U||{},typeof ne!="boolean"&&(ne=V instanceof e),this.objectMode=!!U.objectMode,ne&&(this.objectMode=this.objectMode||!!U.readableObjectMode),this.highWaterMark=f(this,U,"readableHighWaterMark",ne),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=U.emitClose!==!1,this.autoDestroy=!!U.autoDestroy,this.destroyed=!1,this.defaultEncoding=U.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,U.encoding&&(g||(g=J1().StringDecoder),this.decoder=new g(U.encoding),this.encoding=U.encoding)}function S(U){if(e=e||lc(),!(this instanceof S))return new S(U);var V=this instanceof e;this._readableState=new _(U,this,V),this.readable=!0,U&&(typeof U.read=="function"&&(this._read=U.read),typeof U.destroy=="function"&&(this._destroy=U.destroy)),s.call(this)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(V){this._readableState&&(this._readableState.destroyed=V)}}),S.prototype.destroy=u.destroy,S.prototype._undestroy=u.undestroy,S.prototype._destroy=function(U,V){V(U)},S.prototype.push=function(U,V){var ne=this._readableState,fe;return ne.objectMode?fe=!0:typeof U=="string"&&(V=V||ne.defaultEncoding,V!==ne.encoding&&(U=n.from(U,V),V=""),fe=!0),E(this,U,V,!1,fe)},S.prototype.unshift=function(U){return E(this,U,null,!0,!1)};function E(U,V,ne,fe,ye){c("readableAddChunk",V);var oe=U._readableState;if(V===null)oe.reading=!1,z(U,oe);else{var be;if(ye||(be=C(oe,V)),be)N(U,be);else if(oe.objectMode||V&&V.length>0)if(typeof V!="string"&&!oe.objectMode&&Object.getPrototypeOf(V)!==n.prototype&&(V=i(V)),fe)oe.endEmitted?N(U,new v):A(U,oe,V,!0);else if(oe.ended)N(U,new p);else{if(oe.destroyed)return!1;oe.reading=!1,oe.decoder&&!ne?(V=oe.decoder.write(V),oe.objectMode||V.length!==0?A(U,oe,V,!1):Z(U,oe)):A(U,oe,V,!1)}else fe||(oe.reading=!1,Z(U,oe))}return!oe.ended&&(oe.length<oe.highWaterMark||oe.length===0)}function A(U,V,ne,fe){V.flowing&&V.length===0&&!V.sync?(V.awaitDrain=0,U.emit("data",ne)):(V.length+=V.objectMode?1:ne.length,fe?V.buffer.unshift(ne):V.buffer.push(ne),V.needReadable&&Y(U)),Z(U,V)}function C(U,V){var ne;return!l(V)&&typeof V!="string"&&V!==void 0&&!U.objectMode&&(ne=new x("chunk",["string","Buffer","Uint8Array"],V)),ne}S.prototype.isPaused=function(){return this._readableState.flowing===!1},S.prototype.setEncoding=function(U){g||(g=J1().StringDecoder);var V=new g(U);this._readableState.decoder=V,this._readableState.encoding=this._readableState.decoder.encoding;for(var ne=this._readableState.buffer.head,fe="";ne!==null;)fe+=V.write(ne.data),ne=ne.next;return this._readableState.buffer.clear(),fe!==""&&this._readableState.buffer.push(fe),this._readableState.length=fe.length,this};var D=1073741824;function M(U){return U>=D?U=D:(U--,U|=U>>>1,U|=U>>>2,U|=U>>>4,U|=U>>>8,U|=U>>>16,U++),U}function L(U,V){return U<=0||V.length===0&&V.ended?0:V.objectMode?1:U!==U?V.flowing&&V.length?V.buffer.head.data.length:V.length:(U>V.highWaterMark&&(V.highWaterMark=M(U)),U<=V.length?U:V.ended?V.length:(V.needReadable=!0,0))}S.prototype.read=function(U){c("read",U),U=parseInt(U,10);var V=this._readableState,ne=U;if(U!==0&&(V.emittedReadable=!1),U===0&&V.needReadable&&((V.highWaterMark!==0?V.length>=V.highWaterMark:V.length>0)||V.ended))return c("read: emitReadable",V.length,V.ended),V.length===0&&V.ended?Q(this):Y(this),null;if(U=L(U,V),U===0&&V.ended)return V.length===0&&Q(this),null;var fe=V.needReadable;c("need readable",fe),(V.length===0||V.length-U<V.highWaterMark)&&(fe=!0,c("length less than watermark",fe)),V.ended||V.reading?(fe=!1,c("reading or ended",fe)):fe&&(c("do read"),V.reading=!0,V.sync=!0,V.length===0&&(V.needReadable=!0),this._read(V.highWaterMark),V.sync=!1,V.reading||(U=L(ne,V)));var ye;return U>0?ye=B(U,V):ye=null,ye===null?(V.needReadable=V.length<=V.highWaterMark,U=0):(V.length-=U,V.awaitDrain=0),V.length===0&&(V.ended||(V.needReadable=!0),ne!==U&&V.ended&&Q(this)),ye!==null&&this.emit("data",ye),ye};function z(U,V){if(c("onEofChunk"),!V.ended){if(V.decoder){var ne=V.decoder.end();ne&&ne.length&&(V.buffer.push(ne),V.length+=V.objectMode?1:ne.length)}V.ended=!0,V.sync?Y(U):(V.needReadable=!1,V.emittedReadable||(V.emittedReadable=!0,X(U)))}}function Y(U){var V=U._readableState;c("emitReadable",V.needReadable,V.emittedReadable),V.needReadable=!1,V.emittedReadable||(c("emitReadable",V.flowing),V.emittedReadable=!0,Ve.nextTick(X,U))}function X(U){var V=U._readableState;c("emitReadable_",V.destroyed,V.length,V.ended),!V.destroyed&&(V.length||V.ended)&&(U.emit("readable"),V.emittedReadable=!1),V.needReadable=!V.flowing&&!V.ended&&V.length<=V.highWaterMark,R(U)}function Z(U,V){V.readingMore||(V.readingMore=!0,Ve.nextTick(W,U,V))}function W(U,V){for(;!V.reading&&!V.ended&&(V.length<V.highWaterMark||V.flowing&&V.length===0);){var ne=V.length;if(c("maybeReadMore read 0"),U.read(0),ne===V.length)break}V.readingMore=!1}S.prototype._read=function(U){N(this,new j("_read()"))},S.prototype.pipe=function(U,V){var ne=this,fe=this._readableState;switch(fe.pipesCount){case 0:fe.pipes=U;break;case 1:fe.pipes=[fe.pipes,U];break;default:fe.pipes.push(U);break}fe.pipesCount+=1,c("pipe count=%d opts=%j",fe.pipesCount,V);var ye=(!V||V.end!==!1)&&U!==Ve.stdout&&U!==Ve.stderr,oe=ye?ce:Gt;fe.endEmitted?Ve.nextTick(oe):ne.once("end",oe),U.on("unpipe",be);function be(nr,it){c("onunpipe"),nr===ne&&it&&it.hasUnpiped===!1&&(it.hasUnpiped=!0,we())}function ce(){c("onend"),U.end()}var re=F(ne);U.on("drain",re);var ge=!1;function we(){c("cleanup"),U.removeListener("close",Re),U.removeListener("finish",Fe),U.removeListener("drain",re),U.removeListener("error",de),U.removeListener("unpipe",be),ne.removeListener("end",ce),ne.removeListener("end",Gt),ne.removeListener("data",pe),ge=!0,fe.awaitDrain&&(!U._writableState||U._writableState.needDrain)&&re()}ne.on("data",pe);function pe(nr){c("ondata");var it=U.write(nr);c("dest.write",it),it===!1&&((fe.pipesCount===1&&fe.pipes===U||fe.pipesCount>1&&ae(fe.pipes,U)!==-1)&&!ge&&(c("false write response, pause",fe.awaitDrain),fe.awaitDrain++),ne.pause())}function de(nr){c("onerror",nr),Gt(),U.removeListener("error",de),t(U,"error")===0&&N(U,nr)}w(U,"error",de);function Re(){U.removeListener("finish",Fe),Gt()}U.once("close",Re);function Fe(){c("onfinish"),U.removeListener("close",Re),Gt()}U.once("finish",Fe);function Gt(){c("unpipe"),ne.unpipe(U)}return U.emit("pipe",ne),fe.flowing||(c("pipe resume"),ne.resume()),U};function F(U){return function(){var ne=U._readableState;c("pipeOnDrain",ne.awaitDrain),ne.awaitDrain&&ne.awaitDrain--,ne.awaitDrain===0&&t(U,"data")&&(ne.flowing=!0,R(U))}}S.prototype.unpipe=function(U){var V=this._readableState,ne={hasUnpiped:!1};if(V.pipesCount===0)return this;if(V.pipesCount===1)return U&&U!==V.pipes?this:(U||(U=V.pipes),V.pipes=null,V.pipesCount=0,V.flowing=!1,U&&U.emit("unpipe",this,ne),this);if(!U){var fe=V.pipes,ye=V.pipesCount;V.pipes=null,V.pipesCount=0,V.flowing=!1;for(var oe=0;oe<ye;oe++)fe[oe].emit("unpipe",this,{hasUnpiped:!1});return this}var be=ae(V.pipes,U);return be===-1?this:(V.pipes.splice(be,1),V.pipesCount-=1,V.pipesCount===1&&(V.pipes=V.pipes[0]),U.emit("unpipe",this,ne),this)},S.prototype.on=function(U,V){var ne=s.prototype.on.call(this,U,V),fe=this._readableState;return U==="data"?(fe.readableListening=this.listenerCount("readable")>0,fe.flowing!==!1&&this.resume()):U==="readable"&&!fe.endEmitted&&!fe.readableListening&&(fe.readableListening=fe.needReadable=!0,fe.flowing=!1,fe.emittedReadable=!1,c("on readable",fe.length,fe.reading),fe.length?Y(this):fe.reading||Ve.nextTick(I,this)),ne},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(U,V){var ne=s.prototype.removeListener.call(this,U,V);return U==="readable"&&Ve.nextTick(q,this),ne},S.prototype.removeAllListeners=function(U){var V=s.prototype.removeAllListeners.apply(this,arguments);return(U==="readable"||U===void 0)&&Ve.nextTick(q,this),V};function q(U){var V=U._readableState;V.readableListening=U.listenerCount("readable")>0,V.resumeScheduled&&!V.paused?V.flowing=!0:U.listenerCount("data")>0&&U.resume()}function I(U){c("readable nexttick read 0"),U.read(0)}S.prototype.resume=function(){var U=this._readableState;return U.flowing||(c("resume"),U.flowing=!U.readableListening,$(this,U)),U.paused=!1,this};function $(U,V){V.resumeScheduled||(V.resumeScheduled=!0,Ve.nextTick(G,U,V))}function G(U,V){c("resume",V.reading),V.reading||U.read(0),V.resumeScheduled=!1,U.emit("resume"),R(U),V.flowing&&!V.reading&&U.read(0)}S.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function R(U){var V=U._readableState;for(c("flow",V.flowing);V.flowing&&U.read()!==null;);}S.prototype.wrap=function(U){var V=this,ne=this._readableState,fe=!1;U.on("end",function(){if(c("wrapped end"),ne.decoder&&!ne.ended){var be=ne.decoder.end();be&&be.length&&V.push(be)}V.push(null)}),U.on("data",function(be){if(c("wrapped data"),ne.decoder&&(be=ne.decoder.write(be)),!(ne.objectMode&&be==null)&&!(!ne.objectMode&&(!be||!be.length))){var ce=V.push(be);ce||(fe=!0,U.pause())}});for(var ye in U)this[ye]===void 0&&typeof U[ye]=="function"&&(this[ye]=function(ce){return function(){return U[ce].apply(U,arguments)}}(ye));for(var oe=0;oe<k.length;oe++)U.on(k[oe],this.emit.bind(this,k[oe]));return this._read=function(be){c("wrapped _read",be),fe&&(fe=!1,U.resume())},this},typeof Symbol=="function"&&(S.prototype[Symbol.asyncIterator]=function(){return y===void 0&&(y=v9()),y(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(V){this._readableState&&(this._readableState.flowing=V)}}),S._fromList=B,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function B(U,V){if(V.length===0)return null;var ne;return V.objectMode?ne=V.buffer.shift():!U||U>=V.length?(V.decoder?ne=V.buffer.join(""):V.buffer.length===1?ne=V.buffer.first():ne=V.buffer.concat(V.length),V.buffer.clear()):ne=V.buffer.consume(U,V.decoder),ne}function Q(U){var V=U._readableState;c("endReadable",V.endEmitted),V.endEmitted||(V.ended=!0,Ve.nextTick(te,V,U))}function te(U,V){if(c("endReadableNT",U.endEmitted,U.length),!U.endEmitted&&U.length===0&&(U.endEmitted=!0,V.readable=!1,V.emit("end"),U.autoDestroy)){var ne=V._writableState;(!ne||ne.autoDestroy&&ne.finished)&&V.destroy()}}typeof Symbol=="function"&&(S.from=function(U,V){return b===void 0&&(b=j9()),b(S,U,V)});function ae(U,V){for(var ne=0,fe=U.length;ne<fe;ne++)if(U[ne]===V)return ne;return-1}return Px}var sC=Na,Gm=Fl.codes,N9=Gm.ERR_METHOD_NOT_IMPLEMENTED,w9=Gm.ERR_MULTIPLE_CALLBACK,_9=Gm.ERR_TRANSFORM_ALREADY_TRANSFORMING,S9=Gm.ERR_TRANSFORM_WITH_LENGTH_0,Km=lc();bc(Na,Km);function k9(e,t){var s=this._transformState;s.transforming=!1;var n=s.writecb;if(n===null)return this.emit("error",new w9);s.writechunk=null,s.writecb=null,t!=null&&this.push(t),n(e);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function Na(e){if(!(this instanceof Na))return new Na(e);Km.call(this,e),this._transformState={afterTransform:k9.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",E9)}function E9(){var e=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(t,s){nw(e,t,s)}):nw(this,null,null)}Na.prototype.push=function(e,t){return this._transformState.needTransform=!1,Km.prototype.push.call(this,e,t)};Na.prototype._transform=function(e,t,s){s(new N9("_transform()"))};Na.prototype._write=function(e,t,s){var n=this._transformState;if(n.writecb=s,n.writechunk=e,n.writeencoding=t,!n.transforming){var a=this._readableState;(n.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}};Na.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};Na.prototype._destroy=function(e,t){Km.prototype._destroy.call(this,e,function(s){t(s)})};function nw(e,t,s){if(t)return e.emit("error",t);if(s!=null&&e.push(s),e._writableState.length)throw new S9;if(e._transformState.transforming)throw new _9;return e.push(null)}var C9=nu,nC=sC;bc(nu,nC);function nu(e){if(!(this instanceof nu))return new nu(e);nC.call(this,e)}nu.prototype._transform=function(e,t,s){s(null,e)};var Mx;function A9(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var aC=Fl.codes,T9=aC.ERR_MISSING_ARGS,O9=aC.ERR_STREAM_DESTROYED;function aw(e){if(e)throw e}function R9(e){return e.setHeader&&typeof e.abort=="function"}function P9(e,t,s,n){n=A9(n);var a=!1;e.on("close",function(){a=!0}),Mx===void 0&&(Mx=dv),Mx(e,{readable:t,writable:s},function(l){if(l)return n(l);a=!0,n()});var i=!1;return function(l){if(!a&&!i){if(i=!0,R9(e))return e.abort();if(typeof e.destroy=="function")return e.destroy();n(l||new O9("pipe"))}}}function iw(e){e()}function M9(e,t){return e.pipe(t)}function D9(e){return!e.length||typeof e[e.length-1]!="function"?aw:e.pop()}function L9(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];var n=D9(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new T9("streams");var a,i=t.map(function(l,o){var c=o<t.length-1,d=o>0;return P9(l,c,d,function(u){a||(a=u),u&&i.forEach(iw),!c&&(i.forEach(iw),n(a))})});return t.reduce(M9)}var F9=L9;(function(e,t){t=e.exports=rC(),t.Stream=t,t.Readable=t,t.Writable=eC(),t.Duplex=lc(),t.Transform=sC,t.PassThrough=C9,t.finished=dv,t.pipeline=F9})(Wg,Wg.exports);var I9=Wg.exports;/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let lw;var B9=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:kt):e=>(lw||(lw=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0));function ow(e,t){for(const s in t)Object.defineProperty(e,s,{value:t[s],enumerable:!0,configurable:!0});return e}function q9(e,t,s){if(!e||typeof e=="string")throw new TypeError("Please pass an Error to err-code");s||(s={}),typeof t=="object"&&(s=t,t=""),t&&(s.code=t);try{return ow(e,s)}catch{s.message=e.message,s.stack=e.stack;const a=function(){};return a.prototype=Object.create(Object.getPrototypeOf(e)),ow(new a,s)}}var $9=q9;/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const U9=v8("simple-peer"),iC=j8,cw=k8,z9=I9,Dx=B9,Ze=$9,{Buffer:V9}=Ml,Lx=64*1024,H9=5*1e3,W9=5*1e3;function dw(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}function Y9(e){console.warn(e)}class Ol extends z9.Duplex{constructor(t){if(t=Object.assign({allowHalfOpen:!1},t),super(t),this._id=cw(4).toString("hex").slice(0,7),this._debug("new peer %o",t),this.channelName=t.initiator?t.channelName||cw(20).toString("hex"):null,this.initiator=t.initiator||!1,this.channelConfig=t.channelConfig||Ol.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},Ol.config,t.config),this.offerOptions=t.offerOptions||{},this.answerOptions=t.answerOptions||{},this.sdpTransform=t.sdpTransform||(s=>s),this.streams=t.streams||(t.stream?[t.stream]:[]),this.trickle=t.trickle!==void 0?t.trickle:!0,this.allowHalfTrickle=t.allowHalfTrickle!==void 0?t.allowHalfTrickle:!1,this.iceCompleteTimeout=t.iceCompleteTimeout||H9,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=t.wrtc&&typeof t.wrtc=="object"?t.wrtc:iC(),!this._wrtc)throw Ze(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(s){this.destroy(Ze(s,"ERR_PC_CONSTRUCTOR"));return}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=s=>{this._onIceCandidate(s)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(s=>{this.destroy(Ze(s,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=s=>{this._setupData(s)},this.streams&&this.streams.forEach(s=>{this.addStream(s)}),this._pc.ontrack=s=>{this._onTrack(s)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(t){if(!this.destroying){if(this.destroyed)throw Ze(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof t=="string")try{t=JSON.parse(t)}catch{t={}}this._debug("signal()"),t.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),t.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(t.transceiverRequest.kind,t.transceiverRequest.init)),t.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(t.candidate):this._pendingCandidates.push(t.candidate)),t.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(t)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(s=>{this._addIceCandidate(s)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(s=>{this.destroy(Ze(s,"ERR_SET_REMOTE_DESCRIPTION"))}),!t.sdp&&!t.candidate&&!t.renegotiate&&!t.transceiverRequest&&this.destroy(Ze(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(t){const s=new this._wrtc.RTCIceCandidate(t);this._pc.addIceCandidate(s).catch(n=>{!s.address||s.address.endsWith(".local")?Y9("Ignoring unsupported ICE candidate."):this.destroy(Ze(n,"ERR_ADD_ICE_CANDIDATE"))})}send(t){if(!this.destroying){if(this.destroyed)throw Ze(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(t)}}addTransceiver(t,s){if(!this.destroying){if(this.destroyed)throw Ze(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(t,s),this._needsNegotiation()}catch(n){this.destroy(Ze(n,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:t,init:s}})}}addStream(t){if(!this.destroying){if(this.destroyed)throw Ze(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),t.getTracks().forEach(s=>{this.addTrack(s,t)})}}addTrack(t,s){if(this.destroying)return;if(this.destroyed)throw Ze(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const n=this._senderMap.get(t)||new Map;let a=n.get(s);if(!a)a=this._pc.addTrack(t,s),n.set(s,a),this._senderMap.set(t,n),this._needsNegotiation();else throw a.removed?Ze(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):Ze(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(t,s,n){if(this.destroying)return;if(this.destroyed)throw Ze(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const a=this._senderMap.get(t),i=a?a.get(n):null;if(!i)throw Ze(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");s&&this._senderMap.set(s,a),i.replaceTrack!=null?i.replaceTrack(s):this.destroy(Ze(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(t,s){if(this.destroying)return;if(this.destroyed)throw Ze(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const n=this._senderMap.get(t),a=n?n.get(s):null;if(!a)throw Ze(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{a.removed=!0,this._pc.removeTrack(a)}catch(i){i.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(a):this.destroy(Ze(i,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(t){if(!this.destroying){if(this.destroyed)throw Ze(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),t.getTracks().forEach(s=>{this.removeTrack(s,t)})}}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,Dx(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw Ze(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(t){this._destroy(t,()=>{})}_destroy(t,s){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",t&&(t.message||t)),Dx(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",t&&(t.message||t)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,t&&this.emit("error",t),this.emit("close"),s()}))}_setupData(t){if(!t.channel)return this.destroy(Ze(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=t.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=Lx),this.channelName=this._channel.label,this._channel.onmessage=n=>{this._onChannelMessage(n)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=n=>{const a=n.error instanceof Error?n.error:new Error(`Datachannel error: ${n.message} ${n.filename}:${n.lineno}:${n.colno}`);this.destroy(Ze(a,"ERR_DATA_CHANNEL"))};let s=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(s&&this._onChannelClose(),s=!0):s=!1},W9)}_read(){}_write(t,s,n){if(this.destroyed)return n(Ze(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(t)}catch(a){return this.destroy(Ze(a,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>Lx?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=t,this._cb=n}_onFinish(){if(this.destroyed)return;const t=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?t():this.once("connect",t)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(t=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(t.sdp=dw(t.sdp)),t.sdp=this.sdpTransform(t.sdp);const s=()=>{if(this.destroyed)return;const i=this._pc.localDescription||t;this._debug("signal"),this.emit("signal",{type:i.type,sdp:i.sdp})},n=()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?s():this.once("_iceComplete",s))},a=i=>{this.destroy(Ze(i,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(t).then(n).catch(a)}).catch(t=>{this.destroy(Ze(t,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(t=>{!t.mid&&t.sender.track&&!t.requested&&(t.requested=!0,this.addTransceiver(t.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(t=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(t.sdp=dw(t.sdp)),t.sdp=this.sdpTransform(t.sdp);const s=()=>{if(this.destroyed)return;const i=this._pc.localDescription||t;this._debug("signal"),this.emit("signal",{type:i.type,sdp:i.sdp}),this.initiator||this._requestMissingTransceivers()},n=()=>{this.destroyed||(this.trickle||this._iceComplete?s():this.once("_iceComplete",s))},a=i=>{this.destroy(Ze(i,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(t).then(n).catch(a)}).catch(t=>{this.destroy(Ze(t,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(Ze(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const t=this._pc.iceConnectionState,s=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",t,s),this.emit("iceStateChange",t,s),(t==="connected"||t==="completed")&&(this._pcReady=!0,this._maybeReady()),t==="failed"&&this.destroy(Ze(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),t==="closed"&&this.destroy(Ze(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(t){const s=n=>(Object.prototype.toString.call(n.values)==="[object Array]"&&n.values.forEach(a=>{Object.assign(n,a)}),n);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(n=>{const a=[];n.forEach(i=>{a.push(s(i))}),t(null,a)},n=>t(n)):this._pc.getStats.length>0?this._pc.getStats(n=>{if(this.destroyed)return;const a=[];n.result().forEach(i=>{const l={};i.names().forEach(o=>{l[o]=i.stat(o)}),l.id=i.id,l.type=i.type,l.timestamp=i.timestamp,a.push(s(l))}),t(null,a)},n=>t(n)):t(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const t=()=>{this.destroyed||this.getStats((s,n)=>{if(this.destroyed)return;s&&(n=[]);const a={},i={},l={};let o=!1;n.forEach(d=>{(d.type==="remotecandidate"||d.type==="remote-candidate")&&(a[d.id]=d),(d.type==="localcandidate"||d.type==="local-candidate")&&(i[d.id]=d),(d.type==="candidatepair"||d.type==="candidate-pair")&&(l[d.id]=d)});const c=d=>{o=!0;let u=i[d.localCandidateId];u&&(u.ip||u.address)?(this.localAddress=u.ip||u.address,this.localPort=Number(u.port)):u&&u.ipAddress?(this.localAddress=u.ipAddress,this.localPort=Number(u.portNumber)):typeof d.googLocalAddress=="string"&&(u=d.googLocalAddress.split(":"),this.localAddress=u[0],this.localPort=Number(u[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let h=a[d.remoteCandidateId];h&&(h.ip||h.address)?(this.remoteAddress=h.ip||h.address,this.remotePort=Number(h.port)):h&&h.ipAddress?(this.remoteAddress=h.ipAddress,this.remotePort=Number(h.portNumber)):typeof d.googRemoteAddress=="string"&&(h=d.googRemoteAddress.split(":"),this.remoteAddress=h[0],this.remotePort=Number(h[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(n.forEach(d=>{d.type==="transport"&&d.selectedCandidatePairId&&c(l[d.selectedCandidatePairId]),(d.type==="googCandidatePair"&&d.googActiveConnection==="true"||(d.type==="candidatepair"||d.type==="candidate-pair")&&d.selected)&&c(d)}),!o&&(!Object.keys(l).length||Object.keys(i).length)){setTimeout(t,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(u){return this.destroy(Ze(u,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const d=this._cb;this._cb=null,d(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};t()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>Lx||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(t=>{this._pc.removeTrack(t),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(t){this.destroyed||(t.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:t.candidate.candidate,sdpMLineIndex:t.candidate.sdpMLineIndex,sdpMid:t.candidate.sdpMid}}):!t.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),t.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(t){if(this.destroyed)return;let s=t.data;s instanceof ArrayBuffer&&(s=V9.from(s)),this.push(s)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const t=this._cb;this._cb=null,t(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(t){this.destroyed||t.streams.forEach(s=>{this._debug("on track"),this.emit("track",t.track,s),this._remoteTracks.push({track:t.track,stream:s}),!this._remoteStreams.some(n=>n.id===s.id)&&(this._remoteStreams.push(s),Dx(()=>{this._debug("on stream"),this.emit("stream",s)}))})}_debug(){const t=[].slice.call(arguments);t[0]="["+this._id+"] "+t[0],U9.apply(null,t)}}Ol.WEBRTC_SUPPORT=!!iC();Ol.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"};Ol.channelConfig={};var G9=Ol;const uw=om(G9),K9=({isOpen:e,onClose:t,callerData:s,isIncomingCall:n,userToCall:a,onCallEnded:i,isAudioOnly:l=!1})=>{const o=Ie(vs),[c,d]=O.useState(null),[u,h]=O.useState(null),[f,m]=O.useState(!1),[x,p]=O.useState(!1),[j,v]=O.useState("idle"),[g,y]=O.useState(!1),[b,N]=O.useState(l),[k,w]=O.useState(0),[_,S]=O.useState("good"),E=O.useRef(),A=O.useRef(),C=O.useRef(),D=O.useRef(),M=O.useRef();O.useEffect(()=>{if(!e)return;if(v(n?"ringing":"connecting"),n&&!f){const q=new(window.AudioContext||window.webkitAudioContext),I=()=>{const G=q.createOscillator(),R=q.createGain();G.connect(R),R.connect(q.destination),G.frequency.value=440,R.gain.setValueAtTime(.3,q.currentTime),R.gain.exponentialRampToValueAtTime(.01,q.currentTime+.5),G.start(q.currentTime),G.stop(q.currentTime+.5)},$=setInterval(I,2e3);I(),D.current=$}const F={video:l?!1:{width:{ideal:1280},height:{ideal:720},facingMode:"user"},audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}};if(console.log(" Requesting media with constraints:",F),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){console.error(" getUserMedia not supported");const q=window.location.protocol,I=window.location.hostname;let $="Camera/microphone access not available.";q==="http:"&&I!=="localhost"&&I!=="127.0.0.1"&&($=` Video/audio calls require HTTPS! Please use:
 localhost (http://localhost:5173)
 HTTPS connection
 or enable camera permissions in browser settings`),K.error($),t();return}return navigator.mediaDevices.getUserMedia(F).then(q=>{console.log(" Got local stream:",{id:q.id,audioTracks:q.getAudioTracks().length,videoTracks:q.getVideoTracks().length}),d(q),E.current&&(E.current.srcObject=q)}).catch(q=>{console.error(" Failed to get media stream:",q),K.error(l?"Could not access microphone":"Could not access camera or microphone"),t()}),nt.onCallEnded(()=>{p(!0),v("ended"),z(!1),K.success("Call ended")}),()=>{nt.removeListener("call_accepted"),nt.removeListener("call_ended"),nt.removeListener("ice_candidate"),c&&c.getTracks().forEach(q=>q.stop()),D.current&&clearInterval(D.current),M.current&&clearInterval(M.current),C.current&&!C.current.destroyed&&C.current.destroy()}},[e]),O.useEffect(()=>{if(e&&!n&&c&&a){console.log(" Initiating call as caller"),v("connecting");const F=new uw({initiator:!0,trickle:!0,stream:c,config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"turn:openrelay.metered.ca:80",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:a.relay.metered.ca:443",username:"87c4d050e52ff083f0c8694e",credential:"sBUFLFd7optT7W8q"}]}});F.on("signal",q=>{var I;if(q.type==="offer"){const $=o!=null&&o.first_name&&(o!=null&&o.last_name)?`${o.first_name} ${o.last_name}`:((I=o==null?void 0:o.email)==null?void 0:I.split("@")[0])||"Unknown";console.log(" Sending call offer to:",a.user_id||a.id),nt.callUser({userToCall:a.user_id||a.id,signalData:q,from:o.id,name:$,isAudioOnly:l})}else q.candidate&&nt.sendIceCandidate({to:a.user_id||a.id,candidate:q})}),F.on("stream",q=>{console.log(" Received REMOTE stream (caller side):",{id:q.id,audioTracks:q.getAudioTracks().length,videoTracks:q.getVideoTracks().length}),h(q),A.current&&(A.current.srcObject=q,A.current.play().catch(I=>console.error("Error playing remote video:",I)))}),F.on("connect",()=>{console.log(" Peer connected (caller)"),v("connected"),S("good")}),F.on("error",q=>{console.error(" Peer error (caller):",q),K.error("Connection error: "+q.message),S("poor")}),F._pc&&(F._pc.oniceconnectionstatechange=()=>{switch(console.log(" ICE state (caller):",F._pc.iceConnectionState),F._pc.iceConnectionState){case"connected":case"completed":S("good");break;case"checking":S("fair");break;case"failed":case"disconnected":S("poor"),K.error("Connection failed");break}}),nt.onCallAccepted(q=>{console.log(" Call accepted, signaling answer"),m(!0),v("connected"),F.signal(q)}),nt.onIceCandidate(q=>{q.candidate&&C.current&&!C.current.destroyed&&C.current.signal(q.candidate)}),C.current=F}return()=>{nt.removeListener("ice_candidate")}},[e,n,c,a]),O.useEffect(()=>{j==="connected"&&!M.current&&(M.current=setInterval(()=>{w(F=>F+1)},1e3))},[j]);const L=()=>{if(console.log(" Answering call"),m(!0),v("connecting"),D.current&&clearInterval(D.current),!c){console.error(" No local stream when answering"),K.error("Could not access microphone");return}const F=new uw({initiator:!1,trickle:!0,stream:c,config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"turn:openrelay.metered.ca:80",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:a.relay.metered.ca:443",username:"87c4d050e52ff083f0c8694e",credential:"sBUFLFd7optT7W8q"}]}});F.on("signal",q=>{q.type==="answer"?nt.answerCall({signal:q,to:s.from}):q.candidate&&nt.sendIceCandidate({to:s.from,candidate:q})}),F.on("stream",q=>{console.log(" Received REMOTE stream (answerer side):",{id:q.id,audioTracks:q.getAudioTracks().length,videoTracks:q.getVideoTracks().length}),h(q),A.current&&(A.current.srcObject=q,A.current.play().catch(I=>console.error("Error playing remote video:",I)))}),F.on("connect",()=>{console.log(" Peer connected (answerer)"),v("connected"),S("good")}),F.on("error",q=>{console.error(" Peer error (answerer):",q),K.error("Connection error: "+q.message)}),F._pc&&(F._pc.oniceconnectionstatechange=()=>{switch(console.log(" ICE state (answerer):",F._pc.iceConnectionState),F._pc.iceConnectionState){case"connected":case"completed":S("good"),v("connected");break;case"checking":S("fair");break;case"failed":case"disconnected":S("poor"),K.error("Connection failed");break}}),nt.onIceCandidate(q=>{q.candidate&&C.current&&!C.current.destroyed&&C.current.signal(q.candidate)}),F.signal(s.signal),C.current=F},z=(F=!0)=>{if(p(!0),v("ended"),C.current&&C.current.destroy(),c&&c.getTracks().forEach(q=>q.stop()),D.current&&clearInterval(D.current),M.current&&clearInterval(M.current),F){const q=n?s.from:(a==null?void 0:a.user_id)||(a==null?void 0:a.id);q&&nt.endCall({to:q})}i(),t()},Y=()=>{if(c&&c.getAudioTracks().length>0){const F=c.getAudioTracks()[0];F.enabled=!F.enabled,y(!F.enabled)}},X=()=>{if(c&&c.getVideoTracks().length>0){const F=c.getVideoTracks()[0];F.enabled=!F.enabled,N(!F.enabled)}},Z=F=>{const q=Math.floor(F/60),I=F%60;return`${q.toString().padStart(2,"0")}:${I.toString().padStart(2,"0")}`},W=()=>{const F=n?s==null?void 0:s.name:a==null?void 0:a.name;return j==="ringing"&&n?`Incoming ${l?"audio":"video"} call from ${F}...`:j==="connecting"?`Connecting to ${F}...`:j==="connected"?`${l?"Audio":"Video"} call with ${F}`:`Call with ${F}`};return e?r.jsxs("div",{className:"fixed inset-0 z-50 bg-gray-900",children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 bg-gradient-to-b from-black/60 to-transparent p-4 z-10",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"text-white",children:[r.jsx("h2",{className:"text-lg font-semibold",children:W()}),r.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[j==="connected"&&r.jsx("span",{className:"text-sm text-gray-300",children:Z(k)}),j==="connected"&&r.jsxs("div",{className:"flex items-center gap-1",children:[_==="good"?r.jsx(WN,{className:"w-4 h-4 text-green-400"}):_==="fair"?r.jsx(WN,{className:"w-4 h-4 text-yellow-400"}):r.jsx(aD,{className:"w-4 h-4 text-red-400"}),r.jsx("span",{className:"text-xs text-gray-400 capitalize",children:_})]})]})]}),r.jsx("button",{onClick:()=>z(!0),className:"p-2 bg-white/10 hover:bg-white/20 backdrop-blur-sm rounded-full transition-colors",children:r.jsx(qr,{className:"w-5 h-5 text-white"})})]})}),r.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:l?r.jsxs("div",{className:"flex flex-col items-center justify-center space-y-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:r.jsx(tt,{className:"w-16 h-16 text-white"})}),j==="connected"&&r.jsx("div",{className:"absolute -inset-4 rounded-full border-4 border-blue-400/30 animate-pulse"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"text-2xl font-semibold text-white",children:n?s==null?void 0:s.name:a==null?void 0:a.name}),r.jsxs("p",{className:"text-gray-400 mt-2",children:[j==="ringing"&&n&&"Incoming audio call...",j==="connecting"&&"Connecting...",j==="connected"&&"Audio call"]})]}),u&&r.jsx("audio",{ref:A,autoPlay:!0,playsInline:!0,className:"hidden"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"relative w-full h-full bg-gray-800",children:[u&&j==="connected"?r.jsx("video",{ref:A,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}):r.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center",children:[r.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center mb-4",children:r.jsx(tt,{className:"w-12 h-12 text-white"})}),r.jsxs("p",{className:"text-white text-lg",children:[j==="ringing"&&n&&"Incoming call...",j==="connecting"&&"Connecting...",j==="connected"&&"Waiting for video..."]})]}),u&&r.jsx("div",{className:"absolute bottom-4 left-4 bg-black/50 backdrop-blur-sm px-3 py-1.5 rounded-full",children:r.jsx("span",{className:"text-white text sm font-medium",children:n?s==null?void 0:s.name:a==null?void 0:a.name})})]}),c&&r.jsxs("div",{className:"absolute top-20 right-4 w-40 h-56 bg-gray-800 rounded-lg overflow-hidden shadow-2xl border-2 border-white/20",children:[b?r.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-700",children:r.jsx(HN,{className:"w-8 h-8 text-gray-400"})}):r.jsx("video",{ref:E,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover transform scale-x-[-1]"}),r.jsx("div",{className:"absolute bottom-2 left-2 bg-black/50 backdrop-blur-sm px-2 py-1 rounded",children:r.jsx("span",{className:"text-white text-xs",children:"You"})})]})]})}),r.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-6 z-10",children:r.jsxs("div",{className:"flex items-center justify-center gap-4",children:[r.jsx("button",{onClick:Y,className:`p-4 rounded-full transition-all ${g?"bg-red-500 hover:bg-red-600":"bg-white/10 hover:bg-white/20 backdrop-blur-sm"}`,title:g?"Unmute":"Mute",children:g?r.jsx(GM,{className:"w-6 h-6 text-white"}):r.jsx(KM,{className:"w-6 h-6 text-white"})}),!l&&r.jsx("button",{onClick:X,className:`p-4 rounded-full transition-all ${b?"bg-red-500 hover:bg-red-600":"bg-white/10 hover:bg-white/20 backdrop-blur-sm"}`,title:b?"Turn on camera":"Turn off camera",children:b?r.jsx(HN,{className:"w-6 h-6 text-white"}):r.jsx(Wk,{className:"w-6 h-6 text-white"})}),r.jsx("button",{onClick:()=>z(!0),className:"p-4 bg-red-500 hover:bg-red-600 rounded-full transition-all shadow-lg",title:"End call",children:r.jsx(XM,{className:"w-6 h-6 text-white"})}),n&&!f&&r.jsx("button",{onClick:L,className:"p-4 bg-green-500 hover:bg-green-600 rounded-full transition-all shadow-lg animate-pulse",title:"Answer call",children:r.jsx(ba,{className:"w-6 h-6 text-white"})})]})})]}):null},hw="http://localhost:5001",Q9=()=>{var ye;const e=Ie(vs),t=Me(),s=O.useRef(null),n=ka(),[a,i]=O.useState(null),[l,o]=O.useState(""),[c,d]=O.useState(""),[u,h]=O.useState(!1),[f,m]=O.useState(""),[x,p]=O.useState(!1),[j,v]=O.useState(null),[g,y]=O.useState(new Set),[b,N]=O.useState(!1),[k,w]=O.useState(""),[_,S]=O.useState(),[E,A]=O.useState(!1),[C,D]=O.useState(!1),[M,L]=O.useState(!1),[z,Y]=O.useState(""),[X,Z]=O.useState(!1),{data:W,refetch:F}=me({queryKey:["conversations"],queryFn:mh.getConversations,refetchInterval:3e4}),{data:q,isLoading:I}=me({queryKey:["messages",a==null?void 0:a.user_id],queryFn:()=>mh.getMessages(a.user_id),enabled:!!a,refetchInterval:1e4}),{data:$,isLoading:G}=me({queryKey:["messageable-users",f],queryFn:()=>mh.getUsers(f),enabled:u}),R=_e({mutationFn:mh.sendMessage,onSuccess:()=>{t.invalidateQueries(["messages",a.user_id]),t.invalidateQueries(["conversations"])},onError:oe=>{K.error(oe.message||"Failed to send message")}});O.useEffect(()=>{if(e!=null&&e.id)return nt.connect(e.id),nt.userOnline(e.id),nt.onNewMessage(oe=>{console.log("New message received:",oe),t.invalidateQueries(["messages"]),t.invalidateQueries(["conversations"]),oe.sender_id!==(a==null?void 0:a.user_id)&&K.success("New message received")}),nt.onMessageSent(oe=>{console.log("Message sent:",oe),t.invalidateQueries(["messages",a==null?void 0:a.user_id]),t.invalidateQueries(["conversations"])}),nt.onUserTyping(({sender_id:oe,isTyping:be})=>{oe===(a==null?void 0:a.user_id)&&p(be)}),nt.onUserStatusChanged(({userId:oe,isOnline:be})=>{y(ce=>{const re=new Set(ce);return be?re.add(oe):re.delete(oe),re})}),nt.onConversationUpdated(()=>{F()}),nt.onMessageError(({error:oe})=>{K.error(oe||"Failed to send message")}),nt.onCallUser(oe=>{N(!0),w(oe.from),Y(oe.name),S(oe.signal),Z(oe.isAudioOnly),L(!0)}),()=>{nt.removeAllListeners()}},[e,a,t,F]);const B=oe=>{if(oe.preventDefault(),l.trim()&&a&&e){const be={sender_id:e.id,receiver_id:a.user_id,content:l.trim()};nt.isConnected()?(nt.sendMessage(be),o("")):(R.mutate(be),o("")),j&&clearTimeout(j),nt.typing(a.user_id,e.id,!1)}},Q=oe=>{if(o(oe.target.value),!a||!e)return;j&&clearTimeout(j),nt.typing(a.user_id,e.id,!0);const be=setTimeout(()=>{nt.typing(a.user_id,e.id,!1)},1e3);v(be)},te=oe=>{i({user_id:oe.id,name:oe.name,email:oe.email,role:oe.role,profile_photo:oe.profile_photo,is_online:g.has(oe.id)||oe.is_online,unread_count:0}),h(!1),m("")};O.useEffect(()=>{var oe,be;(oe=n.state)!=null&&oe.recipientId&&((be=n.state)!=null&&be.recipientName)&&(i({user_id:n.state.recipientId,name:n.state.recipientName,email:"",role:"teacher",profile_photo:null,is_online:g.has(n.state.recipientId),unread_count:0}),n.state.prefillMessage&&o(n.state.prefillMessage),window.history.replaceState({},document.title))},[n.state,g]),O.useEffect(()=>{var oe;(oe=s.current)==null||oe.scrollIntoView({behavior:"smooth"})},[q]);const ae=(W==null?void 0:W.data)||[],U=(q==null?void 0:q.data)||[],V=($==null?void 0:$.data)||[],ne=ae.map(oe=>({...oe,is_online:g.has(oe.user_id)||oe.is_online})).filter(oe=>oe.name.toLowerCase().includes(c.toLowerCase())||oe.email.toLowerCase().includes(c.toLowerCase())),fe=oe=>{const be=new Date(oe),re=new Date-be,ge=Math.floor(re/(1e3*60*60*24));return ge===0?be.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):ge===1?"Yesterday":ge<7?be.toLocaleDateString("en-US",{weekday:"short"}):be.toLocaleDateString("en-US",{month:"short",day:"numeric"})};return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"h-[calc(100vh-8rem)]",children:r.jsx("div",{className:"card h-full p-0 overflow-hidden",children:r.jsxs("div",{className:"grid grid-cols-12 h-full",children:[r.jsxs("div",{className:"col-span-12 lg:col-span-4 border-r border-gray-200 flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-gray-200 bg-white",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Messages"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${nt.isConnected()?"bg-green-500":"bg-red-500"}`}),r.jsx("span",{className:"text-xs text-gray-500",children:nt.isConnected()?"Connected":"Offline"})]}),r.jsx("button",{onClick:()=>h(!0),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"New Chat",children:r.jsx(Kd,{className:"w-5 h-5 text-blue-600"})})]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Search conversations...",value:c,onChange:oe=>d(oe.target.value),className:"input pl-10"})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:ne.length===0?r.jsxs("div",{className:"p-8 text-center text-gray-500",children:[r.jsx("p",{children:"No conversations yet"}),r.jsx("button",{onClick:()=>h(!0),className:"mt-4 text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Start a new chat"})]}):ne.map(oe=>{var be;return r.jsx("div",{onClick:()=>i(oe),className:`p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-colors ${(a==null?void 0:a.user_id)===oe.user_id?"bg-blue-50":""}`,children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsxs("div",{className:"relative flex-shrink-0",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center overflow-hidden",children:oe.profile_photo?r.jsx("img",{src:`${hw}/${oe.profile_photo}`,alt:oe.name,className:"w-full h-full object-cover"}):r.jsx("span",{className:"text-blue-600 font-semibold text-lg",children:oe.name.charAt(0).toUpperCase()})}),oe.is_online&&r.jsx("span",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-white rounded-full"})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-900 truncate",children:oe.name}),r.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0",children:fe(oe.last_message_time)})]}),r.jsx("p",{className:"text-xs text-gray-500 mb-1 capitalize",children:(be=oe.role)==null?void 0:be.replace("_"," ")}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-sm text-gray-600 truncate flex-1",children:oe.last_message}),oe.unread_count>0&&r.jsx("span",{className:"flex-shrink-0 ml-2 w-5 h-5 bg-blue-600 text-white text-xs rounded-full flex items-center justify-center",children:oe.unread_count})]})]})]})},oe.user_id)})})]}),r.jsx("div",{className:"col-span-12 lg:col-span-8 flex flex-col h-full",children:a?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex-shrink-0 p-4 border-b border-gray-200 bg-white sticky top-0 z-10",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("div",{className:"relative flex-shrink-0",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center overflow-hidden",children:a.profile_photo?r.jsx("img",{src:`${hw}/${a.profile_photo}`,alt:a.name,className:"w-full h-full object-cover"}):r.jsx("span",{className:"text-blue-600 font-semibold",children:a.name.charAt(0).toUpperCase()})}),a.is_online&&r.jsx("span",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-white rounded-full"})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:a.name}),r.jsx("p",{className:"text-xs text-gray-500 capitalize",children:x?r.jsx("span",{className:"text-green-600",children:"typing..."}):`${a.is_online?"Online":"Offline"}  ${(ye=a.role)==null?void 0:ye.replace("_"," ")}`})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[a.is_online&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>{D(!0),Z(!0),L(!0)},className:"p-2 hover:bg-gray-100 rounded-lg text-green-600",title:"Audio Call",children:r.jsx(ba,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>{D(!0),Z(!1),L(!0)},className:"p-2 hover:bg-gray-100 rounded-lg text-blue-600",title:"Video Call",children:r.jsx(Wk,{className:"w-5 h-5"})})]}),r.jsx("button",{onClick:()=>i(null),className:"lg:hidden p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(qr,{className:"w-5 h-5 text-gray-600"})})]})]})}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",style:{maxHeight:"calc(100vh - 20rem)"},children:[I?r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx(yd,{className:"w-8 h-8 text-blue-600 animate-spin"})}):U.length===0?r.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:r.jsx("p",{children:"No messages yet. Start the conversation!"})}):U.map(oe=>r.jsx("div",{className:`flex ${oe.message_type==="sent"?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${oe.message_type==="sent"?"bg-blue-600 text-white":"bg-white text-gray-900 border border-gray-200"}`,children:[r.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:oe.content}),r.jsxs("div",{className:"flex items-center justify-end mt-1 space-x-1",children:[r.jsx(Nt,{className:"w-3 h-3 opacity-70"}),r.jsx("span",{className:"text-xs opacity-70",children:new Date(oe.created_at).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}),oe.message_type==="sent"&&(oe.is_read?r.jsx(FM,{className:"w-4 h-4 opacity-70"}):r.jsx(Jo,{className:"w-4 h-4 opacity-70"}))]})]})},oe.id)),r.jsx("div",{ref:s})]}),r.jsx("div",{className:"flex-shrink-0 p-4 border-t border-gray-200 bg-white",children:r.jsxs("form",{onSubmit:B,className:"flex items-center space-x-2",children:[r.jsx("input",{type:"text",value:l,onChange:Q,placeholder:"Type a message...",className:"flex-1 input",disabled:R.isLoading}),r.jsxs("button",{type:"submit",disabled:!l.trim()||R.isLoading,className:"btn btn-primary px-4 py-2 flex items-center space-x-2",children:[R.isLoading?r.jsx(yd,{className:"w-4 h-4 animate-spin"}):r.jsx(Gd,{className:"w-4 h-4"}),r.jsx("span",{children:"Send"})]})]})})]}):r.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Gd,{className:"w-12 h-12 text-gray-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No conversation selected"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Select a conversation from the list or start a new one"}),r.jsx("button",{onClick:()=>h(!0),className:"btn btn-primary",children:"Start New Chat"})]})})})]})})}),r.jsx(Ae,{isOpen:u,onClose:()=>{h(!1),m("")},title:"Start New Chat",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Search users...",value:f,onChange:oe=>m(oe.target.value),className:"input pl-10"})]}),r.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2",children:G?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx(yd,{className:"w-6 h-6 text-blue-600 animate-spin"})}):V.length===0?r.jsx("p",{className:"text-center text-gray-500 py-8",children:f?"No users found":"Start typing to search users"}):V.map(oe=>{var be;return r.jsxs("div",{onClick:()=>te(oe),className:"flex items-center space-x-3 p-3 hover:bg-gray-50 rounded-lg cursor-pointer transition-colors",children:[r.jsxs("div",{className:"relative flex-shrink-0",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center overflow-hidden",children:oe.profile_photo?r.jsx("img",{src:oe.profile_photo,alt:oe.name,className:"w-full h-full object-cover"}):r.jsx("span",{className:"text-blue-600 font-semibold",children:oe.name.charAt(0).toUpperCase()})}),(g.has(oe.id)||oe.is_online)&&r.jsx("span",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-white rounded-full"})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:oe.name}),r.jsxs("p",{className:"text-xs text-gray-500 capitalize",children:[(be=oe.role)==null?void 0:be.replace("_"," "),oe.class_name&&`  ${oe.class_name}`]})]})]},oe.id)})})]})}),M&&r.jsx(K9,{isOpen:M,onClose:()=>{L(!1),N(!1),D(!1)},callerData:{from:k,name:z,signal:_},isIncomingCall:b,userToCall:a,isAudioOnly:X,onCallEnded:()=>{L(!1),N(!1),D(!1),Z(!1)}})]})},X9=()=>{var u;const e=gg(h=>h.user);gg(h=>h.updateUser);const[t,s]=O.useState("profile"),[n,a]=O.useState({currentPassword:"",newPassword:"",confirmPassword:""}),{data:i,isLoading:l}=me({queryKey:["profile"],queryFn:Zo.getProfile}),o=(u=i==null?void 0:i.data)==null?void 0:u.profile,c=_e({mutationFn:Zo.changePassword,onSuccess:()=>{K.success("Password changed successfully"),a({currentPassword:"",newPassword:"",confirmPassword:""})},onError:h=>{K.error(h.message||"Failed to change password")}}),d=h=>{if(h.preventDefault(),n.newPassword!==n.confirmPassword){K.error("Passwords do not match");return}if(n.newPassword.length<6){K.error("Password must be at least 6 characters");return}c.mutate({currentPassword:n.currentPassword,newPassword:n.newPassword})};return l?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"loading"})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Profile Settings"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your account information"})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[r.jsx("div",{className:"border-b border-gray-200",children:r.jsxs("nav",{className:"flex space-x-8 px-6",children:[r.jsx("button",{onClick:()=>s("profile"),className:`py-4 border-b-2 font-medium text-sm transition-colors ${t==="profile"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Profile Information"}),r.jsx("button",{onClick:()=>s("security"),className:`py-4 border-b-2 font-medium text-sm transition-colors ${t==="security"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Security"})]})}),t==="profile"&&r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"max-w-2xl",children:[r.jsxs("div",{className:"flex items-center space-x-6 mb-8",children:[r.jsx("div",{className:"w-24 h-24 rounded-full bg-blue-100 flex items-center justify-center",children:o!=null&&o.profile_photo?r.jsx("img",{src:`http://localhost:5000/${o.profile_photo}`,alt:"Profile",className:"w-full h-full rounded-full object-cover"}):r.jsx("span",{className:"text-3xl font-bold text-blue-600",children:e.email.charAt(0).toUpperCase()})}),r.jsxs("div",{children:[r.jsx("button",{className:"btn btn-outline",children:"Change Photo"}),r.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"JPG, PNG or GIF. Max size 2MB"})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),r.jsxs("div",{className:"relative",children:[r.jsx(tt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",value:(o==null?void 0:o.first_name)||"",className:"input pl-10",readOnly:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),r.jsxs("div",{className:"relative",children:[r.jsx(tt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",value:(o==null?void 0:o.last_name)||"",className:"input pl-10",readOnly:!0})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),r.jsxs("div",{className:"relative",children:[r.jsx(ya,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"email",value:(o==null?void 0:o.email)||e.email,className:"input pl-10",readOnly:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),r.jsxs("div",{className:"relative",children:[r.jsx(ba,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"tel",value:(o==null?void 0:o.phone)||"",className:"input pl-10",readOnly:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),r.jsx("input",{type:"text",value:e.role.replace("_"," ").toUpperCase(),className:"input capitalize",readOnly:!0})]})]})]})}),t==="security"&&r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"max-w-2xl",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Change Password"}),r.jsxs("form",{onSubmit:d,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(bd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"password",value:n.currentPassword,onChange:h=>a({...n,currentPassword:h.target.value}),className:"input pl-10",placeholder:"Enter current password",required:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(bd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"password",value:n.newPassword,onChange:h=>a({...n,newPassword:h.target.value}),className:"input pl-10",placeholder:"Enter new password",required:!0})]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Password must be at least 6 characters"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(bd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"password",value:n.confirmPassword,onChange:h=>a({...n,confirmPassword:h.target.value}),className:"input pl-10",placeholder:"Confirm new password",required:!0})]})]}),r.jsxs("button",{type:"submit",disabled:c.isPending,className:"btn btn-primary flex items-center space-x-2",children:[r.jsx(Im,{className:"w-5 h-5"}),r.jsx("span",{children:c.isPending?"Changing...":"Change Password"})]})]})]})})]})]})},Z9=()=>{const e=We();return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-9xl font-bold text-blue-600",children:"404"}),r.jsx("div",{className:"text-6xl mb-4",children:""})]}),r.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Page Not Found"}),r.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"Oops! The page you're looking for doesn't exist. It might have been moved or deleted."}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center space-y-4 sm:space-y-0 sm:space-x-4",children:[r.jsxs("button",{onClick:()=>e(-1),className:"btn btn-outline flex items-center space-x-2",children:[r.jsx(js,{className:"w-5 h-5"}),r.jsx("span",{children:"Go Back"})]}),r.jsxs("button",{onClick:()=>e("/dashboard"),className:"btn btn-primary flex items-center space-x-2",children:[r.jsx(jo,{className:"w-5 h-5"}),r.jsx("span",{children:"Go to Dashboard"})]})]}),r.jsx("div",{className:"mt-12 text-sm text-gray-500",children:r.jsx("p",{children:"Need help? Contact support or check the documentation."})})]})})},J9=({sectionId:e,classData:t,teachers:s=[],subjects:n=[]})=>{var A;const a=Me(),[i,l]=O.useState(!1),[o,c]=O.useState(!1),[d,u]=O.useState(""),[h,f]=O.useState(""),[m,x]=O.useState((t==null?void 0:t.academic_year)||new Date().getFullYear().toString()),{data:p,isLoading:j}=me({queryKey:["section",e],queryFn:()=>He.getSectionById(e),enabled:!!e}),{data:v,isLoading:g}=me({queryKey:["class-subjects",t==null?void 0:t.id],queryFn:()=>He.getClassSubjects(t==null?void 0:t.id),enabled:!!(t!=null&&t.id)}),y=_e({mutationFn:C=>He.assignSectionTeacher(e,C),onSuccess:()=>{K.success("Class teacher assigned successfully!"),a.invalidateQueries(["section",e]),a.invalidateQueries(["class",t==null?void 0:t.id]),c(!1),u("")},onError:C=>{K.error(C.message||"Failed to assign class teacher")}}),b=_e({mutationFn:()=>He.removeSectionTeacher(e),onSuccess:()=>{K.success("Class teacher removed successfully!"),a.invalidateQueries(["section",e]),a.invalidateQueries(["class",t==null?void 0:t.id])},onError:C=>{K.error(C.message||"Failed to remove class teacher")}}),N=_e({mutationFn:C=>He.assignSectionSubjectTeacher(e,C),onSuccess:()=>{K.success("Subject teacher assigned successfully!"),a.invalidateQueries(["section",e]),a.invalidateQueries(["class",t==null?void 0:t.id]),l(!1),u(""),f("")},onError:C=>{K.error(C.message||"Failed to assign subject teacher")}}),k=_e({mutationFn:C=>He.removeSectionSubjectTeacher(C),onSuccess:()=>{K.success("Subject teacher removed successfully!"),a.invalidateQueries(["section",e]),a.invalidateQueries(["class",t==null?void 0:t.id])},onError:C=>{K.error(C.message||"Failed to remove subject teacher")}}),w=()=>{if(!d){K.error("Please select a teacher");return}y.mutate(d)},_=()=>{if(!d||!h){K.error("Please select both teacher and subject");return}N.mutate({teacher_id:d,subject_id:h,academic_year:m})},S=p==null?void 0:p.data,E=(v==null?void 0:v.data)||[];return j?r.jsx("div",{className:"text-center py-8",children:r.jsx("div",{className:"loading"})}):S?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(oa,{className:"w-5 h-5 text-purple-600"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Class Teacher"})]}),!S.class_teacher_id&&r.jsxs("button",{onClick:()=>c(!0),className:"btn btn-primary btn-sm flex items-center space-x-1",children:[r.jsx(Be,{className:"w-4 h-4"}),r.jsx("span",{children:"Assign Class Teacher"})]})]}),S.class_teacher_name?r.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 rounded-lg p-4 border border-purple-100",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"h-12 w-12 rounded-full bg-purple-100 flex items-center justify-center",children:r.jsx(oa,{className:"w-6 h-6 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:S.class_teacher_name}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Employee ID: ",S.teacher_employee_id]}),S.teacher_email&&r.jsx("p",{className:"text-sm text-gray-600",children:S.teacher_email}),S.teacher_phone&&r.jsx("p",{className:"text-sm text-gray-600",children:S.teacher_phone})]})]}),r.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to remove this class teacher?")&&b.mutate()},className:"text-red-600 hover:text-red-800",title:"Remove class teacher",children:r.jsx(qr,{className:"w-5 h-5"})})]})}):r.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[r.jsx(oa,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500",children:"No class teacher assigned"})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(De,{className:"w-5 h-5 text-blue-600"}),r.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Subject Teachers (",((A=S.subject_teachers)==null?void 0:A.length)||0,")"]})]}),r.jsxs("button",{onClick:()=>l(!0),className:"btn btn-primary btn-sm flex items-center space-x-1",disabled:E.length===0,title:E.length===0?"No subjects assigned to this class yet":"",children:[r.jsx(Be,{className:"w-4 h-4"}),r.jsx("span",{children:"Add Subject Teacher"})]})]}),S.subject_teachers&&S.subject_teachers.length>0?r.jsx("div",{className:"space-y-3",children:S.subject_teachers.map(C=>r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[r.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:r.jsx(De,{className:"w-5 h-5 text-blue-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:C.teacher_name}),r.jsx("p",{className:"text-sm text-purple-600 font-medium",children:C.subject_name}),r.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-xs text-gray-500",children:[r.jsxs("span",{children:["ID: ",C.employee_id]}),C.teacher_email&&r.jsx("span",{children:C.teacher_email})]})]})]}),r.jsx("button",{onClick:()=>{window.confirm(`Are you sure you want to remove ${C.teacher_name} from ${C.subject_name}?`)&&k.mutate(C.id)},className:"text-red-600 hover:text-red-800",title:"Remove subject teacher",children:r.jsx(ut,{className:"w-5 h-5"})})]},C.id))}):r.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[r.jsx(De,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500",children:"No subject teachers assigned"}),E.length===0?r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Please assign subjects to this class first in the Subjects tab"}):r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Click the button above to add teachers"})]})]}),r.jsx(Ae,{isOpen:o,onClose:()=>{c(!1),u("")},title:"Assign Class Teacher",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Teacher"}),r.jsxs("select",{value:d,onChange:C=>u(C.target.value),className:"input",children:[r.jsx("option",{value:"",children:"Choose a teacher"}),s.filter(C=>C.status==="active").map(C=>r.jsxs("option",{value:C.id,children:[C.first_name," ",C.last_name," (",C.employee_id,")"]},C.id))]})]}),r.jsxs("div",{className:"flex justify-end space-x-4",children:[r.jsx("button",{onClick:()=>{c(!1),u("")},className:"btn btn-outline",children:"Cancel"}),r.jsx("button",{onClick:w,className:"btn btn-primary",disabled:y.isLoading,children:y.isLoading?"Assigning...":"Assign"})]})]})}),r.jsx(Ae,{isOpen:i,onClose:()=>{l(!1),u(""),f("")},title:"Add Subject Teacher",children:r.jsxs("div",{className:"space-y-4",children:[E.length===0?r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:r.jsxs("p",{className:"text-sm text-yellow-800",children:["No subjects have been assigned to this class yet. Please go to the ",r.jsx("strong",{children:"Subjects"})," tab to assign subjects first."]})}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Subject"}),r.jsxs("select",{value:h,onChange:C=>f(C.target.value),className:"input",disabled:g,children:[r.jsx("option",{value:"",children:g?"Loading subjects...":"Choose a subject"}),E.filter(C=>C.is_active===1).map(C=>r.jsxs("option",{value:C.subject_id,children:[C.subject_name," (",C.subject_code,")",C.teacher_first_name&&` - Default: ${C.teacher_first_name} ${C.teacher_last_name}`]},C.subject_id))]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only subjects assigned to this class are shown"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Teacher"}),r.jsxs("select",{value:d,onChange:C=>u(C.target.value),className:"input",children:[r.jsx("option",{value:"",children:"Choose a teacher"}),s.filter(C=>C.status==="active").map(C=>r.jsxs("option",{value:C.id,children:[C.first_name," ",C.last_name," (",C.employee_id,")"]},C.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Academic Year"}),r.jsx("input",{type:"text",value:m,onChange:C=>x(C.target.value),className:"input",placeholder:"e.g., 2024-2025"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-4",children:[r.jsx("button",{onClick:()=>{l(!1),u(""),f("")},className:"btn btn-outline",children:"Cancel"}),E.length>0&&r.jsx("button",{onClick:_,className:"btn btn-primary",disabled:N.isLoading,children:N.isLoading?"Adding...":"Add Teacher"})]})]})})]}):r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-gray-500",children:"Section not found"})})},eB=({classId:e,classData:t,teachers:s,subjects:n,onClose:a})=>{const i=Me(),[l,o]=O.useState([]),[c,d]=O.useState(null),[u,h]=O.useState(null),[f,m]=O.useState(!1),[x,p]=O.useState({name:"",code:"",description:""}),{data:j,isLoading:v}=me({queryKey:["class-subjects",e],queryFn:()=>He.getClassSubjects(e),enabled:!!e}),{data:g}=me({queryKey:["available-subjects",e],queryFn:()=>He.getAvailableSubjects(e),enabled:!!e}),y=(j==null?void 0:j.data)||[],b=(g==null?void 0:g.data)||[];_e({mutationFn:z=>He.assignSubjectToClass(z),onSuccess:()=>{K.success("Subject assigned successfully"),i.invalidateQueries(["class-subjects",e]),i.invalidateQueries(["available-subjects",e]),o([])},onError:z=>{K.error(z.message||"Failed to assign subject")}});const N=_e({mutationFn:z=>He.assignMultipleSubjects(z),onSuccess:()=>{K.success("Subjects assigned successfully"),i.invalidateQueries(["class-subjects",e]),i.invalidateQueries(["available-subjects",e]),o([])},onError:z=>{K.error(z.message||"Failed to assign subjects")}}),k=_e({mutationFn:({assignmentId:z,data:Y})=>He.updateClassSubject(z,Y),onSuccess:()=>{K.success("Subject updated successfully"),i.invalidateQueries(["class-subjects",e]),d(null),h(null)},onError:z=>{K.error(z.message||"Failed to update subject")}}),w=_e({mutationFn:z=>He.removeSubjectFromClass(z),onSuccess:()=>{K.success("Subject removed successfully"),i.invalidateQueries(["class-subjects",e]),i.invalidateQueries(["available-subjects",e])},onError:z=>{K.error(z.message||"Failed to remove subject")}}),_=_e({mutationFn:z=>sn.create(z),onSuccess:()=>{K.success("Subject created successfully"),i.invalidateQueries(["subjects"]),i.invalidateQueries(["available-subjects",e]),m(!1),p({name:"",code:"",description:""})},onError:z=>{K.error(z.message||"Failed to create subject")}}),S=()=>{if(l.length===0){K.error("Please select at least one subject");return}const z=l.map(Y=>({subject_id:Y,teacher_id:null}));N.mutate({class_id:e,subjects:z,academic_year:t.academic_year})},E=z=>{o(Y=>Y.includes(z)?Y.filter(X=>X!==z):[...Y,z])},A=z=>{d(z.assignment_id),h(z.teacher_id)},C=z=>{k.mutate({assignmentId:z,data:{teacher_id:u}})},D=()=>{d(null),h(null)},M=(z,Y)=>{window.confirm(`Are you sure you want to remove "${Y}"?`)&&w.mutate(z)},L=z=>{if(z.preventDefault(),!x.name||!x.code){K.error("Name and code are required");return}_.mutate(x)};return v?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"loading"})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Current Subjects (",y.length,")"]}),y.length>0?r.jsx("div",{className:"space-y-3",children:y.map(z=>r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 flex items-center justify-between hover:bg-gray-100 transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:r.jsx(ei,{className:"w-5 h-5 text-blue-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:z.subject_name}),r.jsxs("span",{className:"text-xs text-gray-500",children:["(",z.subject_code,")"]}),z.is_active===1?r.jsx(Ar,{className:"w-4 h-4 text-green-500"}):r.jsx(ku,{className:"w-4 h-4 text-gray-400"})]}),c===z.assignment_id?r.jsxs("select",{value:u||"",onChange:Y=>h(Y.target.value||null),className:"mt-2 input input-sm w-64",children:[r.jsx("option",{value:"",children:"Select teacher (optional)"}),s.map(Y=>r.jsxs("option",{value:Y.id,children:[Y.first_name," ",Y.last_name]},Y.id))]}):r.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[r.jsx(tt,{className:"w-3 h-3 text-gray-400"}),r.jsx("span",{className:"text-sm text-gray-600",children:z.teacher_first_name?`${z.teacher_first_name} ${z.teacher_last_name}`:"No teacher assigned"})]})]}),r.jsx("div",{className:"text-sm text-gray-500",children:z.academic_year})]}),r.jsx("div",{className:"flex items-center space-x-2",children:c===z.assignment_id?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>C(z.assignment_id),className:"btn btn-sm btn-success",disabled:k.isLoading,children:r.jsx(Im,{className:"w-4 h-4"})}),r.jsx("button",{onClick:D,className:"btn btn-sm btn-outline",children:r.jsx(qr,{className:"w-4 h-4"})})]}):r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>A(z),className:"btn btn-sm btn-outline",children:r.jsx(ct,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>M(z.assignment_id,z.subject_name),className:"btn btn-sm btn-danger",disabled:w.isLoading,children:r.jsx(ut,{className:"w-4 h-4"})})]})})]},z.assignment_id))}):r.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[r.jsx(ei,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500",children:"No subjects assigned yet"})]})]}),b.length>0&&r.jsxs("div",{className:"border-t pt-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Available Subjects (",b.length,")"]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("button",{onClick:()=>m(!0),className:"btn btn-outline flex items-center space-x-2",children:[r.jsx(Be,{className:"w-4 h-4"}),r.jsx("span",{children:"Create New Subject"})]}),l.length>0&&r.jsxs("button",{onClick:S,className:"btn btn-primary flex items-center space-x-2",disabled:N.isLoading,children:[r.jsx(Be,{className:"w-4 h-4"}),r.jsxs("span",{children:["Assign Selected (",l.length,")"]})]})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:b.map(z=>r.jsx("div",{onClick:()=>E(z.id),className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${l.includes(z.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 bg-white"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("input",{type:"checkbox",checked:l.includes(z.id),onChange:()=>E(z.id),className:"w-4 h-4 text-blue-600 rounded",onClick:Y=>Y.stopPropagation()}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:z.name}),r.jsx("p",{className:"text-sm text-gray-500",children:z.code})]})]}),l.includes(z.id)&&r.jsx(Ar,{className:"w-5 h-5 text-blue-600"})]})},z.id))})]}),b.length===0&&y.length>0&&r.jsx("div",{className:"border-t pt-6",children:r.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[r.jsx(ei,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500 mb-3",children:"No more subjects available to assign"}),r.jsxs("button",{onClick:()=>m(!0),className:"btn btn-outline flex items-center space-x-2 mx-auto",children:[r.jsx(Be,{className:"w-4 h-4"}),r.jsx("span",{children:"Create New Subject"})]})]})}),r.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[r.jsxs("div",{className:"text-sm text-gray-600",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Note:"})," Subjects assigned here will be available to all sections of this class."]}),r.jsx("p",{className:"text-xs mt-1",children:'You can override teachers for specific sections in the "Sections" tab.'})]}),r.jsx("button",{onClick:a,className:"btn btn-outline",children:"Close"})]}),r.jsx(Ae,{isOpen:f,onClose:()=>{m(!1),p({name:"",code:"",description:""})},title:"Create New Subject",size:"md",children:r.jsxs("form",{onSubmit:L,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Subject Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:x.name,onChange:z=>p({...x,name:z.target.value}),className:"input w-full",placeholder:"e.g., Mathematics",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Subject Code ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:x.code,onChange:z=>p({...x,code:z.target.value.toUpperCase()}),className:"input w-full",placeholder:"e.g., MATH",maxLength:20,required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Optional)"}),r.jsx("textarea",{value:x.description,onChange:z=>p({...x,description:z.target.value}),className:"input w-full",rows:"3",placeholder:"Brief description of the subject..."})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>{m(!1),p({name:"",code:"",description:""})},className:"btn btn-outline",children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:_.isLoading,children:_.isLoading?"Creating...":"Create Subject"})]})]})})]})},tB=()=>{var ge,we,pe;const{id:e}=bs(),t=We(),s=Me(),[n,a]=O.useState("overview"),[i,l]=O.useState(null),[o,c]=O.useState(!1),[d,u]=O.useState(!1),[h,f]=O.useState(!1),[m,x]=O.useState(""),[p,j]=O.useState(""),[v,g]=O.useState(!1),[y,b]=O.useState(""),[N,k]=O.useState(""),[w,_]=O.useState(!1),[S,E]=O.useState(null),[A,C]=O.useState(""),[D,M]=O.useState(""),{data:L,isLoading:z,refetch:Y}=me({queryKey:["class",e],queryFn:()=>He.getById(e)}),{data:X,isLoading:Z}=me({queryKey:["class-students",e],queryFn:()=>He.getStudents(e)}),{data:W}=me({queryKey:["teachers"],queryFn:()=>Pt.getAll({limit:1e3})}),{data:F}=me({queryKey:["subjects"],queryFn:()=>sn.getAll()}),{data:q,isLoading:I}=me({queryKey:["class-subjects",e],queryFn:()=>He.getClassSubjects(e),enabled:!!e}),$=L==null?void 0:L.data,G=(X==null?void 0:X.data)||[],R=(W==null?void 0:W.data)||[],B=(F==null?void 0:F.data)||[],Q=(q==null?void 0:q.data)||[],te=de=>{l(de),c(!0)},ae=_e({mutationFn:de=>He.createSection(e,de),onSuccess:()=>{K.success("Section created successfully"),f(!1),x(""),j(""),Y()},onError:de=>{K.error(de.message||"Failed to create section")}}),U=de=>{if(de.preventDefault(),!m.trim()){K.error("Section name is required");return}ae.mutate({name:m.trim(),capacity:p?parseInt(p):null,is_active:!0})},V=_e({mutationFn:({sectionId:de,data:Re})=>He.updateSection(de,Re),onSuccess:()=>{K.success("Section updated successfully"),_(!1),E(null),C(""),M(""),Y()},onError:de=>{K.error(de.message||"Failed to update section")}}),ne=de=>{E(de),C(de.name),M(de.capacity||""),_(!0)},fe=de=>{if(de.preventDefault(),!A.trim()){K.error("Section name is required");return}V.mutate({sectionId:S.id,data:{name:A.trim(),capacity:D?parseInt(D):null}})},ye=_e({mutationFn:de=>He.deleteSection(de),onSuccess:()=>{K.success("Section deleted successfully"),Y()},onError:de=>{K.error(de.message||"Failed to delete section")}}),oe=de=>{if(de.student_count>0){K.error("Cannot delete section with enrolled students. Please transfer students first.");return}window.confirm(`Are you sure you want to delete Section ${de.name}? This action cannot be undone.`)&&ye.mutate(de.id)},be=_e({mutationFn:de=>He.assignTeacher(e,de),onSuccess:()=>{K.success("Teacher assigned successfully"),g(!1),b(""),k(""),Y()},onError:de=>{K.error(de.message||"Failed to assign teacher")}}),ce=de=>{if(de.preventDefault(),!y||!N){K.error("Please select both teacher and subject");return}be.mutate({teacher_id:y,subject_id:N})};if(z)return r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"loading"})});if(!$)return r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-gray-500",children:"Class not found"})});const re=[{id:"overview",label:"Overview",icon:De},{id:"subjects",label:"Subjects",icon:ei},{id:"students",label:"Students",icon:Xe},{id:"sections",label:"Sections",icon:Yl}];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("button",{onClick:()=>t("/classes"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[r.jsx(js,{className:"w-5 h-5"}),r.jsx("span",{children:"Back to Classes"})]}),r.jsxs("button",{onClick:()=>t(`/classes/${e}/edit`),className:"btn btn-primary flex items-center space-x-2",children:[r.jsx(ct,{className:"w-5 h-5"}),r.jsx("span",{children:"Edit Class"})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 h-32"}),r.jsxs("div",{className:"px-6 pb-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-end -mt-16 mb-6",children:[r.jsx("div",{className:"w-32 h-32 rounded-full border-4 border-white bg-white flex items-center justify-center mb-4 md:mb-0",children:r.jsx(De,{className:"w-16 h-16 text-purple-600"})}),r.jsxs("div",{className:"md:ml-6 flex-1",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:$.name}),r.jsxs("p",{className:"text-gray-600",children:["Grade ",$.grade_level,"  Academic Year:"," ",$.academic_year]})]}),r.jsx("div",{className:"mt-4 md:mt-0",children:r.jsx("span",{className:`badge ${$.status==="active"?"badge-success":$.status==="inactive"?"badge-warning":"badge-secondary"} text-lg px-4 py-2`,children:$.status||"active"})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Class Information"}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Cl,{className:"w-5 h-5 text-gray-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Grade Level"}),r.jsxs("p",{className:"font-medium text-gray-900",children:["Grade ",$.grade_level]})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Te,{className:"w-5 h-5 text-gray-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Academic Year"}),r.jsx("p",{className:"font-medium text-gray-900",children:$.academic_year})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Rn,{className:"w-5 h-5 text-gray-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Room Number"}),r.jsx("p",{className:"font-medium text-gray-900",children:$.room_number||"Not assigned"})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Xe,{className:"w-5 h-5 text-gray-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Class Capacity"}),r.jsxs("p",{className:"font-medium text-gray-900",children:[$.student_count||0," / ",$.capacity||40," ","students"]})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Yl,{className:"w-5 h-5 text-gray-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Total Sections"}),r.jsxs("p",{className:"font-medium text-gray-900",children:[((ge=$.sections)==null?void 0:ge.length)||0," sections"]})]})]}),$.description&&r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(De,{className:"w-5 h-5 text-gray-400 mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Description"}),r.jsx("p",{className:"font-medium text-gray-900",children:$.description})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Class Teacher"}),$.class_teacher?r.jsx("div",{className:"bg-purple-50 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"h-12 w-12 rounded-full bg-purple-100 flex items-center justify-center",children:r.jsx(tt,{className:"w-6 h-6 text-purple-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("h4",{className:"font-medium text-gray-900",children:[$.class_teacher.first_name," ",$.class_teacher.last_name]}),r.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-600",children:[r.jsxs("span",{className:"flex items-center",children:[r.jsx(ya,{className:"w-4 h-4 mr-1"}),$.class_teacher.email]}),$.class_teacher.phone&&r.jsxs("span",{className:"flex items-center",children:[r.jsx(ba,{className:"w-4 h-4 mr-1"}),$.class_teacher.phone]})]})]})]})}):r.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg",children:[r.jsx(tt,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500 text-sm",children:"No class teacher assigned"})]})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"-mb-px flex space-x-8 px-6",children:re.map(de=>{const Re=de.icon;return r.jsxs("button",{onClick:()=>a(de.id),className:`${n===de.id?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2`,children:[r.jsx(Re,{className:"w-5 h-5"}),r.jsx("span",{children:de.label})]},de.id)})})}),r.jsxs("div",{className:"p-6",children:[n==="overview"&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsx("div",{className:"bg-blue-50 rounded-lg p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total Students"}),r.jsx("p",{className:"text-3xl font-bold text-blue-900 mt-2",children:$.student_count||0})]}),r.jsx(Xe,{className:"w-12 h-12 text-blue-400"})]})}),r.jsx("div",{className:"bg-purple-50 rounded-lg p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Sections"}),r.jsx("p",{className:"text-3xl font-bold text-purple-900 mt-2",children:((we=$.sections)==null?void 0:we.length)||0})]}),r.jsx(Yl,{className:"w-12 h-12 text-purple-400"})]})}),r.jsx("div",{className:"bg-green-50 rounded-lg p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Subjects"}),r.jsx("p",{className:"text-3xl font-bold text-green-900 mt-2",children:Q.length||0})]}),r.jsx(ei,{className:"w-12 h-12 text-green-400"})]})})]}),n==="subjects"&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Class Subjects (",Q.length,")"]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage subjects and assign teachers for this class"})]}),r.jsxs("button",{onClick:()=>u(!0),className:"btn btn-primary flex items-center space-x-2",children:[r.jsx(Be,{className:"w-5 h-5"}),r.jsx("span",{children:"Manage Subjects"})]})]}),I?r.jsx("div",{className:"flex justify-center py-12",children:r.jsx("div",{className:"loading"})}):Q.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Q.map(de=>r.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-5 border border-blue-100 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:r.jsx(ei,{className:"w-5 h-5 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900",children:de.subject_name}),r.jsx("span",{className:"text-xs text-gray-500",children:de.subject_code})]})]}),de.is_active===1?r.jsx(Ar,{className:"w-5 h-5 text-green-500"}):r.jsx(ku,{className:"w-5 h-5 text-gray-400"})]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Teacher:"}),r.jsx("span",{className:"font-medium text-gray-900",children:de.teacher_first_name?`${de.teacher_first_name} ${de.teacher_last_name}`:"Not assigned"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Academic Year:"}),r.jsx("span",{className:"font-medium text-gray-900",children:de.academic_year})]})]}),r.jsxs("div",{className:"mt-4 pt-3 border-t border-blue-100",children:[r.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Applied to all sections by default"}),r.jsx("button",{onClick:()=>u(!0),className:"w-full btn btn-sm btn-outline text-xs",children:"Edit Assignment"})]})]},de.assignment_id))}):r.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[r.jsx(ei,{className:"w-16 h-16 text-gray-400 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-600 font-medium mb-1",children:"No subjects assigned yet"}),r.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Start by adding subjects to this class"}),r.jsxs("button",{onClick:()=>u(!0),className:"btn btn-primary inline-flex items-center space-x-2",children:[r.jsx(Be,{className:"w-4 h-4"}),r.jsx("span",{children:"Add Subjects"})]})]})]}),n==="students"&&r.jsxs("div",{children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Students (",G.length,")"]})}),Z?r.jsx("div",{className:"flex justify-center py-8",children:r.jsx("div",{className:"loading"})}):G.length>0?r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Section"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:G.map(de=>{var Re;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center mr-3",children:r.jsx("span",{className:"text-blue-600 font-semibold text-xs",children:(Re=de.first_name)==null?void 0:Re.charAt(0)})}),r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[de.first_name," ",de.last_name]})]})}),r.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:de.section_name||"N/A"}),r.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:de.email}),r.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${de.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:de.status})})]},de.id)})})]})}):r.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[r.jsx(Xe,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500",children:"No students enrolled yet"})]})]}),n==="sections"&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Sections (",((pe=$.sections)==null?void 0:pe.length)||0,")"]}),r.jsx("button",{onClick:()=>f(!0),className:"btn btn-primary btn-sm",children:"Add Section"})]}),$.sections&&$.sections.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:$.sections.map(de=>{var Re;return r.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 rounded-lg p-6 border border-purple-100",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h4",{className:"text-2xl font-bold text-purple-600",children:["Section ",de.name]}),r.jsx(Yl,{className:"w-6 h-6 text-purple-400"})]}),r.jsxs("div",{className:"space-y-3 mb-4",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Students:"}),r.jsxs("span",{className:"font-medium text-gray-900",children:[de.student_count||0," /"," ",de.capacity||40]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Class Teacher:"}),r.jsx("span",{className:"font-medium text-gray-900",children:de.class_teacher_name||"Not assigned"})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Subject Teachers:"}),r.jsx("span",{className:"font-medium text-gray-900",children:((Re=de.subject_teachers)==null?void 0:Re.length)||0})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Status:"}),r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${de.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:de.is_active?"Active":"Inactive"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("button",{onClick:()=>te(de),className:"w-full btn btn-primary btn-sm flex items-center justify-center space-x-1",children:[r.jsx(oa,{className:"w-4 h-4"}),r.jsx("span",{children:"Manage Teachers"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("button",{onClick:()=>ne(de),className:"btn btn-outline btn-sm flex items-center justify-center space-x-1",children:[r.jsx(ct,{className:"w-4 h-4"}),r.jsx("span",{children:"Edit"})]}),r.jsxs("button",{onClick:()=>oe(de),className:"btn btn-outline btn-sm flex items-center justify-center space-x-1 text-red-600 hover:bg-red-50 border-red-200",disabled:de.student_count>0,children:[r.jsx(ut,{className:"w-4 h-4"}),r.jsx("span",{children:"Delete"})]})]})]})]},de.id)})}):r.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[r.jsx(Yl,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500",children:"No sections created yet"})]})]})]})]}),r.jsx(Ae,{isOpen:o,onClose:()=>{c(!1),l(null)},title:`Manage Teachers - Section ${i==null?void 0:i.name}`,size:"large",children:i&&r.jsx(J9,{sectionId:i.id,classData:$,teachers:R,subjects:B})}),r.jsx(Ae,{isOpen:d,onClose:()=>u(!1),title:`Manage Subjects - ${$.name}`,size:"xlarge",children:r.jsx(eB,{classId:e,classData:$,teachers:R,subjects:B,onClose:()=>{u(!1),s.invalidateQueries(["class-subjects",e])}})}),r.jsx(Ae,{isOpen:h,onClose:()=>{f(!1),x(""),j("")},title:"Add New Section",size:"md",children:r.jsxs("form",{onSubmit:U,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Section Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:m,onChange:de=>x(de.target.value),className:"input w-full",placeholder:"e.g., A, B, Alpha, Beta",required:!0}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter a single letter or name for the section"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity (Optional)"}),r.jsx("input",{type:"number",value:p,onChange:de=>j(de.target.value),className:"input w-full",placeholder:"e.g., 40",min:"1"}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Leave empty to use default capacity (",$.capacity||40,")"]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>{f(!1),x(""),j("")},className:"btn btn-outline",children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:ae.isPending,children:ae.isPending?"Adding...":"Add Section"})]})]})}),r.jsx(Ae,{isOpen:w,onClose:()=>{_(!1),E(null),C(""),M("")},title:`Edit Section ${S==null?void 0:S.name}`,size:"md",children:r.jsxs("form",{onSubmit:fe,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Section Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:A,onChange:de=>C(de.target.value),className:"input w-full",placeholder:"e.g., A, B, Alpha, Beta",required:!0}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter a single letter or name for the section"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity (Optional)"}),r.jsx("input",{type:"number",value:D,onChange:de=>M(de.target.value),className:"input w-full",placeholder:"e.g., 40",min:"1"}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Leave empty to use default capacity (",$.capacity||40,")"]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>{_(!1),E(null),C(""),M("")},className:"btn btn-outline",children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:V.isPending,children:V.isPending?"Updating...":"Update Section"})]})]})}),r.jsx(Ae,{isOpen:v,onClose:()=>{g(!1),b(""),k("")},title:"Assign Subject Teacher",size:"md",children:r.jsxs("form",{onSubmit:ce,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Teacher ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{value:y,onChange:de=>b(de.target.value),className:"input w-full",required:!0,children:[r.jsx("option",{value:"",children:"Select Teacher"}),R.map(de=>r.jsxs("option",{value:de.id,children:[de.first_name," ",de.last_name," (",de.employee_id,")"]},de.id))]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Subject ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{value:N,onChange:de=>k(de.target.value),className:"input w-full",required:!0,children:[r.jsx("option",{value:"",children:"Select Subject"}),B.map(de=>r.jsxs("option",{value:de.id,children:[de.name," (",de.code,")"]},de.id))]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>{g(!1),b(""),k("")},className:"btn btn-outline",children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:be.isPending,children:be.isPending?"Assigning...":"Assign Teacher"})]})]})})]})},fw=["border-red-400","border-blue-400","border-green-400","border-yellow-400","border-purple-400","border-pink-400"],mw=e=>fw[e%fw.length],rB=()=>{const e=Ie(vs),[t,s]=O.useState([]),[n,a]=O.useState(!0),[i,l]=O.useState([]),[o,c]=O.useState(""),[d,u]=O.useState(!1),[h,f]=O.useState(null),[m,x]=O.useState([]),[p,j]=O.useState([]),[v,g]=O.useState([]),[y,b]=O.useState(!1),[N,k]=O.useState({teacher_id:"",class_id:"",section_id:"",subject_id:"",day_of_week:"",start_time:"",end_time:"",room_number:"",academic_year:new Date().getFullYear().toString()}),w=["super_admin","principal","vice_principal","hod"].includes(e==null?void 0:e.role),_=(e==null?void 0:e.role)==="teacher";O.useEffect(()=>{e&&(async()=>{var z;try{if(a(!0),w){const[Y,X,Z]=await Promise.all([Pt.getAll(),He.getAll(),sn.getAll()]);l(Y.data||[]),x(X.data||[]),g(Z.data||[]),a(!1)}else if(_)try{const X=(z=(await Pt.getAll()).data)==null?void 0:z.find(Z=>Z.user_id===e.id);X?c(X.id):(console.error("Teacher record not found for user:",e.id),K.error("Teacher profile not found"),a(!1))}catch(Y){console.error("Failed to fetch teacher record:",Y),K.error("Failed to load teacher profile"),a(!1)}}catch(Y){console.error("Failed to fetch initial data:",Y),K.error("Failed to load data"),a(!1)}})()},[e,w,_]),O.useEffect(()=>{const L=async()=>{try{a(!0);const Y=o&&o!==""?o:null;if(w&&Y){const X=await Pt.getSchedule(Y);s(X.data||[])}else if((e==null?void 0:e.role)==="student"){const X=await tx.get({class_id:e.class_id,section_id:e.section_id,academic_year:new Date().getFullYear().toString()});s(X.data||[])}else if(Y){const X=await Pt.getSchedule(Y);s(X.data||[])}else s([])}catch(Y){console.error("Failed to fetch schedule:",Y),K.error("Failed to fetch schedule")}finally{a(!1)}};(o&&o!==""?o:null)||(e==null?void 0:e.role)==="student"?L():w&&(a(!1),s([]))},[o,e,w]);const S=async L=>{if(window.confirm("Are you sure you want to delete this schedule entry?"))try{if(await tx.delete(L),K.success("Schedule entry deleted"),o){const z=await Pt.getSchedule(o);s(z.data||[])}}catch{K.error("Failed to delete schedule entry")}},E=L=>{f(L.id);const z=L.day_of_week.charAt(0).toUpperCase()+L.day_of_week.slice(1);k({teacher_id:L.teacher_id,class_id:L.class_id,section_id:L.section_id,subject_id:L.subject_id,day_of_week:z,start_time:L.start_time,end_time:L.end_time,room_number:L.room_number||"",academic_year:L.academic_year}),u(!0)};O.useEffect(()=>{N.class_id?(async()=>{try{const z=await He.getSections(N.class_id);j(z.data||[])}catch(z){console.error("Failed to fetch sections:",z)}})():j([])},[N.class_id]);const A=L=>{k({...N,[L.target.name]:L.target.value})},C=async L=>{var z,Y;L.preventDefault(),b(!0);try{const X={...N,day_of_week:N.day_of_week.toLowerCase()};if(h?(await tx.update(h,X),K.success("Schedule updated successfully!")):(await Pt.assignSchedule(X),K.success("Schedule created successfully!")),u(!1),f(null),o==N.teacher_id){const Z=await Pt.getSchedule(o);s(Z.data||[])}k(Z=>({...Z,class_id:"",section_id:"",subject_id:"",day_of_week:"",start_time:"",end_time:"",room_number:""}))}catch(X){console.error(X),K.error(((Y=(z=X.response)==null?void 0:z.data)==null?void 0:Y.message)||"Failed to save schedule")}finally{b(!1)}},D=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],M=D.map(L=>({day:L,periods:t.filter(z=>{var Y;return((Y=z.day_of_week)==null?void 0:Y.toLowerCase())===L.toLowerCase()}).sort((z,Y)=>z.start_time.localeCompare(Y.start_time))}));return r.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[r.jsx(Te,{className:"w-8 h-8 text-blue-600"}),w?"Teacher Schedule Management":"My Weekly Routine"]}),r.jsx("p",{className:"text-gray-500 mt-1",children:w?"View and manage weekly schedules for teachers":"View your weekly class routine"})]}),w&&r.jsxs("button",{onClick:()=>{k(L=>({...L,teacher_id:o||""})),u(!0)},className:"btn btn-primary flex items-center gap-2",children:[r.jsx(Be,{className:"w-4 h-4"}),"Add Schedule"]})]}),w&&r.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200 mb-8",children:r.jsx("div",{className:"flex items-center gap-4",children:r.jsxs("div",{className:"flex-1 max-w-md",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Teacher"}),r.jsxs("div",{className:"relative",children:[r.jsx(tt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsxs("select",{value:o,onChange:L=>c(L.target.value),className:"input pl-10 w-full",children:[r.jsx("option",{value:"",children:"Select a teacher to view schedule"}),i.map(L=>r.jsxs("option",{value:L.id,children:[L.first_name," ",L.last_name," (",L.employee_id,")"]},L.id))]})]})]})})}),(e==null?void 0:e.role)==="student"&&r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Today's Schedule"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:(()=>{const z=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date().getDay()],Y=t.filter(X=>X.day_of_week===z).sort((X,Z)=>X.start_time.localeCompare(Z.start_time));return Y.length===0?r.jsx("div",{className:"col-span-full p-8 text-center bg-gray-50 rounded-xl border border-dashed border-gray-200",children:r.jsx("p",{className:"text-gray-500",children:"No classes scheduled for today."})}):Y.map((X,Z)=>r.jsxs("div",{className:`bg-white p-4 rounded-xl shadow-sm border-l-4 ${mw(Z)} border-gray-200`,children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsx("h3",{className:"font-bold text-gray-900",children:X.subject_name}),r.jsxs("span",{className:"text-xs font-medium px-2 py-1 bg-gray-100 rounded-full text-gray-600",children:[X.start_time.slice(0,5)," -"," ",X.end_time.slice(0,5)]})]}),r.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(tt,{className:"w-4 h-4"}),r.jsxs("span",{children:[X.teacher_first_name," ",X.teacher_last_name]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Rn,{className:"w-4 h-4"}),r.jsxs("span",{children:["Room ",X.room_number||"N/A"]})]})]})]},X.id))})()})]}),n?r.jsx("div",{className:"flex justify-center py-12",children:r.jsx(yd,{className:"w-8 h-8 text-blue-600 animate-spin"})}):!o&&w?r.jsxs("div",{className:"text-center py-16 bg-gray-50 rounded-xl border-2 border-dashed border-gray-200",children:[r.jsx(Te,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No Teacher Selected"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Please select a teacher to view their schedule"})]}):t.length===0?r.jsxs("div",{className:"text-center py-16 bg-gray-50 rounded-xl border-2 border-dashed border-gray-200",children:[r.jsx(Te,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No Schedule Found"}),r.jsx("p",{className:"text-gray-500 mt-1",children:w?"This teacher has no classes scheduled yet.":"You have no classes scheduled yet."}),w&&r.jsx("button",{onClick:()=>{k(L=>({...L,teacher_id:o})),u(!0)},className:"mt-4 text-blue-600 font-medium hover:text-blue-700",children:"Add first class"})]}):r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[r.jsx("div",{className:"grid grid-cols-7 bg-gray-50 border-b border-gray-200",children:D.map(L=>r.jsx("div",{className:"px-4 py-3 text-center font-semibold text-gray-900 border-r border-gray-200 last:border-r-0",children:L},L))}),r.jsx("div",{className:"grid grid-cols-7",children:M.map(({day:L,periods:z},Y)=>r.jsx("div",{className:"min-h-[300px] border-r border-gray-200 last:border-r-0",children:r.jsx("div",{className:"p-3 space-y-2",children:z.length>0?z.map((X,Z)=>r.jsxs("div",{className:`p-2 rounded-lg border-l-4 ${mw(Z)} bg-gray-50 hover:bg-white hover:shadow-md transition-all duration-200 border border-gray-100 cursor-pointer group`,children:[r.jsxs("div",{className:"mb-1",children:[r.jsx("h4",{className:"font-bold text-sm text-gray-900 truncate",children:X.subject_name}),r.jsxs("p",{className:"text-xs text-gray-600 truncate",children:[X.class_name," - ",X.section_name]})]}),r.jsxs("div",{className:"space-y-0.5",children:[r.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[r.jsx(Nt,{className:"w-3 h-3 mr-1 flex-shrink-0"}),r.jsxs("span",{className:"truncate",children:[X.start_time," - ",X.end_time]})]}),r.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[r.jsx(Rn,{className:"w-3 h-3 mr-1 flex-shrink-0"}),r.jsxs("span",{className:"truncate",children:["Room: ",X.room_number||"N/A"]})]})]}),w&&r.jsxs("div",{className:"mt-2 flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx("button",{onClick:W=>{W.stopPropagation(),E(X)},className:"p-1 text-blue-600 hover:bg-blue-50 rounded",title:"Edit",children:r.jsx(ct,{className:"w-3 h-3"})}),r.jsx("button",{onClick:W=>{W.stopPropagation(),S(X.id)},className:"p-1 text-red-600 hover:bg-red-50 rounded",title:"Delete",children:r.jsx(ut,{className:"w-3 h-3"})})]})]},X.id)):r.jsx("p",{className:"text-xs text-gray-400 italic text-center py-8",children:"No classes"})})},L))})]}),w&&r.jsx(Ae,{isOpen:d,onClose:()=>{u(!1),f(null),k({teacher_id:"",class_id:"",section_id:"",subject_id:"",day_of_week:"",start_time:"",end_time:"",room_number:"",academic_year:new Date().getFullYear().toString()})},title:h?"Edit Class Schedule":"Add Class Schedule",children:r.jsxs("form",{onSubmit:C,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teacher"}),r.jsxs("select",{name:"teacher_id",value:N.teacher_id,onChange:A,required:!0,className:"input w-full",children:[r.jsx("option",{value:"",children:"Select Teacher"}),i.map(L=>r.jsxs("option",{value:L.id,children:[L.first_name," ",L.last_name]},L.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class"}),r.jsxs("select",{name:"class_id",value:N.class_id,onChange:A,required:!0,className:"input w-full",children:[r.jsx("option",{value:"",children:"Select Class"}),m.map(L=>r.jsx("option",{value:L.id,children:L.name},L.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Section"}),r.jsxs("select",{name:"section_id",value:N.section_id,onChange:A,required:!0,className:"input w-full",disabled:!N.class_id,children:[r.jsx("option",{value:"",children:"Select Section"}),p.map(L=>r.jsx("option",{value:L.id,children:L.name},L.id))]})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),r.jsxs("select",{name:"subject_id",value:N.subject_id,onChange:A,required:!0,className:"input w-full",children:[r.jsx("option",{value:"",children:"Select Subject"}),v.map(L=>r.jsx("option",{value:L.id,children:L.name},L.id))]})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Day"}),r.jsx("div",{className:"grid grid-cols-7 gap-2",children:D.map(L=>r.jsx("button",{type:"button",onClick:()=>k({...N,day_of_week:L}),className:`
                        px-3 py-3 rounded-lg border-2 text-sm font-medium transition-all duration-200
                        ${N.day_of_week===L?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-700 border-gray-200 hover:border-blue-300 hover:bg-blue-50"}
                      `,children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-xs mb-1 opacity-80",children:L.substring(0,3)}),r.jsx("div",{className:"font-bold",children:L.substring(0,1)})]})},L))}),!N.day_of_week&&r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Please select a day"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Time"}),r.jsx("input",{type:"time",name:"start_time",value:N.start_time,onChange:A,required:!0,className:"input w-full"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Time"}),r.jsx("input",{type:"time",name:"end_time",value:N.end_time,onChange:A,required:!0,className:"input w-full"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Room Number"}),r.jsx("input",{type:"text",name:"room_number",value:N.room_number,onChange:A,className:"input w-full",placeholder:"Optional"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Academic Year"}),r.jsx("input",{type:"text",name:"academic_year",value:N.academic_year,onChange:A,required:!0,className:"input w-full"})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[r.jsx("button",{type:"button",onClick:()=>u(!1),className:"btn btn-ghost",children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:y,children:y?r.jsxs(r.Fragment,{children:[r.jsx(yd,{className:"w-4 h-4 animate-spin mr-2"}),"Saving..."]}):"Save Schedule"})]})]})})]})},sB=()=>{const{id:e}=bs(),t=We(),[s,n]=O.useState(null),[a,i]=O.useState(!0),l=async()=>{try{i(!0);const o=await Pt.getScheduleDetail(e);n(o.data||null)}catch(o){console.error("Failed to fetch schedule detail:",o)}finally{i(!1)}};return O.useEffect(()=>{l()},[e]),a?r.jsx("div",{className:"text-center mt-10 text-gray-600",children:"Loading details..."}):s?r.jsxs("div",{className:"p-6 max-w-xl mx-auto",children:[r.jsx("button",{onClick:()=>t(-1),className:"mb-6 text-blue-600 hover:text-blue-800 font-medium flex items-center gap-2",children:" Back"}),r.jsxs("div",{className:"p-6 bg-white border rounded-2xl shadow-lg hover:shadow-2xl transition",children:[r.jsx("h2",{className:"text-3xl font-bold mb-4 text-gray-800",children:s.class_name}),r.jsxs("div",{className:"grid gap-3",children:[r.jsxs("p",{className:"flex items-center gap-2 text-gray-700",children:[r.jsx(_F,{className:"text-blue-500"})," ",r.jsx("strong",{children:"Subject:"})," ",s.subject_name]}),r.jsxs("p",{className:"flex items-center gap-2 text-gray-700",children:[r.jsx(SF,{className:"text-green-500"})," ",r.jsx("strong",{children:"Teacher:"})," ",s.teacher_name||"N/A"]}),r.jsxs("p",{className:"flex items-center gap-2 text-gray-700",children:[r.jsx(kF,{className:"text-purple-500"})," ",r.jsx("strong",{children:"Time:"})," ",s.start_time," - ",s.end_time]}),r.jsxs("p",{className:"flex items-center gap-2 text-gray-700",children:[r.jsx(EF,{className:"text-yellow-500"})," ",r.jsx("strong",{children:"Room:"})," ",s.room_number||"N/A"]}),r.jsxs("p",{className:"text-gray-600",children:[r.jsx("strong",{children:"Section:"})," ",s.section_name||"N/A"]})]}),s.description&&r.jsxs("p",{className:"mt-4 text-gray-700 border-t pt-3",children:[r.jsx("strong",{children:"Description:"})," ",s.description]})]})]}):r.jsx("div",{className:"text-center mt-10 text-gray-500",children:"Period not found."})},lC=({subject:e,onSubmit:t,onCancel:s})=>{const[n,a]=O.useState({name:"",code:"",description:"",prerequisite_type:"none",prerequisite_subject_ids:[],subject_nature:"compulsory",is_active:1}),{data:i}=me({queryKey:["subjects-for-prerequisite"],queryFn:()=>sn.getAll({status:"active"})}),l=((i==null?void 0:i.data)||[]).filter(u=>u.id!==(e==null?void 0:e.id));O.useEffect(()=>{e&&a({name:e.name||"",code:e.code||"",description:e.description||"",prerequisite_type:e.prerequisite_type||"none",prerequisite_subject_ids:e.prerequisite_subject_ids||[],subject_nature:e.subject_nature||"compulsory",is_active:e.is_active})},[e]);const o=u=>{if(u.preventDefault(),n.prerequisite_type==="subject_exam"&&(!n.prerequisite_subject_ids||n.prerequisite_subject_ids.length===0)){alert("Please select at least one prerequisite subject");return}const h={...n,prerequisite_subject_ids:n.prerequisite_type==="subject_exam"?n.prerequisite_subject_ids:[]};t(h)},c=u=>{const{name:h,value:f}=u.target;a(m=>({...m,[h]:f}))},d=u=>{const h=u.target.value;a(f=>({...f,prerequisite_type:h,prerequisite_subject_ids:h==="none"?[]:f.prerequisite_subject_ids}))};return r.jsxs("form",{onSubmit:o,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Subject Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",name:"name",value:n.name,onChange:c,className:"input w-full",placeholder:"e.g., Mathematics",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Subject Code ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",name:"code",value:n.code,onChange:u=>c({target:{name:"code",value:u.target.value.toUpperCase()}}),className:"input w-full",placeholder:"e.g., MATH",maxLength:20,required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{name:"description",value:n.description,onChange:c,className:"input w-full",rows:"3",placeholder:"Brief description of the subject..."})]}),r.jsx("div",{className:"border-t pt-4",children:r.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Subject Configuration"})}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Subject Nature ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[r.jsx("input",{type:"radio",name:"subject_nature",value:"compulsory",checked:n.subject_nature==="compulsory",onChange:c,className:"form-radio h-4 w-4 text-blue-600"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-gray-900",children:"Compulsory"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Required for all students"})]})]}),r.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[r.jsx("input",{type:"radio",name:"subject_nature",value:"elective",checked:n.subject_nature==="elective",onChange:c,className:"form-radio h-4 w-4 text-blue-600"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-gray-900",children:"Elective (Optional)"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Students can choose to take this"})]})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Who Can Read the Subject ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{name:"prerequisite_type",value:n.prerequisite_type,onChange:d,className:"input w-full mb-3",children:[r.jsx("option",{value:"none",children:"Anyone Can Study the Subject"}),r.jsx("option",{value:"subject_exam",children:"Must Pass Final Exam of Another Subject(s)"})]}),n.prerequisite_type==="subject_exam"&&r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx($t,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Prerequisite Required"}),r.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Students must pass the final exam of ALL selected subjects before enrolling"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Prerequisite Subject(s)"," ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-lg p-3 bg-white space-y-2",children:l.length===0?r.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No other subjects available"}):l.map(u=>r.jsxs("label",{className:"flex items-center space-x-3 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[r.jsx("input",{type:"checkbox",value:u.id,checked:(n.prerequisite_subject_ids||[]).includes(u.id),onChange:h=>{const f=h.target.checked,m=parseInt(h.target.value);a(x=>({...x,prerequisite_subject_ids:f?[...x.prerequisite_subject_ids||[],m]:(x.prerequisite_subject_ids||[]).filter(p=>p!==m)}))},className:"form-checkbox h-4 w-4 text-blue-600"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:u.name}),r.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",u.code,")"]})]})]},u.id))}),n.prerequisite_subject_ids&&n.prerequisite_subject_ids.length>0&&r.jsxs("p",{className:"text-xs text-gray-600 mt-2",children:[" ",n.prerequisite_subject_ids.length," prerequisite(s) selected"]})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),r.jsxs("select",{name:"is_active",value:n.is_active,onChange:c,className:"input w-full",children:[r.jsx("option",{value:1,children:"Active"}),r.jsx("option",{value:0,children:"Inactive"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[r.jsx("button",{type:"button",onClick:s,className:"btn btn-outline",children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",children:e?"Update Subject":"Create Subject"})]})]})},nB=({subjectId:e,subjectName:t,classId:s,sectionId:n,onClose:a})=>{const i=Me(),l=Ie(Y=>Y.auth.user),c=(l==null?void 0:l.role)==="student",[d,u]=O.useState(null),[h,f]=O.useState([{id:null,name:t}]),[m,x]=O.useState(!1),[p,j]=O.useState(!1),[v,g]=O.useState(null),[y,b]=O.useState(null),{data:N,isLoading:k}=me({queryKey:["subject-files",e,s,n,d],queryFn:()=>$l.getFiles({subject_id:e,class_id:s,section_id:n,parent_folder_id:d})}),w=(N==null?void 0:N.data)||[],_=_e({mutationFn:Y=>$l.uploadFile(Y),onSuccess:()=>{i.invalidateQueries(["subject-files"]),x(!1),b(null)}}),S=_e({mutationFn:Y=>$l.createFolder(Y),onSuccess:()=>{i.invalidateQueries(["subject-files"]),j(!1)}}),E=_e({mutationFn:Y=>$l.deleteItem(Y),onSuccess:()=>{i.invalidateQueries(["subject-files"])}});_e({mutationFn:({id:Y,data:X})=>$l.updateItem(Y,X),onSuccess:()=>{i.invalidateQueries(["subject-files"]),g(null)}});const A=Y=>{u(Y.id),f([...h,{id:Y.id,name:Y.file_name}])},C=Y=>{const X=h.slice(0,Y+1);f(X),u(X[X.length-1].id)},D=Y=>{if(Y.preventDefault(),!y)return;const X=new FormData;X.append("file",y),X.append("subject_id",e),X.append("class_id",s),n&&X.append("section_id",n),d&&X.append("parent_folder_id",d),_.mutate(X)},M=Y=>{Y.preventDefault();const X=Y.target.folder_name.value;S.mutate({subject_id:e,class_id:s,section_id:n,folder_name:X,parent_folder_id:d})},L=async Y=>{try{const X=await $l.downloadFile(Y.id),Z=window.URL.createObjectURL(X),W=document.createElement("a");W.href=Z,W.download=Y.file_name,document.body.appendChild(W),W.click(),window.URL.revokeObjectURL(Z),document.body.removeChild(W)}catch(X){console.error("Download error:",X)}},z=Y=>{if(!Y)return"-";const X=["Bytes","KB","MB","GB"],Z=Math.floor(Math.log(Y)/Math.log(1024));return Math.round(Y/Math.pow(1024,Z)*100)/100+" "+X[Z]};return r.jsx(Ae,{isOpen:!0,onClose:a,title:`Files - ${t}`,size:"xl",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex items-center gap-2 text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:h.map((Y,X)=>r.jsxs(na.Fragment,{children:[X>0&&r.jsx(Pi,{className:"w-4 h-4"}),r.jsx("button",{onClick:()=>C(X),className:"hover:text-blue-600 font-medium",children:Y.name})]},Y.id||"root"))}),!c&&r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>x(!0),className:"btn btn-sm btn-primary flex items-center gap-2",children:[r.jsx(tD,{className:"w-4 h-4"}),"Upload File"]}),r.jsxs("button",{onClick:()=>j(!0),className:"btn btn-sm btn-outline flex items-center gap-2",children:[r.jsx(zM,{className:"w-4 h-4"}),"New Folder"]})]}),c&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:r.jsx("p",{className:"text-sm text-blue-800",children:" View and download course materials shared by your teacher"})}),r.jsx("div",{className:"border rounded-lg overflow-hidden",children:k?r.jsx("div",{className:"p-12 text-center",children:r.jsx("div",{className:"loading mx-auto"})}):w.length===0?r.jsxs("div",{className:"p-12 text-center text-gray-500",children:[r.jsx(UN,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),r.jsx("p",{children:"No files or folders yet"})]}):r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Size"}),r.jsx("th",{children:"Uploaded By"}),r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:w.map(Y=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx("div",{className:"flex items-center gap-2",children:Y.is_folder?r.jsxs(r.Fragment,{children:[r.jsx(UN,{className:"w-5 h-5 text-blue-500"}),r.jsx("button",{onClick:()=>A(Y),className:"font-medium hover:text-blue-600",children:Y.file_name})]}):r.jsxs(r.Fragment,{children:[r.jsx(UM,{className:"w-5 h-5 text-gray-500"}),r.jsx("span",{children:Y.file_name})]})})}),r.jsx("td",{children:z(Y.file_size)}),r.jsx("td",{className:"text-sm text-gray-600",children:Y.uploaded_by_name||"Unknown"}),r.jsx("td",{className:"text-sm text-gray-600",children:new Date(Y.created_at).toLocaleDateString()}),r.jsx("td",{children:r.jsxs("div",{className:"flex gap-1",children:[!Y.is_folder&&r.jsx("button",{onClick:()=>L(Y),className:"p-1 hover:bg-gray-100 rounded",title:"Download",children:r.jsx(El,{className:"w-4 h-4 text-green-600"})}),!c&&r.jsx("button",{onClick:()=>E.mutate(Y.id),className:"p-1 hover:bg-gray-100 rounded",title:"Delete",children:r.jsx(ut,{className:"w-4 h-4 text-red-600"})})]})})]},Y.id))})]})}),m&&r.jsx(Ae,{isOpen:!0,onClose:()=>x(!1),title:"Upload File",children:r.jsxs("form",{onSubmit:D,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select File"}),r.jsx("input",{type:"file",onChange:Y=>b(Y.target.files[0]),className:"input w-full",required:!0})]}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx("button",{type:"button",onClick:()=>x(!1),className:"btn btn-outline",children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:_.isPending,children:_.isPending?"Uploading...":"Upload"})]})]})}),p&&r.jsx(Ae,{isOpen:!0,onClose:()=>j(!1),title:"Create Folder",children:r.jsxs("form",{onSubmit:M,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Folder Name"}),r.jsx("input",{type:"text",name:"folder_name",className:"input w-full",placeholder:"Enter folder name",required:!0})]}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx("button",{type:"button",onClick:()=>j(!1),className:"btn btn-outline",children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:S.isPending,children:S.isPending?"Creating...":"Create"})]})]})})]})})},aB=({subjectId:e,subjectName:t,classId:s,sectionId:n,onClose:a})=>{var y;const i=Ie(b=>b.auth.user),l=(y=i==null?void 0:i.details)==null?void 0:y.id,o=We(),{data:c,isLoading:d}=me({queryKey:["subject-attendance",l,e],queryFn:()=>xn.get({student_id:l,subject_id:e}),enabled:!!l}),{data:u}=me({queryKey:["subject-attendance-stats",l,e],queryFn:()=>xn.getStats({student_id:l,subject_id:e}),enabled:!!l}),h=(c==null?void 0:c.data)||[],f=(u==null?void 0:u.data)||{total_days:0,present_count:0,absent_count:0,attendance_percentage:0},x=(b=>b>=80?"good":b>=60?"warning":"danger")(f.attendance_percentage),j={good:{color:"text-green-600",bgColor:"bg-green-100",borderColor:"border-green-500",icon:Ar,message:"Excellent attendance!",textColor:"text-green-800"},warning:{color:"text-yellow-600",bgColor:"bg-yellow-100",borderColor:"border-yellow-500",icon:If,message:"Attendance needs improvement",textColor:"text-yellow-800"},danger:{color:"text-red-600",bgColor:"bg-red-100",borderColor:"border-red-500",icon:If,message:"Critical: Low attendance!",textColor:"text-red-800"}}[x],v=j.icon,g=()=>{a(),o("/attendance")};return r.jsx(Ae,{isOpen:!0,onClose:a,title:`Attendance - ${t}`,size:"lg",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:`${j.bgColor} border-l-4 ${j.borderColor} p-4 rounded-lg`,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(v,{className:`w-6 h-6 ${j.color}`}),r.jsxs("div",{children:[r.jsx("p",{className:`font-semibold ${j.textColor}`,children:j.message}),r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Your attendance for this subject is"," ",f.attendance_percentage,"%"]})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[r.jsxs("div",{onClick:g,className:"bg-white border rounded-lg p-4 cursor-pointer hover:shadow-md hover:border-indigo-300 transition-all",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Percentage"}),r.jsxs("p",{className:`text-3xl font-bold ${j.color}`,children:[f.attendance_percentage,"%"]})]}),r.jsxs("div",{onClick:g,className:"bg-white border rounded-lg p-4 cursor-pointer hover:shadow-md hover:border-indigo-300 transition-all",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Present"}),r.jsx("p",{className:"text-3xl font-bold text-green-600",children:f.present_count})]}),r.jsxs("div",{onClick:g,className:"bg-white border rounded-lg p-4 cursor-pointer hover:shadow-md hover:border-indigo-300 transition-all",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Absent"}),r.jsx("p",{className:"text-3xl font-bold text-red-600",children:f.absent_count})]}),r.jsxs("div",{onClick:g,className:"bg-white border rounded-lg p-4 cursor-pointer hover:shadow-md hover:border-indigo-300 transition-all",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Total Days"}),r.jsx("p",{className:"text-3xl font-bold text-blue-600",children:f.total_days})]}),(i==null?void 0:i.role)!=="student"&&r.jsxs("div",{onClick:g,className:"bg-purple-50 border border-purple-200 rounded-lg p-4 cursor-pointer hover:bg-purple-100 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Be,{className:"w-4 h-4 text-purple-600"}),r.jsx("p",{className:"text-sm font-medium text-purple-800",children:"Add"})]}),r.jsx("p",{className:"text-sm font-medium text-purple-600 mt-2",children:"Attendance"})]})]}),r.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[r.jsx("div",{className:"bg-gray-50 p-4 border-b",children:r.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[r.jsx(Te,{className:"w-5 h-5"}),"Attendance Records"]})}),d?r.jsx("div",{className:"p-12 text-center",children:r.jsx("div",{className:"loading mx-auto"})}):h.length===0?r.jsxs("div",{className:"p-12 text-center text-gray-500",children:[r.jsx(Te,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),r.jsx("p",{children:"No attendance records found"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Remarks"})]})}),r.jsx("tbody",{children:h.map(b=>r.jsxs("tr",{children:[r.jsx("td",{className:"font-medium",children:new Date(b.date).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})}),r.jsx("td",{children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize ${b.status==="present"?"bg-green-100 text-green-800":b.status==="absent"?"bg-red-100 text-red-800":b.status==="late"?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:b.status==="excused"?"Leave":b.status})}),r.jsx("td",{className:"text-sm text-gray-600",children:b.remarks||"-"})]},b.id))})]})})]})]})})},iB=({subjectId:e,subjectName:t,classId:s,sectionId:n,onClose:a})=>{const i=We(),l=Ie(mr),{data:o,isLoading:c}=me({queryKey:["subject-assignments",e,s,n],queryFn:()=>Ps.getAll({subject_id:e,class_id:s,section_id:n})}),d=(o==null?void 0:o.data)||[],u=d.filter(x=>new Date(x.due_date)>=new Date),h=d.filter(x=>new Date(x.due_date)<new Date),f=x=>{i(`/assignments/${x}`),a()},m=()=>{i("/assignments",{state:{subject_id:e,class_id:s,section_id:n,filter:"all"}}),a()};return r.jsx(Ae,{isOpen:!0,onClose:a,title:`Assignments - ${t}`,size:"lg",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[r.jsxs("div",{onClick:()=>{i("/assignments",{state:{subject_id:e,class_id:s,section_id:n,filter:"upcoming"}}),a()},className:"bg-green-50 border border-green-200 rounded-lg p-4 cursor-pointer hover:bg-green-100 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),r.jsx("p",{className:"text-sm font-medium text-green-800",children:"Active"})]}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:u.length})]}),r.jsxs("div",{onClick:()=>{i("/assignments",{state:{subject_id:e,class_id:s,section_id:n,filter:"overdue"}}),a()},className:"bg-gray-50 border border-gray-200 rounded-lg p-4 cursor-pointer hover:bg-gray-100 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx($N,{className:"w-4 h-4 text-gray-600"}),r.jsx("p",{className:"text-sm font-medium text-gray-800",children:"Completed"})]}),r.jsx("p",{className:"text-2xl font-bold text-gray-600",children:h.length})]}),r.jsxs("div",{onClick:m,className:"bg-blue-50 border border-blue-200 rounded-lg p-4 cursor-pointer hover:bg-blue-100 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(bg,{className:"w-4 h-4 text-blue-600"}),r.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Total"})]}),r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:d.length})]}),l!=="student"&&r.jsxs("div",{onClick:()=>{i("/assignments",{state:{openCreateModal:!0,subject_id:e,class_id:s,section_id:n}}),a()},className:"bg-purple-50 border border-purple-200 rounded-lg p-4 cursor-pointer hover:bg-purple-100 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Be,{className:"w-4 h-4 text-purple-600"}),r.jsx("p",{className:"text-sm font-medium text-purple-800",children:"Create"})]}),r.jsx("p",{className:"text-sm font-medium text-purple-600 mt-2",children:"Add New"})]})]}),u.length>0&&r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),"Active Assignments"]}),r.jsx("div",{className:"space-y-3",children:u.map(x=>{const p=Math.ceil((new Date(x.due_date)-new Date)/864e5);return r.jsxs("div",{onClick:()=>f(x.id),className:"border border-green-200 bg-green-50 rounded-lg p-4 cursor-pointer hover:shadow-md transition-all",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:x.title}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:x.description})]}),r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-600 text-white",children:"Active"})]}),r.jsxs("div",{className:"mt-3 flex items-center gap-4 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1 text-orange-600",children:[r.jsx(Nt,{className:"w-4 h-4"}),r.jsx("span",{className:"font-medium",children:p>0?`${p} days left`:"Due today"})]}),r.jsxs("div",{className:"text-gray-600",children:["Due:"," ",new Date(x.due_date).toLocaleDateString()]})]})]},x.id)})})]}),h.length>0&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Past Assignments"}),r.jsx("div",{className:"space-y-2",children:h.map(x=>r.jsx("div",{onClick:()=>f(x.id),className:"border rounded-lg p-3 bg-gray-50 cursor-pointer hover:bg-gray-100 transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-700",children:x.title}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Due:"," ",new Date(x.due_date).toLocaleDateString()]})]}),r.jsx($N,{className:"w-5 h-5 text-gray-400"})]})},x.id))})]}),c?r.jsx("div",{className:"p-12 text-center",children:r.jsx("div",{className:"loading mx-auto"})}):d.length===0?r.jsxs("div",{className:"p-12 text-center text-gray-500",children:[r.jsx(bg,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),r.jsx("p",{children:"No assignments for this subject yet"})]}):null]})})},lB=({subjectId:e,subjectName:t,teacherId:s,teacherName:n,onClose:a})=>{const i=We(),[l,o]=O.useState(""),c=()=>{l.trim()&&(i("/messages",{state:{recipientId:s,recipientName:n,prefillMessage:`Regarding ${t}: ${l}`}}),a())},d=()=>{i("/messages",{state:{recipientId:s,recipientName:n}}),a()};return r.jsx(Ae,{isOpen:!0,onClose:a,title:`Contact Teacher - ${t}`,children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center",children:r.jsx(tt,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Subject Teacher"}),r.jsx("p",{className:"font-semibold text-gray-900",children:n||"Not assigned"})]})]})}),s?r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quick Enquiry"}),r.jsx("textarea",{value:l,onChange:u=>o(u.target.value),className:"textarea w-full h-32",placeholder:`Write your question about ${t}...`}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This will open the chat with your message pre-filled"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:c,disabled:!l.trim(),className:"btn btn-primary flex-1 flex items-center justify-center gap-2",children:[r.jsx(Gd,{className:"w-4 h-4"}),"Send Enquiry"]}),r.jsxs("button",{onClick:d,className:"btn btn-outline flex-1 flex items-center justify-center gap-2",children:[r.jsx(vg,{className:"w-4 h-4"}),"Open Chat"]})]}),r.jsx("div",{className:"bg-gray-50 rounded-lg p-3 text-sm text-gray-600",children:r.jsxs("p",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-blue-600",children:""}),r.jsxs("span",{children:["You can ask questions about assignments, clarify doubts, or discuss anything related to ",t,"."]})]})})]}):r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(vg,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),r.jsx("p",{children:"No teacher assigned to this subject yet"})]})]})})},ry=({subject:e,classId:t,sectionId:s,teacherId:n})=>{const[a,i]=O.useState(null),l=[{id:"files",icon:Ue,label:"Files",color:"text-blue-600",bgColor:"bg-blue-100 hover:bg-blue-200",description:"Manage subject files and folders"},{id:"attendance",icon:Xe,label:"Attendance",color:"text-green-600",bgColor:"bg-green-100 hover:bg-green-200",description:"View subject-specific attendance"},{id:"assignments",icon:bg,label:"Assignments",color:"text-orange-600",bgColor:"bg-orange-100 hover:bg-orange-200",description:"Active assignments for this subject"},{id:"enquiry",icon:vg,label:"Teacher",color:"text-purple-600",bgColor:"bg-purple-100 hover:bg-purple-200",description:"Contact assigned teacher"}],o=d=>{i(d)},c=()=>{i(null)};return r.jsxs("div",{className:"flex items-center gap-2",children:[l.map(d=>{const u=d.icon;return r.jsxs("button",{onClick:()=>o(d.id),className:`p-2 rounded-lg transition-all ${d.bgColor} group relative`,title:d.description,children:[r.jsx(u,{className:`w-5 h-5 ${d.color}`}),r.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:d.label})]},d.id)}),a==="files"&&r.jsx(nB,{subjectId:e.subject_id||e.id,subjectName:e.subject_name||e.name,classId:t,sectionId:s,onClose:c}),a==="attendance"&&r.jsx(aB,{subjectId:e.subject_id||e.id,subjectName:e.subject_name||e.name,classId:t,sectionId:s,onClose:c}),a==="assignments"&&r.jsx(iB,{subjectId:e.subject_id||e.id,subjectName:e.subject_name||e.name,classId:t,sectionId:s,onClose:c}),a==="enquiry"&&r.jsx(lB,{subjectId:e.subject_id||e.id,subjectName:e.subject_name||e.name,teacherId:n||e.teacher_id||(e.teacher_ids?parseInt(e.teacher_ids.split(",")[0]):null),teacherName:e.teacher_name||(e.teacher_names?e.teacher_names.split(",")[0]:null),onClose:c})]})},oB=({subjects:e,isLoading:t,onRefetch:s})=>{const[n,a]=O.useState(null),[i,l]=O.useState(null),[o,c]=O.useState(!1),[d,u]=O.useState(!1),h=p=>{a(p),c(!0)},f=p=>{l(p),u(!0)},m=async p=>{try{await sn.update(n.id,p),K.success("Subject updated successfully!"),c(!1),a(null),s()}catch(j){K.error(j.message||"Failed to update subject")}},x=async()=>{try{await sn.delete(i.id),K.success("Subject deleted successfully!"),u(!1),l(null),s()}catch(p){K.error(p.message||"Failed to delete subject")}};return t?r.jsx("div",{className:"card",children:r.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(5)].map((p,j)=>r.jsx("div",{className:"h-16 bg-gray-200 rounded"},j))})}):!e||e.length===0?r.jsxs("div",{className:"card text-center py-12",children:[r.jsx(De,{className:"w-16 h-16 text-gray-400 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500",children:"No subjects found"})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"card overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nature"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prerequisite"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quick Actions"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Manage"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(p=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:r.jsx("div",{className:"h-10 w-10 rounded-full bg-purple-100 flex items-center justify-center",children:r.jsx(De,{className:"w-5 h-5 text-purple-600"})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:p.name}),p.description&&r.jsx("div",{className:"text-sm text-gray-500",children:p.description})]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:p.code})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${p.subject_nature==="compulsory"?"bg-indigo-100 text-indigo-800":"bg-amber-100 text-amber-800"}`,children:p.subject_nature==="compulsory"?" Compulsory":" Elective"})}),r.jsx("td",{className:"px-6 py-4",children:p.prerequisite_type==="subject_exam"&&p.prerequisite_subject_names?r.jsx("div",{className:"text-xs",children:r.jsxs("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 rounded-full font-medium",children:[" Requires: ",p.prerequisite_subject_names]})}):r.jsx("span",{className:"text-xs text-gray-500",children:"No prerequisite"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${p.is_active===1?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:p.is_active===1?"Active":"Inactive"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx(ry,{subject:{subject_id:p.id,subject_name:p.name,subject_code:p.code},classId:null,sectionId:null,teacherId:null})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(st,{permission:ie.MANAGE_CLASS_SUBJECTS,children:r.jsx("button",{onClick:()=>h(p),className:"text-green-600 hover:text-green-900",title:"Edit",children:r.jsx(ct,{className:"w-5 h-5"})})}),r.jsx(st,{permission:ie.MANAGE_CLASS_SUBJECTS,children:r.jsx("button",{onClick:()=>f(p),className:"text-red-600 hover:text-red-900",title:"Delete",children:r.jsx(ut,{className:"w-5 h-5"})})})]})})]},p.id))})]})})}),r.jsx(Ae,{isOpen:o,onClose:()=>{c(!1),a(null)},title:"Edit Subject",size:"md",children:r.jsx(lC,{subject:n,onSubmit:m,onCancel:()=>{c(!1),a(null)}})}),r.jsx(Ae,{isOpen:d,onClose:()=>{u(!1),l(null)},title:"Delete Subject",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("p",{className:"text-gray-600",children:["Are you sure you want to delete"," ",r.jsx("strong",{children:i==null?void 0:i.name}),"? This action cannot be undone."]}),r.jsxs("div",{className:"flex justify-end space-x-4",children:[r.jsx("button",{onClick:()=>{u(!1),l(null)},className:"btn btn-outline",children:"Cancel"}),r.jsx("button",{onClick:x,className:"btn bg-red-600 hover:bg-red-700 text-white",children:"Delete"})]})]})})]})},cB=()=>{var h,f;const e=Me(),t=Ie(mr),s=t==="teacher",[n,a]=O.useState(!1),[i,l]=O.useState({status:"active",search:""}),{data:o,isLoading:c,refetch:d}=me({queryKey:s?["my-subjects"]:["subjects",i],queryFn:s?Pt.getMySubjects:()=>sn.getAll(i)}),u=async m=>{try{await sn.create(m),K.success("Subject added successfully!"),a(!1),e.invalidateQueries({queryKey:["subjects"]})}catch(x){K.error(x.message||"Failed to add subject")}};if(t==="student"){const m=Ie(y=>y.auth.user),x=(h=m==null?void 0:m.details)==null?void 0:h.class_id,p=(f=m==null?void 0:m.details)==null?void 0:f.section_id,{data:j,isLoading:v}=me({queryKey:["student-subjects",x,p],queryFn:async()=>x?await sn.getAll({status:"active"}):{data:[]},enabled:!!x}),g=(j==null?void 0:j.data)||[];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Subjects"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"View course materials and resources"})]}),r.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:v?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"loading"})}):g.length===0?r.jsxs("div",{className:"p-12 text-center text-gray-500",children:[r.jsx(De,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),r.jsx("p",{children:"No subjects assigned yet"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-6",children:g.map(y=>r.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-lg transition-shadow",children:[r.jsx("div",{className:"flex items-start justify-between mb-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center",children:r.jsx(De,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:y.name}),r.jsx("p",{className:"text-sm text-gray-500",children:y.code})]})]})}),y.description&&r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:y.description}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Quick Access"}),r.jsx(ry,{subject:{subject_id:y.id,subject_name:y.name,subject_code:y.code,teacher_ids:y.teacher_ids,teacher_names:y.teacher_names,teacher_user_ids:y.teacher_user_ids},classId:x,sectionId:p,teacherId:y.teacher_user_ids?parseInt(y.teacher_user_ids.split(",")[0]):null,teacherName:y.teacher_names?y.teacher_names.split(",")[0]:null})]})]},y.id))})})]})}if(s){const m=(o==null?void 0:o.data)||[];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Subjects"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Subjects you are assigned to teach"})]}),r.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:c?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"loading"})}):m.length===0?r.jsxs("div",{className:"p-12 text-center text-gray-500",children:[r.jsx(De,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),r.jsx("p",{children:"No subjects assigned yet"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Subject"}),r.jsx("th",{children:"Code"}),r.jsx("th",{children:"Class"}),r.jsx("th",{children:"Section"}),r.jsx("th",{children:"Assignment Level"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:m.map((x,p)=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:r.jsx(De,{className:"w-5 h-5 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:x.subject_name}),x.subject_description&&r.jsx("div",{className:"text-sm text-gray-500",children:x.subject_description})]})]})}),r.jsx("td",{children:r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:x.subject_code})}),r.jsx("td",{children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Cl,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{children:x.class_name}),r.jsxs("span",{className:"text-xs text-gray-500",children:["(",x.grade_level,")"]})]})}),r.jsx("td",{children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${x.section_name==="All Sections"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:x.section_name})}),r.jsx("td",{children:r.jsx("span",{className:"text-sm text-gray-600 capitalize",children:x.assignment_level})}),r.jsx("td",{children:r.jsx(ry,{subject:x,classId:x.class_id,sectionId:x.section_id,teacherId:x.teacher_id})})]},`${x.subject_id}-${x.class_id}-${x.section_id||"all"}-${p}`))})]})})})]})}return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Subjects"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage school subjects"})]}),r.jsx(st,{permission:ie.MANAGE_CLASS_SUBJECTS,children:r.jsxs("button",{onClick:()=>a(!0),className:"btn btn-primary flex items-center space-x-2",children:[r.jsx(Be,{className:"w-5 h-5"}),r.jsx("span",{children:"Add Subject"})]})})]}),r.jsx("div",{className:"card",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"relative md:col-span-2",children:[r.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Search subjects...",value:i.search,onChange:m=>l({...i,search:m.target.value}),className:"input pl-10"})]}),r.jsxs("button",{onClick:()=>l({status:"active",search:""}),className:"btn btn-outline flex items-center justify-center space-x-2",children:[r.jsx(cn,{className:"w-4 h-4"}),r.jsx("span",{children:"Reset"})]})]})}),r.jsx(oB,{subjects:(o==null?void 0:o.data)||[],isLoading:c,onRefetch:d}),r.jsx(Ae,{isOpen:n,onClose:()=>a(!1),title:"Add New Subject",size:"md",children:r.jsx(lC,{onSubmit:u,onCancel:()=>a(!1)})})]})},dB=({isOpen:e,onClose:t,onSubmit:s,schedule:n,examData:a})=>{var v,g,y;const[i,l]=O.useState({subject_id:"",exam_date:"",start_time:"",end_time:"",room_number:"",max_marks:(a==null?void 0:a.total_marks)||100,passing_marks:(a==null?void 0:a.passing_marks)||40}),[o,c]=O.useState({}),{data:d}=me({queryKey:["class-subjects",a==null?void 0:a.class_id],queryFn:()=>kb.getByClass(a==null?void 0:a.class_id),enabled:e&&!!(a!=null&&a.class_id)}),{data:u}=me({queryKey:["all-subjects"],queryFn:()=>sn.getAll({status:"active"}),enabled:e&&((v=d==null?void 0:d.data)==null?void 0:v.length)===0}),h=(d==null?void 0:d.data)||[],f=(u==null?void 0:u.data)||[],m=h.length>0?h.map(b=>({id:b.subject_id,name:b.subject_name,code:b.subject_code})):f;O.useEffect(()=>{var b;n?l({subject_id:n.subject_id,exam_date:((b=n.exam_date)==null?void 0:b.split("T")[0])||"",start_time:n.start_time||"",end_time:n.end_time||"",room_number:n.room_number||"",max_marks:n.max_marks,passing_marks:n.passing_marks}):a&&l(N=>({...N,max_marks:a.total_marks||100,passing_marks:a.passing_marks||40}))},[n,a]);const x=()=>{const b={};if(i.subject_id||(b.subject_id="Subject is required"),i.exam_date||(b.exam_date="Exam date is required"),i.start_time||(b.start_time="Start time is required"),i.end_time||(b.end_time="End time is required"),i.max_marks||(b.max_marks="Max marks is required"),i.passing_marks||(b.passing_marks="Passing marks is required"),i.exam_date&&a){const N=new Date(i.exam_date),k=new Date(a.start_date),w=new Date(a.end_date);(N<k||N>w)&&(b.exam_date=`Date must be between ${k.toLocaleDateString()} and ${w.toLocaleDateString()}`)}return i.start_time&&i.end_time&&i.start_time>=i.end_time&&(b.end_time="End time must be after start time"),i.passing_marks&&i.max_marks&&parseInt(i.passing_marks)>parseInt(i.max_marks)&&(b.passing_marks="Passing marks cannot exceed max marks"),c(b),Object.keys(b).length===0},p=b=>{b.preventDefault(),x()&&s(i)},j=b=>{const{name:N,value:k}=b.target;l(w=>({...w,[N]:k})),o[N]&&c(w=>({...w,[N]:""}))};return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-4 flex items-center justify-between rounded-t-2xl",children:[r.jsx("h2",{className:"text-2xl font-bold",children:n?"Edit Schedule":"Add Schedule"}),r.jsx("button",{onClick:t,className:"text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-lg transition-colors",children:r.jsx(qr,{className:"w-6 h-6"})})]}),r.jsxs("form",{onSubmit:p,className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[r.jsx(De,{className:"w-4 h-4 inline mr-2"}),"Subject *"]}),r.jsxs("select",{name:"subject_id",value:i.subject_id,onChange:j,className:`input w-full ${o.subject_id?"border-red-500":""}`,disabled:!!n,children:[r.jsx("option",{value:"",children:"Select Subject"}),m.map(b=>r.jsxs("option",{value:b.id,children:[b.name," ",b.code?`(${b.code})`:""]},b.id))]}),o.subject_id&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.subject_id}),h.length===0&&f.length>0&&r.jsx("p",{className:"text-yellow-600 text-xs mt-1",children:" No subjects assigned to this class. Showing all subjects."})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[r.jsx(Te,{className:"w-4 h-4 inline mr-2"}),"Exam Date *"]}),r.jsx("input",{type:"date",name:"exam_date",value:i.exam_date,onChange:j,min:(g=a==null?void 0:a.start_date)==null?void 0:g.split("T")[0],max:(y=a==null?void 0:a.end_date)==null?void 0:y.split("T")[0],className:`input w-full ${o.exam_date?"border-red-500":""}`}),o.exam_date&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.exam_date})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[r.jsx(Nt,{className:"w-4 h-4 inline mr-2"}),"Start Time *"]}),r.jsx("input",{type:"time",name:"start_time",value:i.start_time,onChange:j,className:`input w-full ${o.start_time?"border-red-500":""}`}),o.start_time&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.start_time})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[r.jsx(Nt,{className:"w-4 h-4 inline mr-2"}),"End Time *"]}),r.jsx("input",{type:"time",name:"end_time",value:i.end_time,onChange:j,className:`input w-full ${o.end_time?"border-red-500":""}`}),o.end_time&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.end_time})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[r.jsx(Rn,{className:"w-4 h-4 inline mr-2"}),"Room Number"]}),r.jsx("input",{type:"text",name:"room_number",value:i.room_number,onChange:j,placeholder:"e.g., Room 101, Hall A",className:"input w-full"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[r.jsx(rs,{className:"w-4 h-4 inline mr-2"}),"Maximum Marks *"]}),r.jsx("input",{type:"number",name:"max_marks",value:i.max_marks,onChange:j,min:"1",className:`input w-full ${o.max_marks?"border-red-500":""}`}),o.max_marks&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.max_marks})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[r.jsx(Dl,{className:"w-4 h-4 inline mr-2"}),"Passing Marks *"]}),r.jsx("input",{type:"number",name:"passing_marks",value:i.passing_marks,onChange:j,min:"1",max:i.max_marks,className:`input w-full ${o.passing_marks?"border-red-500":""}`}),o.passing_marks&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.passing_marks}),i.max_marks&&i.passing_marks&&r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Pass Percentage:"," ",(i.passing_marks/i.max_marks*100).toFixed(1),"%"]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[r.jsx("button",{type:"button",onClick:t,className:"px-6 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-lg transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors shadow-lg hover:shadow-xl",children:n?"Update Schedule":"Add Schedule"})]})]})]})}):null},uB=({examId:e,examData:t})=>{const s=Me(),[n,a]=O.useState(!1),[i,l]=O.useState(null),[o,c]=O.useState(null),{data:d,isLoading:u}=me({queryKey:["exam-schedules",e],queryFn:()=>oo.getExamSchedules(e),enabled:!!e}),h=(d==null?void 0:d.data)||[],f=_e({mutationFn:w=>oo.create({...w,exam_id:e}),onSuccess:()=>{K.success("Schedule added successfully"),a(!1),s.invalidateQueries(["exam-schedules",e])},onError:w=>{K.error(w.message||"Failed to add schedule")}}),m=_e({mutationFn:({id:w,data:_})=>oo.update(w,_),onSuccess:()=>{K.success("Schedule updated successfully"),a(!1),l(null),s.invalidateQueries(["exam-schedules",e])},onError:w=>{K.error(w.message||"Failed to update schedule")}}),x=_e({mutationFn:w=>oo.delete(w),onSuccess:()=>{K.success("Schedule deleted successfully"),c(null),s.invalidateQueries(["exam-schedules",e])},onError:w=>{K.error(w.message||"Failed to delete schedule")}}),p=()=>{l(null),a(!0)},j=w=>{l(w),a(!0)},v=w=>{i?m.mutate({id:i.id,data:w}):f.mutate(w)},g=()=>{o&&x.mutate(o.id)},y=w=>new Date(w).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}),b=w=>w?new Date(`2000-01-01T${w}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):"",N=(w,_)=>{if(!w||!_)return"";const S=new Date(`2000-01-01T${w}`),A=(new Date(`2000-01-01T${_}`)-S)/(1e3*60),C=Math.floor(A/60),D=A%60;return`${C}h ${D}m`},k=h.reduce((w,_)=>{var E;const S=(E=_.exam_date)==null?void 0:E.split("T")[0];return w[S]||(w[S]=[]),w[S].push(_),w},{});return u?r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[r.jsx("div",{className:"flex items-center justify-between mb-6",children:r.jsxs("h3",{className:"text-xl font-bold text-black flex items-center",children:[r.jsx(Te,{className:"w-6 h-6 mr-2 text-blue-600"}),"Exam Schedule"]})}),h.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Te,{className:"w-10 h-10 text-gray-400"})}),r.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Schedule Added"}),r.jsx("p",{className:"text-gray-500 mb-6",children:"Create your first exam schedule to get started"}),r.jsx(st,{permission:ie.EDIT_EXAMS,children:r.jsxs("button",{onClick:p,className:"btn btn-primary",children:[r.jsx(Be,{className:"w-5 h-5 inline mr-2"}),"Add First Schedule"]})})]}):r.jsx("div",{className:"space-y-6",children:Object.entries(k).map(([w,_])=>r.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[r.jsx("div",{className:"flex items-center mb-3",children:r.jsx("div",{className:"bg-blue-600 rounded-lg px-4 py-2",children:r.jsx("p",{className:"text-sm font-semibold text-white",children:y(w)})})}),r.jsx("div",{className:"space-y-3",children:_.map(S=>r.jsx("div",{className:"bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors border border-gray-200",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"flex items-center space-x-4 mb-3",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(De,{className:"w-5 h-5 text-blue-600 mr-2"}),r.jsx("span",{className:"font-semibold text-black text-lg",children:S.subject_name}),S.subject_code&&r.jsxs("span",{className:"ml-2 text-sm text-black",children:["(",S.subject_code,")"]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(Nt,{className:"w-4 h-4 text-blue-600 mr-2"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Time"}),r.jsxs("p",{className:"font-medium text-gray-900",children:[b(S.start_time)," -"," ",b(S.end_time)]}),r.jsx("p",{className:"text-xs text-gray-500",children:N(S.start_time,S.end_time)})]})]}),S.room_number&&r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(Rn,{className:"w-4 h-4 text-gray-400 mr-2"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Room"}),r.jsx("p",{className:"font-medium text-gray-900",children:S.room_number})]})]}),r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(rs,{className:"w-4 h-4 text-blue-600 mr-2"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Max Marks"}),r.jsx("p",{className:"font-medium text-gray-900",children:S.max_marks})]})]}),r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(Dl,{className:"w-4 h-4 text-blue-600 mr-2"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Passing Marks"}),r.jsxs("p",{className:"font-medium text-gray-900",children:[S.passing_marks," (",(S.passing_marks/S.max_marks*100).toFixed(0),"%)"]})]})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[r.jsx(st,{permission:ie.EDIT_EXAMS,children:r.jsx("button",{onClick:()=>j(S),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Schedule",children:r.jsx(ct,{className:"w-5 h-5"})})}),r.jsx(st,{permission:ie.DELETE_EXAMS,children:r.jsx("button",{onClick:()=>c(S),className:"p-2 text-black hover:bg-gray-100 rounded-lg transition-colors",title:"Delete Schedule",children:r.jsx(ut,{className:"w-5 h-5"})})})]})]})},S.id))})]},w))}),r.jsx(dB,{isOpen:n,onClose:()=>{a(!1),l(null)},onSubmit:v,schedule:i,examData:t}),o&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center",children:r.jsx($t,{className:"w-6 h-6 text-blue-600"})})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Delete Schedule"}),r.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Are you sure you want to delete the schedule for"," ",r.jsx("span",{className:"font-semibold",children:o.subject_name}),"? This action cannot be undone."]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{onClick:()=>c(null),className:"px-4 py-2 bg-white hover:bg-gray-50 text-black border border-gray-200 font-medium rounded-lg transition-colors",children:"Cancel"}),r.jsx("button",{onClick:g,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors",children:"Delete"})]})]})]})})})]})},hB=()=>{const{id:e}=bs(),t=We(),{data:s,isLoading:n}=me({queryKey:["exam",e],queryFn:()=>Rs.getById(e)}),a=s==null?void 0:s.data;if(n)return r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!a)return r.jsxs("div",{className:"text-center py-12",children:[r.jsx($t,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500 text-lg",children:"Exam not found"}),r.jsx("button",{onClick:()=>t("/exams"),className:"mt-4 btn btn-primary",children:"Back to Exams"})]});const l=(()=>{const f=new Date,m=new Date(a.start_date),x=new Date(a.end_date);return f<m?{status:"upcoming",color:"blue",bgColor:"bg-white",lightBg:"bg-white",textColor:"text-black",borderColor:"border-blue-600"}:f>=m&&f<=x?{status:"ongoing",color:"blue",bgColor:"bg-blue-600",lightBg:"bg-white",textColor:"text-black",borderColor:"border-blue-600"}:f>x?{status:"completed",color:"gray",bgColor:"bg-white",lightBg:"bg-white",textColor:"text-black",borderColor:"border-gray-200"}:{status:"unknown",color:"gray",bgColor:"bg-white",lightBg:"bg-white",textColor:"text-black",borderColor:"border-gray-200"}})(),o=f=>({term:"bg-white text-black border-blue-600",midterm:"bg-white text-black border-blue-600",final:"bg-white text-black border-blue-600",unit_test:"bg-white text-black border-blue-600",monthly:"bg-white text-black border-blue-600",quarterly:"bg-white text-black border-blue-600",annual:"bg-white text-black border-blue-600"})[f]||"bg-white text-black border-gray-300",c=f=>new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),d=f=>new Date(f).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),u=()=>{const f=new Date(a.start_date),m=new Date(a.end_date),x=Math.abs(m-f);return Math.ceil(x/(1e3*60*60*24))+1},h=()=>{const f=new Date,m=new Date(a.start_date),x=new Date(a.end_date);if(f<m){const p=m-f,j=Math.ceil(p/(1e3*60*60*24));return`Starts in ${j} ${j===1?"day":"days"}`}else if(f>=m&&f<=x){const p=x-f,j=Math.ceil(p/(1e3*60*60*24));return`Ends in ${j} ${j===1?"day":"days"}`}else{const p=f-x,j=Math.floor(p/(1e3*60*60*24));return`Ended ${j} ${j===1?"day":"days"} ago`}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("button",{onClick:()=>t("/exams"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[r.jsx(js,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Back to Exams"})]}),r.jsx(st,{permission:ie.EDIT_EXAMS,children:r.jsxs("button",{onClick:()=>t(`/exams/${e}/edit`),className:"btn btn-primary flex items-center space-x-2 shadow-lg hover:shadow-xl transition-shadow",children:[r.jsx(ct,{className:"w-5 h-5"}),r.jsx("span",{children:"Edit Exam"})]})})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[r.jsxs("div",{className:`${l.status==="ongoing","bg-blue-600"} h-24 relative`,children:[r.jsx("div",{className:"absolute inset-0 bg-black opacity-10"}),r.jsx("div",{className:"absolute bottom-6 left-6 right-6",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"px-4 py-2 inline-flex text-sm font-semibold rounded-full capitalize bg-white bg-opacity-20 text-white backdrop-blur-sm border border-white border-opacity-30",children:l.status}),r.jsx("span",{className:"px-4 py-2 inline-flex text-sm font-semibold rounded-full bg-white bg-opacity-20 text-white backdrop-blur-sm border border-white border-opacity-30",children:h()})]})})]}),r.jsxs("div",{className:"px-8 pb-8",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-end mb-6",children:[r.jsx("div",{className:"w-32 h-32 rounded-2xl border-4 border-white bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center mb-4 md:mb-0 shadow-2xl",children:r.jsx(De,{className:"w-16 h-16 text-white"})}),r.jsxs("div",{className:"md:ml-6 flex-1",children:[r.jsx("h1",{className:"text-4xl font-bold text-black mb-2",children:a.name}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsx("span",{className:`px-3 py-1.5 inline-flex text-sm font-semibold rounded-lg border-2 ${o(a.exam_type)}`,children:a.exam_type.replace("_"," ").toUpperCase()}),r.jsxs("span",{className:"flex items-center text-gray-600",children:[r.jsx(Te,{className:"w-4 h-4 mr-1.5"}),"Academic Year: ",a.academic_year]}),r.jsxs("span",{className:`flex items-center px-3 py-1.5 rounded-lg ${a.is_active?"bg-white text-black border border-blue-600":"bg-white text-black border border-gray-200"}`,children:[r.jsx(BN,{className:"w-4 h-4 mr-1.5 text-blue-600"}),a.is_active?"Active":"Inactive"]})]})]})]}),a.description&&r.jsx("div",{className:`mb-8 p-4 rounded-xl ${l.lightBg} border border-${l.color}-200`,children:r.jsx("p",{className:`text-sm ${l.textColor} leading-relaxed`,children:a.description})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[r.jsxs("div",{className:"bg-white rounded-xl p-5 border border-gray-200",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsx(Dl,{className:"w-8 h-8 text-blue-600"})}),r.jsx("p",{className:"text-sm text-black font-medium mb-1",children:"Total Marks"}),r.jsx("p",{className:"text-3xl font-bold text-black",children:a.total_marks})]}),r.jsxs("div",{className:"bg-white rounded-xl p-5 border border-gray-200",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsx(Ar,{className:"w-8 h-8 text-blue-600"})}),r.jsx("p",{className:"text-sm text-black font-medium mb-1",children:"Passing Marks"}),r.jsx("p",{className:"text-3xl font-bold text-black",children:a.passing_marks})]}),r.jsxs("div",{className:"bg-white rounded-xl p-5 border border-gray-200",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsx(rs,{className:"w-8 h-8 text-blue-600"})}),r.jsx("p",{className:"text-sm text-black font-medium mb-1",children:"Pass Percentage"}),r.jsxs("p",{className:"text-3xl font-bold text-black",children:[(a.passing_marks/a.total_marks*100).toFixed(1),"%"]})]}),r.jsxs("div",{className:"bg-white rounded-xl p-5 border border-gray-200",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsx(Nt,{className:"w-8 h-8 text-blue-600"})}),r.jsx("p",{className:"text-sm text-black font-medium mb-1",children:"Duration"}),r.jsxs("p",{className:"text-3xl font-bold text-black",children:[u(),r.jsx("span",{className:"text-lg ml-1",children:u()===1?"day":"days"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center border-b-2 border-gray-200 pb-3",children:[r.jsx(Te,{className:"w-6 h-6 mr-2 text-blue-600"}),"Schedule Information"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-white rounded-xl border border-gray-200",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center flex-shrink-0",children:r.jsx(Te,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-black mb-1",children:"Start Date"}),r.jsx("p",{className:"text-lg font-bold text-black",children:c(a.start_date)}),r.jsx("p",{className:"text-xs text-blue-600 mt-1",children:d(a.start_date)})]})]}),r.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-white rounded-xl border border-gray-200",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center flex-shrink-0",children:r.jsx(Te,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-black mb-1",children:"End Date"}),r.jsx("p",{className:"text-lg font-bold text-black",children:c(a.end_date)}),r.jsx("p",{className:"text-xs text-blue-600 mt-1",children:d(a.end_date)})]})]}),r.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-white rounded-xl border border-gray-200",children:[r.jsx("div",{className:"w-12 h-12 bg-black rounded-lg flex items-center justify-center flex-shrink-0",children:r.jsx(De,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-black mb-1",children:"Class"}),r.jsx("p",{className:"text-lg font-bold text-black",children:a.class_name||`Class ${a.class_id}`})]})]})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center border-b-2 border-gray-200 pb-3",children:[r.jsx(Ue,{className:"w-6 h-6 mr-2 text-purple-600"}),"Additional Information"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-white rounded-xl border border-gray-200",children:[r.jsx("div",{className:"w-12 h-12 bg-white border border-blue-600 rounded-lg flex items-center justify-center flex-shrink-0",children:r.jsx(Ue,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-black mb-1",children:"Exam Type"}),r.jsx("p",{className:"text-lg font-bold text-black capitalize",children:a.exam_type.replace("_"," ")})]})]}),r.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-white rounded-xl border border-gray-200",children:[r.jsx("div",{className:"w-12 h-12 bg-white border border-blue-600 rounded-lg flex items-center justify-center flex-shrink-0",children:r.jsx(Te,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-black mb-1",children:"Created Date"}),r.jsx("p",{className:"text-lg font-bold text-black",children:c(a.created_at)})]})]}),r.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-white rounded-xl border border-gray-200",children:[r.jsx("div",{className:"w-12 h-12 bg-white border border-blue-600 rounded-lg flex items-center justify-center flex-shrink-0",children:r.jsx(BN,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-black mb-1",children:"Status"}),r.jsx("p",{className:"text-lg font-bold text-black",children:a.is_active?"Active":"Inactive"})]})]})]})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-600 hover:shadow-xl transition-shadow",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"text-sm font-semibold text-black",children:"Total Students"}),r.jsx(Xe,{className:"w-6 h-6 text-blue-600"})]}),r.jsx("p",{className:"text-4xl font-bold text-black mb-2",children:"0"}),r.jsx("p",{className:"text-xs text-black opacity-70",children:"Enrolled in this exam"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-600 hover:shadow-xl transition-shadow",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"text-sm font-semibold text-black",children:"Results Entered"}),r.jsx(Ar,{className:"w-6 h-6 text-blue-600"})]}),r.jsx("p",{className:"text-4xl font-bold text-black mb-2",children:"0"}),r.jsx("p",{className:"text-xs text-black opacity-70",children:"Out of 0 students"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-600 hover:shadow-xl transition-shadow",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"text-sm font-semibold text-black",children:"Pass Rate"}),r.jsx(Sr,{className:"w-6 h-6 text-blue-600"})]}),r.jsx("p",{className:"text-4xl font-bold text-black mb-2",children:"--"}),r.jsx("p",{className:"text-xs text-black opacity-70",children:"Percentage of passed"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-600 hover:shadow-xl transition-shadow",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"text-sm font-semibold text-black",children:"Average Score"}),r.jsx(rs,{className:"w-6 h-6 text-blue-600"})]}),r.jsx("p",{className:"text-4xl font-bold text-black mb-2",children:"--"}),r.jsxs("p",{className:"text-xs text-black opacity-70",children:["Out of ",a.total_marks]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[r.jsx(Sr,{className:"w-6 h-6 mr-2 text-blue-600"}),"Quick Actions"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("button",{className:"btn btn-outline flex items-center justify-center space-x-2 h-14 rounded-xl border-2 hover:shadow-lg transition-all",onClick:()=>t(`/exams/${e}/schedule`),children:[r.jsx(Te,{className:"w-5 h-5"}),r.jsx("span",{className:"font-semibold",children:"View Schedule"})]}),r.jsx(st,{permission:ie.ENTER_RESULTS,children:r.jsxs("button",{className:"btn btn-primary flex items-center justify-center space-x-2 h-14 rounded-xl shadow-md hover:shadow-xl transition-all",onClick:()=>t(`/exams/${e}/results`),children:[r.jsx(Ue,{className:"w-5 h-5"}),r.jsx("span",{className:"font-semibold",children:"Enter Results"})]})}),r.jsxs("button",{className:"btn btn-outline flex items-center justify-center space-x-2 h-14 rounded-xl border-2 hover:shadow-lg transition-all",onClick:()=>t(`/exams/${e}/report`),children:[r.jsx(Sr,{className:"w-5 h-5"}),r.jsx("span",{className:"font-semibold",children:"View Report"})]})]})]}),r.jsx(uB,{examId:e,examData:a})]})},fB=()=>{const{id:e}=bs(),t=We(),s=Me(),n=Ie(mr),[a,i]=O.useState(!1),[l,o]=O.useState(!1),{data:c,isLoading:d}=me({queryKey:["assignment",e],queryFn:()=>Ps.getById(e)}),u=c==null?void 0:c.data,h=_e({mutationFn:y=>Ps.update(e,y),onSuccess:()=>{K.success("Assignment updated successfully"),i(!1),s.invalidateQueries(["assignment",e]),s.invalidateQueries(["assignments"])},onError:y=>{K.error(y.message||"Failed to update assignment")}}),f=_e({mutationFn:()=>Ps.delete(e),onSuccess:()=>{K.success("Assignment deleted successfully"),t("/assignments"),s.invalidateQueries(["assignments"])},onError:y=>{K.error(y.message||"Failed to delete assignment")}}),m=y=>{h.mutate(y)},x=()=>{f.mutate()},p=y=>{const b=new Date,N=new Date(y),k=Math.ceil((N-b)/(1e3*60*60*24));return k<0?"bg-red-100 text-red-800":k<=3?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800"},j=y=>{const b=new Date,N=new Date(y),k=Math.ceil((N-b)/(1e3*60*60*24));return k<0?`${Math.abs(k)} days overdue`:k===0?"Due today":k===1?"Due tomorrow":`${k} days remaining`};if(d)return r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"loading"})});if(!u)return r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Ue,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"Assignment not found"}),r.jsx("button",{onClick:()=>t("/assignments"),className:"btn btn-primary mt-4",children:"Back to Assignments"})]});const v=n==="super_admin"||n==="admin"||n==="teacher",g=n==="super_admin"||n==="admin";return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("button",{onClick:()=>t("/assignments"),className:"btn btn-outline flex items-center space-x-2",children:[r.jsx(js,{className:"w-4 h-4"}),r.jsx("span",{children:"Back"})]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Assignment Details"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"View and manage assignment information"})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[v&&r.jsxs("button",{onClick:()=>i(!0),className:"btn btn-primary flex items-center space-x-2",children:[r.jsx(ct,{className:"w-4 h-4"}),r.jsx("span",{children:"Edit"})]}),g&&r.jsxs("button",{onClick:()=>o(!0),className:"btn btn-danger flex items-center space-x-2",children:[r.jsx(ut,{className:"w-4 h-4"}),r.jsx("span",{children:"Delete"})]})]})]}),r.jsxs("div",{className:`inline-flex items-center px-4 py-2 rounded-lg font-medium ${p(u.due_date)}`,children:[r.jsx(Nt,{className:"w-4 h-4 mr-2"}),j(u.due_date)]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:u.title}),u.description&&r.jsxs("div",{className:"mt-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Instructions"}),r.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:u.description})]})]}),u.attachments&&u.attachments.length>0&&r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[r.jsx(Ue,{className:"w-5 h-5 mr-2"}),"Attachments (",u.attachments.length,")"]}),r.jsx("div",{className:"space-y-2",children:u.attachments.map((y,b)=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Ue,{className:"w-5 h-5 text-blue-600"}),r.jsx("span",{className:"text-sm text-gray-700",children:y.split("/").pop()})]}),r.jsxs("a",{href:`${"http://localhost:5001/api".replace("/api","")}/${y}`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline flex items-center space-x-1",children:[r.jsx(El,{className:"w-4 h-4"}),r.jsx("span",{children:"Download"})]})]},b))})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Assignment Info"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Te,{className:"w-5 h-5 text-gray-400 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Due Date"}),r.jsx("p",{className:"font-semibold text-gray-900",children:new Date(u.due_date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(rs,{className:"w-5 h-5 text-gray-400 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Total Marks"}),r.jsx("p",{className:"font-semibold text-gray-900",children:u.total_marks})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(De,{className:"w-5 h-5 text-gray-400 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Class & Section"}),r.jsxs("p",{className:"font-semibold text-gray-900",children:[u.class_name," - ",u.section_name]})]})]}),u.subject_name&&r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(De,{className:"w-5 h-5 text-gray-400 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Subject"}),r.jsx("p",{className:"font-semibold text-gray-900",children:u.subject_name})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(tt,{className:"w-5 h-5 text-gray-400 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Created By"}),r.jsxs("p",{className:"font-semibold text-gray-900",children:[u.teacher_first_name," ",u.teacher_last_name]})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Timeline"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Created"}),r.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date(u.created_at).toLocaleString()})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Last Updated"}),r.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date(u.updated_at).toLocaleString()})]})]})]})]})]}),r.jsx(mB,{assignmentId:e,assignment:u,userRole:n}),r.jsx(Ae,{isOpen:a,onClose:()=>i(!1),title:"Edit Assignment",size:"lg",children:r.jsx(p4,{assignment:u,onSubmit:m,onCancel:()=>i(!1),isSubmitting:h.isPending})}),r.jsx(Ae,{isOpen:l,onClose:()=>o(!1),title:"Delete Assignment",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-gray-700",children:"Are you sure you want to delete this assignment? This action cannot be undone."}),r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsx("p",{className:"text-sm text-red-800 font-medium",children:u.title})}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{onClick:()=>o(!1),className:"btn btn-outline",disabled:f.isPending,children:"Cancel"}),r.jsx("button",{onClick:x,className:"btn btn-danger",disabled:f.isPending,children:f.isPending?"Deleting...":"Delete Assignment"})]})]})})]})},mB=({assignmentId:e,assignment:t,userRole:s})=>{const n=Me(),a=s==="student",i=["teacher","admin","super_admin"].includes(s),{data:l}=me({queryKey:["my-submission",e],queryFn:()=>Ps.getMySubmission(e),enabled:a}),{data:o}=me({queryKey:["submissions",e],queryFn:()=>Ps.getSubmissions(e),enabled:i}),c=l==null?void 0:l.data,d=(o==null?void 0:o.data)||[];return a?r.jsx(pB,{submission:c,assignment:t,assignmentId:e,queryClient:n}):i?r.jsx(xB,{submissions:d,assignment:t,queryClient:n}):null},pB=({submission:e,assignment:t,assignmentId:s,queryClient:n})=>{const[a,i]=O.useState(!1),[l,o]=O.useState({submission_text:"",attachments:null}),c=_e({mutationFn:u=>Ps.submit(s,u),onSuccess:()=>{K.success("Assignment submitted successfully"),n.invalidateQueries(["my-submission",s]),o({submission_text:"",attachments:null}),i(!1)},onError:u=>{var h,f;K.error(((f=(h=u.response)==null?void 0:h.data)==null?void 0:f.message)||"Failed to submit assignment")}}),d=u=>{u.preventDefault(),c.mutate(l)};return e?r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[r.jsx(Ar,{className:"w-6 h-6 mr-2 text-green-600"}),"Your Submission"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg border border-green-200",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-semibold text-green-800",children:["Status: ",e.status]}),r.jsxs("p",{className:"text-sm text-green-600",children:["Submitted on"," ",new Date(e.submitted_at).toLocaleString()]})]}),e.status==="graded"&&r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-2xl font-bold text-green-800",children:[e.marks_obtained,"/",t.total_marks]}),r.jsx("p",{className:"text-sm text-green-600",children:"Marks"})]})]}),e.submission_text&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"Your Answer:"}),r.jsx("p",{className:"text-gray-700 whitespace-pre-wrap bg-gray-50 p-4 rounded-lg",children:e.submission_text})]}),e.attachments&&e.attachments.length>0&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"Attachments:"}),r.jsx("div",{className:"space-y-2",children:e.attachments.map((u,h)=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsx("span",{className:"text-sm",children:u.split("/").pop()}),r.jsx("a",{href:`${"http://localhost:5001/api".replace("/api","")}/${u}`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline",children:r.jsx(El,{className:"w-4 h-4"})})]},h))})]}),e.feedback&&r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Teacher's Feedback:"}),r.jsx("p",{className:"text-blue-800",children:e.feedback})]})]})]}):r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[r.jsx(Gd,{className:"w-6 h-6 mr-2 text-blue-600"}),"Assignment Submission"]}),r.jsxs("button",{onClick:()=>i(!0),className:"btn btn-primary flex items-center space-x-2",children:[r.jsx(Gd,{className:"w-4 h-4"}),r.jsx("span",{children:"Submit Assignment"})]})]}),r.jsx("p",{className:"text-gray-600",children:'Click the "Submit Assignment" button to submit your work for this assignment.'}),r.jsx(Ae,{isOpen:a,onClose:()=>i(!1),title:"Submit Assignment",size:"lg",children:r.jsxs("form",{onSubmit:d,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Answer"}),r.jsx("textarea",{value:l.submission_text,onChange:u=>o({...l,submission_text:u.target.value}),className:"input min-h-[200px]",placeholder:"Type your answer here...",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Attachments (Optional)"}),r.jsx("input",{type:"file",onChange:u=>o({...l,attachments:u.target.files}),className:"input",multiple:!0,accept:".pdf,.doc,.docx,.png,.jpg,.jpeg"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Max 5 files (PDF, DOC, DOCX, PNG, JPG)"})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>i(!1),className:"btn btn-outline",children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:c.isPending,children:c.isPending?"Submitting...":"Submit Assignment"})]})]})})]})},xB=({submissions:e,assignment:t,queryClient:s})=>{const[n,a]=O.useState(null),i=_e({mutationFn:({submissionId:o,data:c})=>Ps.gradeSubmission(o,c),onSuccess:()=>{K.success("Submission graded successfully"),s.invalidateQueries(["submissions"]),a(null)},onError:o=>{var c,d;K.error(((d=(c=o.response)==null?void 0:c.data)==null?void 0:d.message)||"Failed to grade submission")}}),l=o=>{o.preventDefault();const c=new FormData(o.target);i.mutate({submissionId:n.id,data:{marks_obtained:parseFloat(c.get("marks")),feedback:c.get("feedback")}})};return r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[r.jsx(Xe,{className:"w-6 h-6 mr-2 text-blue-600"}),"Student Submissions (",e.length,")"]}),e.length===0?r.jsx("p",{className:"text-gray-500 text-center py-8",children:"No submissions yet"}):r.jsx("div",{className:"space-y-4",children:e.map(o=>r.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-semibold text-gray-900",children:[o.first_name," ",o.last_name]}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Roll: ",o.roll_number," | Admission: ",o.admission_number]})]}),r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${o.status==="graded"?"bg-green-100 text-green-800":o.status==="late"?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:o.status})]}),o.submission_text&&r.jsxs("div",{className:"mb-3",children:[r.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Answer:"}),r.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded",children:o.submission_text})]}),o.attachments&&o.attachments.length>0&&r.jsxs("div",{className:"mb-3",children:[r.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Attachments:"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:o.attachments.map((c,d)=>r.jsx("a",{href:`${"http://localhost:5001/api".replace("/api","")}/${c}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs btn btn-sm btn-outline",children:c.split("/").pop()},d))})]}),o.status==="graded"?r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded p-3",children:[r.jsxs("p",{className:"text-sm font-semibold text-green-800",children:["Marks: ",o.marks_obtained,"/",t.total_marks]}),o.feedback&&r.jsxs("p",{className:"text-sm text-green-700 mt-1",children:["Feedback: ",o.feedback]})]}):r.jsx("button",{onClick:()=>a(o),className:"btn btn-sm btn-primary mt-2",children:"Grade Submission"})]},o.id))}),r.jsx(Ae,{isOpen:!!n,onClose:()=>a(null),title:"Grade Submission",children:n&&r.jsxs("form",{onSubmit:l,className:"space-y-4",children:[r.jsx("div",{children:r.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Student: ",n.first_name," ",n.last_name]})}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Marks Obtained (out of ",t.total_marks,")"]}),r.jsx("input",{type:"number",name:"marks",className:"input",min:"0",max:t.total_marks,step:"0.01",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Feedback"}),r.jsx("textarea",{name:"feedback",className:"input min-h-[100px]",placeholder:"Provide feedback to the student..."})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>a(null),className:"btn btn-outline",children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",disabled:i.isPending,children:i.isPending?"Grading...":"Submit Grade"})]})]})})]})},gB=()=>{const{id:e}=bs(),t=We(),s=Me(),[n,a]=O.useState(!1),[i,l]=O.useState(!1),{data:o,isLoading:c}=me({queryKey:["announcement",e],queryFn:()=>Ki.getById(e)}),d=o==null?void 0:o.data,u=_e({mutationFn:j=>Ki.update(e,j),onSuccess:()=>{K.success("Announcement updated successfully"),a(!1),s.invalidateQueries(["announcement",e]),s.invalidateQueries(["announcements"])},onError:j=>{K.error(j.message||"Failed to update announcement")}}),h=_e({mutationFn:()=>Ki.delete(e),onSuccess:()=>{K.success("Announcement deleted successfully"),t("/announcements"),s.invalidateQueries(["announcements"])},onError:j=>{K.error(j.message||"Failed to delete announcement")}}),f=j=>{u.mutate(j)},m=()=>{h.mutate()},x=j=>{switch(j){case"urgent":return r.jsx($t,{className:"w-5 h-5 text-red-600"});case"high":return r.jsx($t,{className:"w-5 h-5 text-orange-600"});case"medium":return r.jsx(Yd,{className:"w-5 h-5 text-blue-600"});default:return r.jsx(Yd,{className:"w-5 h-5 text-gray-600"})}},p=j=>{const v={urgent:"bg-red-100 text-red-800",high:"bg-orange-100 text-orange-800",medium:"bg-blue-100 text-blue-800",low:"bg-gray-100 text-gray-800"};return v[j]||v.low};return c?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"loading"})}):d?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("button",{onClick:()=>t("/announcements"),className:"btn btn-outline flex items-center space-x-2",children:[r.jsx(js,{className:"w-4 h-4"}),r.jsx("span",{children:"Back"})]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Announcement Details"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"View announcement information"})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(st,{permission:ie.EDIT_ANNOUNCEMENTS,children:r.jsxs("button",{onClick:()=>a(!0),className:"btn btn-primary flex items-center space-x-2",children:[r.jsx(ct,{className:"w-4 h-4"}),r.jsx("span",{children:"Edit"})]})}),r.jsx(st,{permission:ie.DELETE_ANNOUNCEMENTS,children:r.jsxs("button",{onClick:()=>l(!0),className:"btn btn-danger flex items-center space-x-2",children:[r.jsx(ut,{className:"w-4 h-4"}),r.jsx("span",{children:"Delete"})]})})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("div",{className:`inline-flex items-center px-4 py-2 rounded-lg font-medium ${p(d.priority)}`,children:[x(d.priority),r.jsxs("span",{className:"ml-2 capitalize",children:[d.priority," Priority"]})]}),r.jsxs("div",{className:"inline-flex items-center px-4 py-2 rounded-lg font-medium bg-gray-100 text-gray-800",children:[r.jsx(Xe,{className:"w-4 h-4 mr-2"}),r.jsxs("span",{className:"capitalize",children:["Target: ",d.target_audience.replace("_"," ")]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2 space-y-6",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:d.title}),r.jsx("div",{className:"mt-4",children:r.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:d.content})})]})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Details"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Te,{className:"w-5 h-5 text-gray-400 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Published Date"}),r.jsx("p",{className:"font-semibold text-gray-900",children:new Date(d.published_at).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),d.expires_at&&r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Nt,{className:"w-5 h-5 text-gray-400 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Expires On"}),r.jsx("p",{className:"font-semibold text-gray-900",children:new Date(d.expires_at).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(tt,{className:"w-5 h-5 text-gray-400 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Created By"}),r.jsx("p",{className:"font-semibold text-gray-900",children:d.created_by_name||`User ID: ${d.created_by}`})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Timeline"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Created"}),r.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date(d.published_at).toLocaleString()})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Last Updated"}),r.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date(d.updated_at).toLocaleString()})]})]})]})]})]}),r.jsx(Ae,{isOpen:n,onClose:()=>a(!1),title:"Edit Announcement",size:"lg",children:r.jsx(Ug,{announcement:d,onSubmit:f,onCancel:()=>a(!1),isSubmitting:u.isPending})}),r.jsx(Ae,{isOpen:i,onClose:()=>l(!1),title:"Delete Announcement",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-gray-700",children:"Are you sure you want to delete this announcement? This action cannot be undone."}),r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsx("p",{className:"text-sm text-red-800 font-medium",children:d.title})}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{onClick:()=>l(!1),className:"btn btn-outline",disabled:h.isPending,children:"Cancel"}),r.jsx("button",{onClick:m,className:"btn btn-danger",disabled:h.isPending,children:h.isPending?"Deleting...":"Delete Announcement"})]})]})})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Is,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"Announcement not found"}),r.jsx("button",{onClick:()=>t("/announcements"),className:"btn btn-primary mt-4",children:"Back to Announcements"})]})},yB=()=>{const{user:e}=Ie(a=>a.auth),[t,s]=O.useState("books"),n=["super_admin","principal","librarian"].includes(e==null?void 0:e.role);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Library Management"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage books, issue/return, and track inventory"})]}),r.jsx("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg w-fit overflow-x-auto",children:[{id:"books",label:"Books Inventory",icon:LM},...n?[{id:"issue",label:"Issue/Return",icon:Ar},{id:"transactions",label:"History",icon:VM}]:[],{id:"my-books",label:"My Books",icon:De}].map(a=>r.jsxs("button",{onClick:()=>s(a.id),className:`flex items-center px-4 py-2 rounded-md text-sm font-medium transition-colors whitespace-nowrap ${t===a.id?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-200"}`,children:[r.jsx(a.icon,{className:"w-4 h-4 mr-2"}),a.label]},a.id))}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 min-h-[500px]",children:[t==="books"&&r.jsx(bB,{isAdmin:n}),t==="issue"&&n&&r.jsx(jB,{}),t==="transactions"&&n&&r.jsx(NB,{}),t==="my-books"&&r.jsx(wB,{})]})]})},bB=({isAdmin:e})=>{const[t,s]=O.useState(""),[n,a]=O.useState(!1),i=Me(),{data:l=[],isLoading:o}=me({queryKey:["library-books",t],queryFn:()=>xi.getAllBooks({search:t}).then(d=>d.data||[])}),c=_e({mutationFn:xi.deleteBook,onSuccess:()=>{i.invalidateQueries(["library-books"]),K.success("Book deleted")},onError:d=>{var u,h;return K.error(((h=(u=d.response)==null?void 0:u.data)==null?void 0:h.message)||"Failed to delete")}});return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"relative w-64",children:[r.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx("input",{type:"text",placeholder:"Search books...",value:t,onChange:d=>s(d.target.value),className:"w-full pl-9 pr-4 py-2 border rounded-lg text-sm"})]}),e&&r.jsxs("button",{onClick:()=>a(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm",children:[r.jsx(Be,{className:"w-4 h-4 mr-2"}),"Add Book"]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-50 border-b",children:[r.jsx("th",{className:"p-3 font-medium text-gray-600",children:"Title"}),r.jsx("th",{className:"p-3 font-medium text-gray-600",children:"Author"}),r.jsx("th",{className:"p-3 font-medium text-gray-600",children:"Category"}),r.jsx("th",{className:"p-3 font-medium text-gray-600",children:"Rack"}),r.jsx("th",{className:"p-3 font-medium text-gray-600 text-center",children:"Copies (Avail/Total)"}),e&&r.jsx("th",{className:"p-3 font-medium text-gray-600 text-right",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y",children:o?r.jsx("tr",{children:r.jsx("td",{colSpan:"6",className:"p-8 text-center",children:"Loading..."})}):l.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"6",className:"p-8 text-center text-gray-500",children:"No books found"})}):l.map(d=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"p-3 font-medium",children:d.book_title}),r.jsx("td",{className:"p-3 text-gray-600",children:d.author}),r.jsx("td",{className:"p-3 text-gray-600",children:d.category}),r.jsx("td",{className:"p-3 text-gray-600",children:d.rack_number||"-"}),r.jsxs("td",{className:"p-3 text-center",children:[r.jsx("span",{className:`font-bold ${d.available_copies>0?"text-green-600":"text-red-600"}`,children:d.available_copies}),r.jsx("span",{className:"text-gray-400 mx-1",children:"/"}),r.jsx("span",{children:d.total_copies})]}),e&&r.jsx("td",{className:"p-3 text-right",children:r.jsx("button",{onClick:()=>{confirm("Delete this book?")&&c.mutate(d.id)},className:"text-red-600 hover:text-red-800 text-sm",children:"Delete"})})]},d.id))})]})}),n&&r.jsx(vB,{onClose:()=>a(!1)})]})},vB=({onClose:e})=>{const t=Me(),[s,n]=O.useState({book_title:"",author:"",isbn:"",category:"",total_copies:1,rack_number:"",description:""}),a=_e({mutationFn:xi.addBook,onSuccess:()=>{t.invalidateQueries(["library-books"]),K.success("Book added"),e()},onError:l=>{var o,c;return K.error(((c=(o=l.response)==null?void 0:o.data)==null?void 0:c.message)||"Failed to add")}}),i=l=>{l.preventDefault(),a.mutate(s)};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Add New Book"}),r.jsxs("form",{onSubmit:i,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Title"}),r.jsx("input",{required:!0,className:"w-full border rounded px-3 py-2",value:s.book_title,onChange:l=>n({...s,book_title:l.target.value})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Author"}),r.jsx("input",{className:"w-full border rounded px-3 py-2",value:s.author,onChange:l=>n({...s,author:l.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"ISBN"}),r.jsx("input",{className:"w-full border rounded px-3 py-2",value:s.isbn,onChange:l=>n({...s,isbn:l.target.value}),placeholder:"Optional"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category"}),r.jsx("input",{className:"w-full border rounded px-3 py-2",value:s.category,onChange:l=>n({...s,category:l.target.value})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Total Copies"}),r.jsx("input",{type:"number",min:"1",required:!0,className:"w-full border rounded px-3 py-2",value:s.total_copies,onChange:l=>n({...s,total_copies:l.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Rack No."}),r.jsx("input",{className:"w-full border rounded px-3 py-2",value:s.rack_number,onChange:l=>n({...s,rack_number:l.target.value})})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[r.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded",children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Add Book"})]})]})]})})},jB=()=>{const[e,t]=O.useState("issue"),[s,n]=O.useState("student"),[a,i]=O.useState(""),[l,o]=O.useState(""),[c,d]=O.useState(""),u=Me(),{data:h=[]}=me({queryKey:["students-list"],queryFn:()=>Fr.getAll().then(g=>g.data||[])}),{data:f=[]}=me({queryKey:["teachers-list"],queryFn:()=>Pt.getAll().then(g=>g.data||[])}),{data:m=[]}=me({queryKey:["books-list"],queryFn:()=>xi.getAllBooks({available_only:!0}).then(g=>g.data||[])}),x=_e({mutationFn:xi.issueBook,onSuccess:()=>{K.success("Book Issued Successfully"),u.invalidateQueries(["library-books"]),i(""),o("")},onError:g=>{var y,b;return K.error(((b=(y=g.response)==null?void 0:y.data)==null?void 0:b.message)||"Failed to issue")}}),p=_e({mutationFn:xi.returnBook,onSuccess:()=>{K.success("Book Returned Successfully"),d("")},onError:g=>{var y,b;return K.error(((b=(y=g.response)==null?void 0:y.data)==null?void 0:b.message)||"Failed to return")}}),j=g=>{g.preventDefault();const y=new Date;y.setDate(y.getDate()+14),x.mutate({book_id:l,user_id:a,user_type:s,due_date:y.toISOString().split("T")[0],remarks:""})},v=g=>{g.preventDefault(),p.mutate({transaction_id:c,status:"returned"})};return r.jsxs("div",{className:"max-w-2xl mx-auto",children:[r.jsxs("div",{className:"flex space-x-4 mb-6 justify-center",children:[r.jsx("button",{onClick:()=>t("issue"),className:`px-6 py-2 rounded-full font-medium ${e==="issue"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"}`,children:"Issue Book"}),r.jsx("button",{onClick:()=>t("return"),className:`px-6 py-2 rounded-full font-medium ${e==="return"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:"Return Book"})]}),e==="issue"?r.jsxs("form",{onSubmit:j,className:"space-y-6 bg-gray-50 p-8 rounded-xl border",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"User Type"}),r.jsxs("select",{className:"w-full border rounded px-3 py-2",value:s,onChange:g=>n(g.target.value),children:[r.jsx("option",{value:"student",children:"Student"}),r.jsx("option",{value:"teacher",children:"Teacher"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Select User"}),r.jsxs("select",{className:"w-full border rounded px-3 py-2",value:a,onChange:g=>i(g.target.value),required:!0,children:[r.jsx("option",{value:"",children:"-- Select --"}),s==="student"?h.map(g=>r.jsxs("option",{value:g.id,children:[g.first_name," ",g.last_name," (",g.admission_number,")"]},g.id)):f.map(g=>r.jsxs("option",{value:g.id,children:[g.first_name," ",g.last_name," (",g.employee_id,")"]},g.id))]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Select Book"}),r.jsxs("select",{className:"w-full border rounded px-3 py-2",value:l,onChange:g=>o(g.target.value),required:!0,children:[r.jsx("option",{value:"",children:"-- Select Book --"}),m.map(g=>r.jsxs("option",{value:g.id,children:[g.book_title," (Avail: ",g.available_copies,")"]},g.id))]})]}),r.jsx("button",{type:"submit",disabled:x.isPending,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 font-medium",children:x.isPending?"Processing...":"Issue Book"})]}):r.jsxs("div",{className:"space-y-6 bg-gray-50 p-8 rounded-xl border",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Enter the Transaction ID to return a book. You can find this in the History tab."}),r.jsxs("form",{onSubmit:v,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Transaction ID"}),r.jsx("input",{type:"text",required:!0,className:"w-full border rounded px-3 py-2",value:c,onChange:g=>d(g.target.value),placeholder:"Enter ID"})]}),r.jsx("button",{type:"submit",disabled:p.isPending,className:"w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 font-medium",children:p.isPending?"Processing...":"Return Book"})]})]})]})},NB=()=>{const{data:e=[],isLoading:t}=me({queryKey:["library-transactions"],queryFn:()=>xi.getTransactions({}).then(s=>s.data||[])});return r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-50 border-b",children:[r.jsx("th",{className:"p-3 font-medium text-gray-600",children:"ID"}),r.jsx("th",{className:"p-3 font-medium text-gray-600",children:"Book"}),r.jsx("th",{className:"p-3 font-medium text-gray-600",children:"User"}),r.jsx("th",{className:"p-3 font-medium text-gray-600",children:"Issue Date"}),r.jsx("th",{className:"p-3 font-medium text-gray-600",children:"Due Date"}),r.jsx("th",{className:"p-3 font-medium text-gray-600",children:"Status"})]})}),r.jsx("tbody",{className:"divide-y",children:t?r.jsx("tr",{children:r.jsx("td",{colSpan:"6",className:"p-8 text-center",children:"Loading..."})}):e.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"6",className:"p-8 text-center text-gray-500",children:"No transactions found"})}):e.map(s=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsxs("td",{className:"p-3 font-mono text-xs text-gray-500",children:["#",s.id]}),r.jsx("td",{className:"p-3 font-medium",children:s.book_title}),r.jsxs("td",{className:"p-3",children:[r.jsx("div",{className:"text-sm font-medium",children:s.user_name}),r.jsx("div",{className:"text-xs text-gray-500 capitalize",children:s.user_type})]}),r.jsx("td",{className:"p-3 text-gray-600",children:new Date(s.issue_date).toLocaleDateString()}),r.jsx("td",{className:"p-3 text-gray-600",children:new Date(s.due_date).toLocaleDateString()}),r.jsx("td",{className:"p-3",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs capitalize ${s.status==="issued"?"bg-blue-100 text-blue-800":s.status==="returned"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.status})})]},s.id))})]})})},wB=()=>{const{data:e=[],isLoading:t}=me({queryKey:["my-books"],queryFn:()=>xi.getMyBooks().then(s=>s.data||[])});return r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t?r.jsx("p",{children:"Loading..."}):e.length===0?r.jsxs("div",{className:"col-span-full text-center py-12 text-gray-500 bg-gray-50 rounded-lg border border-dashed",children:[r.jsx(De,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),r.jsx("p",{children:"You haven't borrowed any books yet."})]}):e.map(s=>r.jsxs("div",{className:"border rounded-lg p-5 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex justify-between items-start mb-3",children:[r.jsx("h3",{className:"font-bold text-lg text-gray-800 leading-tight",children:s.book_title}),r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium capitalize ${s.status==="issued"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600"}`,children:s.status})]}),r.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["by ",s.author]}),r.jsxs("div",{className:"text-sm space-y-1 border-t pt-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Issued:"}),r.jsx("span",{children:new Date(s.issue_date).toLocaleDateString()})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Due:"}),r.jsx("span",{className:s.status==="issued"&&new Date(s.due_date)<new Date?"text-red-600 font-bold":"",children:new Date(s.due_date).toLocaleDateString()})]})]})]},s.id))})},_B=()=>{const{user:e}=Ie(i=>i.auth),[t,s]=O.useState("rooms"),n=["super_admin","admin","principal","vice_principal"].includes(e==null?void 0:e.role),a=(e==null?void 0:e.role)==="student";return a&&t==="rooms"&&s("my-room"),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Hostel Management"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage hostel rooms and allocations"})]}),r.jsxs("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg w-fit",children:[n&&r.jsxs("button",{onClick:()=>s("rooms"),className:`flex items-center px-4 py-2 rounded-md text-sm font-medium transition-colors ${t==="rooms"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-200"}`,children:[r.jsx(Yl,{className:"w-4 h-4 mr-2"}),"Rooms Management"]}),a&&r.jsxs("button",{onClick:()=>s("my-room"),className:`flex items-center px-4 py-2 rounded-md text-sm font-medium transition-colors ${t==="my-room"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-200"}`,children:[r.jsx(jo,{className:"w-4 h-4 mr-2"}),"My Room"]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 min-h-[500px]",children:[t==="rooms"&&n&&r.jsx(SB,{}),t==="my-room"&&r.jsx(EB,{})]})]})},SB=()=>{const[e,t]=O.useState("all"),[s,n]=O.useState(!1),[a,i]=O.useState(!1),[l,o]=O.useState(null),[c,d]=O.useState(null),u=Me(),{data:h=[],isLoading:f}=me({queryKey:["hostel-rooms",e],queryFn:()=>gi.getAllRooms({type:e==="all"?void 0:e}).then(y=>y.data||[])}),m=_e({mutationFn:gi.vacateRoom,onSuccess:()=>{u.invalidateQueries(["hostel-rooms"]),u.invalidateQueries(["room-details"]),K.success("Student vacated successfully")},onError:y=>{var b,N;return K.error(((N=(b=y.response)==null?void 0:b.data)==null?void 0:N.message)||"Failed to vacate")}}),x=_e({mutationFn:gi.deleteRoom,onSuccess:()=>{u.invalidateQueries(["hostel-rooms"]),K.success("Room deleted successfully"),o(null)},onError:y=>{var b,N;return K.error(((N=(b=y.response)==null?void 0:b.data)==null?void 0:N.message)||"Failed to delete room")}}),p=y=>{confirm("Are you sure you want to delete this room?")&&x.mutate(y)},j=y=>{d(y),n(!0)},v=()=>{n(!1),d(null)},g=y=>{o(y)};return f?r.jsxs("div",{className:"flex h-screen bg-gray-50",children:[r.jsx("div",{className:"w-80 bg-white border-r border-gray-200 p-4",children:r.jsx("div",{className:"animate-pulse space-y-3",children:[...Array(6)].map((y,b)=>r.jsx("div",{className:"h-20 bg-gray-200 rounded-lg"},b))})}),r.jsx("div",{className:"flex-1 p-8",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-6"}),r.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})})]}):!h||h.length===0?r.jsx("div",{className:"flex h-screen bg-gray-50 items-center justify-center",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[r.jsx(gd,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500 text-lg",children:"No rooms found"}),r.jsx("button",{onClick:()=>n(!0),className:"mt-4 px-6 py-3 bg-blue-700 text-white rounded-xl hover:bg-blue-800 transition-colors",children:"Add First Room"})]})}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex h-screen bg-gray-50",children:[r.jsxs("div",{className:"w-80 bg-white border-r border-gray-300 overflow-y-auto",children:[r.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-white",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Hostel Rooms"}),r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[h.length," Total Rooms"]})]}),r.jsx("button",{onClick:()=>n(!0),className:"p-2 bg-blue-700 text-white rounded-lg hover:bg-blue-800 transition-colors",title:"Add Room",children:r.jsx(Be,{className:"w-5 h-5"})})]}),r.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:e,onChange:y=>t(y.target.value),children:[r.jsx("option",{value:"all",children:"All Hostels"}),r.jsx("option",{value:"male",children:"Boys Hostel"}),r.jsx("option",{value:"female",children:"Girls Hostel"})]})]}),r.jsx("div",{className:"p-4 space-y-2",children:h.map(y=>r.jsxs("div",{onClick:()=>g(y),className:`p-4 rounded-lg cursor-pointer transition-all duration-200 border ${(l==null?void 0:l.id)===y.id?"bg-blue-50 border-blue-500 shadow-md":"bg-white border-gray-200 hover:border-blue-300 hover:shadow-sm"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${(l==null?void 0:l.id)===y.id?"bg-blue-700":"bg-gray-100"}`,children:r.jsx(gd,{className:`w-5 h-5 ${(l==null?void 0:l.id)===y.id?"text-white":"text-gray-600"}`})}),r.jsxs("div",{children:[r.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["Room ",y.room_number]}),r.jsx("div",{className:"text-xs text-gray-500",children:y.building_name})]})]}),r.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${y.type==="male"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:y.type})]}),r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsxs("span",{className:"text-gray-600",children:[y.current_occupancy,"/",y.capacity]}),r.jsx("div",{className:"flex-1 mx-2 bg-gray-200 rounded-full h-1.5",children:r.jsx("div",{className:`h-1.5 rounded-full ${y.current_occupancy>=y.capacity?"bg-gray-700":"bg-blue-700"}`,style:{width:`${y.current_occupancy/y.capacity*100}%`}})})]})]},y.id))})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:l?r.jsx(kB,{room:l,onEdit:j,onDelete:p,onAllocate:()=>i(!0),onVacate:y=>m.mutate({allocation_id:y})}):r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsxs("div",{className:"text-center",children:[r.jsx(gd,{className:"w-20 h-20 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Select a Room"}),r.jsx("p",{className:"text-gray-500",children:"Choose a room from the sidebar to view details"})]})})})]}),s&&r.jsx(CB,{onClose:v,initialData:c}),a&&l&&r.jsx(AB,{room:l,onClose:()=>i(!1)})]})},kB=({room:e,onEdit:t,onDelete:s,onAllocate:n,onVacate:a})=>{var o,c,d;const{data:i,isLoading:l}=me({queryKey:["room-details",e.id],queryFn:()=>gi.getRoomDetails(e.id).then(u=>u.data)});return r.jsx("div",{className:"p-8",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-700 to-blue-800 p-6 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-16 h-16 rounded-xl bg-white/20 backdrop-blur-sm flex items-center justify-center",children:r.jsx(gd,{className:"w-8 h-8 text-white"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold",children:["Room ",e.room_number]}),r.jsx("p",{className:"text-blue-100 mt-1",children:e.building_name})]})]}),r.jsxs("span",{className:`px-4 py-2 rounded-full text-sm font-semibold ${e.type==="male"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"}`,children:[e.type," Hostel"]})]})}),r.jsxs("div",{className:"p-6 grid grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Capacity"}),r.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:[e.capacity," Students"]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Current Occupancy"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Xe,{className:"w-5 h-5 text-blue-700"}),r.jsxs("span",{className:`text-lg font-semibold ${e.current_occupancy>=e.capacity?"text-gray-700":"text-blue-700"}`,children:[e.current_occupancy," / ",e.capacity]})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Available Spots"}),r.jsx("div",{className:"text-lg font-semibold text-gray-900",children:e.capacity-e.current_occupancy})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Building"}),r.jsx("div",{className:"text-lg font-semibold text-gray-900",children:e.building_name})]})]}),r.jsxs("div",{className:"px-6 pb-6",children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:["Occupants (",((o=i==null?void 0:i.occupants)==null?void 0:o.length)||0,")"]}),l?r.jsx("p",{className:"text-gray-500",children:"Loading occupants..."}):r.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Admission No"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Class"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Allocated Date"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Action"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:((c=i==null?void 0:i.occupants)==null?void 0:c.length)===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"5",className:"p-8 text-center text-gray-500",children:"Room is empty"})}):(d=i==null?void 0:i.occupants)==null?void 0:d.map(u=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsxs("td",{className:"px-6 py-4 font-medium text-gray-900",children:[u.first_name," ",u.last_name]}),r.jsx("td",{className:"px-6 py-4 text-gray-600",children:u.admission_number}),r.jsx("td",{className:"px-6 py-4 text-gray-600",children:u.class_id}),r.jsx("td",{className:"px-6 py-4 text-gray-600",children:new Date(u.allocation_date).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsxs("button",{onClick:()=>{confirm("Are you sure you want to vacate this student?")&&a(u.allocation_id)},className:"px-3 py-1.5 text-gray-700 hover:bg-gray-100 rounded-lg text-sm font-medium flex items-center ml-auto transition-colors",children:[r.jsx(rD,{className:"w-4 h-4 mr-1"}),"Vacate"]})})]},u.id))})]})})]}),r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"}),r.jsxs("div",{className:"flex items-center space-x-3",children:[e.current_occupancy<e.capacity&&r.jsxs("button",{onClick:n,className:"flex items-center space-x-2 px-4 py-2 bg-blue-700 hover:bg-blue-800 text-white rounded-lg transition-colors shadow-sm",children:[r.jsx(Be,{className:"w-4 h-4"}),r.jsx("span",{children:"Allocate Student"})]}),r.jsxs("button",{onClick:()=>t(e),className:"flex items-center space-x-2 px-4 py-2 bg-white hover:bg-gray-50 text-gray-700 border border-gray-300 rounded-lg transition-colors shadow-sm",children:[r.jsx(ct,{className:"w-4 h-4"}),r.jsx("span",{children:"Edit"})]}),r.jsxs("button",{onClick:()=>s(e.id),className:"flex items-center space-x-2 px-4 py-2 bg-gray-700 hover:bg-gray-800 text-white rounded-lg transition-colors shadow-sm",children:[r.jsx(ut,{className:"w-4 h-4"}),r.jsx("span",{children:"Delete"})]})]})]})})]})})},EB=()=>{const{data:e,isLoading:t}=me({queryKey:["my-room"],queryFn:()=>gi.getMyRoom().then(a=>a.data)});if(t)return r.jsx("p",{className:"p-8 text-center",children:"Loading room details..."});if(!e)return r.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border border-dashed",children:[r.jsx(gd,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No Room Allocated"}),r.jsx("p",{className:"text-gray-500 mt-2",children:"You have not been allocated a hostel room yet."})]});const{allocation:s,partners:n}=e;return r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["Room ",s.room_number]}),r.jsx("p",{className:"text-gray-700 font-medium",children:s.building_name})]}),r.jsxs("div",{className:"bg-blue-50 px-4 py-2 rounded-lg shadow-sm border border-blue-200",children:[r.jsx("span",{className:"text-sm text-gray-500 block",children:"Allocated Date"}),r.jsx("span",{className:"font-medium text-gray-900",children:new Date(s.allocation_date).toLocaleDateString()})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Room Type"}),r.jsxs("p",{className:"font-medium capitalize",children:[s.type," Hostel"]})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Status"}),r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-50 text-blue-700",children:"Active"})]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[r.jsx(Xe,{className:"w-5 h-5 mr-2"}),"Room Partners"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.length===0?r.jsx("p",{className:"text-gray-500 italic",children:"No partners currently."}):n.map((a,i)=>r.jsxs("div",{className:"flex items-center p-4 bg-white border rounded-lg shadow-sm",children:[r.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-600 font-bold mr-4",children:a.first_name[0]}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-gray-900",children:[a.first_name," ",a.last_name]}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Class ",a.class_id]})]})]},i))})]})]})},CB=({onClose:e,initialData:t})=>{const s=Me(),[n,a]=O.useState({room_number:"",building_name:"Main Hostel",type:"male",capacity:4});O.useEffect(()=>{t&&a({room_number:t.room_number,building_name:t.building_name,type:t.type,capacity:t.capacity})},[t]);const i=_e({mutationFn:o=>t?gi.updateRoom(t.id,o):gi.createRoom(o),onSuccess:()=>{s.invalidateQueries(["hostel-rooms"]),K.success(t?"Room updated successfully":"Room created successfully"),e()},onError:o=>{var c,d;return K.error(((d=(c=o.response)==null?void 0:c.data)==null?void 0:d.message)||"Failed to save room")}}),l=o=>{o.preventDefault(),i.mutate(n)};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-xl font-bold",children:t?"Edit Room":"Add New Room"}),r.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:r.jsx(qr,{className:"w-5 h-5"})})]}),r.jsxs("form",{onSubmit:l,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Room Number"}),r.jsx("input",{required:!0,className:"w-full border rounded px-3 py-2",value:n.room_number,onChange:o=>a({...n,room_number:o.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Building Name"}),r.jsx("input",{className:"w-full border rounded px-3 py-2",value:n.building_name,onChange:o=>a({...n,building_name:o.target.value})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Type"}),r.jsxs("select",{className:"w-full border rounded px-3 py-2",value:n.type,onChange:o=>a({...n,type:o.target.value}),children:[r.jsx("option",{value:"male",children:"Male"}),r.jsx("option",{value:"female",children:"Female"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Capacity"}),r.jsx("input",{type:"number",min:"1",required:!0,className:"w-full border rounded px-3 py-2",value:n.capacity,onChange:o=>a({...n,capacity:o.target.value})})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[r.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:i.isPending,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-blue-300",children:i.isPending?"Saving...":t?"Update Room":"Create Room"})]})]})]})})},AB=({room:e,onClose:t})=>{const s=Me(),[n,a]=O.useState(""),{data:i=[]}=me({queryKey:["students-list"],queryFn:()=>Fr.getAll().then(d=>d.data||[])}),l=_e({mutationFn:gi.allocateRoom,onSuccess:()=>{s.invalidateQueries(["hostel-rooms"]),K.success("Room allocated successfully"),t()},onError:d=>{var u,h;return K.error(((h=(u=d.response)==null?void 0:u.data)==null?void 0:h.message)||"Failed to allocate")}}),o=d=>{d.preventDefault(),l.mutate({student_id:n,room_id:e.id})},c=i.filter(d=>d.gender===e.type);return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[r.jsxs("h2",{className:"text-xl font-bold mb-2",children:["Allocate Room ",e.room_number]}),r.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Type: ",e.type," | Available Spots:"," ",e.capacity-e.current_occupancy]}),r.jsxs("form",{onSubmit:o,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Select Student"}),r.jsxs("select",{required:!0,className:"w-full border rounded px-3 py-2",value:n,onChange:d=>a(d.target.value),children:[r.jsx("option",{value:"",children:"-- Select Student --"}),c.map(d=>r.jsxs("option",{value:d.id,children:[d.first_name," ",d.last_name," (",d.admission_number,")"]},d.id))]}),c.length===0&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"No students of matching gender found."})]}),r.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:l.isPending||!n,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-blue-300",children:l.isPending?"Allocating...":"Allocate"})]})]})]})})},TB=()=>{const{user:e}=Ie(i=>i.auth),[t,s]=O.useState("vehicles"),n=["super_admin","admin","principal"].includes(e==null?void 0:e.role),a=(e==null?void 0:e.role)==="student";return a&&t==="vehicles"&&s("my-transport"),r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-700 to-blue-800 rounded-2xl p-8 text-white shadow-xl",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(Xr,{className:"w-10 h-10"}),r.jsx("h1",{className:"text-4xl font-bold",children:"Transportation Management"})]}),r.jsx("p",{className:"text-blue-100 text-lg",children:"Manage buses, routes, and student allocations"})]}),r.jsxs("div",{className:"flex space-x-2 bg-white border border-gray-200 p-1.5 rounded-xl shadow-sm overflow-x-auto",children:[n&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>s("vehicles"),className:`flex items-center px-5 py-2.5 rounded-lg text-sm font-semibold transition-all whitespace-nowrap ${t==="vehicles"?"bg-blue-700 text-white shadow-md":"text-gray-600 hover:bg-gray-100"}`,children:[r.jsx(Xr,{className:"w-4 h-4 mr-2"}),"Vehicles"]}),r.jsxs("button",{onClick:()=>s("routes"),className:`flex items-center px-5 py-2.5 rounded-lg text-sm font-semibold transition-all whitespace-nowrap ${t==="routes"?"bg-blue-700 text-white shadow-md":"text-gray-600 hover:bg-gray-100"}`,children:[r.jsx(Vk,{className:"w-4 h-4 mr-2"}),"Routes"]}),r.jsxs("button",{onClick:()=>s("allocations"),className:`flex items-center px-5 py-2.5 rounded-lg text-sm font-semibold transition-all whitespace-nowrap ${t==="allocations"?"bg-blue-700 text-white shadow-md":"text-gray-600 hover:bg-gray-100"}`,children:[r.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Allocations"]})]}),a&&r.jsxs("button",{onClick:()=>s("my-transport"),className:`flex items-center px-5 py-2.5 rounded-lg text-sm font-semibold transition-all whitespace-nowrap ${t==="my-transport"?"bg-blue-700 text-white shadow-md":"text-gray-600 hover:bg-gray-100"}`,children:[r.jsx(Xr,{className:"w-4 h-4 mr-2"}),"My Transport"]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-8 min-h-[500px]",children:[t==="vehicles"&&n&&r.jsx(OB,{}),t==="routes"&&n&&r.jsx(RB,{}),t==="allocations"&&n&&r.jsx(PB,{}),t==="my-transport"&&r.jsx(MB,{})]})]})},OB=()=>{const[e,t]=O.useState(!1),[s,n]=O.useState(null),a=Me(),{data:i=[],isLoading:l}=me({queryKey:["transport-vehicles"],queryFn:()=>St.getAllVehicles().then(h=>h.data||[])}),o=_e({mutationFn:St.deleteVehicle,onSuccess:()=>{a.invalidateQueries(["transport-vehicles"]),K.success("Vehicle deleted")},onError:h=>{var f,m;return K.error(((m=(f=h.response)==null?void 0:f.data)==null?void 0:m.message)||"Failed to delete")}}),c=h=>{n(h),t(!0)},d=h=>{confirm("Are you sure you want to delete this vehicle?")&&o.mutate(h)},u=()=>{t(!1),n(null)};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 bg-blue-50 rounded-2xl border border-blue-200",children:[r.jsxs("h3",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[r.jsx(Xr,{className:"w-8 h-8 text-blue-700"}),"Bus Fleet"]}),r.jsxs("button",{onClick:()=>t(!0),className:"flex items-center gap-2 px-5 py-3 bg-blue-700 text-white rounded-xl hover:bg-blue-800 shadow-lg hover:shadow-xl transition-all font-medium",children:[r.jsx(Be,{className:"w-4 h-4"})," Add Vehicle"]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l?r.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:"Loading vehicles..."}):i.map(h=>r.jsxs("div",{className:"group bg-white rounded-2xl p-6 border border-gray-100 hover:shadow-2xl hover:border-blue-200 hover:-translate-y-1 transition-all duration-300 overflow-hidden",children:[r.jsx("span",{className:`absolute top-4 right-4 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide shadow-lg ${h.status==="active"?"bg-blue-50 text-blue-700 border-2 border-blue-200":"bg-gray-100 text-gray-700 border-2 border-gray-200"}`,children:h.status}),r.jsxs("div",{className:"absolute top-4 left-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx("button",{onClick:()=>c(h),className:"p-2 bg-white/90 rounded-full text-blue-600 hover:bg-blue-50 shadow-sm",children:r.jsx(ct,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>d(h.id),className:"p-2 bg-white/90 rounded-full text-gray-700 hover:bg-gray-100 shadow-sm",children:r.jsx(ut,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"mb-6 pb-6 border-b border-gray-100",children:[r.jsx("h3",{className:"font-bold text-xl text-gray-900 mb-1 group-hover:text-blue-700 transition-colors",children:h.bus_number}),r.jsx("p",{className:"text-sm text-gray-500 font-mono bg-gray-100 px-3 py-1 rounded-full inline-block",children:h.registration_number})]}),r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-xl group-hover:bg-blue-50 transition-colors",children:[r.jsx("span",{className:"text-gray-600 font-medium",children:"Driver"}),r.jsx("span",{className:"font-semibold text-gray-900",children:h.driver_name})]}),r.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-xl group-hover:bg-blue-50 transition-colors",children:[r.jsx("span",{className:"text-gray-600 font-medium",children:"Phone"}),r.jsx("span",{className:"font-semibold text-blue-600",children:h.driver_phone})]}),h.sub_driver_name&&r.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-xl border border-gray-200",children:[r.jsx("span",{className:"text-gray-700 font-medium",children:"Sub-Driver"}),r.jsx("span",{className:"font-semibold text-gray-900",children:h.sub_driver_name})]}),r.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-xl text-center",children:[r.jsx("span",{className:"text-xs text-blue-700 font-semibold uppercase tracking-wide block mb-2",children:"Capacity"}),r.jsx("span",{className:"text-2xl font-bold text-blue-800",children:h.capacity}),r.jsx("span",{className:"text-sm text-blue-700",children:" seats"})]})]})]},h.id))}),e&&r.jsx(DB,{onClose:u,initialData:s})]})},RB=()=>{const[e,t]=O.useState(!1),[s,n]=O.useState(null),a=Me(),{data:i=[],isLoading:l}=me({queryKey:["transport-routes"],queryFn:()=>St.getAllRoutes().then(h=>h.data||[])}),o=_e({mutationFn:St.deleteRoute,onSuccess:()=>{a.invalidateQueries(["transport-routes"]),K.success("Route deleted")},onError:h=>{var f,m;return K.error(((m=(f=h.response)==null?void 0:f.data)==null?void 0:m.message)||"Failed to delete")}}),c=h=>{n(h),t(!0)},d=h=>{confirm("Are you sure you want to delete this route?")&&o.mutate(h)},u=()=>{t(!1),n(null)};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 bg-gray-50 rounded-2xl border border-gray-200",children:[r.jsxs("h3",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[r.jsx(Vk,{className:"w-8 h-8 text-blue-700"}),"Route Network"]}),r.jsxs("button",{onClick:()=>t(!0),className:"flex items-center gap-2 px-5 py-3 bg-blue-700 text-white rounded-xl hover:bg-blue-800 shadow-lg hover:shadow-xl transition-all font-medium",children:[r.jsx(Be,{className:"w-4 h-4"})," Create Route"]})]}),r.jsx("div",{className:"space-y-4",children:l?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6},(h,f)=>r.jsx("div",{className:"animate-pulse bg-white rounded-2xl p-6 shadow-md border border-gray-100 h-80"},f))}):i.map(h=>{var f,m;return r.jsxs("div",{className:"group bg-white rounded-2xl p-6 hover:shadow-xl hover:border-blue-200 border border-gray-100 hover:-translate-y-1 transition-all duration-300 overflow-hidden",children:[r.jsxs("div",{className:"flex justify-between items-start mb-6 pb-6 border-b border-gray-100",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold text-xl text-blue-700 mb-2 group-hover:text-blue-800 transition-colors",children:h.route_name}),r.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-2",children:[r.jsx(Xr,{className:"w-4 h-4"}),h.bus_number||"Unassigned",h.driver_name&&`(${h.driver_name})`]})]}),r.jsxs("div",{className:"text-right ml-4",children:[r.jsxs("p",{className:"font-semibold text-lg text-gray-900 flex items-center gap-2 mb-1",children:[h.start_point,r.jsx("span",{className:"text-blue-700 font-bold text-xl",children:""}),h.end_point]}),r.jsxs("p",{className:"text-xs text-gray-500 bg-gray-100 px-3 py-1 rounded-full inline-flex items-center gap-1",children:[r.jsx(Rn,{className:"w-3 h-3"}),((f=h.stops)==null?void 0:f.length)||0," Stops"]}),r.jsxs("div",{className:"flex gap-2 justify-end mt-2",children:[r.jsx("button",{onClick:()=>c(h),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:r.jsx(ct,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>d(h.id),className:"p-1.5 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(ut,{className:"w-4 h-4"})})]})]})]}),r.jsxs("div",{className:"relative bg-gray-50 rounded-2xl p-6 overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gray-100/50"}),r.jsxs("div",{className:"relative flex items-center justify-between px-6",children:[r.jsx("div",{className:"absolute top-1/2 left-0 w-full h-1 bg-gray-300 -z-10 transform -translate-y-1/2 rounded-full shadow-lg"}),((m=h.stops)==null?void 0:m.map((x,p)=>{var j;return r.jsxs("div",{className:"flex flex-col items-center z-10 bg-white/80 backdrop-blur-sm p-3 rounded-2xl shadow-lg border border-white/50 group-hover:scale-105 transition-all",children:[r.jsx("div",{className:`w-5 h-5 rounded-2xl flex items-center justify-center mb-2 shadow-lg transition-all ${p===0?"bg-blue-700 text-white shadow-blue-500/50":p===h.stops.length-1?"bg-gray-700 text-white shadow-gray-500/50":"bg-blue-600 text-white shadow-blue-500/50"}`,children:p+1}),r.jsx("span",{className:"text-xs font-bold text-gray-900 text-center leading-tight min-w-[60px] px-1",children:x.stop_name}),r.jsx("span",{className:"text-[11px] text-blue-700 font-semibold bg-blue-50 px-2 py-0.5 rounded-full mt-1",children:(j=x.pickup_time)==null?void 0:j.slice(0,5)})]},x.id)}))||r.jsx("div",{className:"col-span-full text-center py-8 text-gray-500",children:"No stops assigned"})]})]})]},h.id)})}),e&&r.jsx(LB,{onClose:u,initialData:s})]})},PB=()=>{const[e,t]=O.useState(!1),[s,n]=O.useState(null),a=Me(),{data:i=[],isLoading:l}=me({queryKey:["transport-allocations"],queryFn:()=>St.getAllLocations().then(u=>u.data||[])}),o=_e({mutationFn:St.cancelAllocation,onSuccess:()=>{a.invalidateQueries(["transport-allocations"]),K.success("Allocation cancelled")}}),c=u=>{n(u),t(!0)},d=()=>{t(!1),n(null)};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 bg-gray-50 rounded-2xl border border-gray-200",children:[r.jsxs("h3",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[r.jsx(Xe,{className:"w-8 h-8 text-blue-700"}),"Student Allocations"]}),r.jsxs("button",{onClick:()=>t(!0),className:"flex items-center gap-2 px-6 py-3 bg-blue-700 text-white rounded-xl hover:bg-blue-800 shadow-lg hover:shadow-xl transition-all font-medium",children:[r.jsx(Be,{className:"w-4 h-4"})," Allocate Student"]})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[r.jsx("th",{className:"px-6 py-5 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Student"}),r.jsx("th",{className:"px-6 py-5 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Route / Bus"}),r.jsx("th",{className:"px-6 py-5 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Pickup / Drop"}),r.jsx("th",{className:"px-6 py-5 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Seat"}),r.jsx("th",{className:"px-6 py-5 text-right text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Action"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100 bg-gradient-to-b from-white to-slate-50",children:l?r.jsx("tr",{children:r.jsx("td",{colSpan:"5",className:"py-12 text-center",children:r.jsxs("div",{className:"flex items-center justify-center gap-3 text-gray-500",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-700"}),r.jsx("span",{children:"Loading allocations..."})]})})}):i.map(u=>r.jsxs("tr",{className:"group hover:bg-blue-50 transition-all duration-200 border-b border-gray-50",children:[r.jsx("td",{className:"px-6 py-5",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-700 rounded-2xl flex items-center justify-center shadow-lg",children:r.jsx(tt,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"font-semibold text-gray-900 group-hover:text-blue-700 transition-colors",children:[u.first_name," ",u.last_name]}),r.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[r.jsxs("span",{children:["Class ",u.class_id]}),r.jsx("span",{children:""}),r.jsx("span",{children:u.admission_number})]})]})]})}),r.jsxs("td",{className:"px-6 py-5",children:[r.jsx("div",{className:"font-semibold text-gray-900",children:u.route_name}),r.jsx("div",{className:"text-sm font-mono bg-blue-100 text-blue-800 px-3 py-1 rounded-full mt-1 inline-block",children:u.bus_number})]}),r.jsx("td",{className:"px-6 py-5",children:r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2 text-blue-700 font-medium text-sm",children:[r.jsx("span",{className:"w-3 h-3 bg-blue-500 rounded-full shadow-sm"})," ",u.pickup_point]}),r.jsxs("div",{className:"flex items-center gap-2 text-gray-700 font-medium text-sm",children:[r.jsx("span",{className:"w-3 h-3 bg-gray-500 rounded-full shadow-sm"})," ",u.drop_point]})]})}),r.jsx("td",{className:"px-6 py-5",children:r.jsx("div",{className:"w-12 h-12 bg-blue-700 rounded-2xl flex items-center justify-center shadow-lg mx-auto",children:r.jsx("span",{className:"font-bold text-xl text-white font-mono",children:u.seat_number||"-"})})}),r.jsxs("td",{className:"px-6 py-5 text-right",children:[r.jsxs("button",{onClick:()=>c(u),className:"group relative p-3 mr-2 bg-blue-700 text-white rounded-2xl shadow-lg hover:bg-blue-800 hover:shadow-xl hover:scale-105 transition-all duration-200 hover:-translate-y-0.5",children:[r.jsx(ct,{className:"w-5 h-5"}),r.jsx("span",{className:"absolute -top-10 left-1/2 transform -translate-x-1/2 bg-blue-900 text-white text-xs px-3 py-1 rounded opacity-0 group-hover:opacity-100 transition-all duration-200 whitespace-nowrap",children:"Edit"})]}),r.jsxs("button",{onClick:()=>{confirm("Cancel allocation?")&&o.mutate(u.id)},className:"group relative p-3 bg-gray-700 text-white rounded-2xl shadow-lg hover:bg-gray-800 hover:shadow-xl hover:scale-105 transition-all duration-200 hover:-translate-y-0.5",children:[r.jsx(ut,{className:"w-5 h-5"}),r.jsx("span",{className:"absolute -top-10 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-3 py-1 rounded opacity-0 group-hover:opacity-100 transition-all duration-200 whitespace-nowrap",children:"Cancel"})]})]})]},u.id))})]})})}),e&&r.jsx(FB,{onClose:d,initialData:s})]})},MB=()=>{var s,n;const{data:e,isLoading:t}=me({queryKey:["my-transport"],queryFn:()=>St.getMyTransport().then(a=>a.data)});return t?r.jsx("p",{className:"p-8 text-center",children:"Loading transport details..."}):e?r.jsx("div",{className:"max-w-4xl mx-auto",children:r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e.route_name}),r.jsxs("p",{className:"text-gray-700 font-medium",children:[e.bus_number," (",e.registration_number,")"]})]}),r.jsxs("div",{className:"bg-blue-50 px-4 py-2 rounded-lg shadow-sm text-center border border-blue-200",children:[r.jsx("span",{className:"text-sm text-gray-500 block",children:"Seat Number"}),r.jsx("span",{className:"text-2xl font-bold text-blue-700",children:e.seat_number||"N/A"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border-l-4 border-blue-700",children:[r.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold mb-1",children:"Pickup Point"}),r.jsx("p",{className:"font-bold text-lg",children:e.pickup_name}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Time: ",(s=e.pickup_time)==null?void 0:s.slice(0,5)]})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border-l-4 border-gray-700",children:[r.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold mb-1",children:"Drop Point"}),r.jsx("p",{className:"font-bold text-lg",children:e.drop_name}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Time: ",(n=e.drop_time)==null?void 0:n.slice(0,5)]})]})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[r.jsxs("h4",{className:"font-bold text-gray-800 mb-3 flex items-center",children:[r.jsx(oa,{className:"w-4 h-4 mr-2"})," Driver Details"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Driver"}),r.jsx("p",{className:"font-medium",children:e.driver_name}),r.jsx("p",{className:"text-sm text-blue-600",children:e.driver_phone})]}),e.sub_driver_name&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Sub-Driver"}),r.jsx("p",{className:"font-medium",children:e.sub_driver_name}),r.jsx("p",{className:"text-sm text-blue-600",children:e.sub_driver_phone})]})]})]})]})}):r.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border border-dashed",children:[r.jsx(Xr,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No Transport Allocated"}),r.jsx("p",{className:"text-gray-500 mt-2",children:"You are not subscribed to school transport."})]})},DB=({onClose:e,initialData:t})=>{const s=Me(),[n,a]=O.useState({bus_number:"",registration_number:"",driver_name:"",driver_phone:"",sub_driver_name:"",sub_driver_phone:"",capacity:40});O.useEffect(()=>{t&&a({bus_number:t.bus_number,registration_number:t.registration_number,driver_name:t.driver_name,driver_phone:t.driver_phone,sub_driver_name:t.sub_driver_name||"",sub_driver_phone:t.sub_driver_phone||"",capacity:t.capacity})},[t]);const i=_e({mutationFn:o=>t?St.updateVehicle(t.id,o):St.createVehicle(o),onSuccess:()=>{s.invalidateQueries(["transport-vehicles"]),K.success(t?"Vehicle updated":"Vehicle added"),e()},onError:o=>{var c,d;return K.error(((d=(c=o.response)==null?void 0:c.data)==null?void 0:d.message)||"Failed")}}),l=o=>{o.preventDefault(),i.mutate(n)};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:t?"Edit Vehicle":"Add New Vehicle"}),r.jsxs("form",{onSubmit:l,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx("input",{required:!0,placeholder:"Bus Number (e.g. Bus-01)",className:"border rounded px-3 py-2",value:n.bus_number,onChange:o=>a({...n,bus_number:o.target.value})}),r.jsx("input",{required:!0,placeholder:"Registration No.",className:"border rounded px-3 py-2",value:n.registration_number,onChange:o=>a({...n,registration_number:o.target.value})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx("input",{required:!0,placeholder:"Driver Name",className:"border rounded px-3 py-2",value:n.driver_name,onChange:o=>a({...n,driver_name:o.target.value})}),r.jsx("input",{required:!0,placeholder:"Driver Phone",className:"border rounded px-3 py-2",value:n.driver_phone,onChange:o=>a({...n,driver_phone:o.target.value})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx("input",{placeholder:"Sub-Driver Name",className:"border rounded px-3 py-2",value:n.sub_driver_name,onChange:o=>a({...n,sub_driver_name:o.target.value})}),r.jsx("input",{placeholder:"Sub-Driver Phone",className:"border rounded px-3 py-2",value:n.sub_driver_phone,onChange:o=>a({...n,sub_driver_phone:o.target.value})})]}),r.jsx("input",{type:"number",placeholder:"Capacity",className:"w-full border rounded px-3 py-2",value:n.capacity,onChange:o=>a({...n,capacity:o.target.value})}),r.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[r.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded",children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:t?"Update Vehicle":"Add Vehicle"})]})]})]})})},LB=({onClose:e,initialData:t})=>{const s=Me(),[n,a]=O.useState([{stop_name:"",pickup_time:"",drop_time:"",fare:0}]),[i,l]=O.useState({route_name:"",vehicle_id:"",start_point:"",end_point:""});O.useEffect(()=>{t&&(l({route_name:t.route_name,vehicle_id:t.vehicle_id||"",start_point:t.start_point,end_point:t.end_point}),t.stops&&t.stops.length>0&&a(t.stops.map(f=>({stop_name:f.stop_name,pickup_time:f.pickup_time,drop_time:f.drop_time,fare:f.fare}))))},[t]);const{data:o=[]}=me({queryKey:["transport-vehicles"],queryFn:()=>St.getAllVehicles().then(f=>f.data||[])}),c=_e({mutationFn:f=>t?St.updateRoute(t.id,f):St.createRoute(f),onSuccess:()=>{s.invalidateQueries(["transport-routes"]),K.success(t?"Route updated":"Route created"),e()},onError:f=>{var m,x;return K.error(((x=(m=f.response)==null?void 0:m.data)==null?void 0:x.message)||"Failed")}}),d=()=>a([...n,{stop_name:"",pickup_time:"",drop_time:"",fare:0}]),u=(f,m,x)=>{const p=[...n];p[f][m]=x,a(p)},h=f=>{f.preventDefault(),c.mutate({...i,stops:n})};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:t?"Edit Route":"Create New Route"}),r.jsxs("form",{onSubmit:h,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx("input",{required:!0,placeholder:"Route Name",className:"border rounded px-3 py-2",value:i.route_name,onChange:f=>l({...i,route_name:f.target.value})}),r.jsxs("select",{className:"border rounded px-3 py-2",value:i.vehicle_id,onChange:f=>l({...i,vehicle_id:f.target.value}),children:[r.jsx("option",{value:"",children:"Select Vehicle"}),o.map(f=>r.jsx("option",{value:f.id,children:f.bus_number},f.id))]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx("input",{required:!0,placeholder:"Start Point",className:"border rounded px-3 py-2",value:i.start_point,onChange:f=>l({...i,start_point:f.target.value})}),r.jsx("input",{required:!0,placeholder:"End Point",className:"border rounded px-3 py-2",value:i.end_point,onChange:f=>l({...i,end_point:f.target.value})})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("h4",{className:"font-bold mb-2",children:"Stops"}),n.map((f,m)=>r.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-2",children:[r.jsx("input",{placeholder:"Stop Name",className:"border rounded px-2 py-1 text-sm",value:f.stop_name,onChange:x=>u(m,"stop_name",x.target.value),required:!0}),r.jsx("input",{type:"time",className:"border rounded px-2 py-1 text-sm",value:f.pickup_time,onChange:x=>u(m,"pickup_time",x.target.value),required:!0}),r.jsx("input",{type:"time",className:"border rounded px-2 py-1 text-sm",value:f.drop_time,onChange:x=>u(m,"drop_time",x.target.value),required:!0}),r.jsx("input",{type:"number",placeholder:"Fare",className:"border rounded px-2 py-1 text-sm",value:f.fare,onChange:x=>u(m,"fare",x.target.value)})]},m)),r.jsx("button",{type:"button",onClick:d,className:"text-blue-600 text-sm hover:underline",children:"+ Add Stop"})]}),r.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[r.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded",children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:t?"Update Route":"Create Route"})]})]})]})})},FB=({onClose:e,initialData:t})=>{var h,f;const s=Me(),[n,a]=O.useState({student_id:"",route_id:"",pickup_stop_id:"",drop_stop_id:"",seat_number:""});O.useEffect(()=>{t&&a({student_id:t.student_id,route_id:t.route_id,pickup_stop_id:t.pickup_stop_id,drop_stop_id:t.drop_stop_id,seat_number:t.seat_number||""})},[t]);const{data:i=[]}=me({queryKey:["students-list"],queryFn:()=>Fr.getAll().then(m=>m.data||[])}),{data:l=[],isLoading:o}=me({queryKey:["transport-routes"],queryFn:()=>St.getAllRoutes().then(m=>m.data||[])}),c=l.find(m=>m.id==n.route_id),d=_e({mutationFn:m=>t?St.updateAllocation(t.id,m):St.allocateTransport(m),onSuccess:()=>{s.invalidateQueries(["transport-allocations"]),K.success(t?"Allocation updated":"Allocated"),e()},onError:m=>{var x,p;return K.error(((p=(x=m.response)==null?void 0:x.data)==null?void 0:p.message)||"Failed")}}),u=m=>{m.preventDefault(),d.mutate(n)};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:t?"Edit Allocation":"Allocate Transport"}),r.jsxs("form",{onSubmit:u,className:"space-y-4",children:[r.jsxs("select",{required:!0,disabled:!!t,className:"w-full border rounded px-3 py-2 disabled:bg-gray-100",value:n.student_id,onChange:m=>a({...n,student_id:m.target.value}),children:[r.jsx("option",{value:"",children:"Select Student"}),i.map(m=>r.jsxs("option",{value:m.id,children:[m.first_name," ",m.last_name," (",m.admission_number,")"]},m.id))]}),r.jsxs("select",{required:!0,className:"w-full border rounded px-3 py-2",value:n.route_id,onChange:m=>{a({...n,route_id:m.target.value,pickup_stop_id:"",drop_stop_id:""})},children:[r.jsx("option",{value:"",children:o?"Loading Routes...":"Select Route"}),l.map(m=>r.jsxs("option",{value:m.id,children:[m.route_name," ",m.bus_number?`(${m.bus_number})`:""]},m.id))]}),c&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg text-sm text-blue-800 mb-2",children:[r.jsx("p",{className:"font-bold",children:c.route_name}),r.jsxs("p",{children:[c.start_point,"  ",c.end_point]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("select",{required:!0,className:"border rounded px-3 py-2",value:n.pickup_stop_id,onChange:m=>a({...n,pickup_stop_id:m.target.value}),children:[r.jsx("option",{value:"",children:"Pickup Point"}),(h=c.stops)==null?void 0:h.map(m=>{var x;return r.jsxs("option",{value:m.id,children:[m.stop_name," (",(x=m.pickup_time)==null?void 0:x.slice(0,5),")"]},m.id)})]}),r.jsxs("select",{required:!0,className:"border rounded px-3 py-2",value:n.drop_stop_id,onChange:m=>a({...n,drop_stop_id:m.target.value}),children:[r.jsx("option",{value:"",children:"Drop Point"}),(f=c.stops)==null?void 0:f.map(m=>{var x;return r.jsxs("option",{value:m.id,children:[m.stop_name," (",(x=m.drop_time)==null?void 0:x.slice(0,5),")"]},m.id)})]})]}),r.jsx("input",{placeholder:"Seat Number (Optional)",className:"w-full border rounded px-3 py-2",value:n.seat_number,onChange:m=>a({...n,seat_number:m.target.value})})]}),r.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[r.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded",children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:t?"Update":"Allocate"})]})]})]})})},IB=({payroll:e,onSubmit:t,onCancel:s,isSubmitting:n})=>{const[a,i]=O.useState({employee_type:"teacher",employee_id:"",month:new Date().toLocaleString("default",{month:"long"}),year:new Date().getFullYear().toString(),basic_salary:"",allowances:"0",deductions:"0",payment_method:"cash",status:"pending",remarks:"",payment_date:""}),{data:l}=me({queryKey:["teachers"],queryFn:()=>Pt.getAll()}),o=(l==null?void 0:l.data)||[];O.useEffect(()=>{e&&i({employee_type:e.employee_type,employee_id:e.employee_id,month:e.month,year:e.year,basic_salary:e.basic_salary,allowances:e.allowances||"0",deductions:e.deductions||"0",payment_method:e.payment_method,status:e.status,remarks:e.remarks||"",payment_date:e.payment_date?e.payment_date.split("T")[0]:""})},[e]);const c=f=>{const{name:m,value:x}=f.target;i(p=>({...p,[m]:x}))},d=f=>{f.preventDefault(),t(a)},u=["January","February","March","April","May","June","July","August","September","October","November","December"],h=(parseFloat(a.basic_salary||0)+parseFloat(a.allowances||0)-parseFloat(a.deductions||0)).toFixed(2);return r.jsxs("form",{onSubmit:d,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Employee Type"}),r.jsxs("select",{name:"employee_type",value:a.employee_type,onChange:c,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm p-2 border",disabled:!!e,children:[r.jsx("option",{value:"teacher",children:"Teacher"}),r.jsx("option",{value:"staff",children:"Staff"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Employee"}),r.jsxs("select",{name:"employee_id",value:a.employee_id,onChange:c,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm p-2 border",disabled:!!e,required:!0,children:[r.jsx("option",{value:"",children:"Select Employee"}),a.employee_type==="teacher"&&o.map(f=>r.jsxs("option",{value:f.id,children:[f.first_name," ",f.last_name," (",f.employee_id,")"]},f.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Month"}),r.jsx("select",{name:"month",value:a.month,onChange:c,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm p-2 border",required:!0,children:u.map(f=>r.jsx("option",{value:f,children:f},f))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Year"}),r.jsx("input",{type:"number",name:"year",value:a.year,onChange:c,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm p-2 border",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Basic Salary"}),r.jsx("input",{type:"number",name:"basic_salary",value:a.basic_salary,onChange:c,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm p-2 border",required:!0,min:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Allowances"}),r.jsx("input",{type:"number",name:"allowances",value:a.allowances,onChange:c,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm p-2 border",min:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Deductions"}),r.jsx("input",{type:"number",name:"deductions",value:a.deductions,onChange:c,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm p-2 border",min:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Net Salary"}),r.jsx("div",{className:"mt-1 block w-full rounded-md bg-gray-100 border-gray-300 sm:text-sm p-2 border font-bold",children:h})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Method"}),r.jsxs("select",{name:"payment_method",value:a.payment_method,onChange:c,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm p-2 border",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"cheque",children:"Cheque"}),r.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),r.jsxs("select",{name:"status",value:a.status,onChange:c,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm p-2 border",children:[r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"paid",children:"Paid"}),r.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Date"}),r.jsx("input",{type:"date",name:"payment_date",value:a.payment_date,onChange:c,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm p-2 border"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Remarks"}),r.jsx("textarea",{name:"remarks",value:a.remarks,onChange:c,rows:"3",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500 sm:text-sm p-2 border"})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[r.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:n,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:n?"Saving...":"Save Record"})]})]})},BB=()=>{const e=Me(),t=Ie(vs),s=Ie(mr),[n,a]=O.useState(""),[i,l]=O.useState(""),[o,c]=O.useState(new Date().getFullYear().toString()),[d,u]=O.useState(!1),[h,f]=O.useState(null),m=["super_admin","principal","vice_principal","accountant"].includes(s),p=(()=>{var C;if(m)return null;let A="staff";return["teacher","hod"].includes(s)&&(A="teacher"),{type:A,id:(C=t==null?void 0:t.details)==null?void 0:C.id}})(),{data:j,isLoading:v}=me({queryKey:["payroll",n,i,o,s,p==null?void 0:p.id],queryFn:()=>m?qc.getAll({search:n,month:i,year:o}):p!=null&&p.id?qc.getEmployeePayroll(p.type,p.id):Promise.resolve([]),enabled:m||!!(p!=null&&p.id)}),g=j||[],y=_e({mutationFn:qc.create,onSuccess:()=>{K.success("Payroll record added successfully"),u(!1),f(null),e.invalidateQueries(["payroll"])},onError:A=>{K.error(A.message||"Failed to add payroll record")}}),b=_e({mutationFn:({id:A,data:C})=>qc.update(A,C),onSuccess:()=>{K.success("Payroll record updated successfully"),u(!1),f(null),e.invalidateQueries(["payroll"])},onError:A=>{K.error(A.message||"Failed to update payroll record")}}),N=_e({mutationFn:qc.delete,onSuccess:()=>{K.success("Payroll record deleted successfully"),e.invalidateQueries(["payroll"])},onError:A=>{K.error(A.message||"Failed to delete payroll record")}}),k=async A=>{window.confirm("Are you sure you want to delete this payroll record?")&&N.mutate(A)},w=A=>{h?b.mutate({id:h.id,data:A}):y.mutate(A)},_=()=>{f(null),u(!0)},S=A=>{f(A),u(!0)},E=["January","February","March","April","May","June","July","August","September","October","November","December"];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:m?"Payroll Management":"My Payroll History"}),r.jsx("p",{className:"text-gray-600 mt-1",children:m?"Manage salaries for teachers and staff":"View your salary history and slips"})]}),m&&r.jsx(st,{permission:ie.MANAGE_PAYROLL,children:r.jsxs("button",{onClick:_,className:"btn btn-primary flex items-center space-x-2",children:[r.jsx(Be,{className:"w-5 h-5"}),r.jsx("span",{children:"Add Record"})]})})]}),m&&r.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Search by employee name...",value:n,onChange:A=>a(A.target.value),className:"input pl-10 w-full"})]}),r.jsxs("select",{className:"select w-full",value:i,onChange:A=>l(A.target.value),children:[r.jsx("option",{value:"",children:"All Months"}),E.map(A=>r.jsx("option",{value:A,children:A},A))]}),r.jsxs("select",{className:"select w-full",value:o,onChange:A=>c(A.target.value),children:[r.jsx("option",{value:"",children:"All Years"}),r.jsx("option",{value:"2024",children:"2024"}),r.jsx("option",{value:"2025",children:"2025"}),r.jsx("option",{value:"2026",children:"2026"})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:v?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"loading"})}):g.length===0?r.jsx("div",{className:"p-12 text-center text-gray-500",children:"No payroll records found"}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[m&&r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Period"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Basic Salary"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Salary"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),m&&r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(A=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[m&&r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"flex items-center",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.employee_name||"Unknown"}),r.jsxs("div",{className:"text-sm text-gray-500",children:[A.employee_type.charAt(0).toUpperCase()+A.employee_type.slice(1),"  ",A.employee_code]})]})})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsxs("div",{className:"text-sm text-gray-900",children:[A.month," ",A.year]}),r.jsx("div",{className:"text-xs text-gray-500",children:A.payment_date?new Date(A.payment_date).toLocaleDateString():"Not paid"})]}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["Rs. ",Number(A.basic_salary).toLocaleString()]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("span",{className:"text-sm font-bold text-gray-900",children:["Rs. ",Number(A.net_salary).toLocaleString()]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${A.status==="paid"?"bg-green-100 text-green-800":A.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:A.status.toUpperCase()})}),m&&r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsx(st,{permission:ie.MANAGE_PAYROLL,children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>S(A),className:"text-blue-600 hover:text-blue-900",children:r.jsx(ct,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>k(A.id),className:"text-red-600 hover:text-red-900",children:r.jsx(ut,{className:"w-4 h-4"})})]})})})]},A.id))})]})})}),m&&r.jsx(Ae,{isOpen:d,onClose:()=>{u(!1),f(null)},title:h?"Edit Payroll Record":"Add New Payroll Record",size:"lg",children:r.jsx(IB,{payroll:h,onSubmit:w,onCancel:()=>{u(!1),f(null)},isSubmitting:y.isPending||b.isPending})})]})},qB=()=>{const{id:e}=bs(),t=We(),s=Me(),{user:n}=Ie(_=>_.auth),i=(n==null?void 0:n.role)==="student",[l,o]=O.useState(""),[c,d]=O.useState({}),{data:u}=me({queryKey:["exam",e],queryFn:()=>Rs.getById(e)}),h=u==null?void 0:u.data,{data:f}=me({queryKey:["exam-schedules",e],queryFn:()=>oo.getExamSchedules(e),enabled:!!e}),m=(f==null?void 0:f.data)||[],{data:x}=me({queryKey:["students",h==null?void 0:h.class_id],queryFn:()=>Fr.getAll({class_id:h==null?void 0:h.class_id,status:"active"}),enabled:!!(h!=null&&h.class_id)&&!i}),p=(x==null?void 0:x.data)||[],{data:j}=me({queryKey:["exam-results",e,l,i?n==null?void 0:n.student_id:"all"],queryFn:()=>i&&(n!=null&&n.student_id)?Rs.getStudentResults(e,n.student_id):Rs.getResults(e,l),enabled:!!e&&!!l}),v=(j==null?void 0:j.data)||[],g=O.useMemo(()=>m.find(_=>_.subject_id===parseInt(l)),[m,l]);O.useEffect(()=>{if(v.length>0){const _={};v.forEach(S=>{_[S.student_id]={marks_obtained:S.marks_obtained,remarks:S.remarks||""}}),d(_)}else l&&d({})},[v,l]);const y=_e({mutationFn:_=>Rs.enterResults(e,_),onSuccess:()=>{K.success("Results saved successfully"),s.invalidateQueries(["exam-results"])},onError:_=>{var S,E;K.error(((E=(S=_.response)==null?void 0:S.data)==null?void 0:E.message)||"Failed to save results")}}),b=(_,S)=>{d(E=>({...E,[_]:{...E[_],marks_obtained:S}}))},N=(_,S)=>{d(E=>({...E,[_]:{...E[_],remarks:S}}))},k=(_,S)=>{const E=_/S*100;return E>=90?{grade:"A+",color:"text-green-600"}:E>=80?{grade:"A",color:"text-green-500"}:E>=70?{grade:"B+",color:"text-blue-600"}:E>=60?{grade:"B",color:"text-blue-500"}:E>=50?{grade:"C+",color:"text-yellow-600"}:E>=40?{grade:"C",color:"text-yellow-500"}:E>=33?{grade:"D",color:"text-orange-500"}:{grade:"F",color:"text-red-600"}},w=()=>{if(!l){K.error("Please select a subject");return}if(!g){K.error("Subject schedule not found");return}const _=p.filter(E=>{var A;return((A=c[E.id])==null?void 0:A.marks_obtained)!==void 0}).map(E=>({student_id:E.id,subject_id:parseInt(l),marks_obtained:parseFloat(c[E.id].marks_obtained),max_marks:g.max_marks,remarks:c[E.id].remarks||""}));if(_.length===0){K.error("Please enter marks for at least one student");return}if(_.find(E=>E.marks_obtained>E.max_marks||E.marks_obtained<0)){K.error("Marks must be between 0 and "+g.max_marks);return}y.mutate({results:_})};return h?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("button",{onClick:()=>t(`/exams/${e}`),className:"btn btn-outline flex items-center space-x-2",children:[r.jsx(js,{className:"w-4 h-4"}),r.jsx("span",{children:"Back"})]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Enter Results"}),r.jsx("p",{className:"text-gray-600 mt-1",children:h.name})]})]}),!i&&r.jsxs("button",{onClick:w,disabled:!l||y.isPending,className:"btn btn-primary flex items-center space-x-2",children:[r.jsx(Im,{className:"w-5 h-5"}),r.jsx("span",{children:y.isPending?"Saving...":"Save Results"})]}),i&&r.jsxs("div",{className:"bg-blue-100 text-blue-800 px-4 py-2 rounded-lg text-sm font-medium",children:[r.jsx($t,{className:"w-4 h-4 inline mr-2"}),"View Only - You cannot edit results"]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(De,{className:"w-5 h-5 text-blue-600 mr-2"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Select Subject"})]}),r.jsxs("select",{value:l,onChange:_=>o(_.target.value),className:"input w-full max-w-md",children:[r.jsx("option",{value:"",children:"Choose a subject..."}),m.map(_=>r.jsxs("option",{value:_.subject_id,children:[_.subject_name," (",_.subject_code,") - Max Marks:"," ",_.max_marks]},_.id))]}),m.length===0&&r.jsxs("p",{className:"text-yellow-600 text-sm mt-2",children:[r.jsx($t,{className:"w-4 h-4 inline mr-1"}),"No exam schedule found. Please add exam schedule first."]})]}),l&&r.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Xe,{className:"w-5 h-5 text-blue-600 mr-2"}),r.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Students (",p.length,")"]})]}),r.jsxs("div",{className:"text-sm text-gray-600",children:["Max Marks:"," ",r.jsx("span",{className:"font-semibold",children:g==null?void 0:g.max_marks})]})]})}),p.length===0&&!i?r.jsxs("div",{className:"p-12 text-center",children:[r.jsx(Xe,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"No students found in this class"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[!i&&r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Roll No"}),!i&&r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Name"}),!i&&r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Admission No"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Marks Obtained"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Remarks"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i?v.map(_=>{const S=k(_.marks_obtained,_.max_marks);return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[_.marks_obtained," / ",_.max_marks]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-3 py-1 inline-flex text-sm font-semibold rounded-full ${S.color} bg-opacity-10`,children:S.grade})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"text-sm text-gray-900",children:_.remarks||"-"})})]},_.id)}):p.map(_=>{const S=c[_.id]||{},E=S.marks_obtained,A=E!==void 0&&g?k(E,g.max_marks):null;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:_.roll_number||"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[_.first_name," ",_.last_name]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:_.admission_number}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("input",{type:"number",value:E||"",onChange:C=>b(_.id,C.target.value),min:"0",max:g==null?void 0:g.max_marks,step:"0.01",className:"input w-24",placeholder:"0"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:A&&r.jsx("span",{className:`px-3 py-1 inline-flex text-sm font-semibold rounded-full ${A.color} bg-opacity-10`,children:A.grade})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("input",{type:"text",value:S.remarks||"",onChange:C=>N(_.id,C.target.value),className:"input w-full",placeholder:"Optional remarks..."})})]},_.id)})})]})})]}),!l&&r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:[r.jsx($t,{className:"w-12 h-12 text-blue-600 mx-auto mb-3"}),r.jsx("p",{className:"text-blue-900 font-medium",children:"Please select a subject to start entering results"})]})]}):r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"loading"})})},$B=()=>{const e=We(),t=Me(),[s,n]=O.useState("all"),[a,i]=O.useState(1),l=20,{data:o,isLoading:c}=me({queryKey:["notifications",s,a],queryFn:()=>Ja.getAll({limit:l,offset:(a-1)*l,unreadOnly:s==="unread"})}),d=(o==null?void 0:o.data)||[],u=(o==null?void 0:o.unreadCount)||0,h=_e({mutationFn:v=>Ja.markAsRead(v),onSuccess:()=>{t.invalidateQueries(["notifications"])}}),f=_e({mutationFn:()=>Ja.markAllAsRead(),onSuccess:()=>{t.invalidateQueries(["notifications"]),K.success("All notifications marked as read")}}),m=_e({mutationFn:v=>Ja.delete(v),onSuccess:()=>{t.invalidateQueries(["notifications"]),K.success("Notification deleted")}}),x=v=>{v.is_read||h.mutate(v.id),v.link&&e(v.link)},p=v=>{switch(v){case"success":return r.jsx(Ar,{className:"w-6 h-6 text-green-500"});case"warning":return r.jsx($t,{className:"w-6 h-6 text-yellow-500"});case"error":return r.jsx($t,{className:"w-6 h-6 text-red-500"});case"announcement":return r.jsx(Is,{className:"w-6 h-6 text-purple-500"});case"exam":return r.jsx(Ue,{className:"w-6 h-6 text-blue-500"});case"event":return r.jsx(Te,{className:"w-6 h-6 text-orange-500"});case"result":return r.jsx(rs,{className:"w-6 h-6 text-indigo-500"});default:return r.jsx(Yd,{className:"w-6 h-6 text-blue-500"})}},j=v=>{switch(v){case"success":return"bg-green-50";case"warning":return"bg-yellow-50";case"error":return"bg-red-50";case"announcement":return"bg-purple-50";case"exam":return"bg-blue-50";case"event":return"bg-orange-50";case"result":return"bg-indigo-50";default:return"bg-blue-50"}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Notifications"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Stay updated with latest activities and announcements"})]}),r.jsx("div",{className:"flex gap-2",children:u>0&&r.jsxs("button",{onClick:()=>f.mutate(),className:"btn btn-outline flex items-center gap-2",disabled:f.isPending,children:[r.jsx(Jo,{className:"w-4 h-4"}),"Mark all read"]})})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 flex gap-4",children:[r.jsx("button",{onClick:()=>n("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${s==="all"?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"All Notifications"}),r.jsxs("button",{onClick:()=>n("unread"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${s==="unread"?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["Unread Only",u>0&&r.jsx("span",{className:"ml-2 bg-white text-blue-600 px-2 py-0.5 rounded-full text-xs font-bold",children:u})]})]}),r.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:c?r.jsx("div",{className:"p-12 text-center",children:r.jsx("div",{className:"loading mx-auto"})}):d.length===0?r.jsxs("div",{className:"p-12 text-center text-gray-500",children:[r.jsx(yg,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),r.jsx("p",{className:"text-lg font-medium",children:"No notifications found"}),r.jsx("p",{className:"text-sm mt-1",children:"You're all caught up!"})]}):r.jsx("div",{className:"divide-y divide-gray-100",children:d.map(v=>r.jsxs("div",{className:`p-6 hover:bg-gray-50 transition-colors flex gap-4 group ${v.is_read?"":"bg-blue-50/30"}`,children:[r.jsx("div",{className:`p-3 rounded-full h-fit ${j(v.type)}`,children:p(v.type)}),r.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>x(v),children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("h3",{className:`text-lg ${v.is_read?"font-medium text-gray-800":"font-bold text-gray-900"}`,children:v.title}),r.jsxs("span",{className:"text-sm text-gray-500 whitespace-nowrap ml-4",children:[new Date(v.created_at).toLocaleDateString()," ",new Date(v.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),r.jsx("p",{className:"text-gray-600 mt-1",children:v.message})]}),r.jsxs("div",{className:"flex flex-col gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[!v.is_read&&r.jsx("button",{onClick:g=>{g.stopPropagation(),h.mutate(v.id)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-full",title:"Mark as read",children:r.jsx(Jo,{className:"w-4 h-4"})}),r.jsx("button",{onClick:g=>{g.stopPropagation(),m.mutate(v.id)},className:"p-2 text-red-600 hover:bg-red-50 rounded-full",title:"Delete",children:r.jsx(ut,{className:"w-4 h-4"})})]})]},v.id))})}),r.jsxs("div",{className:"flex justify-center gap-4",children:[r.jsx("button",{onClick:()=>i(v=>Math.max(1,v-1)),disabled:a===1,className:"btn btn-outline",children:"Previous"}),r.jsxs("span",{className:"py-2 px-4 font-medium text-gray-600",children:["Page ",a]}),r.jsx("button",{onClick:()=>i(v=>v+1),disabled:d.length<l,className:"btn btn-outline",children:"Next"})]})]})},pw=({admission:e,onSubmit:t,onCancel:s})=>{var d;const[n,a]=O.useState({first_name:"",middle_name:"",last_name:"",date_of_birth:"",gender:"male",class_applied_for:"",previous_school:"",parent_name:"",parent_phone:"",parent_email:"",address:"",city:"",state:"",pincode:"",status:"pending",remarks:""}),{data:i,isLoading:l}=me({queryKey:["classes"],queryFn:()=>He.getAll({status:"active"})});O.useEffect(()=>{e&&a({first_name:e.first_name||"",middle_name:e.middle_name||"",last_name:e.last_name||"",date_of_birth:e.date_of_birth?e.date_of_birth.split("T")[0]:"",gender:e.gender||"male",class_applied_for:e.class_applied_for||"",previous_school:e.previous_school||"",parent_name:e.parent_name||"",parent_phone:e.parent_phone||"",parent_email:e.parent_email||"",address:e.address||"",city:e.city||"",state:e.state||"",pincode:e.pincode||"",status:e.status||"pending",remarks:e.remarks||""})},[e]);const o=u=>{const{name:h,value:f}=u.target;a(m=>({...m,[h]:f}))},c=u=>{u.preventDefault(),t(n)};return r.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-8 max-w-4xl mx-auto",children:r.jsxs("form",{onSubmit:c,className:"space-y-8",children:[r.jsxs("div",{className:"border-b border-gray-200 pb-8",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[r.jsx(tt,{className:"w-6 h-6 text-blue-500"}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Student Information"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center space-x-2",children:r.jsx("span",{children:"First Name *"})}),r.jsx("input",{type:"text",name:"first_name",value:n.first_name,onChange:o,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50/50 hover:bg-gray-50 shadow-sm",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Middle Name"}),r.jsx("input",{type:"text",name:"middle_name",value:n.middle_name,onChange:o,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50/50 hover:bg-gray-50 shadow-sm"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center space-x-2",children:r.jsx("span",{children:"Last Name *"})}),r.jsx("input",{type:"text",name:"last_name",value:n.last_name,onChange:o,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50/50 hover:bg-gray-50 shadow-sm",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center space-x-2",children:[r.jsx(Te,{className:"w-4 h-4"}),r.jsx("span",{children:"Date of Birth *"})]}),r.jsx("input",{type:"date",name:"date_of_birth",value:n.date_of_birth,onChange:o,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50/50 hover:bg-gray-50 shadow-sm",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Gender *"}),r.jsxs("select",{name:"gender",value:n.gender,onChange:o,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50/50 hover:bg-gray-50 shadow-sm",required:!0,children:[r.jsx("option",{value:"male",children:"Male"}),r.jsx("option",{value:"female",children:"Female"}),r.jsx("option",{value:"other",children:"Other"})]})]})]})]}),r.jsxs("div",{className:"border-b border-gray-200 pb-8",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[r.jsx(De,{className:"w-6 h-6 text-blue-500"}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Application Details"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center space-x-2",children:[r.jsx(Xe,{className:"w-4 h-4"}),r.jsx("span",{children:"Class Applied For *"})]}),r.jsxs("select",{name:"class_applied_for",value:n.class_applied_for,onChange:o,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50/50 hover:bg-gray-50 shadow-sm",required:!0,disabled:l,children:[r.jsx("option",{value:"",children:"Select Class"}),(d=i==null?void 0:i.data)==null?void 0:d.map(u=>r.jsx("option",{value:u.id,children:u.name},u.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Previous School"}),r.jsx("input",{type:"text",name:"previous_school",value:n.previous_school,onChange:o,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50/50 hover:bg-gray-50 shadow-sm",placeholder:"Name of previous school"})]})]})]}),r.jsxs("div",{className:"border-b border-gray-200 pb-8",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[r.jsx(Xe,{className:"w-6 h-6 text-blue-500"}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Parent/Guardian Information"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center space-x-2",children:r.jsx("span",{children:"Parent Name *"})}),r.jsx("input",{type:"text",name:"parent_name",value:n.parent_name,onChange:o,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50/50 hover:bg-gray-50 shadow-sm",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center space-x-2",children:[r.jsx(ba,{className:"w-4 h-4"}),r.jsx("span",{children:"Phone Number *"})]}),r.jsx("input",{type:"tel",name:"parent_phone",value:n.parent_phone,onChange:o,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50/50 hover:bg-gray-50 shadow-sm",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center space-x-2",children:[r.jsx(ya,{className:"w-4 h-4"}),r.jsx("span",{children:"Email Address"})]}),r.jsx("input",{type:"email",name:"parent_email",value:n.parent_email,onChange:o,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50/50 hover:bg-gray-50 shadow-sm"})]})]})]}),r.jsxs("div",{className:"border-b border-gray-200 pb-8",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[r.jsx(Rn,{className:"w-6 h-6 text-blue-500"}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Address Information"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Address *"}),r.jsx("textarea",{name:"address",value:n.address,onChange:o,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50/50 hover:bg-gray-50 shadow-sm resize-vertical",rows:"3",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"City"}),r.jsx("input",{type:"text",name:"city",value:n.city,onChange:o,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50/50 hover:bg-gray-50 shadow-sm"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"State"}),r.jsx("input",{type:"text",name:"state",value:n.state,onChange:o,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50/50 hover:bg-gray-50 shadow-sm"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Pincode"}),r.jsx("input",{type:"text",name:"pincode",value:n.pincode,onChange:o,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50/50 hover:bg-gray-50 shadow-sm"})]})]})]}),e&&r.jsxs("div",{className:"border-b border-gray-200 pb-8",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[r.jsx(De,{className:"w-6 h-6 text-blue-500"}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Office Use Only"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Status"}),r.jsxs("select",{name:"status",value:n.status,onChange:o,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50/50 hover:bg-gray-50 shadow-sm",children:[r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"approved",children:"Approved"}),r.jsx("option",{value:"rejected",children:"Rejected"}),r.jsx("option",{value:"admitted",children:"Admitted"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Remarks"}),r.jsx("textarea",{name:"remarks",value:n.remarks,onChange:o,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-gray-50/50 hover:bg-gray-50 shadow-sm resize-vertical",rows:"3"})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-4 pt-8 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:s,className:"px-8 py-3 bg-white hover:bg-gray-50 text-gray-700 border-2 border-gray-200 rounded-2xl transition-all duration-200 shadow-sm hover:shadow-md font-semibold text-sm flex items-center space-x-2",children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-2xl transition-all duration-200 shadow-lg hover:shadow-xl font-semibold text-sm flex items-center space-x-2",children:e?"Update Admission":"Submit Application"})]})]})})},UB=()=>{var N,k;const e=We(),t=Me(),[s,n]=O.useState(!1),[a,i]=O.useState(!1),[l,o]=O.useState(!1),[c,d]=O.useState(!1),[u,h]=O.useState(null),[f,m]=O.useState({status:"",search:""}),{data:x,isLoading:p}=me({queryKey:["admissions",f],queryFn:()=>Bc.getAll(f)}),j=async w=>{try{await Bc.create(w),K.success("Admission application created successfully"),n(!1),t.invalidateQueries(["admissions"])}catch(_){K.error(_.message||"Failed to create admission")}},v=async w=>{try{const _=await Bc.update(u.id,w);K.success("Admission updated successfully"),(w.status==="approved"||w.status==="admitted")&&u.status!=="approved"&&u.status!=="admitted"&&!u.student_id&&(K.loading("Converting admission to student...",{duration:2e3}),await y(u.id)),i(!1),h(null),t.invalidateQueries(["admissions"]),t.invalidateQueries(["students"])}catch(_){K.error(_.message||"Failed to update admission")}},g=async()=>{try{await Bc.delete(u.id),K.success("Admission deleted successfully"),o(!1),h(null),t.invalidateQueries(["admissions"])}catch(w){K.error(w.message||"Failed to delete admission")}},y=async w=>{try{await Bc.convertToStudent(w||u.id),K.success("Student created successfully from admission!"),d(!1),h(null),t.invalidateQueries(["admissions"]),t.invalidateQueries(["students"]),t.invalidateQueries(["classes"]),e("/users")}catch(_){K.error(_.message||"Failed to convert admission to student")}},b=w=>{const _={pending:"bg-yellow-100 text-yellow-800",approved:"bg-blue-100 text-blue-800",rejected:"bg-red-100 text-red-800",admitted:"bg-green-100 text-green-800"};return r.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${_[w]||"bg-gray-100 text-gray-800"}`,children:w.charAt(0).toUpperCase()+w.slice(1)})};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-extrabold text-gray-900",children:"Admissions"}),r.jsx("p",{className:"text-gray-600 mt-1 max-w-md",children:"Manage student admission applications with ease."})]}),r.jsx(st,{permission:ie.MANAGE_ADMISSIONS,children:r.jsxs("button",{onClick:()=>n(!0),className:"inline-flex items-center px-5 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow-md transition-colors",children:[r.jsx(Be,{className:"w-5 h-5 mr-2"}),r.jsx("span",{children:"New Admission"})]})})]}),r.jsx("div",{className:"card p-6 bg-white rounded-lg shadow-sm",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-center",children:[r.jsxs("div",{className:"relative md:col-span-3",children:[r.jsx(Tr,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5 pointer-events-none"}),r.jsx("input",{type:"text",placeholder:"Search by name, application number...",value:f.search,onChange:w=>m({...f,search:w.target.value}),className:"input pl-12 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-500"})]}),r.jsxs("select",{value:f.status,onChange:w=>m({...f,status:w.target.value}),className:"input w-full border border-gray-300 rounded-lg py-2 px-3 focus:ring-2 focus:ring-blue-400 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"All Statuses"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"approved",children:"Approved"}),r.jsx("option",{value:"admitted",children:"Admitted"}),r.jsx("option",{value:"rejected",children:"Rejected"})]}),r.jsxs("button",{onClick:()=>m({search:"",status:""}),className:"btn btn-outline flex items-center justify-center space-x-2 rounded-lg border border-gray-300 hover:bg-gray-50 px-4 py-2",children:[r.jsx(cn,{className:"w-4 h-4"}),r.jsx("span",{children:"Reset"})]})]})}),r.jsx("div",{className:"card overflow-hidden rounded-lg shadow-sm bg-white border border-gray-200",children:r.jsx("div",{className:"overflow-x-auto max-h-[600px]",children:r.jsxs("table",{className:"w-full table-auto border-collapse",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-300 sticky top-0 z-10",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider w-48",children:"Application No"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",colSpan:5,children:"Details"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-500 uppercase tracking-wider w-40",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:p?r.jsx("tr",{children:r.jsx("td",{colSpan:"7",className:"px-6 py-8 text-center",children:r.jsx("div",{className:"loading mx-auto"})})}):((N=x==null?void 0:x.data)==null?void 0:N.length)===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:"7",className:"px-6 py-12 text-center text-gray-500",children:[r.jsx(Ue,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),r.jsx("p",{children:"No admission records found"})]})}):(k=x==null?void 0:x.data)==null?void 0:k.map(w=>r.jsxs("tr",{className:"hover:bg-blue-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-semibold text-gray-900 border-r border-gray-200 align-middle whitespace-nowrap",children:w.application_number}),r.jsx("td",{colSpan:5,className:"px-6 py-4 align-middle",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 text-sm text-gray-700",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-gray-900 truncate",children:[w.first_name," ",w.last_name]}),r.jsx("p",{className:"text-xs text-gray-500",children:w.gender})]}),r.jsx("div",{className:"truncate",children:r.jsx("p",{children:w.class_name})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold truncate",children:w.parent_name}),r.jsx("p",{className:"text-xs text-gray-500 truncate",children:w.parent_phone})]}),r.jsxs("div",{children:[r.jsx("p",{children:new Date(w.application_date).toLocaleDateString()}),r.jsx("div",{className:"mt-1",children:b(w.status)})]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right align-middle text-sm font-medium",children:r.jsx("div",{className:"flex justify-end space-x-2",children:r.jsxs(st,{permission:ie.MANAGE_ADMISSIONS,children:[(w.status==="approved"||w.status==="admitted")&&!w.student_id&&r.jsx("button",{onClick:()=>{h(w),d(!0)},className:"text-green-600 hover:text-green-800 transition-colors rounded p-1",title:"Convert to Student","aria-label":`Convert admission ${w.application_number} to student`,children:r.jsx(Kd,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>{h(w),i(!0)},className:"text-blue-600 hover:text-blue-800 transition-colors rounded p-1",title:"Edit","aria-label":`Edit admission ${w.application_number}`,children:r.jsx(ct,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>{h(w),o(!0)},className:"text-red-600 hover:text-red-800 transition-colors rounded p-1",title:"Delete","aria-label":`Delete admission ${w.application_number}`,children:r.jsx(ut,{className:"w-5 h-5"})})]})})})]},w.id))})]})})}),r.jsx(Ae,{isOpen:s,onClose:()=>n(!1),title:"New Admission Application",size:"md",children:r.jsx(pw,{onSubmit:j,onCancel:()=>n(!1)})}),r.jsx(Ae,{isOpen:a,onClose:()=>{i(!1),h(null)},title:"Edit Admission Details",size:"md",children:r.jsx(pw,{admission:u,onSubmit:v,onCancel:()=>{i(!1),h(null)}})}),r.jsx(Ae,{isOpen:l,onClose:()=>{o(!1),h(null)},title:"Delete Admission Record",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("p",{className:"text-gray-600",children:["Are you sure you want to delete the admission record for"," ",r.jsxs("strong",{children:[u==null?void 0:u.first_name," ",u==null?void 0:u.last_name]}),"? This action cannot be undone."]}),r.jsxs("div",{className:"flex justify-end space-x-4",children:[r.jsx("button",{onClick:()=>{o(!1),h(null)},className:"btn btn-outline",children:"Cancel"}),r.jsx("button",{onClick:g,className:"btn bg-red-600 hover:bg-red-700 text-white",children:"Delete"})]})]})}),r.jsx(Ae,{isOpen:c,onClose:()=>{d(!1),h(null)},title:"Convert to Student",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-blue-800",children:"This will create a new student record with the following details:"}),r.jsxs("div",{className:"mt-3 space-y-2 text-sm",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Name:"})," ",u==null?void 0:u.first_name," ",u==null?void 0:u.last_name]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Class:"})," ",u==null?void 0:u.class_name]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Parent:"})," ",u==null?void 0:u.parent_name]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Phone:"})," ",u==null?void 0:u.parent_phone]})]})]}),r.jsx("p",{className:"text-gray-600 text-sm",children:"The student will be added to the Students page and will be able to access the system. Are you sure you want to proceed?"}),r.jsxs("div",{className:"flex justify-end space-x-4",children:[r.jsx("button",{onClick:()=>{d(!1),h(null)},className:"btn btn-outline",children:"Cancel"}),r.jsxs("button",{onClick:()=>y(),className:"btn bg-green-600 hover:bg-green-700 text-white flex items-center space-x-2",children:[r.jsx(Kd,{className:"w-4 h-4"}),r.jsx("span",{children:"Convert to Student"})]})]})]})})]})},zB=()=>{var x,p;const e=Ie(vs),[t,s]=O.useState(null),n=(e==null?void 0:e.student_id)||(e==null?void 0:e.id),{data:a,isLoading:i,error:l}=me({queryKey:["studentResults",n],queryFn:()=>ex.getStudentResults(n),enabled:!!n}),{data:o,isLoading:c}=me({queryKey:["studentExamResults",n,t],queryFn:()=>ex.getStudentExamResults(n,t),enabled:!!t&&!!n}),d=async j=>{try{await ex.downloadResultPDF(n,j)}catch(v){console.error("Error downloading PDF:",v),alert("Failed to download PDF. Please try again.")}},u=j=>({"A+":"text-green-600 bg-green-50",A:"text-green-500 bg-green-50","B+":"text-blue-600 bg-blue-50",B:"text-blue-500 bg-blue-50","C+":"text-yellow-600 bg-yellow-50",C:"text-yellow-500 bg-yellow-50",D:"text-orange-500 bg-orange-50",F:"text-red-600 bg-red-50"})[j]||"text-gray-600 bg-gray-50",h=j=>j==="published"?r.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[r.jsx(Ar,{className:"w-3 h-3 mr-1"}),"Published"]}):r.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[r.jsx($t,{className:"w-3 h-3 mr-1"}),"Pending"]});if(i)return r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading results..."})]})});if(l)return r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx(ku,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error Loading Results"}),r.jsx("p",{className:"text-gray-600",children:l.message||"Failed to load results"})]})});const f=(x=a==null?void 0:a.data)==null?void 0:x.student,m=((p=a==null?void 0:a.data)==null?void 0:p.exams)||[];return r.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Exam Results"}),r.jsx("p",{className:"text-gray-600",children:"View your exam performance and download marksheets"})]}),f&&r.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg shadow-lg p-6 mb-8 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold mb-2",children:[f.first_name," ",f.middle_name," ",f.last_name]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"opacity-90",children:"Admission No:"}),r.jsx("span",{className:"ml-2 font-semibold",children:f.admission_number})]}),r.jsxs("div",{children:[r.jsx("span",{className:"opacity-90",children:"Roll No:"}),r.jsx("span",{className:"ml-2 font-semibold",children:f.roll_number||"N/A"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"opacity-90",children:"Class:"}),r.jsx("span",{className:"ml-2 font-semibold",children:f.class_name})]}),r.jsxs("div",{children:[r.jsx("span",{className:"opacity-90",children:"Section:"}),r.jsx("span",{className:"ml-2 font-semibold",children:f.section_name})]})]})]}),r.jsx(rs,{className:"w-20 h-20 opacity-20"})]})}),t?r.jsxs("div",{children:[r.jsx("button",{onClick:()=>s(null),className:"mb-6 text-blue-600 hover:text-blue-700 font-medium flex items-center",children:" Back to All Exams"}),c?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading exam results..."})]}):o!=null&&o.data?r.jsxs("div",{children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:o.data.exam.name}),r.jsxs("p",{className:"text-gray-600 capitalize",children:[o.data.exam.exam_type.replace("_"," ")," "," ",o.data.exam.academic_year]})]}),r.jsxs("button",{onClick:()=>d(t),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors duration-200 flex items-center gap-2",children:[r.jsx(El,{className:"w-4 h-4"}),"Download Marksheet"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6",children:[r.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-blue-600 font-medium mb-1",children:"Total Marks"}),r.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:[o.data.summary.totalMarksObtained,"/",o.data.summary.totalMaxMarks]})]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-green-600 font-medium mb-1",children:"Percentage"}),r.jsxs("p",{className:"text-2xl font-bold text-green-900",children:[o.data.summary.percentage,"%"]})]}),r.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-purple-600 font-medium mb-1",children:"Overall Grade"}),r.jsx("p",{className:"text-2xl font-bold text-purple-900",children:o.data.summary.overallGrade})]}),r.jsxs("div",{className:`rounded-lg p-4 ${parseFloat(o.data.summary.percentage)>=o.data.exam.passing_marks?"bg-green-50":"bg-red-50"}`,children:[r.jsx("p",{className:`text-sm font-medium mb-1 ${parseFloat(o.data.summary.percentage)>=o.data.exam.passing_marks?"text-green-600":"text-red-600"}`,children:"Result"}),r.jsx("p",{className:`text-2xl font-bold ${parseFloat(o.data.summary.percentage)>=o.data.exam.passing_marks?"text-green-900":"text-red-900"}`,children:parseFloat(o.data.summary.percentage)>=o.data.exam.passing_marks?"PASSED":"FAILED"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:r.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Subject-wise Performance"})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Marks Obtained"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Max Marks"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Percentage"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.data.results.map(j=>{const v=(j.marks_obtained/j.max_marks*100).toFixed(2);return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm font-medium text-gray-900",children:j.subject_name})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-600",children:j.subject_code})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:r.jsx("div",{className:"text-sm font-semibold text-gray-900",children:j.marks_obtained})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:r.jsx("div",{className:"text-sm text-gray-600",children:j.max_marks})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[v,"%"]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:r.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold ${u(j.grade)}`,children:j.grade})})]},j.id)})})]})})]})]}):r.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[r.jsx($t,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Results Available"}),r.jsx("p",{className:"text-gray-600",children:"Results for this exam have not been published yet."})]})]}):r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"All Exams"}),m.length===0?r.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[r.jsx(Ue,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Exams Found"}),r.jsx("p",{className:"text-gray-600",children:"There are no exams scheduled for your class yet."})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(j=>r.jsx("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200 overflow-hidden",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-1",children:j.name}),r.jsx("p",{className:"text-sm text-gray-600 capitalize",children:j.exam_type.replace("_"," ")})]}),h(j.status)]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(Te,{className:"w-4 h-4 mr-2"}),new Date(j.start_date).toLocaleDateString()," -"," ",new Date(j.end_date).toLocaleDateString()]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(De,{className:"w-4 h-4 mr-2"}),"Academic Year: ",j.academic_year]})]}),j.status==="published"&&j.percentage!==null?r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Performance"}),r.jsx(Sr,{className:"w-4 h-4 text-blue-600"})]}),r.jsx("div",{className:"flex items-baseline justify-between",children:r.jsxs("div",{children:[r.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:[j.percentage,"%"]}),r.jsxs("span",{className:"text-sm text-gray-600 ml-2",children:["(",j.total_marks_obtained,"/",j.total_max_marks,")"]})]})})]}):r.jsx("div",{className:"bg-yellow-50 rounded-lg p-4 mb-4",children:r.jsx("p",{className:"text-sm text-yellow-800 text-center",children:"Results not published yet"})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>s(j.id),className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200 text-sm font-medium",disabled:j.status!=="published",children:"View Details"}),j.status==="published"&&r.jsx("button",{onClick:()=>d(j.id),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors duration-200",title:"Download Marksheet",children:r.jsx(El,{className:"w-4 h-4"})})]})]})},j.id))})]})]})};var oC={exports:{}};(function(e,t){(function(s,n){e.exports=n(O)})(typeof self<"u"?self:kt,function(s){return function(){var n={155:function(g){g.exports=s}},a={};function i(g){var y=a[g];if(y!==void 0)return y.exports;var b=a[g]={exports:{}};return n[g](b,b.exports,i),b.exports}i.d=function(g,y){for(var b in y)i.o(y,b)&&!i.o(g,b)&&Object.defineProperty(g,b,{enumerable:!0,get:y[b]})},i.o=function(g,y){return Object.prototype.hasOwnProperty.call(g,y)},i.r=function(g){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})};var l={};i.r(l),i.d(l,{useReactToPrint:function(){return v}});var o=i(155);const c="printWindow";function d({level:g="error",messages:y,suppressErrors:b=!1}){b||(g==="error"?console.error(y):g==="warning"?console.warn(y):console.debug(y))}function u(g,y){if(y||!g){const b=document.getElementById(c);b&&document.body.removeChild(b)}}function h(g){return g instanceof Error?g:new Error("Unknown Error")}function f(g,y){const{documentTitle:b,onAfterPrint:N,onPrintError:k,preserveAfterPrint:w,print:_,suppressErrors:S}=y;setTimeout(()=>{var E,A;if(g.contentWindow){let D=function(){N==null||N(),u(w)};var C=D;if(g.contentWindow.focus(),_)_(g).then(D).catch(M=>{k?k("print",h(M)):d({messages:["An error was thrown by the specified `print` function"],suppressErrors:S})});else{if(g.contentWindow.print){const M=(A=(E=g.contentDocument)===null||E===void 0?void 0:E.title)!==null&&A!==void 0?A:"",L=g.ownerDocument.title;b&&(g.ownerDocument.title=b,g.contentDocument&&(g.contentDocument.title=b)),g.contentWindow.print(),b&&(g.ownerDocument.title=L,g.contentDocument&&(g.contentDocument.title=M))}else d({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:S});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(M=>{var L,z;return((z=(L=navigator.userAgent)!==null&&L!==void 0?L:navigator.vendor)!==null&&z!==void 0?z:"opera"in window&&window.opera).match(M)})?setTimeout(D,500):D()}}else d({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:S})},500)}function m(g){const y=[],b=document.createTreeWalker(g,NodeFilter.SHOW_ELEMENT,null);let N=b.nextNode();for(;N;)y.push(N),N=b.nextNode();return y}function x(g,y,b){const N=m(g),k=m(y);if(N.length===k.length)for(let w=0;w<N.length;w++){const _=N[w],S=k[w],E=_.shadowRoot;if(E!==null){const A=S.attachShadow({mode:E.mode});A.innerHTML=E.innerHTML,x(E,A,b)}}else d({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",g,y],suppressErrors:b})}const p=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function j(g,y,b,N){var k,w,_,S,E;const{contentNode:A,clonedContentNode:C,clonedImgNodes:D,clonedVideoNodes:M,numResourcesToLoad:L,originalCanvasNodes:z}=b,{bodyClass:Y,fonts:X,ignoreGlobalStyles:Z,pageStyle:W,nonce:F,suppressErrors:q,copyShadowRoots:I}=N;g.onload=null;const $=(k=g.contentDocument)!==null&&k!==void 0?k:(w=g.contentWindow)===null||w===void 0?void 0:w.document;if($){const G=$.body.appendChild(C);I&&x(A,G,!!q),X&&(!((_=g.contentDocument)===null||_===void 0)&&_.fonts&&(!((S=g.contentWindow)===null||S===void 0)&&S.FontFace)?X.forEach(V=>{const ne=new FontFace(V.family,V.source,{weight:V.weight,style:V.style});g.contentDocument.fonts.add(ne),ne.loaded.then(()=>{y(ne)}).catch(fe=>{y(ne,["Failed loading the font:",ne,"Load error:",h(fe)])})}):(X.forEach(V=>{y(V)}),d({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:q})));const R=W??p,B=$.createElement("style");F&&(B.setAttribute("nonce",F),$.head.setAttribute("nonce",F)),B.appendChild($.createTextNode(R)),$.head.appendChild(B),Y&&$.body.classList.add(...Y.split(" "));const Q=$.querySelectorAll("canvas");for(let V=0;V<z.length;++V){const ne=z[V],fe=Q[V];if(fe===void 0){d({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",ne],suppressErrors:q});continue}const ye=fe.getContext("2d");ye&&ye.drawImage(ne,0,0)}for(let V=0;V<D.length;V++){const ne=D[V],fe=ne.getAttribute("src");if(fe){const ye=new Image;ye.onload=()=>{y(ne)},ye.onerror=(oe,be,ce,re,ge)=>{y(ne,["Error loading <img>",ne,"Error",ge])},ye.src=fe}else y(ne,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',ne])}for(let V=0;V<M.length;V++){const ne=M[V];ne.preload="auto";const fe=ne.getAttribute("poster");if(fe){const ye=new Image;ye.onload=()=>{y(ne)},ye.onerror=(oe,be,ce,re,ge)=>{y(ne,["Error loading video poster",fe,"for video",ne,"Error:",ge])},ye.src=fe}else ne.readyState>=2?y(ne):ne.src?(ne.onloadeddata=()=>{y(ne)},ne.onerror=(ye,oe,be,ce,re)=>{y(ne,["Error loading video",ne,"Error",re])},ne.onstalled=()=>{y(ne,["Loading video stalled, skipping",ne])}):y(ne,["Error loading video, `src` is empty",ne])}const te="select",ae=A.querySelectorAll(te),U=$.querySelectorAll(te);for(let V=0;V<ae.length;V++)U[V].value=ae[V].value;if(!Z){const V=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let ne=0,fe=V.length;ne<fe;++ne){const ye=V[ne];if(ye.tagName.toLowerCase()==="style"){const oe=$.createElement(ye.tagName),be=ye.sheet;if(be){let ce="";try{const re=be.cssRules.length;for(let ge=0;ge<re;++ge)typeof be.cssRules[ge].cssText=="string"&&(ce+=`${be.cssRules[ge].cssText}\r
`)}catch(re){d({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",ye,`Original error: ${h(re).message}`],level:"warning"})}oe.setAttribute("id",`react-to-print-${ne}`),F&&oe.setAttribute("nonce",F),oe.appendChild($.createTextNode(ce)),$.head.appendChild(oe)}}else if(ye.getAttribute("href"))if(ye.hasAttribute("disabled"))d({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",ye],level:"warning"}),y(ye);else{const oe=$.createElement(ye.tagName);for(let be=0,ce=ye.attributes.length;be<ce;++be){const re=ye.attributes[be];re&&oe.setAttribute(re.nodeName,(E=re.nodeValue)!==null&&E!==void 0?E:"")}oe.onload=()=>{y(oe)},oe.onerror=(be,ce,re,ge,we)=>{y(oe,["Failed to load",oe,"Error:",we])},F&&oe.setAttribute("nonce",F),$.head.appendChild(oe)}else d({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",ye],level:"warning"}),y(ye)}}}L===0&&f(g,N)}function v({bodyClass:g,contentRef:y,copyShadowRoots:b,documentTitle:N,fonts:k,ignoreGlobalStyles:w,nonce:_,onAfterPrint:S,onBeforePrint:E,onPrintError:A,pageStyle:C,preserveAfterPrint:D,print:M,printIframeProps:L,suppressErrors:z}){return(0,o.useCallback)(X=>{function Z(){const W={bodyClass:g,contentRef:y,copyShadowRoots:b,documentTitle:N,fonts:k,ignoreGlobalStyles:w,nonce:_,onAfterPrint:S,onPrintError:A,pageStyle:C,preserveAfterPrint:D,print:M,suppressErrors:z},F=function($){const G=document.createElement("iframe");return G.width=`${document.documentElement.clientWidth}px`,G.height=`${document.documentElement.clientHeight}px`,G.style.position="absolute",G.style.top=`-${document.documentElement.clientHeight+100}px`,G.style.left=`-${document.documentElement.clientWidth+100}px`,G.id=c,G.srcdoc="<!DOCTYPE html>",$&&($.allow&&(G.allow=$.allow),$.referrerPolicy!==void 0&&(G.referrerPolicy=$.referrerPolicy),$.sandbox!==void 0&&(G.sandbox=$.sandbox)),G}(L),q=function($,G){const{contentRef:R,fonts:B,ignoreGlobalStyles:Q,suppressErrors:te}=G,ae=function({contentRef:oe,optionalContent:be,suppressErrors:ce}){return be&&typeof be=="function"?(oe&&d({level:"warning",messages:['"react-to-print" received a `contentRef` option and an optional-content param passed to its callback. The `contentRef` option will be ignored.']}),be()):oe?oe.current:void d({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:ce})}({contentRef:R,optionalContent:$,suppressErrors:te});if(!ae)return;const U=ae.cloneNode(!0),V=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),ne=U.querySelectorAll("img"),fe=U.querySelectorAll("video"),ye=B?B.length:0;return{contentNode:ae,clonedContentNode:U,clonedImgNodes:ne,clonedVideoNodes:fe,numResourcesToLoad:(Q?0:V.length)+ne.length+fe.length+ye,originalCanvasNodes:ae.querySelectorAll("canvas")}}(X,W);if(!q)return void d({messages:["There is nothing to print"],suppressErrors:z});const I=function($,G,R){const{suppressErrors:B}=$,Q=[],te=[];return function(ae,U){Q.includes(ae)?d({level:"debug",messages:["Tried to mark a resource that has already been handled",ae],suppressErrors:B}):(U?(d({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...U],suppressErrors:B}),te.push(ae)):Q.push(ae),Q.length+te.length===G&&f(R,$))}}(W,q.numResourcesToLoad,F);(function($,G,R,B){$.onload=()=>{j($,G,R,B)},document.body.appendChild($)})(F,I,q,W)}u(D,!0),E?E().then(()=>{Z()}).catch(W=>{A==null||A("onBeforePrint",h(W))}):Z()},[g,y,b,N,k,w,_,S,E,A,C,D,M,z])}return l}()})})(oC);var VB=oC.exports;const HB=()=>{const{id:e}=bs(),t=We(),s=O.useRef(),[n,a]=O.useState(""),{data:i,isLoading:l}=me({queryKey:["exam",e],queryFn:()=>Rs.getById(e)}),o=i==null?void 0:i.data,{data:c,isLoading:d}=me({queryKey:["exam-schedules",e],queryFn:()=>oo.getExamSchedules(e),enabled:!!e}),u=O.useMemo(()=>(c==null?void 0:c.data)||[],[c]),{data:h,isLoading:f}=me({queryKey:["students",o==null?void 0:o.class_id],queryFn:()=>Fr.getAll({class_id:o==null?void 0:o.class_id,status:"active",limit:1e3}),enabled:!!(o!=null&&o.class_id)}),m=O.useMemo(()=>(h==null?void 0:h.data)||[],[h]),{data:x,isLoading:p}=me({queryKey:["exam-results-all",e],queryFn:()=>Rs.getResults(e),enabled:!!e}),j=O.useMemo(()=>(x==null?void 0:x.data)||[],[x]),v=VB.useReactToPrint({content:()=>s.current,documentTitle:`Exam_Report_${(o==null?void 0:o.name)||e}`}),g=O.useMemo(()=>{const N={};return m.forEach(k=>{N[k.id]={studentInfo:k,subjects:{},totalObtained:0,totalMax:0,subjectCount:0,failedSubjects:0}}),j.forEach(k=>{N[k.student_id]&&(N[k.student_id].subjects[k.subject_id]={marks:k.marks_obtained,grade:k.grade,max_marks:k.max_marks})}),Object.values(N).forEach(k=>{u.forEach(w=>{const _=k.subjects[w.subject_id];_&&(k.totalObtained+=parseFloat(_.marks),k.totalMax+=parseFloat(_.max_marks),k.subjectCount++,parseFloat(_.marks)<w.passing_marks&&k.failedSubjects++)}),k.percentage=k.totalMax>0?(k.totalObtained/k.totalMax*100).toFixed(2):0}),N},[m,j,u]),y=O.useMemo(()=>u.sort((N,k)=>N.exam_date===k.exam_date?N.start_time.localeCompare(k.start_time):new Date(N.exam_date)-new Date(k.exam_date)),[u]),b=O.useMemo(()=>{if(!n)return m;const N=n.toLowerCase();return m.filter(k=>{var w,_;return k.first_name.toLowerCase().includes(N)||k.last_name.toLowerCase().includes(N)||((w=k.roll_number)==null?void 0:w.toString().includes(N))||((_=k.admission_number)==null?void 0:_.includes(N))})},[m,n]);return l||d||f||p?r.jsx("div",{className:"flex justify-center items-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):o?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("button",{onClick:()=>t(`/exams/${e}`),className:"btn btn-outline flex items-center space-x-2",children:[r.jsx(js,{className:"w-4 h-4"}),r.jsx("span",{children:"Back"})]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Exam Report"}),r.jsxs("p",{className:"text-gray-600",children:[o.name," (",o.academic_year,")"]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:v,className:"btn btn-outline flex items-center gap-2",children:[r.jsx(ZM,{className:"w-4 h-4"}),"Print"]}),r.jsxs("button",{className:"btn btn-primary flex items-center gap-2",children:[r.jsx(El,{className:"w-4 h-4"}),"Export CSV"]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 flex flex-col md:flex-row items-center justify-between gap-4",children:[r.jsxs("div",{className:"relative w-full md:w-96",children:[r.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Search student by name, roll no...",className:"input pl-10 w-full",value:n,onChange:N=>a(N.target.value)})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[r.jsx("span",{className:"font-semibold",children:m.length})," Students",r.jsx("span",{className:"w-px h-4 bg-gray-300 mx-2"}),r.jsx("span",{className:"font-semibold",children:u.length})," Subjects"]})]}),r.jsxs("div",{className:"overflow-x-auto bg-white rounded-lg shadow-md",ref:s,children:[r.jsxs("div",{className:"hidden print:block text-center mb-6 p-4",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"GYAN SCHOOL"}),r.jsxs("p",{className:"text-sm",children:["Exam Report: ",o.name]}),r.jsxs("p",{className:"text-sm",children:["Class: ",o.class_name," | Year: ",o.academic_year]})]}),r.jsxs("table",{className:"min-w-full divide-y divide-gray-200 border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-50",children:[r.jsx("th",{className:"px-4 py-3 text-left test-xs font-bold text-gray-500 uppercase tracking-wider sticky left-0 bg-gray-50 z-10 border-b border-r border-gray-200 min-w-[50px]",children:"Roll"}),r.jsx("th",{className:"px-4 py-3 text-left test-xs font-bold text-gray-500 uppercase tracking-wider sticky left-[50px] bg-gray-50 z-10 border-b border-r border-gray-200 min-w-[150px]",children:"Student Name"}),y.map(N=>r.jsxs("th",{className:"px-2 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider border-b border-gray-200 min-w-[80px]",children:[r.jsx("div",{children:N.subject_name}),r.jsxs("div",{className:"text-[10px] font-normal text-gray-400",children:["FM: ",N.max_marks]})]},N.id)),r.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold text-gray-700 uppercase tracking-wider border-b border-l border-gray-200 bg-gray-50",children:"Total"}),r.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold text-gray-700 uppercase tracking-wider border-b border-gray-200 bg-gray-50",children:"%"}),r.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold text-gray-700 uppercase tracking-wider border-b border-gray-200 bg-gray-50",children:"Result"})]})}),r.jsxs("tbody",{className:"bg-white divide-y divide-gray-200 text-sm",children:[b.sort((N,k)=>(N.roll_number||9999)-(k.roll_number||9999)).map(N=>{const k=g[N.id];return r.jsxs("tr",{className:"hover:bg-gray-50 group",children:[r.jsx("td",{className:"px-4 py-3 whitespace-nowrap font-medium text-gray-900 sticky left-0 bg-white group-hover:bg-gray-50 border-r border-gray-200",children:N.roll_number||"-"}),r.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-gray-900 sticky left-[50px] bg-white group-hover:bg-gray-50 border-r border-gray-200 font-medium",children:[N.first_name," ",N.last_name]}),y.map(w=>{const _=k.subjects[w.subject_id],S=_&&parseFloat(_.marks)<w.passing_marks;return r.jsx("td",{className:"px-2 py-3 whitespace-nowrap text-center border-gray-100 border-r",children:_?r.jsx("div",{className:"flex flex-col items-center",children:r.jsx("span",{className:`font-medium ${S?"text-red-600":"text-gray-900"}`,children:_.marks})}):r.jsx("span",{className:"text-gray-300",children:"-"})},w.id)}),r.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-center font-bold text-gray-900 border-l border-gray-200 bg-gray-50/30",children:k.totalObtained}),r.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-center font-semibold text-gray-700 bg-gray-50/30",children:[k.percentage,"%"]}),r.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-center font-bold bg-gray-50/30",children:k.failedSubjects>0?r.jsxs("span",{className:"text-red-600 bg-red-50 px-2 py-0.5 rounded text-xs",children:["FAIL (",k.failedSubjects,")"]}):r.jsx("span",{className:"text-green-600 bg-green-50 px-2 py-0.5 rounded text-xs",children:"PASS"})})]},N.id)}),b.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:y.length+5,className:"text-center py-12 text-gray-500",children:"No students found matching your criteria."})})]})]})]})]}):r.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[r.jsx($t,{className:"w-16 h-16 text-red-500 mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Exam Not Found"}),r.jsx("button",{onClick:()=>t("/exams"),className:"mt-4 btn btn-primary",children:"Back to Exams"})]})},WB=()=>{const e=We(),t=Me(),s=Ie(mr),[n,a]=O.useState(!1),[i,l]=O.useState(null),[o,c]=O.useState({page:1,limit:10,teacher_id:"",date_from:"",date_to:""}),{data:d,isLoading:u}=me({queryKey:["daily-reports",o],queryFn:()=>Jc.getAll(o)}),h=["super_admin","admin","principal","hod"].includes(s),f=s==="teacher",{data:m}=me({queryKey:["teachers-list"],queryFn:()=>Pt.getAll({status:"active"}),enabled:h}),{data:x}=me({queryKey:["classes-list"],queryFn:()=>He.getAll()}),{data:p}=me({queryKey:["subjects-list"],queryFn:()=>sn.getAll()}),j=(d==null?void 0:d.data)||[],v=(m==null?void 0:m.data)||[],g=(x==null?void 0:x.data)||[],y=(p==null?void 0:p.data)||[],b=(d==null?void 0:d.totalPages)||1,N=_e({mutationFn:Jc.create,onSuccess:()=>{K.success("Report submitted successfully"),a(!1),E(),t.invalidateQueries(["daily-reports"])},onError:M=>K.error(M.message||"Failed to create report")}),k=_e({mutationFn:({id:M,data:L})=>Jc.update(M,L),onSuccess:()=>{K.success("Report updated successfully"),a(!1),E(),t.invalidateQueries(["daily-reports"])},onError:M=>K.error(M.message||"Failed to update report")}),w=_e({mutationFn:Jc.delete,onSuccess:()=>{K.success("Report deleted successfully"),t.invalidateQueries(["daily-reports"])},onError:M=>K.error(M.message||"Failed to delete report")}),[_,S]=O.useState({teacher_id:"",report_date:new Date().toISOString().split("T")[0],content:"",remarks:"",class_id:"",subject_id:"",period_number:"",topics_covered:"",teaching_method:"",homework_assigned:"",students_present:"",students_absent:"",student_engagement:"",challenges_faced:"",achievements:"",resources_used:"",next_class_plan:""}),E=()=>{S({teacher_id:"",report_date:new Date().toISOString().split("T")[0],content:"",remarks:"",class_id:"",subject_id:"",period_number:"",topics_covered:"",teaching_method:"",homework_assigned:"",students_present:"",students_absent:"",student_engagement:"",challenges_faced:"",achievements:"",resources_used:"",next_class_plan:""}),l(null)},A=M=>{l(M),S({teacher_id:M.teacher_id,report_date:M.report_date.split("T")[0],content:M.content,remarks:M.remarks||"",class_id:M.class_id||"",subject_id:M.subject_id||"",period_number:M.period_number||"",topics_covered:M.topics_covered||"",teaching_method:M.teaching_method||"",homework_assigned:M.homework_assigned||"",students_present:M.students_present||"",students_absent:M.students_absent||"",student_engagement:M.student_engagement||"",challenges_faced:M.challenges_faced||"",achievements:M.achievements||"",resources_used:M.resources_used||"",next_class_plan:M.next_class_plan||""}),a(!0)},C=async M=>{window.confirm("Are you sure you want to delete this report?")&&w.mutate(M)},D=M=>{M.preventDefault(),i?k.mutate({id:i.id,data:_}):N.mutate(_)};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-extrabold text-gray-900",children:"Daily Reports"}),r.jsx("p",{className:"text-gray-500 mt-1",children:f?"Submit your daily teaching work and activities":"Track and manage teacher daily reports"})]}),r.jsxs("button",{onClick:()=>{E(),a(!0)},className:"flex items-center gap-2 px-6 py-3 bg-blue-700 text-white rounded-xl hover:bg-blue-800 transition-all font-medium shadow-sm hover:shadow-md",children:[r.jsx(Be,{className:"w-5 h-5"}),r.jsx("span",{children:f?"Submit Report":"Create Report"})]})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[h&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Teacher"}),r.jsxs("select",{className:"w-full px-4 py-2.5 bg-white border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:o.teacher_id,onChange:M=>c({...o,teacher_id:M.target.value,page:1}),children:[r.jsx("option",{value:"",children:"All Teachers"}),v.map(M=>r.jsxs("option",{value:M.id,children:[M.first_name," ",M.last_name]},M.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"From Date"}),r.jsx("input",{type:"date",className:"w-full px-4 py-2.5 bg-white border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:o.date_from,onChange:M=>c({...o,date_from:M.target.value,page:1})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"To Date"}),r.jsx("input",{type:"date",className:"w-full px-4 py-2.5 bg-white border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:o.date_to,onChange:M=>c({...o,date_to:M.target.value,page:1})})]})]})}),u?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-700"})}):j.length===0?r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-12 text-center",children:[r.jsx(Ue,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No reports found"}),r.jsx("p",{className:"text-gray-500 mb-6",children:f?"Start by submitting your first daily report":"No daily reports have been submitted yet"}),r.jsxs("button",{onClick:()=>{E(),a(!0)},className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-700 text-white rounded-lg hover:bg-blue-800 transition-all font-medium",children:[r.jsx(Be,{className:"w-5 h-5"}),r.jsx("span",{children:f?"Submit Your First Report":"Create First Report"})]})]}):r.jsx("div",{className:"grid grid-cols-1 gap-4",children:j.map(M=>r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:r.jsx(Te,{className:"w-6 h-6 text-blue-700"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900",children:new Date(M.report_date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx(tt,{className:"w-4 h-4 text-gray-500"}),r.jsxs("span",{className:"text-sm text-gray-600",children:[M.teacher_first_name," ",M.teacher_last_name]}),M.class_name&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-gray-400",children:""}),r.jsxs("span",{className:"text-sm text-gray-600",children:[M.class_name," ",M.section]})]}),M.subject_name&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-gray-400",children:""}),r.jsx("span",{className:"text-sm text-gray-600",children:M.subject_name})]})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>e(`/reports/${M.id}`),className:"p-2 text-blue-700 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:r.jsx(ki,{className:"w-5 h-5"})}),(h||f)&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>A(M),className:"p-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",title:"Edit",children:r.jsx(ct,{className:"w-5 h-5"})}),h&&r.jsx("button",{onClick:()=>C(M.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:r.jsx(ut,{className:"w-5 h-5"})})]})]})]}),r.jsx("div",{className:"mb-4",children:r.jsx("p",{className:"text-gray-700 line-clamp-2",children:M.content})}),(M.students_present||M.student_engagement||M.topics_covered)&&r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[M.students_present!==null&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 rounded-lg border border-green-100",children:[r.jsx(Ar,{className:"w-5 h-5 text-green-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-green-600 font-medium",children:"Present"}),r.jsx("p",{className:"text-lg font-bold text-green-900",children:M.students_present})]})]}),M.students_absent!==null&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 rounded-lg border border-red-100",children:[r.jsx(ku,{className:"w-5 h-5 text-red-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-red-600 font-medium",children:"Absent"}),r.jsx("p",{className:"text-lg font-bold text-red-900",children:M.students_absent})]})]}),M.period_number&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 rounded-lg border border-blue-100",children:[r.jsx(Nt,{className:"w-5 h-5 text-blue-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-blue-600 font-medium",children:"Period"}),r.jsx("p",{className:"text-lg font-bold text-blue-900",children:M.period_number})]})]}),M.student_engagement&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-purple-50 rounded-lg border border-purple-100",children:[r.jsx(Sr,{className:"w-5 h-5 text-purple-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-purple-600 font-medium",children:"Engagement"}),r.jsx("p",{className:"text-sm font-bold text-purple-900 capitalize",children:M.student_engagement})]})]})]}),(M.topics_covered||M.homework_assigned)&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[M.topics_covered&&r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(De,{className:"w-4 h-4 text-gray-600"}),r.jsx("span",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Topics Covered"})]}),r.jsx("p",{className:"text-sm text-gray-900",children:M.topics_covered})]}),M.homework_assigned&&r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Dl,{className:"w-4 h-4 text-gray-600"}),r.jsx("span",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Homework Assigned"})]}),r.jsx("p",{className:"text-sm text-gray-900",children:M.homework_assigned})]})]})]})},M.id))}),b>1&&r.jsx("div",{className:"flex justify-center",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>c({...o,page:Math.max(1,o.page-1)}),disabled:o.page===1,className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:"Previous"}),r.jsxs("span",{className:"px-4 py-2 text-sm text-gray-700 font-medium",children:["Page ",o.page," of ",b]}),r.jsx("button",{onClick:()=>c({...o,page:Math.min(b,o.page+1)}),disabled:o.page===b,className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:"Next"})]})}),r.jsx(Ae,{isOpen:n,onClose:()=>{a(!1),E()},title:i?"Edit Daily Report":f?"Submit Daily Work Report":"Create Daily Report",size:"2xl",children:r.jsxs("form",{onSubmit:D,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[r.jsx(Te,{className:"w-5 h-5 text-blue-700"}),"Basic Information"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[!i&&h&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Teacher *"}),r.jsxs("select",{value:_.teacher_id,onChange:M=>S({..._,teacher_id:M.target.value}),className:"w-full px-4 py-2.5 bg-white border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[r.jsx("option",{value:"",children:"Select Teacher"}),v.map(M=>r.jsxs("option",{value:M.id,children:[M.first_name," ",M.last_name," (",M.employee_id,")"]},M.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Date *"}),r.jsx("input",{type:"date",value:_.report_date,onChange:M=>S({..._,report_date:M.target.value}),className:"w-full px-4 py-2.5 bg-white border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Class"}),r.jsxs("select",{value:_.class_id,onChange:M=>S({..._,class_id:M.target.value}),className:"w-full px-4 py-2.5 bg-white border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"Select Class"}),g.map(M=>r.jsxs("option",{value:M.id,children:[M.class_name," ",M.section]},M.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Subject"}),r.jsxs("select",{value:_.subject_id,onChange:M=>S({..._,subject_id:M.target.value}),className:"w-full px-4 py-2.5 bg-white border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"Select Subject"}),y.map(M=>r.jsx("option",{value:M.id,children:M.subject_name},M.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Period Number"}),r.jsx("input",{type:"number",value:_.period_number,onChange:M=>S({..._,period_number:M.target.value}),className:"w-full px-4 py-2.5 bg-white border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., 1, 2, 3...",min:"1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Teaching Method"}),r.jsx("input",{type:"text",value:_.teaching_method,onChange:M=>S({..._,teaching_method:M.target.value}),className:"w-full px-4 py-2.5 bg-white border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Lecture, Discussion, Practical"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[r.jsx(De,{className:"w-5 h-5 text-blue-700"}),"Teaching Details"]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Daily Work Summary *"}),r.jsx("textarea",{value:_.content,onChange:M=>S({..._,content:M.target.value}),className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe what you taught today, activities conducted, and overall class summary...",rows:"4",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Topics Covered"}),r.jsx("textarea",{value:_.topics_covered,onChange:M=>S({..._,topics_covered:M.target.value}),className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"List the specific topics or chapters covered in today's class...",rows:"3"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Homework Assigned"}),r.jsx("textarea",{value:_.homework_assigned,onChange:M=>S({..._,homework_assigned:M.target.value}),className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe the homework or assignments given to students...",rows:"3"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Resources Used"}),r.jsx("textarea",{value:_.resources_used,onChange:M=>S({..._,resources_used:M.target.value}),className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"List any teaching aids, materials, or technology used (e.g., projector, charts, videos)...",rows:"2"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[r.jsx(Xe,{className:"w-5 h-5 text-blue-700"}),"Student Attendance & Engagement"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Students Present"}),r.jsx("input",{type:"number",value:_.students_present,onChange:M=>S({..._,students_present:M.target.value}),className:"w-full px-4 py-2.5 bg-white border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Number of students",min:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Students Absent"}),r.jsx("input",{type:"number",value:_.students_absent,onChange:M=>S({..._,students_absent:M.target.value}),className:"w-full px-4 py-2.5 bg-white border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Number of students",min:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Student Engagement"}),r.jsxs("select",{value:_.student_engagement,onChange:M=>S({..._,student_engagement:M.target.value}),className:"w-full px-4 py-2.5 bg-white border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"Select Level"}),r.jsx("option",{value:"excellent",children:"Excellent"}),r.jsx("option",{value:"good",children:"Good"}),r.jsx("option",{value:"average",children:"Average"}),r.jsx("option",{value:"poor",children:"Poor"})]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[r.jsx($t,{className:"w-5 h-5 text-blue-700"}),"Observations & Planning"]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Challenges Faced"}),r.jsx("textarea",{value:_.challenges_faced,onChange:M=>S({..._,challenges_faced:M.target.value}),className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe any difficulties or challenges encountered during the class...",rows:"3"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Achievements & Highlights"}),r.jsx("textarea",{value:_.achievements,onChange:M=>S({..._,achievements:M.target.value}),className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Note any positive outcomes, student achievements, or memorable moments...",rows:"3"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Next Class Plan"}),r.jsx("textarea",{value:_.next_class_plan,onChange:M=>S({..._,next_class_plan:M.target.value}),className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Outline your plan for the next class session...",rows:"3"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Additional Remarks"}),r.jsx("textarea",{value:_.remarks,onChange:M=>S({..._,remarks:M.target.value}),className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Any other notes or comments...",rows:"2"})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:()=>{a(!1),E()},className:"px-6 py-2.5 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-blue-700 text-white rounded-lg hover:bg-blue-800 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:N.isPending||k.isPending,children:N.isPending||k.isPending?"Saving...":i?"Update Report":"Submit Report"})]})]})})]})},YB=()=>{const{id:e}=bs(),t=We(),{data:s,isLoading:n}=me({queryKey:["daily-report",e],queryFn:()=>Jc.getById(e)}),a=s==null?void 0:s.data;if(n)return r.jsx("div",{className:"flex justify-center items-center h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-700"})});if(!a)return r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Ue,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Report Not Found"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"The daily report you're looking for doesn't exist."}),r.jsx("button",{onClick:()=>t("/reports"),className:"px-6 py-3 bg-blue-700 text-white rounded-lg hover:bg-blue-800 font-medium",children:"Back to Reports"})]});const i=({icon:o,label:c,value:d,bgColor:u="bg-blue-50",textColor:h="text-blue-700",borderColor:f="border-blue-100"})=>r.jsx("div",{className:`p-4 ${u} rounded-lg border ${f}`,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(o,{className:`w-6 h-6 ${h}`}),r.jsxs("div",{children:[r.jsx("p",{className:`text-xs font-medium ${h} uppercase`,children:c}),r.jsx("p",{className:"text-lg font-bold text-gray-900 mt-1",children:d})]})]})}),l=({icon:o,title:c,children:d,iconColor:u="text-blue-700"})=>r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(o,{className:`w-5 h-5 ${u}`}),r.jsx("h3",{className:"text-lg font-bold text-gray-900",children:c})]}),d]});return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>t("/reports"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(js,{className:"w-6 h-6 text-gray-700"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-extrabold text-gray-900",children:"Daily Work Report"}),r.jsx("p",{className:"text-gray-500 mt-1",children:new Date(a.report_date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),r.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 rounded-xl shadow-lg p-6 text-white",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-3 bg-white/20 rounded-lg",children:r.jsx(tt,{className:"w-6 h-6"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-blue-100 uppercase font-medium",children:"Teacher"}),r.jsxs("p",{className:"text-lg font-bold",children:[a.teacher_first_name," ",a.teacher_last_name]})]})]}),a.class_name&&r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-3 bg-white/20 rounded-lg",children:r.jsx(Xe,{className:"w-6 h-6"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-blue-100 uppercase font-medium",children:"Class"}),r.jsxs("p",{className:"text-lg font-bold",children:[a.class_name," ",a.section]})]})]}),a.subject_name&&r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-3 bg-white/20 rounded-lg",children:r.jsx(De,{className:"w-6 h-6"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-blue-100 uppercase font-medium",children:"Subject"}),r.jsx("p",{className:"text-lg font-bold",children:a.subject_name})]})]}),a.period_number&&r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-3 bg-white/20 rounded-lg",children:r.jsx(Nt,{className:"w-6 h-6"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-blue-100 uppercase font-medium",children:"Period"}),r.jsxs("p",{className:"text-lg font-bold",children:["Period ",a.period_number]})]})]})]})}),(a.students_present!==null||a.students_absent!==null||a.student_engagement||a.teaching_method)&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.students_present!==null&&r.jsx(i,{icon:Ar,label:"Students Present",value:a.students_present,bgColor:"bg-green-50",textColor:"text-green-700",borderColor:"border-green-100"}),a.students_absent!==null&&r.jsx(i,{icon:ku,label:"Students Absent",value:a.students_absent,bgColor:"bg-red-50",textColor:"text-red-700",borderColor:"border-red-100"}),a.student_engagement&&r.jsx(i,{icon:Sr,label:"Student Engagement",value:a.student_engagement.charAt(0).toUpperCase()+a.student_engagement.slice(1),bgColor:"bg-purple-50",textColor:"text-purple-700",borderColor:"border-purple-100"}),a.teaching_method&&r.jsx(i,{icon:WM,label:"Teaching Method",value:a.teaching_method,bgColor:"bg-yellow-50",textColor:"text-yellow-700",borderColor:"border-yellow-100"})]}),r.jsx(l,{icon:Ue,title:"Daily Work Summary",children:r.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:a.content})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.topics_covered&&r.jsx(l,{icon:De,title:"Topics Covered",iconColor:"text-indigo-600",children:r.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:a.topics_covered})}),a.homework_assigned&&r.jsx(l,{icon:Dl,title:"Homework Assigned",iconColor:"text-orange-600",children:r.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:a.homework_assigned})}),a.resources_used&&r.jsx(l,{icon:QM,title:"Resources Used",iconColor:"text-teal-600",children:r.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:a.resources_used})}),a.next_class_plan&&r.jsx(l,{icon:Te,title:"Next Class Plan",iconColor:"text-blue-600",children:r.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:a.next_class_plan})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.challenges_faced&&r.jsx(l,{icon:$t,title:"Challenges Faced",iconColor:"text-red-600",children:r.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:a.challenges_faced})}),a.achievements&&r.jsx(l,{icon:rs,title:"Achievements & Highlights",iconColor:"text-green-600",children:r.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:a.achievements})})]}),a.remarks&&r.jsx(l,{icon:Ue,title:"Additional Remarks",iconColor:"text-gray-600",children:r.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:a.remarks})}),r.jsx("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[r.jsxs("span",{children:["Submitted by: ",a.creator_email]}),r.jsxs("span",{children:["Created: ",new Date(a.created_at).toLocaleString()]}),a.updated_at!==a.created_at&&r.jsxs("span",{children:["Last Updated: ",new Date(a.updated_at).toLocaleString()]})]})}),r.jsx("div",{className:"flex justify-center pt-4",children:r.jsx("button",{onClick:()=>t("/reports"),className:"px-6 py-3 bg-blue-700 text-white rounded-lg hover:bg-blue-800 font-medium transition-colors",children:"Back to Reports"})})]})},GB=()=>{const{user:e}=Ie(i=>i.auth);Me();const[t,s]=O.useState("reports"),n=["super_admin","admin","principal","hod"].includes(e==null?void 0:e.role),a=(e==null?void 0:e.role)==="student";return O.useEffect(()=>{a&&t==="reports"&&s("my-attendance")},[a,t]),r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"bg-blue-600 rounded-2xl p-8 text-white shadow-xl",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(Zn,{className:"w-10 h-10"}),r.jsx("h1",{className:"text-4xl font-bold",children:"Bus Attendance Reports"})]}),r.jsx("p",{className:"text-white text-lg opacity-90",children:"Track and manage daily bus attendance records"})]}),r.jsxs("div",{className:"flex space-x-2 bg-white border border-gray-200 p-1.5 rounded-xl shadow-sm overflow-x-auto",children:[n&&r.jsxs("button",{onClick:()=>s("reports"),className:`flex items-center px-5 py-2.5 rounded-lg text-sm font-semibold transition-all whitespace-nowrap ${t==="reports"?"bg-blue-600 text-white shadow-md transform scale-105":"text-black hover:bg-gray-100"}`,children:[r.jsx(Zn,{className:"w-4 h-4 mr-2"}),"All Reports"]}),a&&r.jsxs("button",{onClick:()=>s("my-attendance"),className:`flex items-center px-5 py-2.5 rounded-lg text-sm font-semibold transition-all whitespace-nowrap ${t==="my-attendance"?"bg-blue-600 text-white shadow-md transform scale-105":"text-black hover:bg-gray-100"}`,children:[r.jsx(Xr,{className:"w-4 h-4 mr-2"}),"My Attendance"]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-8 min-h-[500px]",children:[t==="reports"&&n&&r.jsx(KB,{}),t==="my-attendance"&&a&&r.jsx(QB,{})]})]})},KB=()=>{const{user:e}=Ie(E=>E.auth),t=Me(),[s,n]=O.useState(!1),[a,i]=O.useState(null),[l,o]=O.useState(!1),[c,d]=O.useState({page:1,limit:10,route_id:"",vehicle_id:"",date_from:"",date_to:"",status:""}),{data:u,isLoading:h}=me({queryKey:["bus-attendance-reports",c],queryFn:()=>St.getBusAttendanceReports(c)}),{data:f}=me({queryKey:["transport-routes"],queryFn:()=>St.getAllRoutes()}),{data:m}=me({queryKey:["transport-vehicles"],queryFn:()=>St.getAllVehicles()}),x=(u==null?void 0:u.data)||[],p=(f==null?void 0:f.data)||[],j=(m==null?void 0:m.data)||[],v=(u==null?void 0:u.totalPages)||1,g=_e({mutationFn:St.deleteBusAttendanceReport,onSuccess:()=>{t.invalidateQueries(["bus-attendance-reports"]),K.success("Report deleted successfully")},onError:E=>K.error(E.message||"Failed to delete report")}),y=_e({mutationFn:St.verifyBusAttendanceReport,onSuccess:()=>{t.invalidateQueries(["bus-attendance-reports"]),K.success("Report verified successfully")},onError:E=>K.error(E.message||"Failed to verify report")}),b=E=>{i(E),o(!1),n(!0)},N=E=>{i(E),o(!0),n(!0)},k=E=>{window.confirm("Are you sure you want to delete this report?")&&g.mutate(E)},w=E=>{window.confirm("Verify this report?")&&y.mutate(E)},_=()=>{n(!1),i(null),o(!1)},S=E=>{const A={draft:"bg-white text-black border-gray-200",submitted:"bg-blue-600 text-white border-blue-600",verified:"bg-white text-black border-blue-600"};return r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide border-2 ${A[E]||A.draft}`,children:E})};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 bg-white rounded-2xl border border-gray-200",children:[r.jsxs("h3",{className:"text-2xl font-bold text-black flex items-center gap-3",children:[r.jsx(Zn,{className:"w-8 h-8 text-blue-600"}),"Bus Attendance Reports"]}),r.jsxs("button",{onClick:()=>{i(null),o(!1),n(!0)},className:"flex items-center gap-2 px-5 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 shadow-lg hover:shadow-xl transition-all font-medium",children:[r.jsx(Be,{className:"w-4 h-4"})," Create Report"]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(cn,{className:"w-5 h-5 text-gray-600"}),r.jsx("h4",{className:"font-semibold text-gray-900",children:"Filters"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black mb-1",children:"Route"}),r.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-black focus:ring-2 focus:ring-blue-600 focus:border-blue-600",value:c.route_id,onChange:E=>d({...c,route_id:E.target.value,page:1}),children:[r.jsx("option",{value:"",children:"All Routes"}),p.map(E=>r.jsxs("option",{value:E.id,children:[E.route_name," ",E.bus_number?`(${E.bus_number})`:""]},E.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black mb-1",children:"Bus"}),r.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-600 focus:border-blue-600",value:c.vehicle_id,onChange:E=>d({...c,vehicle_id:E.target.value,page:1}),children:[r.jsx("option",{value:"",children:"All Buses"}),j.map(E=>r.jsx("option",{value:E.id,children:E.bus_number},E.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black mb-1",children:"From Date"}),r.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-600 focus:border-blue-600",value:c.date_from,onChange:E=>d({...c,date_from:E.target.value,page:1})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Date"}),r.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:c.date_to,onChange:E=>d({...c,date_to:E.target.value,page:1})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black mb-1",children:"Status"}),r.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-600 focus:border-blue-600",value:c.status,onChange:E=>d({...c,status:E.target.value,page:1}),children:[r.jsx("option",{value:"",children:"All Status"}),r.jsx("option",{value:"draft",children:"Draft"}),r.jsx("option",{value:"submitted",children:"Submitted"}),r.jsx("option",{value:"verified",children:"Verified"})]})]})]})]}),h?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):x.length===0?r.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border border-dashed",children:[r.jsx(Zn,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No Reports Found"}),r.jsx("p",{className:"text-gray-500 mt-2",children:"Create your first bus attendance report"})]}):r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-white border-b border-gray-200",children:[r.jsx("th",{className:"px-6 py-5 text-left text-xs font-bold text-black uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-6 py-5 text-left text-xs font-bold text-black uppercase tracking-wider",children:"Route / Bus"}),r.jsx("th",{className:"px-6 py-5 text-left text-xs font-bold text-black uppercase tracking-wider",children:"Attendance"}),r.jsx("th",{className:"px-6 py-5 text-left text-xs font-bold text-black uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-5 text-left text-xs font-bold text-black uppercase tracking-wider",children:"Created By"}),r.jsx("th",{className:"px-6 py-5 text-right text-xs font-bold text-black uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100 bg-white",children:x.map(E=>r.jsxs("tr",{className:"hover:bg-gray-50 transition-all",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Te,{className:"w-4 h-4 text-blue-600"}),r.jsx("span",{className:"font-medium text-black",children:new Date(E.report_date).toLocaleDateString()})]})}),r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("div",{className:"font-semibold text-black",children:E.route_name}),r.jsx("div",{className:"text-sm font-mono bg-white border border-blue-600 text-black px-3 py-1 rounded-full mt-1 inline-block",children:E.bus_number})]}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-xs text-black",children:"Total"}),r.jsx("div",{className:"text-lg font-bold text-black",children:E.total_students})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-xs text-black",children:"Present"}),r.jsx("div",{className:"text-lg font-bold text-black",children:E.present_count})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-xs text-black",children:"Absent"}),r.jsx("div",{className:"text-lg font-bold text-black",children:E.absent_count})]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S(E.status)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:E.creator_email}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>N(E),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View",children:r.jsx(ki,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>b(E),className:"p-2 text-black hover:bg-gray-100 rounded-lg transition-colors",title:"Edit",children:r.jsx(ct,{className:"w-5 h-5"})}),["super_admin","admin","principal"].includes(e==null?void 0:e.role)&&r.jsx("button",{onClick:()=>k(E.id),className:"p-2 text-black hover:bg-gray-100 rounded-lg transition-colors",title:"Delete",children:r.jsx(ut,{className:"w-5 h-5"})}),E.status!=="verified"&&["super_admin","principal"].includes(e==null?void 0:e.role)&&r.jsx("button",{onClick:()=>w(E.id),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Verify",children:r.jsx(Ar,{className:"w-5 h-5"})})]})})]},E.id))})]})}),v>1&&r.jsx("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-center",children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>d({...c,page:Math.max(1,c.page-1)}),disabled:c.page===1,className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),r.jsxs("span",{className:"px-4 py-2 text-sm text-gray-700",children:["Page ",c.page," of ",v]}),r.jsx("button",{onClick:()=>d({...c,page:Math.min(v,c.page+1)}),disabled:c.page===v,className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})})]}),s&&r.jsx(XB,{onClose:_,initialData:a,viewMode:l})]})},QB=()=>{const[e,t]=O.useState({page:1,limit:10,date_from:"",date_to:""}),{data:s,isLoading:n}=me({queryKey:["my-bus-attendance",e],queryFn:()=>St.getMyBusAttendance(e)}),a=(s==null?void 0:s.data)||[],i=(s==null?void 0:s.totalPages)||1,l=o=>o==="present"?r.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold bg-blue-600 text-white border-2 border-blue-600",children:"PRESENT"}):o==="absent"?r.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold bg-white text-black border-2 border-gray-200",children:"ABSENT"}):r.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold bg-white text-black border-2 border-gray-200",children:"UNKNOWN"});return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"p-6 bg-blue-50 rounded-2xl border border-blue-100",children:[r.jsxs("h3",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[r.jsx(Xr,{className:"w-8 h-8 text-blue-600"}),"My Bus Attendance"]}),r.jsx("p",{className:"text-gray-600 mt-1",children:"View your daily bus attendance records"})]}),r.jsx("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Date"}),r.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:e.date_from,onChange:o=>t({...e,date_from:o.target.value,page:1})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Date"}),r.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:e.date_to,onChange:o=>t({...e,date_to:o.target.value,page:1})})]})]})}),n?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a.length===0?r.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border border-dashed",children:[r.jsx(Xr,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No Attendance Records"}),r.jsx("p",{className:"text-gray-500 mt-2",children:"Your bus attendance records will appear here"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(o=>r.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-gray-100 hover:shadow-xl hover:border-blue-200 hover:-translate-y-1 transition-all duration-300",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Te,{className:"w-5 h-5 text-blue-600"}),r.jsx("span",{className:"font-bold text-gray-900",children:new Date(o.report_date).toLocaleDateString()})]}),l(o.my_status)]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 rounded-xl",children:[r.jsx(Xr,{className:"w-4 h-4 text-blue-600"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-gray-500",children:"Bus"}),r.jsx("div",{className:"font-semibold text-gray-900",children:o.bus_number})]})]}),r.jsxs("div",{className:"p-3 bg-gray-50 rounded-xl",children:[r.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Route"}),r.jsx("div",{className:"font-semibold text-gray-900",children:o.route_name})]}),o.my_remarks&&r.jsxs("div",{className:"p-3 bg-gray-50 rounded-xl border border-gray-200",children:[r.jsx("div",{className:"text-xs text-gray-700 mb-1",children:"Remarks"}),r.jsx("div",{className:"text-sm text-gray-900",children:o.my_remarks})]})]})]},o.id))}),i>1&&r.jsx("div",{className:"flex justify-center",children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>t({...e,page:Math.max(1,e.page-1)}),disabled:e.page===1,className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),r.jsxs("span",{className:"px-4 py-2 text-sm text-gray-700",children:["Page ",e.page," of ",i]}),r.jsx("button",{onClick:()=>t({...e,page:Math.min(i,e.page+1)}),disabled:e.page===i,className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})})]})},XB=({onClose:e,initialData:t,viewMode:s})=>{var m;const n=Me(),[a,i]=O.useState({report_date:((m=t==null?void 0:t.report_date)==null?void 0:m.split("T")[0])||new Date().toISOString().split("T")[0],route_id:(t==null?void 0:t.route_id)||"",vehicle_id:(t==null?void 0:t.vehicle_id)||"",remarks:(t==null?void 0:t.remarks)||"",status:(t==null?void 0:t.status)||"draft",attendance_data:(t==null?void 0:t.attendance_data)||[]}),[l,o]=O.useState([]),{data:c}=me({queryKey:["transport-routes"],queryFn:()=>St.getAllRoutes()});O.useEffect(()=>{a.route_id&&St.getRouteStudents(a.route_id).then(x=>{const p=x.data||[];o(p),!t&&p.length>0&&i(j=>({...j,attendance_data:p.map(v=>({student_id:v.id,student_name:`${v.first_name} ${v.last_name}`,status:"present",remarks:""}))}))})},[a.route_id,t]);const d=(c==null?void 0:c.data)||[],u=_e({mutationFn:x=>t?St.updateBusAttendanceReport(t.id,x):St.createBusAttendanceReport(x),onSuccess:()=>{n.invalidateQueries(["bus-attendance-reports"]),K.success(t?"Report updated successfully":"Report created successfully"),e()},onError:x=>K.error(x.message||"Failed to save report")}),h=x=>{x.preventDefault(),u.mutate(a)},f=(x,p,j)=>{i(v=>({...v,attendance_data:v.attendance_data.map(g=>g.student_id===x?{...g,[p]:j}:g)}))};return d.find(x=>x.id===parseInt(a.route_id)),r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[r.jsx("div",{className:"p-6 border-b border-gray-200 bg-white",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-2xl font-bold text-black",children:s?"View Report":t?"Edit Report":"Create Report"}),r.jsx("button",{onClick:e,className:"p-2 hover:bg-white rounded-lg transition-colors",children:r.jsx(qr,{className:"w-6 h-6"})})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:r.jsxs("form",{onSubmit:h,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black mb-1",children:"Date *"}),r.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-600 focus:border-blue-600",value:a.report_date,onChange:x=>i({...a,report_date:x.target.value}),required:!0,disabled:s})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black mb-1",children:"Route *"}),r.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-black focus:ring-2 focus:ring-blue-600 focus:border-blue-600",value:a.route_id,onChange:x=>{const p=d.find(j=>j.id===parseInt(x.target.value));i({...a,route_id:x.target.value,vehicle_id:(p==null?void 0:p.vehicle_id)||""})},required:!0,disabled:s||t,children:[r.jsx("option",{value:"",children:"Select Route"}),d.map(x=>r.jsxs("option",{value:x.id,children:[x.route_name,x.bus_number?` (${x.bus_number})`:x.vehicle_number&&x.vehicle_number!=="Unassigned"?` (${x.vehicle_number})`:""]},x.id))]})]})]}),!s&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black mb-1",children:"Status"}),r.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-600 focus:border-blue-600",value:a.status,onChange:x=>i({...a,status:x.target.value}),children:[r.jsx("option",{value:"draft",children:"Draft"}),r.jsx("option",{value:"submitted",children:"Submitted"})]})]}),a.attendance_data.length>0&&r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-black mb-4 flex items-center gap-2",children:[r.jsx(Xe,{className:"w-5 h-5 text-blue-600"}),"Student Attendance (",a.attendance_data.length," students)"]}),r.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:r.jsx("div",{className:"max-h-96 overflow-y-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-white sticky top-0",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-black uppercase",children:"Student"}),r.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold text-black uppercase",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-black uppercase",children:"Remarks"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:a.attendance_data.map(x=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3",children:r.jsx("div",{className:"font-medium text-black",children:x.student_name})}),r.jsx("td",{className:"px-4 py-3",children:r.jsxs("div",{className:"flex justify-center gap-2",children:[r.jsx("button",{type:"button",onClick:()=>f(x.student_id,"status","present"),className:`px-4 py-2 rounded-lg font-medium transition-all ${x.status==="present"?"bg-blue-600 text-white shadow-md":"bg-white text-black border border-gray-300 hover:bg-gray-50"}`,disabled:s,children:r.jsx(oa,{className:"w-4 h-4"})}),r.jsx("button",{type:"button",onClick:()=>f(x.student_id,"status","absent"),className:`px-4 py-2 rounded-lg font-medium transition-all ${x.status==="absent"?"bg-black text-white shadow-md":"bg-white text-black border border-gray-300 hover:bg-gray-50"}`,disabled:s,children:r.jsx(sD,{className:"w-4 h-4"})})]})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded px-2 py-1 text-sm focus:ring-2 focus:ring-blue-600 focus:border-blue-600",placeholder:"Optional remarks...",value:x.remarks||"",onChange:p=>f(x.student_id,"remarks",p.target.value),disabled:s})})]},x.student_id))})]})})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black mb-1",children:"General Remarks"}),r.jsx("textarea",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-600 focus:border-blue-600",rows:"3",placeholder:"Optional general remarks about the day...",value:a.remarks,onChange:x=>i({...a,remarks:x.target.value}),disabled:s})]}),!s&&r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium",children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-lg hover:from-emerald-700 hover:to-teal-700 font-medium shadow-lg",disabled:u.isPending,children:u.isPending?"Saving...":"Save Report"})]})]})})]})})};//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var cC;function ke(){return cC.apply(null,arguments)}function ZB(e){cC=e}function an(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function xl(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function ot(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function uv(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(ot(e,t))return!1;return!0}function $r(e){return e===void 0}function wa(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function Pu(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function dC(e,t){var s=[],n,a=e.length;for(n=0;n<a;++n)s.push(t(e[n],n));return s}function ni(e,t){for(var s in t)ot(t,s)&&(e[s]=t[s]);return ot(t,"toString")&&(e.toString=t.toString),ot(t,"valueOf")&&(e.valueOf=t.valueOf),e}function Fn(e,t,s,n){return PC(e,t,s,n,!0).utc()}function JB(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function $e(e){return e._pf==null&&(e._pf=JB()),e._pf}var sy;Array.prototype.some?sy=Array.prototype.some:sy=function(e){var t=Object(this),s=t.length>>>0,n;for(n=0;n<s;n++)if(n in t&&e.call(this,t[n],n,t))return!0;return!1};function hv(e){var t=null,s=!1,n=e._d&&!isNaN(e._d.getTime());if(n&&(t=$e(e),s=sy.call(t.parsedDateParts,function(a){return a!=null}),n=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&s),e._strict&&(n=n&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=n;else return n;return e._isValid}function Qm(e){var t=Fn(NaN);return e!=null?ni($e(t),e):$e(t).userInvalidated=!0,t}var xw=ke.momentProperties=[],Fx=!1;function fv(e,t){var s,n,a,i=xw.length;if($r(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),$r(t._i)||(e._i=t._i),$r(t._f)||(e._f=t._f),$r(t._l)||(e._l=t._l),$r(t._strict)||(e._strict=t._strict),$r(t._tzm)||(e._tzm=t._tzm),$r(t._isUTC)||(e._isUTC=t._isUTC),$r(t._offset)||(e._offset=t._offset),$r(t._pf)||(e._pf=$e(t)),$r(t._locale)||(e._locale=t._locale),i>0)for(s=0;s<i;s++)n=xw[s],a=t[n],$r(a)||(e[n]=a);return e}function Mu(e){fv(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Fx===!1&&(Fx=!0,ke.updateOffset(this),Fx=!1)}function ln(e){return e instanceof Mu||e!=null&&e._isAMomentObject!=null}function uC(e){ke.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function Us(e,t){var s=!0;return ni(function(){if(ke.deprecationHandler!=null&&ke.deprecationHandler(null,e),s){var n=[],a,i,l,o=arguments.length;for(i=0;i<o;i++){if(a="",typeof arguments[i]=="object"){a+=`
[`+i+"] ";for(l in arguments[0])ot(arguments[0],l)&&(a+=l+": "+arguments[0][l]+", ");a=a.slice(0,-2)}else a=arguments[i];n.push(a)}uC(e+`
Arguments: `+Array.prototype.slice.call(n).join("")+`
`+new Error().stack),s=!1}return t.apply(this,arguments)},t)}var gw={};function hC(e,t){ke.deprecationHandler!=null&&ke.deprecationHandler(e,t),gw[e]||(uC(t),gw[e]=!0)}ke.suppressDeprecationWarnings=!1;ke.deprecationHandler=null;function In(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function eq(e){var t,s;for(s in e)ot(e,s)&&(t=e[s],In(t)?this[s]=t:this["_"+s]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function ny(e,t){var s=ni({},e),n;for(n in t)ot(t,n)&&(xl(e[n])&&xl(t[n])?(s[n]={},ni(s[n],e[n]),ni(s[n],t[n])):t[n]!=null?s[n]=t[n]:delete s[n]);for(n in e)ot(e,n)&&!ot(t,n)&&xl(e[n])&&(s[n]=ni({},s[n]));return s}function mv(e){e!=null&&this.set(e)}var ay;Object.keys?ay=Object.keys:ay=function(e){var t,s=[];for(t in e)ot(e,t)&&s.push(t);return s};var tq={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function rq(e,t,s){var n=this._calendar[e]||this._calendar.sameElse;return In(n)?n.call(t,s):n}function Dn(e,t,s){var n=""+Math.abs(e),a=t-n.length,i=e>=0;return(i?s?"+":"":"-")+Math.pow(10,Math.max(0,a)).toString().substr(1)+n}var pv=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,xh=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ix={},Eo={};function Pe(e,t,s,n){var a=n;typeof n=="string"&&(a=function(){return this[n]()}),e&&(Eo[e]=a),t&&(Eo[t[0]]=function(){return Dn(a.apply(this,arguments),t[1],t[2])}),s&&(Eo[s]=function(){return this.localeData().ordinal(a.apply(this,arguments),e)})}function sq(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function nq(e){var t=e.match(pv),s,n;for(s=0,n=t.length;s<n;s++)Eo[t[s]]?t[s]=Eo[t[s]]:t[s]=sq(t[s]);return function(a){var i="",l;for(l=0;l<n;l++)i+=In(t[l])?t[l].call(a,e):t[l];return i}}function Zh(e,t){return e.isValid()?(t=fC(t,e.localeData()),Ix[t]=Ix[t]||nq(t),Ix[t](e)):e.localeData().invalidDate()}function fC(e,t){var s=5;function n(a){return t.longDateFormat(a)||a}for(xh.lastIndex=0;s>=0&&xh.test(e);)e=e.replace(xh,n),xh.lastIndex=0,s-=1;return e}var aq={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function iq(e){var t=this._longDateFormat[e],s=this._longDateFormat[e.toUpperCase()];return t||!s?t:(this._longDateFormat[e]=s.match(pv).map(function(n){return n==="MMMM"||n==="MM"||n==="DD"||n==="dddd"?n.slice(1):n}).join(""),this._longDateFormat[e])}var lq="Invalid date";function oq(){return this._invalidDate}var cq="%d",dq=/\d{1,2}/;function uq(e){return this._ordinal.replace("%d",e)}var hq={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function fq(e,t,s,n){var a=this._relativeTime[s];return In(a)?a(e,t,s,n):a.replace(/%d/i,e)}function mq(e,t){var s=this._relativeTime[e>0?"future":"past"];return In(s)?s(t):s.replace(/%s/i,t)}var yw={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function zs(e){return typeof e=="string"?yw[e]||yw[e.toLowerCase()]:void 0}function xv(e){var t={},s,n;for(n in e)ot(e,n)&&(s=zs(n),s&&(t[s]=e[n]));return t}var pq={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function xq(e){var t=[],s;for(s in e)ot(e,s)&&t.push({unit:s,priority:pq[s]});return t.sort(function(n,a){return n.priority-a.priority}),t}var mC=/\d/,Ns=/\d\d/,pC=/\d{3}/,gv=/\d{4}/,Xm=/[+-]?\d{6}/,At=/\d\d?/,xC=/\d\d\d\d?/,gC=/\d\d\d\d\d\d?/,Zm=/\d{1,3}/,yv=/\d{1,4}/,Jm=/[+-]?\d{1,6}/,vc=/\d+/,ep=/[+-]?\d+/,gq=/Z|[+-]\d\d:?\d\d/gi,tp=/Z|[+-]\d\d(?::?\d\d)?/gi,yq=/[+-]?\d+(\.\d{1,3})?/,Du=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,jc=/^[1-9]\d?/,bv=/^([1-9]\d|\d)/,Jf;Jf={};function Ee(e,t,s){Jf[e]=In(t)?t:function(n,a){return n&&s?s:t}}function bq(e,t){return ot(Jf,e)?Jf[e](t._strict,t._locale):new RegExp(vq(e))}function vq(e){return ca(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,s,n,a,i){return s||n||a||i}))}function ca(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Ts(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Qe(e){var t=+e,s=0;return t!==0&&isFinite(t)&&(s=Ts(t)),s}var iy={};function pt(e,t){var s,n=t,a;for(typeof e=="string"&&(e=[e]),wa(t)&&(n=function(i,l){l[t]=Qe(i)}),a=e.length,s=0;s<a;s++)iy[e[s]]=n}function Lu(e,t){pt(e,function(s,n,a,i){a._w=a._w||{},t(s,a._w,a,i)})}function jq(e,t,s){t!=null&&ot(iy,e)&&iy[e](t,s._a,s,e)}function rp(e){return e%4===0&&e%100!==0||e%400===0}var Er=0,ra=1,Sn=2,or=3,Js=4,sa=5,Zi=6,Nq=7,wq=8;Pe("Y",0,0,function(){var e=this.year();return e<=9999?Dn(e,4):"+"+e});Pe(0,["YY",2],0,function(){return this.year()%100});Pe(0,["YYYY",4],0,"year");Pe(0,["YYYYY",5],0,"year");Pe(0,["YYYYYY",6,!0],0,"year");Ee("Y",ep);Ee("YY",At,Ns);Ee("YYYY",yv,gv);Ee("YYYYY",Jm,Xm);Ee("YYYYYY",Jm,Xm);pt(["YYYYY","YYYYYY"],Er);pt("YYYY",function(e,t){t[Er]=e.length===2?ke.parseTwoDigitYear(e):Qe(e)});pt("YY",function(e,t){t[Er]=ke.parseTwoDigitYear(e)});pt("Y",function(e,t){t[Er]=parseInt(e,10)});function wd(e){return rp(e)?366:365}ke.parseTwoDigitYear=function(e){return Qe(e)+(Qe(e)>68?1900:2e3)};var yC=Nc("FullYear",!0);function _q(){return rp(this.year())}function Nc(e,t){return function(s){return s!=null?(bC(this,e,s),ke.updateOffset(this,t),this):au(this,e)}}function au(e,t){if(!e.isValid())return NaN;var s=e._d,n=e._isUTC;switch(t){case"Milliseconds":return n?s.getUTCMilliseconds():s.getMilliseconds();case"Seconds":return n?s.getUTCSeconds():s.getSeconds();case"Minutes":return n?s.getUTCMinutes():s.getMinutes();case"Hours":return n?s.getUTCHours():s.getHours();case"Date":return n?s.getUTCDate():s.getDate();case"Day":return n?s.getUTCDay():s.getDay();case"Month":return n?s.getUTCMonth():s.getMonth();case"FullYear":return n?s.getUTCFullYear():s.getFullYear();default:return NaN}}function bC(e,t,s){var n,a,i,l,o;if(!(!e.isValid()||isNaN(s))){switch(n=e._d,a=e._isUTC,t){case"Milliseconds":return void(a?n.setUTCMilliseconds(s):n.setMilliseconds(s));case"Seconds":return void(a?n.setUTCSeconds(s):n.setSeconds(s));case"Minutes":return void(a?n.setUTCMinutes(s):n.setMinutes(s));case"Hours":return void(a?n.setUTCHours(s):n.setHours(s));case"Date":return void(a?n.setUTCDate(s):n.setDate(s));case"FullYear":break;default:return}i=s,l=e.month(),o=e.date(),o=o===29&&l===1&&!rp(i)?28:o,a?n.setUTCFullYear(i,l,o):n.setFullYear(i,l,o)}}function Sq(e){return e=zs(e),In(this[e])?this[e]():this}function kq(e,t){if(typeof e=="object"){e=xv(e);var s=xq(e),n,a=s.length;for(n=0;n<a;n++)this[s[n].unit](e[s[n].unit])}else if(e=zs(e),In(this[e]))return this[e](t);return this}function Eq(e,t){return(e%t+t)%t}var Kt;Array.prototype.indexOf?Kt=Array.prototype.indexOf:Kt=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function vv(e,t){if(isNaN(e)||isNaN(t))return NaN;var s=Eq(t,12);return e+=(t-s)/12,s===1?rp(e)?29:28:31-s%7%2}Pe("M",["MM",2],"Mo",function(){return this.month()+1});Pe("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});Pe("MMMM",0,0,function(e){return this.localeData().months(this,e)});Ee("M",At,jc);Ee("MM",At,Ns);Ee("MMM",function(e,t){return t.monthsShortRegex(e)});Ee("MMMM",function(e,t){return t.monthsRegex(e)});pt(["M","MM"],function(e,t){t[ra]=Qe(e)-1});pt(["MMM","MMMM"],function(e,t,s,n){var a=s._locale.monthsParse(e,n,s._strict);a!=null?t[ra]=a:$e(s).invalidMonth=e});var Cq="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),vC="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),jC=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Aq=Du,Tq=Du;function Oq(e,t){return e?an(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||jC).test(t)?"format":"standalone"][e.month()]:an(this._months)?this._months:this._months.standalone}function Rq(e,t){return e?an(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[jC.test(t)?"format":"standalone"][e.month()]:an(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Pq(e,t,s){var n,a,i,l=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)i=Fn([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(i,"").toLocaleLowerCase();return s?t==="MMM"?(a=Kt.call(this._shortMonthsParse,l),a!==-1?a:null):(a=Kt.call(this._longMonthsParse,l),a!==-1?a:null):t==="MMM"?(a=Kt.call(this._shortMonthsParse,l),a!==-1?a:(a=Kt.call(this._longMonthsParse,l),a!==-1?a:null)):(a=Kt.call(this._longMonthsParse,l),a!==-1?a:(a=Kt.call(this._shortMonthsParse,l),a!==-1?a:null))}function Mq(e,t,s){var n,a,i;if(this._monthsParseExact)return Pq.call(this,e,t,s);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(a=Fn([2e3,n]),s&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),!s&&!this._monthsParse[n]&&(i="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[n]=new RegExp(i.replace(".",""),"i")),s&&t==="MMMM"&&this._longMonthsParse[n].test(e))return n;if(s&&t==="MMM"&&this._shortMonthsParse[n].test(e))return n;if(!s&&this._monthsParse[n].test(e))return n}}function NC(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=Qe(t);else if(t=e.localeData().monthsParse(t),!wa(t))return e}var s=t,n=e.date();return n=n<29?n:Math.min(n,vv(e.year(),s)),e._isUTC?e._d.setUTCMonth(s,n):e._d.setMonth(s,n),e}function wC(e){return e!=null?(NC(this,e),ke.updateOffset(this,!0),this):au(this,"Month")}function Dq(){return vv(this.year(),this.month())}function Lq(e){return this._monthsParseExact?(ot(this,"_monthsRegex")||_C.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(ot(this,"_monthsShortRegex")||(this._monthsShortRegex=Aq),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function Fq(e){return this._monthsParseExact?(ot(this,"_monthsRegex")||_C.call(this),e?this._monthsStrictRegex:this._monthsRegex):(ot(this,"_monthsRegex")||(this._monthsRegex=Tq),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function _C(){function e(c,d){return d.length-c.length}var t=[],s=[],n=[],a,i,l,o;for(a=0;a<12;a++)i=Fn([2e3,a]),l=ca(this.monthsShort(i,"")),o=ca(this.months(i,"")),t.push(l),s.push(o),n.push(o),n.push(l);t.sort(e),s.sort(e),n.sort(e),this._monthsRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Iq(e,t,s,n,a,i,l){var o;return e<100&&e>=0?(o=new Date(e+400,t,s,n,a,i,l),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,s,n,a,i,l),o}function iu(e){var t,s;return e<100&&e>=0?(s=Array.prototype.slice.call(arguments),s[0]=e+400,t=new Date(Date.UTC.apply(null,s)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function em(e,t,s){var n=7+t-s,a=(7+iu(e,0,n).getUTCDay()-t)%7;return-a+n-1}function SC(e,t,s,n,a){var i=(7+s-n)%7,l=em(e,n,a),o=1+7*(t-1)+i+l,c,d;return o<=0?(c=e-1,d=wd(c)+o):o>wd(e)?(c=e+1,d=o-wd(e)):(c=e,d=o),{year:c,dayOfYear:d}}function lu(e,t,s){var n=em(e.year(),t,s),a=Math.floor((e.dayOfYear()-n-1)/7)+1,i,l;return a<1?(l=e.year()-1,i=a+da(l,t,s)):a>da(e.year(),t,s)?(i=a-da(e.year(),t,s),l=e.year()+1):(l=e.year(),i=a),{week:i,year:l}}function da(e,t,s){var n=em(e,t,s),a=em(e+1,t,s);return(wd(e)-n+a)/7}Pe("w",["ww",2],"wo","week");Pe("W",["WW",2],"Wo","isoWeek");Ee("w",At,jc);Ee("ww",At,Ns);Ee("W",At,jc);Ee("WW",At,Ns);Lu(["w","ww","W","WW"],function(e,t,s,n){t[n.substr(0,1)]=Qe(e)});function Bq(e){return lu(e,this._week.dow,this._week.doy).week}var qq={dow:0,doy:6};function $q(){return this._week.dow}function Uq(){return this._week.doy}function zq(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function Vq(e){var t=lu(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}Pe("d",0,"do","day");Pe("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});Pe("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});Pe("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});Pe("e",0,0,"weekday");Pe("E",0,0,"isoWeekday");Ee("d",At);Ee("e",At);Ee("E",At);Ee("dd",function(e,t){return t.weekdaysMinRegex(e)});Ee("ddd",function(e,t){return t.weekdaysShortRegex(e)});Ee("dddd",function(e,t){return t.weekdaysRegex(e)});Lu(["dd","ddd","dddd"],function(e,t,s,n){var a=s._locale.weekdaysParse(e,n,s._strict);a!=null?t.d=a:$e(s).invalidWeekday=e});Lu(["d","e","E"],function(e,t,s,n){t[n]=Qe(e)});function Hq(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function Wq(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function jv(e,t){return e.slice(t,7).concat(e.slice(0,t))}var Yq="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),kC="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Gq="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Kq=Du,Qq=Du,Xq=Du;function Zq(e,t){var s=an(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?jv(s,this._week.dow):e?s[e.day()]:s}function Jq(e){return e===!0?jv(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function e$(e){return e===!0?jv(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function t$(e,t,s){var n,a,i,l=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)i=Fn([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(i,"").toLocaleLowerCase();return s?t==="dddd"?(a=Kt.call(this._weekdaysParse,l),a!==-1?a:null):t==="ddd"?(a=Kt.call(this._shortWeekdaysParse,l),a!==-1?a:null):(a=Kt.call(this._minWeekdaysParse,l),a!==-1?a:null):t==="dddd"?(a=Kt.call(this._weekdaysParse,l),a!==-1||(a=Kt.call(this._shortWeekdaysParse,l),a!==-1)?a:(a=Kt.call(this._minWeekdaysParse,l),a!==-1?a:null)):t==="ddd"?(a=Kt.call(this._shortWeekdaysParse,l),a!==-1||(a=Kt.call(this._weekdaysParse,l),a!==-1)?a:(a=Kt.call(this._minWeekdaysParse,l),a!==-1?a:null)):(a=Kt.call(this._minWeekdaysParse,l),a!==-1||(a=Kt.call(this._weekdaysParse,l),a!==-1)?a:(a=Kt.call(this._shortWeekdaysParse,l),a!==-1?a:null))}function r$(e,t,s){var n,a,i;if(this._weekdaysParseExact)return t$.call(this,e,t,s);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(a=Fn([2e3,1]).day(n),s&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(a,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(a,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(a,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(i="^"+this.weekdays(a,"")+"|^"+this.weekdaysShort(a,"")+"|^"+this.weekdaysMin(a,""),this._weekdaysParse[n]=new RegExp(i.replace(".",""),"i")),s&&t==="dddd"&&this._fullWeekdaysParse[n].test(e))return n;if(s&&t==="ddd"&&this._shortWeekdaysParse[n].test(e))return n;if(s&&t==="dd"&&this._minWeekdaysParse[n].test(e))return n;if(!s&&this._weekdaysParse[n].test(e))return n}}function s$(e){if(!this.isValid())return e!=null?this:NaN;var t=au(this,"Day");return e!=null?(e=Hq(e,this.localeData()),this.add(e-t,"d")):t}function n$(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function a$(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=Wq(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function i$(e){return this._weekdaysParseExact?(ot(this,"_weekdaysRegex")||Nv.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(ot(this,"_weekdaysRegex")||(this._weekdaysRegex=Kq),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function l$(e){return this._weekdaysParseExact?(ot(this,"_weekdaysRegex")||Nv.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(ot(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Qq),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function o$(e){return this._weekdaysParseExact?(ot(this,"_weekdaysRegex")||Nv.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(ot(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Xq),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Nv(){function e(u,h){return h.length-u.length}var t=[],s=[],n=[],a=[],i,l,o,c,d;for(i=0;i<7;i++)l=Fn([2e3,1]).day(i),o=ca(this.weekdaysMin(l,"")),c=ca(this.weekdaysShort(l,"")),d=ca(this.weekdays(l,"")),t.push(o),s.push(c),n.push(d),a.push(o),a.push(c),a.push(d);t.sort(e),s.sort(e),n.sort(e),a.sort(e),this._weekdaysRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function wv(){return this.hours()%12||12}function c$(){return this.hours()||24}Pe("H",["HH",2],0,"hour");Pe("h",["hh",2],0,wv);Pe("k",["kk",2],0,c$);Pe("hmm",0,0,function(){return""+wv.apply(this)+Dn(this.minutes(),2)});Pe("hmmss",0,0,function(){return""+wv.apply(this)+Dn(this.minutes(),2)+Dn(this.seconds(),2)});Pe("Hmm",0,0,function(){return""+this.hours()+Dn(this.minutes(),2)});Pe("Hmmss",0,0,function(){return""+this.hours()+Dn(this.minutes(),2)+Dn(this.seconds(),2)});function EC(e,t){Pe(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}EC("a",!0);EC("A",!1);function CC(e,t){return t._meridiemParse}Ee("a",CC);Ee("A",CC);Ee("H",At,bv);Ee("h",At,jc);Ee("k",At,jc);Ee("HH",At,Ns);Ee("hh",At,Ns);Ee("kk",At,Ns);Ee("hmm",xC);Ee("hmmss",gC);Ee("Hmm",xC);Ee("Hmmss",gC);pt(["H","HH"],or);pt(["k","kk"],function(e,t,s){var n=Qe(e);t[or]=n===24?0:n});pt(["a","A"],function(e,t,s){s._isPm=s._locale.isPM(e),s._meridiem=e});pt(["h","hh"],function(e,t,s){t[or]=Qe(e),$e(s).bigHour=!0});pt("hmm",function(e,t,s){var n=e.length-2;t[or]=Qe(e.substr(0,n)),t[Js]=Qe(e.substr(n)),$e(s).bigHour=!0});pt("hmmss",function(e,t,s){var n=e.length-4,a=e.length-2;t[or]=Qe(e.substr(0,n)),t[Js]=Qe(e.substr(n,2)),t[sa]=Qe(e.substr(a)),$e(s).bigHour=!0});pt("Hmm",function(e,t,s){var n=e.length-2;t[or]=Qe(e.substr(0,n)),t[Js]=Qe(e.substr(n))});pt("Hmmss",function(e,t,s){var n=e.length-4,a=e.length-2;t[or]=Qe(e.substr(0,n)),t[Js]=Qe(e.substr(n,2)),t[sa]=Qe(e.substr(a))});function d$(e){return(e+"").toLowerCase().charAt(0)==="p"}var u$=/[ap]\.?m?\.?/i,h$=Nc("Hours",!0);function f$(e,t,s){return e>11?s?"pm":"PM":s?"am":"AM"}var AC={calendar:tq,longDateFormat:aq,invalidDate:lq,ordinal:cq,dayOfMonthOrdinalParse:dq,relativeTime:hq,months:Cq,monthsShort:vC,week:qq,weekdays:Yq,weekdaysMin:Gq,weekdaysShort:kC,meridiemParse:u$},Rt={},zc={},ou;function m$(e,t){var s,n=Math.min(e.length,t.length);for(s=0;s<n;s+=1)if(e[s]!==t[s])return s;return n}function bw(e){return e&&e.toLowerCase().replace("_","-")}function p$(e){for(var t=0,s,n,a,i;t<e.length;){for(i=bw(e[t]).split("-"),s=i.length,n=bw(e[t+1]),n=n?n.split("-"):null;s>0;){if(a=sp(i.slice(0,s).join("-")),a)return a;if(n&&n.length>=s&&m$(i,n)>=s-1)break;s--}t++}return ou}function x$(e){return!!(e&&e.match("^[^/\\\\]*$"))}function sp(e){var t=null,s;if(Rt[e]===void 0&&typeof tf<"u"&&tf&&tf.exports&&x$(e))try{t=ou._abbr,s=require,s("./locale/"+e),ji(t)}catch{Rt[e]=null}return Rt[e]}function ji(e,t){var s;return e&&($r(t)?s=Ca(e):s=_v(e,t),s?ou=s:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),ou._abbr}function _v(e,t){if(t!==null){var s,n=AC;if(t.abbr=e,Rt[e]!=null)hC("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Rt[e]._config;else if(t.parentLocale!=null)if(Rt[t.parentLocale]!=null)n=Rt[t.parentLocale]._config;else if(s=sp(t.parentLocale),s!=null)n=s._config;else return zc[t.parentLocale]||(zc[t.parentLocale]=[]),zc[t.parentLocale].push({name:e,config:t}),null;return Rt[e]=new mv(ny(n,t)),zc[e]&&zc[e].forEach(function(a){_v(a.name,a.config)}),ji(e),Rt[e]}else return delete Rt[e],null}function g$(e,t){if(t!=null){var s,n,a=AC;Rt[e]!=null&&Rt[e].parentLocale!=null?Rt[e].set(ny(Rt[e]._config,t)):(n=sp(e),n!=null&&(a=n._config),t=ny(a,t),n==null&&(t.abbr=e),s=new mv(t),s.parentLocale=Rt[e],Rt[e]=s),ji(e)}else Rt[e]!=null&&(Rt[e].parentLocale!=null?(Rt[e]=Rt[e].parentLocale,e===ji()&&ji(e)):Rt[e]!=null&&delete Rt[e]);return Rt[e]}function Ca(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return ou;if(!an(e)){if(t=sp(e),t)return t;e=[e]}return p$(e)}function y$(){return ay(Rt)}function Sv(e){var t,s=e._a;return s&&$e(e).overflow===-2&&(t=s[ra]<0||s[ra]>11?ra:s[Sn]<1||s[Sn]>vv(s[Er],s[ra])?Sn:s[or]<0||s[or]>24||s[or]===24&&(s[Js]!==0||s[sa]!==0||s[Zi]!==0)?or:s[Js]<0||s[Js]>59?Js:s[sa]<0||s[sa]>59?sa:s[Zi]<0||s[Zi]>999?Zi:-1,$e(e)._overflowDayOfYear&&(t<Er||t>Sn)&&(t=Sn),$e(e)._overflowWeeks&&t===-1&&(t=Nq),$e(e)._overflowWeekday&&t===-1&&(t=wq),$e(e).overflow=t),e}var b$=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,v$=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,j$=/Z|[+-]\d\d(?::?\d\d)?/,gh=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Bx=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],N$=/^\/?Date\((-?\d+)/i,w$=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,_$={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function TC(e){var t,s,n=e._i,a=b$.exec(n)||v$.exec(n),i,l,o,c,d=gh.length,u=Bx.length;if(a){for($e(e).iso=!0,t=0,s=d;t<s;t++)if(gh[t][1].exec(a[1])){l=gh[t][0],i=gh[t][2]!==!1;break}if(l==null){e._isValid=!1;return}if(a[3]){for(t=0,s=u;t<s;t++)if(Bx[t][1].exec(a[3])){o=(a[2]||" ")+Bx[t][0];break}if(o==null){e._isValid=!1;return}}if(!i&&o!=null){e._isValid=!1;return}if(a[4])if(j$.exec(a[4]))c="Z";else{e._isValid=!1;return}e._f=l+(o||"")+(c||""),Ev(e)}else e._isValid=!1}function S$(e,t,s,n,a,i){var l=[k$(e),vC.indexOf(t),parseInt(s,10),parseInt(n,10),parseInt(a,10)];return i&&l.push(parseInt(i,10)),l}function k$(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function E$(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function C$(e,t,s){if(e){var n=kC.indexOf(e),a=new Date(t[0],t[1],t[2]).getDay();if(n!==a)return $e(s).weekdayMismatch=!0,s._isValid=!1,!1}return!0}function A$(e,t,s){if(e)return _$[e];if(t)return 0;var n=parseInt(s,10),a=n%100,i=(n-a)/100;return i*60+a}function OC(e){var t=w$.exec(E$(e._i)),s;if(t){if(s=S$(t[4],t[3],t[2],t[5],t[6],t[7]),!C$(t[1],s,e))return;e._a=s,e._tzm=A$(t[8],t[9],t[10]),e._d=iu.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),$e(e).rfc2822=!0}else e._isValid=!1}function T$(e){var t=N$.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(TC(e),e._isValid===!1)delete e._isValid;else return;if(OC(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:ke.createFromInputFallback(e)}ke.createFromInputFallback=Us("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function Kl(e,t,s){return e??t??s}function O$(e){var t=new Date(ke.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function kv(e){var t,s,n=[],a,i,l;if(!e._d){for(a=O$(e),e._w&&e._a[Sn]==null&&e._a[ra]==null&&R$(e),e._dayOfYear!=null&&(l=Kl(e._a[Er],a[Er]),(e._dayOfYear>wd(l)||e._dayOfYear===0)&&($e(e)._overflowDayOfYear=!0),s=iu(l,0,e._dayOfYear),e._a[ra]=s.getUTCMonth(),e._a[Sn]=s.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=n[t]=a[t];for(;t<7;t++)e._a[t]=n[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[or]===24&&e._a[Js]===0&&e._a[sa]===0&&e._a[Zi]===0&&(e._nextDay=!0,e._a[or]=0),e._d=(e._useUTC?iu:Iq).apply(null,n),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[or]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==i&&($e(e).weekdayMismatch=!0)}}function R$(e){var t,s,n,a,i,l,o,c,d;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(i=1,l=4,s=Kl(t.GG,e._a[Er],lu(Ct(),1,4).year),n=Kl(t.W,1),a=Kl(t.E,1),(a<1||a>7)&&(c=!0)):(i=e._locale._week.dow,l=e._locale._week.doy,d=lu(Ct(),i,l),s=Kl(t.gg,e._a[Er],d.year),n=Kl(t.w,d.week),t.d!=null?(a=t.d,(a<0||a>6)&&(c=!0)):t.e!=null?(a=t.e+i,(t.e<0||t.e>6)&&(c=!0)):a=i),n<1||n>da(s,i,l)?$e(e)._overflowWeeks=!0:c!=null?$e(e)._overflowWeekday=!0:(o=SC(s,n,a,i,l),e._a[Er]=o.year,e._dayOfYear=o.dayOfYear)}ke.ISO_8601=function(){};ke.RFC_2822=function(){};function Ev(e){if(e._f===ke.ISO_8601){TC(e);return}if(e._f===ke.RFC_2822){OC(e);return}e._a=[],$e(e).empty=!0;var t=""+e._i,s,n,a,i,l,o=t.length,c=0,d,u;for(a=fC(e._f,e._locale).match(pv)||[],u=a.length,s=0;s<u;s++)i=a[s],n=(t.match(bq(i,e))||[])[0],n&&(l=t.substr(0,t.indexOf(n)),l.length>0&&$e(e).unusedInput.push(l),t=t.slice(t.indexOf(n)+n.length),c+=n.length),Eo[i]?(n?$e(e).empty=!1:$e(e).unusedTokens.push(i),jq(i,n,e)):e._strict&&!n&&$e(e).unusedTokens.push(i);$e(e).charsLeftOver=o-c,t.length>0&&$e(e).unusedInput.push(t),e._a[or]<=12&&$e(e).bigHour===!0&&e._a[or]>0&&($e(e).bigHour=void 0),$e(e).parsedDateParts=e._a.slice(0),$e(e).meridiem=e._meridiem,e._a[or]=P$(e._locale,e._a[or],e._meridiem),d=$e(e).era,d!==null&&(e._a[Er]=e._locale.erasConvertYear(d,e._a[Er])),kv(e),Sv(e)}function P$(e,t,s){var n;return s==null?t:e.meridiemHour!=null?e.meridiemHour(t,s):(e.isPM!=null&&(n=e.isPM(s),n&&t<12&&(t+=12),!n&&t===12&&(t=0)),t)}function M$(e){var t,s,n,a,i,l,o=!1,c=e._f.length;if(c===0){$e(e).invalidFormat=!0,e._d=new Date(NaN);return}for(a=0;a<c;a++)i=0,l=!1,t=fv({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[a],Ev(t),hv(t)&&(l=!0),i+=$e(t).charsLeftOver,i+=$e(t).unusedTokens.length*10,$e(t).score=i,o?i<n&&(n=i,s=t):(n==null||i<n||l)&&(n=i,s=t,l&&(o=!0));ni(e,s||t)}function D$(e){if(!e._d){var t=xv(e._i),s=t.day===void 0?t.date:t.day;e._a=dC([t.year,t.month,s,t.hour,t.minute,t.second,t.millisecond],function(n){return n&&parseInt(n,10)}),kv(e)}}function L$(e){var t=new Mu(Sv(RC(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function RC(e){var t=e._i,s=e._f;return e._locale=e._locale||Ca(e._l),t===null||s===void 0&&t===""?Qm({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),ln(t)?new Mu(Sv(t)):(Pu(t)?e._d=t:an(s)?M$(e):s?Ev(e):F$(e),hv(e)||(e._d=null),e))}function F$(e){var t=e._i;$r(t)?e._d=new Date(ke.now()):Pu(t)?e._d=new Date(t.valueOf()):typeof t=="string"?T$(e):an(t)?(e._a=dC(t.slice(0),function(s){return parseInt(s,10)}),kv(e)):xl(t)?D$(e):wa(t)?e._d=new Date(t):ke.createFromInputFallback(e)}function PC(e,t,s,n,a){var i={};return(t===!0||t===!1)&&(n=t,t=void 0),(s===!0||s===!1)&&(n=s,s=void 0),(xl(e)&&uv(e)||an(e)&&e.length===0)&&(e=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=a,i._l=s,i._i=e,i._f=t,i._strict=n,L$(i)}function Ct(e,t,s,n){return PC(e,t,s,n,!1)}var I$=Us("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Ct.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:Qm()}),B$=Us("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Ct.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:Qm()});function MC(e,t){var s,n;if(t.length===1&&an(t[0])&&(t=t[0]),!t.length)return Ct();for(s=t[0],n=1;n<t.length;++n)(!t[n].isValid()||t[n][e](s))&&(s=t[n]);return s}function q$(){var e=[].slice.call(arguments,0);return MC("isBefore",e)}function $$(){var e=[].slice.call(arguments,0);return MC("isAfter",e)}var U$=function(){return Date.now?Date.now():+new Date},Vc=["year","quarter","month","week","day","hour","minute","second","millisecond"];function z$(e){var t,s=!1,n,a=Vc.length;for(t in e)if(ot(e,t)&&!(Kt.call(Vc,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(n=0;n<a;++n)if(e[Vc[n]]){if(s)return!1;parseFloat(e[Vc[n]])!==Qe(e[Vc[n]])&&(s=!0)}return!0}function V$(){return this._isValid}function H$(){return dn(NaN)}function np(e){var t=xv(e),s=t.year||0,n=t.quarter||0,a=t.month||0,i=t.week||t.isoWeek||0,l=t.day||0,o=t.hour||0,c=t.minute||0,d=t.second||0,u=t.millisecond||0;this._isValid=z$(t),this._milliseconds=+u+d*1e3+c*6e4+o*1e3*60*60,this._days=+l+i*7,this._months=+a+n*3+s*12,this._data={},this._locale=Ca(),this._bubble()}function Jh(e){return e instanceof np}function ly(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function W$(e,t,s){var n=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),i=0,l;for(l=0;l<n;l++)Qe(e[l])!==Qe(t[l])&&i++;return i+a}function DC(e,t){Pe(e,0,0,function(){var s=this.utcOffset(),n="+";return s<0&&(s=-s,n="-"),n+Dn(~~(s/60),2)+t+Dn(~~s%60,2)})}DC("Z",":");DC("ZZ","");Ee("Z",tp);Ee("ZZ",tp);pt(["Z","ZZ"],function(e,t,s){s._useUTC=!0,s._tzm=Cv(tp,e)});var Y$=/([\+\-]|\d\d)/gi;function Cv(e,t){var s=(t||"").match(e),n,a,i;return s===null?null:(n=s[s.length-1]||[],a=(n+"").match(Y$)||["-",0,0],i=+(a[1]*60)+Qe(a[2]),i===0?0:a[0]==="+"?i:-i)}function Av(e,t){var s,n;return t._isUTC?(s=t.clone(),n=(ln(e)||Pu(e)?e.valueOf():Ct(e).valueOf())-s.valueOf(),s._d.setTime(s._d.valueOf()+n),ke.updateOffset(s,!1),s):Ct(e).local()}function oy(e){return-Math.round(e._d.getTimezoneOffset())}ke.updateOffset=function(){};function G$(e,t,s){var n=this._offset||0,a;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=Cv(tp,e),e===null)return this}else Math.abs(e)<16&&!s&&(e=e*60);return!this._isUTC&&t&&(a=oy(this)),this._offset=e,this._isUTC=!0,a!=null&&this.add(a,"m"),n!==e&&(!t||this._changeInProgress?IC(this,dn(e-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,ke.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?n:oy(this)}function K$(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Q$(e){return this.utcOffset(0,e)}function X$(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(oy(this),"m")),this}function Z$(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=Cv(gq,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function J$(e){return this.isValid()?(e=e?Ct(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function eU(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function tU(){if(!$r(this._isDSTShifted))return this._isDSTShifted;var e={},t;return fv(e,this),e=RC(e),e._a?(t=e._isUTC?Fn(e._a):Ct(e._a),this._isDSTShifted=this.isValid()&&W$(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function rU(){return this.isValid()?!this._isUTC:!1}function sU(){return this.isValid()?this._isUTC:!1}function LC(){return this.isValid()?this._isUTC&&this._offset===0:!1}var nU=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,aU=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function dn(e,t){var s=e,n=null,a,i,l;return Jh(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:wa(e)||!isNaN(+e)?(s={},t?s[t]=+e:s.milliseconds=+e):(n=nU.exec(e))?(a=n[1]==="-"?-1:1,s={y:0,d:Qe(n[Sn])*a,h:Qe(n[or])*a,m:Qe(n[Js])*a,s:Qe(n[sa])*a,ms:Qe(ly(n[Zi]*1e3))*a}):(n=aU.exec(e))?(a=n[1]==="-"?-1:1,s={y:Fi(n[2],a),M:Fi(n[3],a),w:Fi(n[4],a),d:Fi(n[5],a),h:Fi(n[6],a),m:Fi(n[7],a),s:Fi(n[8],a)}):s==null?s={}:typeof s=="object"&&("from"in s||"to"in s)&&(l=iU(Ct(s.from),Ct(s.to)),s={},s.ms=l.milliseconds,s.M=l.months),i=new np(s),Jh(e)&&ot(e,"_locale")&&(i._locale=e._locale),Jh(e)&&ot(e,"_isValid")&&(i._isValid=e._isValid),i}dn.fn=np.prototype;dn.invalid=H$;function Fi(e,t){var s=e&&parseFloat(e.replace(",","."));return(isNaN(s)?0:s)*t}function vw(e,t){var s={};return s.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(s.months,"M").isAfter(t)&&--s.months,s.milliseconds=+t-+e.clone().add(s.months,"M"),s}function iU(e,t){var s;return e.isValid()&&t.isValid()?(t=Av(t,e),e.isBefore(t)?s=vw(e,t):(s=vw(t,e),s.milliseconds=-s.milliseconds,s.months=-s.months),s):{milliseconds:0,months:0}}function FC(e,t){return function(s,n){var a,i;return n!==null&&!isNaN(+n)&&(hC(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=s,s=n,n=i),a=dn(s,n),IC(this,a,e),this}}function IC(e,t,s,n){var a=t._milliseconds,i=ly(t._days),l=ly(t._months);e.isValid()&&(n=n??!0,l&&NC(e,au(e,"Month")+l*s),i&&bC(e,"Date",au(e,"Date")+i*s),a&&e._d.setTime(e._d.valueOf()+a*s),n&&ke.updateOffset(e,i||l))}var lU=FC(1,"add"),oU=FC(-1,"subtract");function BC(e){return typeof e=="string"||e instanceof String}function cU(e){return ln(e)||Pu(e)||BC(e)||wa(e)||uU(e)||dU(e)||e===null||e===void 0}function dU(e){var t=xl(e)&&!uv(e),s=!1,n=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],a,i,l=n.length;for(a=0;a<l;a+=1)i=n[a],s=s||ot(e,i);return t&&s}function uU(e){var t=an(e),s=!1;return t&&(s=e.filter(function(n){return!wa(n)&&BC(e)}).length===0),t&&s}function hU(e){var t=xl(e)&&!uv(e),s=!1,n=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],a,i;for(a=0;a<n.length;a+=1)i=n[a],s=s||ot(e,i);return t&&s}function fU(e,t){var s=e.diff(t,"days",!0);return s<-6?"sameElse":s<-1?"lastWeek":s<0?"lastDay":s<1?"sameDay":s<2?"nextDay":s<7?"nextWeek":"sameElse"}function mU(e,t){arguments.length===1&&(arguments[0]?cU(arguments[0])?(e=arguments[0],t=void 0):hU(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var s=e||Ct(),n=Av(s,this).startOf("day"),a=ke.calendarFormat(this,n)||"sameElse",i=t&&(In(t[a])?t[a].call(this,s):t[a]);return this.format(i||this.localeData().calendar(a,this,Ct(s)))}function pU(){return new Mu(this)}function xU(e,t){var s=ln(e)?e:Ct(e);return this.isValid()&&s.isValid()?(t=zs(t)||"millisecond",t==="millisecond"?this.valueOf()>s.valueOf():s.valueOf()<this.clone().startOf(t).valueOf()):!1}function gU(e,t){var s=ln(e)?e:Ct(e);return this.isValid()&&s.isValid()?(t=zs(t)||"millisecond",t==="millisecond"?this.valueOf()<s.valueOf():this.clone().endOf(t).valueOf()<s.valueOf()):!1}function yU(e,t,s,n){var a=ln(e)?e:Ct(e),i=ln(t)?t:Ct(t);return this.isValid()&&a.isValid()&&i.isValid()?(n=n||"()",(n[0]==="("?this.isAfter(a,s):!this.isBefore(a,s))&&(n[1]===")"?this.isBefore(i,s):!this.isAfter(i,s))):!1}function bU(e,t){var s=ln(e)?e:Ct(e),n;return this.isValid()&&s.isValid()?(t=zs(t)||"millisecond",t==="millisecond"?this.valueOf()===s.valueOf():(n=s.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf())):!1}function vU(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function jU(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function NU(e,t,s){var n,a,i;if(!this.isValid())return NaN;if(n=Av(e,this),!n.isValid())return NaN;switch(a=(n.utcOffset()-this.utcOffset())*6e4,t=zs(t),t){case"year":i=ef(this,n)/12;break;case"month":i=ef(this,n);break;case"quarter":i=ef(this,n)/3;break;case"second":i=(this-n)/1e3;break;case"minute":i=(this-n)/6e4;break;case"hour":i=(this-n)/36e5;break;case"day":i=(this-n-a)/864e5;break;case"week":i=(this-n-a)/6048e5;break;default:i=this-n}return s?i:Ts(i)}function ef(e,t){if(e.date()<t.date())return-ef(t,e);var s=(t.year()-e.year())*12+(t.month()-e.month()),n=e.clone().add(s,"months"),a,i;return t-n<0?(a=e.clone().add(s-1,"months"),i=(t-n)/(n-a)):(a=e.clone().add(s+1,"months"),i=(t-n)/(a-n)),-(s+i)||0}ke.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";ke.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function wU(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function _U(e){if(!this.isValid())return null;var t=e!==!0,s=t?this.clone().utc():this;return s.year()<0||s.year()>9999?Zh(s,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):In(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Zh(s,"Z")):Zh(s,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function SU(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",s,n,a,i;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),s="["+e+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",a="-MM-DD[T]HH:mm:ss.SSS",i=t+'[")]',this.format(s+n+a+i)}function kU(e){e||(e=this.isUtc()?ke.defaultFormatUtc:ke.defaultFormat);var t=Zh(this,e);return this.localeData().postformat(t)}function EU(e,t){return this.isValid()&&(ln(e)&&e.isValid()||Ct(e).isValid())?dn({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function CU(e){return this.from(Ct(),e)}function AU(e,t){return this.isValid()&&(ln(e)&&e.isValid()||Ct(e).isValid())?dn({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function TU(e){return this.to(Ct(),e)}function qC(e){var t;return e===void 0?this._locale._abbr:(t=Ca(e),t!=null&&(this._locale=t),this)}var $C=Us("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function UC(){return this._locale}var tm=1e3,Co=60*tm,rm=60*Co,zC=(365*400+97)*24*rm;function Ao(e,t){return(e%t+t)%t}function VC(e,t,s){return e<100&&e>=0?new Date(e+400,t,s)-zC:new Date(e,t,s).valueOf()}function HC(e,t,s){return e<100&&e>=0?Date.UTC(e+400,t,s)-zC:Date.UTC(e,t,s)}function OU(e){var t,s;if(e=zs(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?HC:VC,e){case"year":t=s(this.year(),0,1);break;case"quarter":t=s(this.year(),this.month()-this.month()%3,1);break;case"month":t=s(this.year(),this.month(),1);break;case"week":t=s(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=s(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=Ao(t+(this._isUTC?0:this.utcOffset()*Co),rm);break;case"minute":t=this._d.valueOf(),t-=Ao(t,Co);break;case"second":t=this._d.valueOf(),t-=Ao(t,tm);break}return this._d.setTime(t),ke.updateOffset(this,!0),this}function RU(e){var t,s;if(e=zs(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?HC:VC,e){case"year":t=s(this.year()+1,0,1)-1;break;case"quarter":t=s(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=s(this.year(),this.month()+1,1)-1;break;case"week":t=s(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=s(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=rm-Ao(t+(this._isUTC?0:this.utcOffset()*Co),rm)-1;break;case"minute":t=this._d.valueOf(),t+=Co-Ao(t,Co)-1;break;case"second":t=this._d.valueOf(),t+=tm-Ao(t,tm)-1;break}return this._d.setTime(t),ke.updateOffset(this,!0),this}function PU(){return this._d.valueOf()-(this._offset||0)*6e4}function MU(){return Math.floor(this.valueOf()/1e3)}function DU(){return new Date(this.valueOf())}function LU(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function FU(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function IU(){return this.isValid()?this.toISOString():null}function BU(){return hv(this)}function qU(){return ni({},$e(this))}function $U(){return $e(this).overflow}function UU(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Pe("N",0,0,"eraAbbr");Pe("NN",0,0,"eraAbbr");Pe("NNN",0,0,"eraAbbr");Pe("NNNN",0,0,"eraName");Pe("NNNNN",0,0,"eraNarrow");Pe("y",["y",1],"yo","eraYear");Pe("y",["yy",2],0,"eraYear");Pe("y",["yyy",3],0,"eraYear");Pe("y",["yyyy",4],0,"eraYear");Ee("N",Tv);Ee("NN",Tv);Ee("NNN",Tv);Ee("NNNN",JU);Ee("NNNNN",ez);pt(["N","NN","NNN","NNNN","NNNNN"],function(e,t,s,n){var a=s._locale.erasParse(e,n,s._strict);a?$e(s).era=a:$e(s).invalidEra=e});Ee("y",vc);Ee("yy",vc);Ee("yyy",vc);Ee("yyyy",vc);Ee("yo",tz);pt(["y","yy","yyy","yyyy"],Er);pt(["yo"],function(e,t,s,n){var a;s._locale._eraYearOrdinalRegex&&(a=e.match(s._locale._eraYearOrdinalRegex)),s._locale.eraYearOrdinalParse?t[Er]=s._locale.eraYearOrdinalParse(e,a):t[Er]=parseInt(e,10)});function zU(e,t){var s,n,a,i=this._eras||Ca("en")._eras;for(s=0,n=i.length;s<n;++s){switch(typeof i[s].since){case"string":a=ke(i[s].since).startOf("day"),i[s].since=a.valueOf();break}switch(typeof i[s].until){case"undefined":i[s].until=1/0;break;case"string":a=ke(i[s].until).startOf("day").valueOf(),i[s].until=a.valueOf();break}}return i}function VU(e,t,s){var n,a,i=this.eras(),l,o,c;for(e=e.toUpperCase(),n=0,a=i.length;n<a;++n)if(l=i[n].name.toUpperCase(),o=i[n].abbr.toUpperCase(),c=i[n].narrow.toUpperCase(),s)switch(t){case"N":case"NN":case"NNN":if(o===e)return i[n];break;case"NNNN":if(l===e)return i[n];break;case"NNNNN":if(c===e)return i[n];break}else if([l,o,c].indexOf(e)>=0)return i[n]}function HU(e,t){var s=e.since<=e.until?1:-1;return t===void 0?ke(e.since).year():ke(e.since).year()+(t-e.offset)*s}function WU(){var e,t,s,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(s=this.clone().startOf("day").valueOf(),n[e].since<=s&&s<=n[e].until||n[e].until<=s&&s<=n[e].since)return n[e].name;return""}function YU(){var e,t,s,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(s=this.clone().startOf("day").valueOf(),n[e].since<=s&&s<=n[e].until||n[e].until<=s&&s<=n[e].since)return n[e].narrow;return""}function GU(){var e,t,s,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(s=this.clone().startOf("day").valueOf(),n[e].since<=s&&s<=n[e].until||n[e].until<=s&&s<=n[e].since)return n[e].abbr;return""}function KU(){var e,t,s,n,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(s=a[e].since<=a[e].until?1:-1,n=this.clone().startOf("day").valueOf(),a[e].since<=n&&n<=a[e].until||a[e].until<=n&&n<=a[e].since)return(this.year()-ke(a[e].since).year())*s+a[e].offset;return this.year()}function QU(e){return ot(this,"_erasNameRegex")||Ov.call(this),e?this._erasNameRegex:this._erasRegex}function XU(e){return ot(this,"_erasAbbrRegex")||Ov.call(this),e?this._erasAbbrRegex:this._erasRegex}function ZU(e){return ot(this,"_erasNarrowRegex")||Ov.call(this),e?this._erasNarrowRegex:this._erasRegex}function Tv(e,t){return t.erasAbbrRegex(e)}function JU(e,t){return t.erasNameRegex(e)}function ez(e,t){return t.erasNarrowRegex(e)}function tz(e,t){return t._eraYearOrdinalRegex||vc}function Ov(){var e=[],t=[],s=[],n=[],a,i,l,o,c,d=this.eras();for(a=0,i=d.length;a<i;++a)l=ca(d[a].name),o=ca(d[a].abbr),c=ca(d[a].narrow),t.push(l),e.push(o),s.push(c),n.push(l),n.push(o),n.push(c);this._erasRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+s.join("|")+")","i")}Pe(0,["gg",2],0,function(){return this.weekYear()%100});Pe(0,["GG",2],0,function(){return this.isoWeekYear()%100});function ap(e,t){Pe(0,[e,e.length],0,t)}ap("gggg","weekYear");ap("ggggg","weekYear");ap("GGGG","isoWeekYear");ap("GGGGG","isoWeekYear");Ee("G",ep);Ee("g",ep);Ee("GG",At,Ns);Ee("gg",At,Ns);Ee("GGGG",yv,gv);Ee("gggg",yv,gv);Ee("GGGGG",Jm,Xm);Ee("ggggg",Jm,Xm);Lu(["gggg","ggggg","GGGG","GGGGG"],function(e,t,s,n){t[n.substr(0,2)]=Qe(e)});Lu(["gg","GG"],function(e,t,s,n){t[n]=ke.parseTwoDigitYear(e)});function rz(e){return WC.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function sz(e){return WC.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function nz(){return da(this.year(),1,4)}function az(){return da(this.isoWeekYear(),1,4)}function iz(){var e=this.localeData()._week;return da(this.year(),e.dow,e.doy)}function lz(){var e=this.localeData()._week;return da(this.weekYear(),e.dow,e.doy)}function WC(e,t,s,n,a){var i;return e==null?lu(this,n,a).year:(i=da(e,n,a),t>i&&(t=i),oz.call(this,e,t,s,n,a))}function oz(e,t,s,n,a){var i=SC(e,t,s,n,a),l=iu(i.year,0,i.dayOfYear);return this.year(l.getUTCFullYear()),this.month(l.getUTCMonth()),this.date(l.getUTCDate()),this}Pe("Q",0,"Qo","quarter");Ee("Q",mC);pt("Q",function(e,t){t[ra]=(Qe(e)-1)*3});function cz(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}Pe("D",["DD",2],"Do","date");Ee("D",At,jc);Ee("DD",At,Ns);Ee("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});pt(["D","DD"],Sn);pt("Do",function(e,t){t[Sn]=Qe(e.match(At)[0])});var YC=Nc("Date",!0);Pe("DDD",["DDDD",3],"DDDo","dayOfYear");Ee("DDD",Zm);Ee("DDDD",pC);pt(["DDD","DDDD"],function(e,t,s){s._dayOfYear=Qe(e)});function dz(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}Pe("m",["mm",2],0,"minute");Ee("m",At,bv);Ee("mm",At,Ns);pt(["m","mm"],Js);var uz=Nc("Minutes",!1);Pe("s",["ss",2],0,"second");Ee("s",At,bv);Ee("ss",At,Ns);pt(["s","ss"],sa);var hz=Nc("Seconds",!1);Pe("S",0,0,function(){return~~(this.millisecond()/100)});Pe(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Pe(0,["SSS",3],0,"millisecond");Pe(0,["SSSS",4],0,function(){return this.millisecond()*10});Pe(0,["SSSSS",5],0,function(){return this.millisecond()*100});Pe(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Pe(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Pe(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Pe(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Ee("S",Zm,mC);Ee("SS",Zm,Ns);Ee("SSS",Zm,pC);var ai,GC;for(ai="SSSS";ai.length<=9;ai+="S")Ee(ai,vc);function fz(e,t){t[Zi]=Qe(("0."+e)*1e3)}for(ai="S";ai.length<=9;ai+="S")pt(ai,fz);GC=Nc("Milliseconds",!1);Pe("z",0,0,"zoneAbbr");Pe("zz",0,0,"zoneName");function mz(){return this._isUTC?"UTC":""}function pz(){return this._isUTC?"Coordinated Universal Time":""}var je=Mu.prototype;je.add=lU;je.calendar=mU;je.clone=pU;je.diff=NU;je.endOf=RU;je.format=kU;je.from=EU;je.fromNow=CU;je.to=AU;je.toNow=TU;je.get=Sq;je.invalidAt=$U;je.isAfter=xU;je.isBefore=gU;je.isBetween=yU;je.isSame=bU;je.isSameOrAfter=vU;je.isSameOrBefore=jU;je.isValid=BU;je.lang=$C;je.locale=qC;je.localeData=UC;je.max=B$;je.min=I$;je.parsingFlags=qU;je.set=kq;je.startOf=OU;je.subtract=oU;je.toArray=LU;je.toObject=FU;je.toDate=DU;je.toISOString=_U;je.inspect=SU;typeof Symbol<"u"&&Symbol.for!=null&&(je[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});je.toJSON=IU;je.toString=wU;je.unix=MU;je.valueOf=PU;je.creationData=UU;je.eraName=WU;je.eraNarrow=YU;je.eraAbbr=GU;je.eraYear=KU;je.year=yC;je.isLeapYear=_q;je.weekYear=rz;je.isoWeekYear=sz;je.quarter=je.quarters=cz;je.month=wC;je.daysInMonth=Dq;je.week=je.weeks=zq;je.isoWeek=je.isoWeeks=Vq;je.weeksInYear=iz;je.weeksInWeekYear=lz;je.isoWeeksInYear=nz;je.isoWeeksInISOWeekYear=az;je.date=YC;je.day=je.days=s$;je.weekday=n$;je.isoWeekday=a$;je.dayOfYear=dz;je.hour=je.hours=h$;je.minute=je.minutes=uz;je.second=je.seconds=hz;je.millisecond=je.milliseconds=GC;je.utcOffset=G$;je.utc=Q$;je.local=X$;je.parseZone=Z$;je.hasAlignedHourOffset=J$;je.isDST=eU;je.isLocal=rU;je.isUtcOffset=sU;je.isUtc=LC;je.isUTC=LC;je.zoneAbbr=mz;je.zoneName=pz;je.dates=Us("dates accessor is deprecated. Use date instead.",YC);je.months=Us("months accessor is deprecated. Use month instead",wC);je.years=Us("years accessor is deprecated. Use year instead",yC);je.zone=Us("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",K$);je.isDSTShifted=Us("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",tU);function xz(e){return Ct(e*1e3)}function gz(){return Ct.apply(null,arguments).parseZone()}function KC(e){return e}var dt=mv.prototype;dt.calendar=rq;dt.longDateFormat=iq;dt.invalidDate=oq;dt.ordinal=uq;dt.preparse=KC;dt.postformat=KC;dt.relativeTime=fq;dt.pastFuture=mq;dt.set=eq;dt.eras=zU;dt.erasParse=VU;dt.erasConvertYear=HU;dt.erasAbbrRegex=XU;dt.erasNameRegex=QU;dt.erasNarrowRegex=ZU;dt.months=Oq;dt.monthsShort=Rq;dt.monthsParse=Mq;dt.monthsRegex=Fq;dt.monthsShortRegex=Lq;dt.week=Bq;dt.firstDayOfYear=Uq;dt.firstDayOfWeek=$q;dt.weekdays=Zq;dt.weekdaysMin=e$;dt.weekdaysShort=Jq;dt.weekdaysParse=r$;dt.weekdaysRegex=i$;dt.weekdaysShortRegex=l$;dt.weekdaysMinRegex=o$;dt.isPM=d$;dt.meridiem=f$;function sm(e,t,s,n){var a=Ca(),i=Fn().set(n,t);return a[s](i,e)}function QC(e,t,s){if(wa(e)&&(t=e,e=void 0),e=e||"",t!=null)return sm(e,t,s,"month");var n,a=[];for(n=0;n<12;n++)a[n]=sm(e,n,s,"month");return a}function Rv(e,t,s,n){typeof e=="boolean"?(wa(t)&&(s=t,t=void 0),t=t||""):(t=e,s=t,e=!1,wa(t)&&(s=t,t=void 0),t=t||"");var a=Ca(),i=e?a._week.dow:0,l,o=[];if(s!=null)return sm(t,(s+i)%7,n,"day");for(l=0;l<7;l++)o[l]=sm(t,(l+i)%7,n,"day");return o}function yz(e,t){return QC(e,t,"months")}function bz(e,t){return QC(e,t,"monthsShort")}function vz(e,t,s){return Rv(e,t,s,"weekdays")}function jz(e,t,s){return Rv(e,t,s,"weekdaysShort")}function Nz(e,t,s){return Rv(e,t,s,"weekdaysMin")}ji("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,s=Qe(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+s}});ke.lang=Us("moment.lang is deprecated. Use moment.locale instead.",ji);ke.langData=Us("moment.langData is deprecated. Use moment.localeData instead.",Ca);var $n=Math.abs;function wz(){var e=this._data;return this._milliseconds=$n(this._milliseconds),this._days=$n(this._days),this._months=$n(this._months),e.milliseconds=$n(e.milliseconds),e.seconds=$n(e.seconds),e.minutes=$n(e.minutes),e.hours=$n(e.hours),e.months=$n(e.months),e.years=$n(e.years),this}function XC(e,t,s,n){var a=dn(t,s);return e._milliseconds+=n*a._milliseconds,e._days+=n*a._days,e._months+=n*a._months,e._bubble()}function _z(e,t){return XC(this,e,t,1)}function Sz(e,t){return XC(this,e,t,-1)}function jw(e){return e<0?Math.floor(e):Math.ceil(e)}function kz(){var e=this._milliseconds,t=this._days,s=this._months,n=this._data,a,i,l,o,c;return e>=0&&t>=0&&s>=0||e<=0&&t<=0&&s<=0||(e+=jw(cy(s)+t)*864e5,t=0,s=0),n.milliseconds=e%1e3,a=Ts(e/1e3),n.seconds=a%60,i=Ts(a/60),n.minutes=i%60,l=Ts(i/60),n.hours=l%24,t+=Ts(l/24),c=Ts(ZC(t)),s+=c,t-=jw(cy(c)),o=Ts(s/12),s%=12,n.days=t,n.months=s,n.years=o,this}function ZC(e){return e*4800/146097}function cy(e){return e*146097/4800}function Ez(e){if(!this.isValid())return NaN;var t,s,n=this._milliseconds;if(e=zs(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+n/864e5,s=this._months+ZC(t),e){case"month":return s;case"quarter":return s/3;case"year":return s/12}else switch(t=this._days+Math.round(cy(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return t*24+n/36e5;case"minute":return t*1440+n/6e4;case"second":return t*86400+n/1e3;case"millisecond":return Math.floor(t*864e5)+n;default:throw new Error("Unknown unit "+e)}}function Aa(e){return function(){return this.as(e)}}var JC=Aa("ms"),Cz=Aa("s"),Az=Aa("m"),Tz=Aa("h"),Oz=Aa("d"),Rz=Aa("w"),Pz=Aa("M"),Mz=Aa("Q"),Dz=Aa("y"),Lz=JC;function Fz(){return dn(this)}function Iz(e){return e=zs(e),this.isValid()?this[e+"s"]():NaN}function Il(e){return function(){return this.isValid()?this._data[e]:NaN}}var Bz=Il("milliseconds"),qz=Il("seconds"),$z=Il("minutes"),Uz=Il("hours"),zz=Il("days"),Vz=Il("months"),Hz=Il("years");function Wz(){return Ts(this.days()/7)}var Hn=Math.round,fo={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Yz(e,t,s,n,a){return a.relativeTime(t||1,!!s,e,n)}function Gz(e,t,s,n){var a=dn(e).abs(),i=Hn(a.as("s")),l=Hn(a.as("m")),o=Hn(a.as("h")),c=Hn(a.as("d")),d=Hn(a.as("M")),u=Hn(a.as("w")),h=Hn(a.as("y")),f=i<=s.ss&&["s",i]||i<s.s&&["ss",i]||l<=1&&["m"]||l<s.m&&["mm",l]||o<=1&&["h"]||o<s.h&&["hh",o]||c<=1&&["d"]||c<s.d&&["dd",c];return s.w!=null&&(f=f||u<=1&&["w"]||u<s.w&&["ww",u]),f=f||d<=1&&["M"]||d<s.M&&["MM",d]||h<=1&&["y"]||["yy",h],f[2]=t,f[3]=+e>0,f[4]=n,Yz.apply(null,f)}function Kz(e){return e===void 0?Hn:typeof e=="function"?(Hn=e,!0):!1}function Qz(e,t){return fo[e]===void 0?!1:t===void 0?fo[e]:(fo[e]=t,e==="s"&&(fo.ss=t-1),!0)}function Xz(e,t){if(!this.isValid())return this.localeData().invalidDate();var s=!1,n=fo,a,i;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(s=e),typeof t=="object"&&(n=Object.assign({},fo,t),t.s!=null&&t.ss==null&&(n.ss=t.s-1)),a=this.localeData(),i=Gz(this,!s,n,a),s&&(i=a.pastFuture(+this,i)),a.postformat(i)}var qx=Math.abs;function Hl(e){return(e>0)-(e<0)||+e}function ip(){if(!this.isValid())return this.localeData().invalidDate();var e=qx(this._milliseconds)/1e3,t=qx(this._days),s=qx(this._months),n,a,i,l,o=this.asSeconds(),c,d,u,h;return o?(n=Ts(e/60),a=Ts(n/60),e%=60,n%=60,i=Ts(s/12),s%=12,l=e?e.toFixed(3).replace(/\.?0+$/,""):"",c=o<0?"-":"",d=Hl(this._months)!==Hl(o)?"-":"",u=Hl(this._days)!==Hl(o)?"-":"",h=Hl(this._milliseconds)!==Hl(o)?"-":"",c+"P"+(i?d+i+"Y":"")+(s?d+s+"M":"")+(t?u+t+"D":"")+(a||n||e?"T":"")+(a?h+a+"H":"")+(n?h+n+"M":"")+(e?h+l+"S":"")):"P0D"}var at=np.prototype;at.isValid=V$;at.abs=wz;at.add=_z;at.subtract=Sz;at.as=Ez;at.asMilliseconds=JC;at.asSeconds=Cz;at.asMinutes=Az;at.asHours=Tz;at.asDays=Oz;at.asWeeks=Rz;at.asMonths=Pz;at.asQuarters=Mz;at.asYears=Dz;at.valueOf=Lz;at._bubble=kz;at.clone=Fz;at.get=Iz;at.milliseconds=Bz;at.seconds=qz;at.minutes=$z;at.hours=Uz;at.days=zz;at.weeks=Wz;at.months=Vz;at.years=Hz;at.humanize=Xz;at.toISOString=ip;at.toString=ip;at.toJSON=ip;at.locale=qC;at.localeData=UC;at.toIsoString=Us("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ip);at.lang=$C;Pe("X",0,0,"unix");Pe("x",0,0,"valueOf");Ee("x",ep);Ee("X",yq);pt("X",function(e,t,s){s._d=new Date(parseFloat(e)*1e3)});pt("x",function(e,t,s){s._d=new Date(Qe(e))});//! moment.js
ke.version="2.30.1";ZB(Ct);ke.fn=je;ke.min=q$;ke.max=$$;ke.now=U$;ke.utc=Fn;ke.unix=xz;ke.months=yz;ke.isDate=Pu;ke.locale=ji;ke.invalid=Qm;ke.duration=dn;ke.isMoment=ln;ke.weekdays=vz;ke.parseZone=gz;ke.localeData=Ca;ke.isDuration=Jh;ke.monthsShort=bz;ke.weekdaysMin=Nz;ke.defineLocale=_v;ke.updateLocale=g$;ke.locales=y$;ke.weekdaysShort=jz;ke.normalizeUnits=zs;ke.relativeTimeRounding=Kz;ke.relativeTimeThreshold=Qz;ke.calendarFormat=fU;ke.prototype=je;ke.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const e6=e=>e?ke(e).format("MMMM D, YYYY"):"",Zz=({blog:e,onSubmit:t,onCancel:s,loading:n})=>{const[a,i]=O.useState({title:"",content:"",status:"published"});O.useEffect(()=>{e&&i({title:e.title||"",content:e.content||"",status:e.status||"published"})},[e]);const l=c=>{const{name:d,value:u}=c.target;i(h=>({...h,[d]:u}))},o=c=>{c.preventDefault(),t(a)};return r.jsxs("form",{onSubmit:o,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"title",className:"block text-sm font-semibold text-gray-700 mb-1",children:"Title"}),r.jsx("input",{type:"text",id:"title",name:"title",value:a.title,onChange:l,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-600 focus:border-transparent text-gray-900 placeholder-gray-400 transition-all font-medium",placeholder:"Enter blog title"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"status",className:"block text-sm font-semibold text-gray-700 mb-1",children:"Status"}),r.jsxs("select",{id:"status",name:"status",value:a.status,onChange:l,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-600 focus:border-transparent text-gray-900 font-medium bg-white",children:[r.jsx("option",{value:"published",children:"Published"}),r.jsx("option",{value:"draft",children:"Draft"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"content",className:"block text-sm font-semibold text-gray-700 mb-1",children:"Content"}),r.jsx("textarea",{id:"content",name:"content",value:a.content,onChange:l,required:!0,rows:12,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-600 focus:border-transparent font-mono text-sm text-gray-800 leading-relaxed",placeholder:"Write your blog content here..."}),r.jsx("p",{className:"text-xs text-gray-500 mt-2 font-medium",children:"Supports basic text. (Rich text editor can be added later)"})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-100 mt-2",children:[r.jsx("button",{type:"button",onClick:s,className:"px-5 py-2.5 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition-colors font-medium",children:"Cancel"}),r.jsxs("button",{type:"submit",disabled:n,className:"flex items-center px-6 py-2.5 bg-blue-700 text-white rounded-xl hover:bg-blue-800 transition-all font-medium shadow-sm hover:shadow active:transform active:scale-95 disabled:opacity-70 disabled:cursor-not-allowed",children:[r.jsx(Im,{className:"w-5 h-5 mr-2"}),n?"Saving...":e?"Update Article":"Publish Article"]})]})]})},Jz=()=>{const[e,t]=O.useState([]),[s,n]=O.useState(!0),[a,i]=O.useState(""),[l,o]=O.useState(!1),[c,d]=O.useState(null),[u,h]=O.useState(!1),f=Ie(mr),m=gc(f,ie.MANAGE_BLOGS);O.useEffect(()=>{x()},[]);const x=async()=>{try{const b=await ed.getAllBlogs();b.success&&t(b.data)}catch(b){console.error("Error fetching blogs:",b),vt.error("Failed to fetch blogs")}finally{n(!1)}},p=async b=>{if(window.confirm("Are you sure you want to delete this blog?"))try{await ed.deleteBlog(b),vt.success("Blog deleted successfully"),x()}catch(N){console.error("Error deleting blog:",N),vt.error("Failed to delete blog")}},j=()=>{d(null),o(!0)},v=b=>{d(b),o(!0)},g=async b=>{var N,k;h(!0);try{c?(await ed.updateBlog(c.id,b),vt.success("Blog updated successfully")):(await ed.createBlog(b),vt.success("Blog created successfully")),o(!1),x()}catch(w){console.error("Error saving blog:",w),vt.error(((k=(N=w.response)==null?void 0:N.data)==null?void 0:k.message)||"Failed to save blog")}finally{h(!1)}},y=e.filter(b=>b.title.toLowerCase().includes(a.toLowerCase()));return s?r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):r.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-10 gap-6",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-4xl font-extrabold text-gray-900 flex items-center gap-3 tracking-tight",children:[r.jsx(De,{className:"w-10 h-10 text-blue-700"}),"School Blog"]}),r.jsx("p",{className:"text-gray-500 mt-2 text-lg font-light",children:"Insights, news, and updates from our community"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 w-full md:w-auto",children:[r.jsxs("div",{className:"relative w-full sm:w-72",children:[r.jsx(Tr,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Search articles...",className:"w-full pl-11 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-600 focus:border-transparent shadow-sm text-gray-900 placeholder-gray-400 transition-all",value:a,onChange:b=>i(b.target.value)})]}),m&&r.jsxs("button",{onClick:j,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-6 py-3 bg-blue-700 text-white rounded-xl hover:bg-blue-800 transition-all font-medium shadow-sm hover:shadow-md active:transform active:scale-95",children:[r.jsx(Be,{className:"w-5 h-5"}),"New Post"]})]})]}),y.length===0?r.jsxs("div",{className:"text-center py-20 bg-white rounded-2xl shadow-sm border border-gray-100",children:[r.jsx("div",{className:"bg-gray-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(De,{className:"w-10 h-10 text-gray-400"})}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No blogs found"}),r.jsx("p",{className:"text-gray-500 max-w-sm mx-auto",children:a?`We couldn't find any articles matching "${a}"`:"There are no blog posts available at the moment."})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:y.map(b=>r.jsx("article",{className:"group bg-white rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden flex flex-col h-full border border-gray-100 hover:border-blue-100",children:r.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between gap-2 mb-4",children:[r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold uppercase tracking-wider ${b.status==="published"?"bg-blue-50 text-blue-700":"bg-gray-100 text-gray-600"}`,children:b.status}),r.jsxs("div",{className:"flex items-center gap-1 text-xs font-medium text-gray-400",children:[r.jsx(Te,{className:"w-3.5 h-3.5"}),e6(b.created_at)]})]}),r.jsx(hb,{to:`/blogs/${b.id}`,className:"block group-hover:text-blue-700 transition-colors",children:r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-3 line-clamp-2 leading-snug",children:b.title})}),r.jsxs("p",{className:"text-gray-600 mb-6 line-clamp-3 text-sm leading-relaxed flex-grow",children:[b.content.replace(/<[^>]*>/g,"").substring(0,150),"..."]}),r.jsxs("div",{className:"flex items-center justify-between pt-5 border-t border-gray-100 mt-auto",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-9 h-9 rounded-full bg-gray-100 flex items-center justify-center border border-gray-200",children:r.jsx(tt,{className:"w-4 h-4 text-gray-600"})}),r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("span",{className:"text-xs font-bold text-gray-900",children:[b.first_name," ",b.last_name]}),r.jsx("span",{className:"text-[10px] text-gray-500 font-medium uppercase tracking-wide",children:"Author"})]})]}),m&&r.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx("button",{onClick:()=>v(b),className:"p-2 text-gray-500 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit",children:r.jsx(ct,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>p(b.id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:r.jsx(ut,{className:"w-4 h-4"})})]})]})]})},b.id))}),r.jsx(Ae,{isOpen:l,onClose:()=>o(!1),title:c?"Edit Article":"Create New Article",size:"lg",children:r.jsx(Zz,{blog:c,onSubmit:g,onCancel:()=>o(!1),loading:u})})]})})},eV=()=>{const{id:e}=bs(),t=We(),[s,n]=O.useState(null),[a,i]=O.useState(!0),l=Ie(mr),o=gc(l,ie.MANAGE_BLOGS);O.useEffect(()=>{c()},[e]);const c=async()=>{try{const d=await ed.getBlogById(e);d.success&&n(d.data)}catch(d){console.error("Error fetching blog:",d),vt.error("Failed to fetch blog"),t("/blogs")}finally{i(!1)}};return a?r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?r.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("button",{onClick:()=>t("/blogs"),className:"group flex items-center text-gray-500 hover:text-gray-900 mb-8 transition-colors font-medium",children:[r.jsx("div",{className:"p-2 rounded-full bg-white border border-gray-200 group-hover:border-gray-300 mr-3 shadow-sm transition-all",children:r.jsx(js,{className:"w-4 h-4"})}),"Back to Articles"]}),r.jsx("article",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:r.jsxs("div",{className:"p-8 md:p-12",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm mb-8",children:[r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold uppercase tracking-wider ${s.status==="published"?"bg-blue-50 text-blue-700":"bg-gray-100 text-gray-600"}`,children:s.status}),r.jsx("div",{className:"h-1 w-1 rounded-full bg-gray-300"}),r.jsxs("span",{className:"flex items-center gap-2 text-gray-500 font-medium",children:[r.jsx(Te,{className:"w-4 h-4"}),e6(s.created_at)]})]}),r.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-gray-900 mb-8 leading-tight tracking-tight",children:s.title}),r.jsxs("div",{className:"flex items-center justify-between py-8 border-y border-gray-100 mb-10",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center border border-gray-200",children:r.jsx(tt,{className:"w-6 h-6 text-gray-600"})}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-bold text-gray-900 text-lg",children:[s.first_name," ",s.last_name]}),r.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Author"})]})]}),o&&r.jsxs(hb,{to:`/blogs/edit/${s.id}`,className:"flex items-center gap-2 px-5 py-2.5 bg-gray-50 text-gray-700 hover:bg-blue-50 hover:text-blue-700 rounded-xl transition-all font-medium border border-gray-200 hover:border-blue-200",children:[r.jsx(ct,{className:"w-4 h-4"}),"Edit Article"]})]}),r.jsx("div",{className:"prose prose-lg prose-blue max-w-none",children:r.jsx("div",{className:"whitespace-pre-wrap text-gray-700 leading-relaxed font-light",children:s.content})})]})})]})}):null},tV=()=>{var y,b,N,k,w,_;const{id:e}=bs(),t=We(),[s,n]=O.useState("overview"),{data:a,isLoading:i}=me({queryKey:["student-comprehensive-report",e],queryFn:()=>Ma.getComprehensiveReport(e)}),{data:l}=me({queryKey:["student-attendance-report",e],queryFn:()=>Ma.getAttendanceReport(e,{limit:30}),enabled:s==="attendance"}),{data:o}=me({queryKey:["student-exam-report",e],queryFn:()=>Ma.getExamReport(e),enabled:s==="exams"}),{data:c}=me({queryKey:["student-assignment-report",e],queryFn:()=>Ma.getAssignmentReport(e),enabled:s==="assignments"}),{data:d}=me({queryKey:["student-fee-report",e],queryFn:()=>Ma.getFeeReport(e),enabled:s==="fees"}),{data:u}=me({queryKey:["student-transport-report",e],queryFn:()=>Ma.getTransportReport(e),enabled:s==="transport"}),{data:h}=me({queryKey:["student-hostel-report",e],queryFn:()=>Ma.getHostelReport(e),enabled:s==="hostel"}),{data:f}=me({queryKey:["student-library-report",e],queryFn:()=>Ma.getLibraryReport(e),enabled:s==="library"}),m=a==null?void 0:a.data,x=m==null?void 0:m.student;if(i)return r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"loading"})});if(!m)return r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-gray-500",children:"Student report not found"})});const p=[{id:"overview",name:"Overview",icon:Sr},{id:"attendance",name:"Attendance",icon:la},{id:"exams",name:"Exams",icon:Ue},{id:"assignments",name:"Assignments",icon:De},{id:"fees",name:"Fees",icon:Si},{id:"transport",name:"Transport",icon:Xr},{id:"hostel",name:"Hostel",icon:jo},{id:"library",name:"Library",icon:zN}],j=()=>{const{total_days:S,present_days:E}=m.attendance;return S===0?0:(E/S*100).toFixed(1)},v=()=>{const{total_marks_obtained:S,total_max_marks:E}=m.exams;return E===0?0:(S/E*100).toFixed(1)},g=()=>{const{total_assignments:S,submitted_assignments:E}=m.assignments;return S===0?0:(E/S*100).toFixed(1)};return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("button",{onClick:()=>t("/students"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[r.jsx(js,{className:"w-5 h-5"}),r.jsx("span",{children:"Back to Students"})]})}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-24"}),r.jsx("div",{className:"px-6 pb-6",children:r.jsxs("div",{className:"flex items-center -mt-12 mb-4",children:[r.jsx("div",{className:"w-24 h-24 rounded-full border-4 border-white bg-white flex items-center justify-center",children:x.profile_photo?r.jsx("img",{src:`http://localhost:5000/${x.profile_photo}`,alt:x.first_name,className:"w-full h-full rounded-full object-cover"}):r.jsx("span",{className:"text-3xl font-bold text-blue-600",children:x.first_name.charAt(0)})}),r.jsxs("div",{className:"ml-6 flex-1",children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[x.first_name," ",x.middle_name," ",x.last_name]}),r.jsxs("p",{className:"text-gray-600",children:[x.class_name," ",x.section_name&&`- ${x.section_name}`,"  Roll No: ",x.roll_number]}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Admission No: ",x.admission_number]})]})]})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[r.jsx("div",{className:"border-b border-gray-200 overflow-x-auto",children:r.jsx("nav",{className:"flex space-x-1 px-4","aria-label":"Tabs",children:p.map(S=>{const E=S.icon;return r.jsxs("button",{onClick:()=>n(S.id),className:`
                    flex items-center space-x-2 px-4 py-3 text-sm font-medium border-b-2 whitespace-nowrap
                    ${s===S.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                  `,children:[r.jsx(E,{className:"w-4 h-4"}),r.jsx("span",{children:S.name})]},S.id)})})}),r.jsxs("div",{className:"p-6",children:[s==="overview"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Student Overview"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-6 border border-blue-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(la,{className:"w-8 h-8 text-blue-700"}),r.jsxs("span",{className:"text-2xl font-bold text-blue-700",children:[j(),"%"]})]}),r.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Attendance Rate"}),r.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[m.attendance.present_days," / ",m.attendance.total_days," days"]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg p-6 border border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(Ue,{className:"w-8 h-8 text-gray-700"}),r.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:[v(),"%"]})]}),r.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Exam Average"}),r.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[m.exams.total_exams," exams taken"]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-6 border border-blue-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(De,{className:"w-8 h-8 text-blue-700"}),r.jsxs("span",{className:"text-2xl font-bold text-blue-700",children:[g(),"%"]})]}),r.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Assignments"}),r.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[m.assignments.submitted_assignments," / ",m.assignments.total_assignments," submitted"]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg p-6 border border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(Si,{className:"w-8 h-8 text-gray-700"}),r.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:["",m.fees.balance||0]})]}),r.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Fee Balance"}),r.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Paid: ",m.fees.total_paid||0]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.transport&&r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[r.jsx(Xr,{className:"w-6 h-6 text-blue-600"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transport"})]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Route:"})," ",m.transport.route_name]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Vehicle:"})," ",m.transport.bus_number]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Driver:"})," ",m.transport.driver_name]})]})]}),m.hostel&&r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[r.jsx(jo,{className:"w-6 h-6 text-gray-700"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Hostel"})]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Building:"})," ",m.hostel.building_name]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Room:"})," ",m.hostel.room_number]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Type:"})," ",m.hostel.room_type]})]})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[r.jsx(zN,{className:"w-6 h-6 text-blue-700"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Library"})]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Total Transactions:"})," ",m.library.total_transactions]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Current Books:"})," ",m.library.current_books]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Total Fines:"})," ",m.library.total_fines||0]})]})]})]})]}),s==="attendance"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Attendance Records"}),r.jsxs("div",{className:"text-sm text-gray-600",children:["Total: ",m.attendance.total_days," days | Present: ",m.attendance.present_days," | Absent: ",m.attendance.absent_days]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Remarks"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(y=l==null?void 0:l.data)==null?void 0:y.map(S=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(S.date).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${S.status==="present"?"bg-green-100 text-green-800":S.status==="absent"?"bg-red-100 text-red-800":S.status==="late"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:S.status})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:S.remarks||"-"})]},S.id))})]})})]}),s==="exams"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Exam Results"}),o!=null&&o.data&&o.data.length>0?r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Exam"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Subject"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Marks"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Grade"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Percentage"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.data.map(S=>r.jsxs("tr",{children:[r.jsxs("td",{className:"px-6 py-4 text-sm text-gray-900",children:[S.exam_name,r.jsx("div",{className:"text-xs text-gray-500",children:S.exam_type})]}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:S.subject_name}),r.jsxs("td",{className:"px-6 py-4 text-sm text-gray-900",children:[S.marks_obtained," / ",S.max_marks]}),r.jsx("td",{className:"px-6 py-4 text-sm",children:r.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-semibold",children:S.grade||"-"})}),r.jsxs("td",{className:"px-6 py-4 text-sm text-gray-900",children:[(S.marks_obtained/S.max_marks*100).toFixed(1),"%"]})]},S.id))})]})}):r.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:[r.jsx(Ue,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No Exam Results Yet"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Exam results will appear here once published."})]})]}),s==="assignments"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Assignments"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Title"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Subject"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Due Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Marks"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(b=c==null?void 0:c.data)==null?void 0:b.map(S=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:S.title}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:S.subject_name}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(S.due_date).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${S.submission_status==="graded"?"bg-green-100 text-green-800":S.submission_status==="submitted"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:S.submission_status||"Not Submitted"})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:S.marks_obtained?`${S.marks_obtained} / ${S.total_marks}`:"-"})]},S.id))})]})})]}),s==="fees"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Total Fee"}),r.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["",m.fees.total_fee||0]})]}),r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Total Paid"}),r.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",m.fees.total_paid||0]})]}),r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Balance"}),r.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["",m.fees.balance||0]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment History"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fee Type"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Method"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Receipt"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(k=(N=d==null?void 0:d.data)==null?void 0:N.payments)==null?void 0:k.map(S=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:new Date(S.payment_date).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:S.fee_head_name}),r.jsxs("td",{className:"px-6 py-4 text-sm font-semibold text-green-600",children:["",S.amount_paid]}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 capitalize",children:S.payment_method}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:S.receipt_number||"-"})]},S.id))})]})})]})]}),s==="transport"&&r.jsx("div",{className:"space-y-6",children:(w=u==null?void 0:u.data)!=null&&w.transport_info?r.jsx(r.Fragment,{children:r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Transport Details"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Route"}),r.jsx("p",{className:"font-medium text-gray-900",children:u.data.transport_info.route_name})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Bus Number"}),r.jsx("p",{className:"font-medium text-gray-900",children:u.data.transport_info.bus_number})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Pickup Point"}),r.jsx("p",{className:"font-medium text-gray-900",children:u.data.transport_info.pickup_point})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Drop Point"}),r.jsx("p",{className:"font-medium text-gray-900",children:u.data.transport_info.drop_point})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Driver"}),r.jsx("p",{className:"font-medium text-gray-900",children:u.data.transport_info.driver_name})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Driver Contact"}),r.jsx("p",{className:"font-medium text-gray-900",children:u.data.transport_info.driver_phone})]})]})]})}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Xr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"No transport allocation found"})]})}),s==="hostel"&&r.jsx("div",{className:"space-y-4",children:h!=null&&h.data&&h.data.length>0?r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Building"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Room"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Allocation Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.data.map(S=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:S.building_name}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:S.room_number}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 capitalize",children:S.room_type}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(S.allocation_date).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${S.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:S.status})})]},S.id))})]})}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx(jo,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"No hostel allocation found"})]})}),s==="library"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Library Transactions"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Book"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Author"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Issue Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Due Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Return Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fine"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(_=f==null?void 0:f.data)==null?void 0:_.map(S=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:S.book_title}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:S.author}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(S.issue_date).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(S.due_date).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:S.return_date?new Date(S.return_date).toLocaleDateString():"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${S.status==="returned"?"bg-green-100 text-green-800":S.status==="issued"?"bg-blue-100 text-blue-800":S.status==="overdue"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:S.status})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:S.fine_amount>0?`${S.fine_amount}`:"-"})]},S.id))})]})})]})]})]})]})},rV=()=>{const e=We(),t=Ie(vs);return O.useEffect(()=>{var s;(s=t==null?void 0:t.details)!=null&&s.id?e(`/student-reports/${t.details.id}`,{replace:!0}):e("/dashboard",{replace:!0})},[t,e]),r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"loading"})})},sV="http://localhost:5001",nV=()=>{Ie(vs);const e=Ie(mr),[t,s]=O.useState([]),[n,a]=O.useState(!0),[i,l]=O.useState(""),[o,c]=O.useState(!1),[d,u]=O.useState(null),[h,f]=O.useState(!1),m=["super_admin","principal","vice_principal","admin"].includes(e);O.useEffect(()=>{x()},[i]);const x=async()=>{a(!0);try{const N=((await Cs.getAll({designation:"Frontdesk",search:i,status:"active"})).data||[]).filter(k=>k.designation==="Frontdesk");s(N),N.length===0&&!i&&console.log("No Frontdesk staff found")}catch(b){console.error("Failed to fetch frontdesk staff:",b),K.error("Failed to load frontdesk staff"),s([])}finally{a(!1)}},p=()=>{u(null),c(!0)},j=b=>{if(b.designation!=="Frontdesk"){K.error("Can only edit Frontdesk staff members");return}u(b),c(!0)},v=()=>{c(!1),u(null)},g=async b=>{f(!0);try{const N={...b,designation:"Frontdesk",department:b.department||"Front Desk"};d?(await Cs.update(d.id,N),K.success("Front desk staff updated successfully")):(await Cs.create(N),K.success("Front desk staff added successfully")),x(),v()}catch(N){console.error("Failed to save frontdesk staff:",N),K.error(N.message||"Failed to save frontdesk staff")}finally{f(!1)}},y=async b=>{if(window.confirm("Are you sure you want to delete this front desk staff member?"))try{await Cs.delete(b),K.success("Front desk staff deleted successfully"),x()}catch(N){console.error("Failed to delete frontdesk staff:",N),K.error(N.message||"Failed to delete frontdesk staff")}};return n?r.jsx("div",{className:"flex h-64 items-center justify-center",children:r.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[r.jsx("div",{className:"h-12 w-12 bg-gray-200 rounded-full mb-4"}),r.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded"})]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Search by name or employee ID...",value:i,onChange:b=>l(b.target.value),className:"input pl-10 w-full"})]}),m&&r.jsxs("button",{onClick:p,className:"btn btn-primary flex items-center space-x-2",children:[r.jsx(Be,{className:"w-5 h-5"}),r.jsx("span",{children:"Add Front Desk Staff"})]})]}),t.length===0?r.jsx("div",{className:"flex h-64 items-center justify-center bg-gray-50 rounded-xl",children:r.jsxs("div",{className:"text-center",children:[r.jsx(tt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500 text-lg",children:"No front desk staff found"}),m&&r.jsx("button",{onClick:p,className:"mt-4 btn btn-primary",children:"Add First Staff Member"})]})}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(b=>{var N;return r.jsxs("div",{className:"card hover:shadow-lg transition-shadow duration-200",children:[r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center overflow-hidden flex-shrink-0",children:b.profile_photo?r.jsx("img",{src:`${sV}/${b.profile_photo}`,alt:b.first_name,className:"w-full h-full object-cover"}):r.jsx("span",{className:"text-2xl font-bold text-gray-500",children:(N=b.first_name)==null?void 0:N.charAt(0)})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:[b.first_name," ",b.last_name]}),r.jsxs("p",{className:"text-sm text-gray-600",children:["ID: ",b.employee_id]}),r.jsx("p",{className:"text-sm text-gray-600",children:b.phone}),r.jsx("p",{className:"text-sm text-gray-600",children:b.email}),r.jsx("div",{className:"mt-2",children:r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${b.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:b.status})})]})]}),r.jsxs("div",{className:"mt-4 flex space-x-2",children:[r.jsxs("button",{onClick:()=>j(b),className:"flex-1 btn btn-secondary flex items-center justify-center space-x-2",children:[r.jsx(ct,{className:"w-4 h-4"}),r.jsx("span",{children:"Edit"})]}),m&&r.jsxs("button",{onClick:()=>y(b.id),className:"flex-1 btn bg-red-50 text-red-600 hover:bg-red-100 flex items-center justify-center space-x-2",children:[r.jsx(ut,{className:"w-4 h-4"}),r.jsx("span",{children:"Delete"})]})]})]},b.id)})}),r.jsx(Ae,{isOpen:o,onClose:v,title:d?"Edit Front Desk Staff":"Add Front Desk Staff",size:"lg",children:r.jsx(tv,{staff:d,onSubmit:g,onCancel:v,isSubmitting:h})})]})},aV=()=>{const[e,t]=O.useState([]),[s,n]=O.useState(!0),[a,i]=O.useState(!1),[l,o]=O.useState({staff_id:1,visitor_name:"",visitor_phone:"",visitor_email:"",purpose:"admission_inquiry",person_to_meet:"",remarks:""});O.useEffect(()=>{c()},[]);const c=async()=>{n(!0);try{const h=await rn.getVisitors({});t(h.data||[])}catch(h){console.error("Failed to fetch visitors:",h),K.error("Failed to load visitor logs")}finally{n(!1)}},d=async h=>{h.preventDefault();try{await rn.logVisitor(l),K.success("Visitor checked in successfully"),i(!1),o({staff_id:1,visitor_name:"",visitor_phone:"",visitor_email:"",purpose:"admission_inquiry",person_to_meet:"",remarks:""}),c()}catch(f){console.error("Failed to log visitor:",f),K.error("Failed to check in visitor")}},u=async h=>{try{await rn.checkoutVisitor(h),K.success("Visitor checked out successfully"),c()}catch(f){console.error("Failed to checkout visitor:",f),K.error("Failed to checkout visitor")}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Visitor Logs"}),r.jsxs("button",{onClick:()=>i(!a),className:"btn btn-primary flex items-center space-x-2",children:[r.jsx(Be,{className:"w-5 h-5"}),r.jsx("span",{children:"Check-in Visitor"})]})]}),a&&r.jsxs("div",{className:"card",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Check-in New Visitor"}),r.jsxs("form",{onSubmit:d,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Visitor Name *"}),r.jsx("input",{type:"text",value:l.visitor_name,onChange:h=>o({...l,visitor_name:h.target.value}),required:!0,className:"input w-full"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),r.jsx("input",{type:"tel",value:l.visitor_phone,onChange:h=>o({...l,visitor_phone:h.target.value}),className:"input w-full"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purpose *"}),r.jsxs("select",{value:l.purpose,onChange:h=>o({...l,purpose:h.target.value}),required:!0,className:"input w-full",children:[r.jsx("option",{value:"admission_inquiry",children:"Admission Inquiry"}),r.jsx("option",{value:"meeting",children:"Meeting"}),r.jsx("option",{value:"complaint",children:"Complaint"}),r.jsx("option",{value:"document_submission",children:"Document Submission"}),r.jsx("option",{value:"other",children:"Other"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Person to Meet"}),r.jsx("input",{type:"text",value:l.person_to_meet,onChange:h=>o({...l,person_to_meet:h.target.value}),className:"input w-full"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Remarks"}),r.jsx("textarea",{value:l.remarks,onChange:h=>o({...l,remarks:h.target.value}),rows:"2",className:"input w-full"})]}),r.jsxs("div",{className:"md:col-span-2 flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>i(!1),className:"btn btn-secondary",children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",children:"Check-in"})]})]})]}),r.jsx("div",{className:"card",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Visitor Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Phone"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Purpose"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Check-in"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Check-out"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(h=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h.visitor_name}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h.visitor_phone||"N/A"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h.purpose}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(h.check_in_time).toLocaleString()}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h.check_out_time?new Date(h.check_out_time).toLocaleString():"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:!h.check_out_time&&r.jsxs("button",{onClick:()=>u(h.id),className:"btn btn-sm bg-green-50 text-green-600 hover:bg-green-100",children:[r.jsx(zk,{className:"w-4 h-4 mr-1"}),"Check-out"]})})]},h.id))})]})})})]})},iV=()=>{const[e,t]=O.useState([]),[s,n]=O.useState(!0),[a,i]=O.useState(!1),[l,o]=O.useState({staff_id:1,inquiry_type:"general",inquirer_name:"",inquirer_phone:"",inquirer_email:"",subject:"",details:"",priority:"medium"});O.useEffect(()=>{c()},[]);const c=async()=>{n(!0);try{const h=await rn.getInquiries({});t(h.data||[])}catch(h){console.error("Failed to fetch inquiries:",h),K.error("Failed to load inquiries")}finally{n(!1)}},d=async h=>{h.preventDefault();try{await rn.createInquiry(l),K.success("Inquiry created successfully"),i(!1),o({staff_id:1,inquiry_type:"general",inquirer_name:"",inquirer_phone:"",inquirer_email:"",subject:"",details:"",priority:"medium"}),c()}catch(f){console.error("Failed to create inquiry:",f),K.error("Failed to create inquiry")}},u=async(h,f)=>{try{await rn.updateInquiry(h,{status:f}),K.success("Inquiry status updated"),c()}catch(m){console.error("Failed to update inquiry:",m),K.error("Failed to update inquiry")}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Inquiries"}),r.jsxs("button",{onClick:()=>i(!a),className:"btn btn-primary flex items-center space-x-2",children:[r.jsx(Be,{className:"w-5 h-5"}),r.jsx("span",{children:"Create Inquiry"})]})]}),a&&r.jsxs("div",{className:"card",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Create New Inquiry"}),r.jsxs("form",{onSubmit:d,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Inquirer Name *"}),r.jsx("input",{type:"text",value:l.inquirer_name,onChange:h=>o({...l,inquirer_name:h.target.value}),required:!0,className:"input w-full"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),r.jsx("input",{type:"tel",value:l.inquirer_phone,onChange:h=>o({...l,inquirer_phone:h.target.value}),className:"input w-full"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Inquiry Type *"}),r.jsxs("select",{value:l.inquiry_type,onChange:h=>o({...l,inquiry_type:h.target.value}),required:!0,className:"input w-full",children:[r.jsx("option",{value:"admission",children:"Admission"}),r.jsx("option",{value:"fees",children:"Fees"}),r.jsx("option",{value:"general",children:"General"}),r.jsx("option",{value:"complaint",children:"Complaint"}),r.jsx("option",{value:"other",children:"Other"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),r.jsxs("select",{value:l.priority,onChange:h=>o({...l,priority:h.target.value}),className:"input w-full",children:[r.jsx("option",{value:"low",children:"Low"}),r.jsx("option",{value:"medium",children:"Medium"}),r.jsx("option",{value:"high",children:"High"})]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject *"}),r.jsx("input",{type:"text",value:l.subject,onChange:h=>o({...l,subject:h.target.value}),required:!0,className:"input w-full"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Details"}),r.jsx("textarea",{value:l.details,onChange:h=>o({...l,details:h.target.value}),rows:"3",className:"input w-full"})]}),r.jsxs("div",{className:"md:col-span-2 flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>i(!1),className:"btn btn-secondary",children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",children:"Create"})]})]})]}),r.jsx("div",{className:"card",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Inquirer"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Subject"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Priority"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(h=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h.inquirer_name}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h.inquiry_type}),r.jsx("td",{className:"px-6 py-4",children:h.subject}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${h.priority==="high"?"bg-red-100 text-red-700":h.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:h.priority})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("select",{value:h.status,onChange:f=>u(h.id,f.target.value),className:"input input-sm",children:[r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"in_progress",children:"In Progress"}),r.jsx("option",{value:"resolved",children:"Resolved"}),r.jsx("option",{value:"closed",children:"Closed"})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("button",{className:"text-blue-600 hover:text-blue-800",children:"View"})})]},h.id))})]})})})]})},lV=()=>{const[e,t]=O.useState({startDate:new Date(new Date().setDate(new Date().getDate()-30)).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[s,n]=O.useState({totalVisitors:0,totalInquiries:0,pendingInquiries:0,resolvedInquiries:0,visitorsByPurpose:{},inquiriesByType:{}}),[a,i]=O.useState(!1);O.useEffect(()=>{l()},[e]);const l=async()=>{i(!0);try{const[c,d]=await Promise.all([rn.getVisitors({}),rn.getInquiries({})]),u=c.data||[],h=d.data||[],f=u.filter(g=>{const y=new Date(g.check_in_time).toISOString().split("T")[0];return y>=e.startDate&&y<=e.endDate}),m=h.filter(g=>{const y=new Date(g.created_at).toISOString().split("T")[0];return y>=e.startDate&&y<=e.endDate}),x=f.reduce((g,y)=>(g[y.purpose]=(g[y.purpose]||0)+1,g),{}),p=m.reduce((g,y)=>(g[y.inquiry_type]=(g[y.inquiry_type]||0)+1,g),{}),j=m.filter(g=>g.status==="pending").length,v=m.filter(g=>g.status==="resolved"||g.status==="closed").length;n({totalVisitors:f.length,totalInquiries:m.length,pendingInquiries:j,resolvedInquiries:v,visitorsByPurpose:x,inquiriesByType:p})}catch(c){console.error("Failed to fetch report data:",c),K.error("Failed to load report data")}finally{i(!1)}},o=[{title:"Total Visitors",value:s.totalVisitors,icon:Xe,color:"blue"},{title:"Total Inquiries",value:s.totalInquiries,icon:Ue,color:"green"},{title:"Pending Inquiries",value:s.pendingInquiries,icon:Sr,color:"yellow"},{title:"Resolved Inquiries",value:s.resolvedInquiries,icon:Sr,color:"purple"}];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Front Desk Reports"}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"From:"}),r.jsx("input",{type:"date",value:e.startDate,onChange:c=>t({...e,startDate:c.target.value}),className:"input"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"To:"}),r.jsx("input",{type:"date",value:e.endDate,onChange:c=>t({...e,endDate:c.target.value}),className:"input"})]})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:o.map(c=>r.jsx("div",{className:"card hover:shadow-lg transition-shadow",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:c.title}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:c.value})]}),r.jsx("div",{className:`p-3 rounded-full bg-${c.color}-100`,children:r.jsx(c.icon,{className:`w-8 h-8 text-${c.color}-600`})})]})},c.title))}),r.jsxs("div",{className:"card",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Visitors by Purpose"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Purpose"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Count"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Percentage"})]})}),r.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[Object.entries(s.visitorsByPurpose).map(([c,d])=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:c.replace(/_/g," ").replace(/\b\w/g,u=>u.toUpperCase())}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:d}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[s.totalVisitors>0?(d/s.totalVisitors*100).toFixed(1):0,"%"]})]},c)),Object.keys(s.visitorsByPurpose).length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:"3",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No visitor data for selected date range"})})]})]})})]}),r.jsxs("div",{className:"card",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Inquiries by Type"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Count"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Percentage"})]})}),r.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[Object.entries(s.inquiriesByType).map(([c,d])=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:c.replace(/_/g," ").replace(/\b\w/g,u=>u.toUpperCase())}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:d}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[s.totalInquiries>0?(d/s.totalInquiries*100).toFixed(1):0,"%"]})]},c)),Object.keys(s.inquiriesByType).length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:"3",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No inquiry data for selected date range"})})]})]})})]})]})},oV=({setActiveTab:e})=>{const[t,s]=O.useState({totalStaff:0,activeVisitors:0,pendingInquiries:0,todayVisitors:0}),[n,a]=O.useState(!0);O.useEffect(()=>{i()},[]);const i=async()=>{a(!0);try{const o=await Cs.getAll({designation:"Frontdesk",status:"active"});let c=0;o.data?c=o.data.filter(m=>m.designation==="Frontdesk").length:typeof o.count=="number"&&(c=o.count);let d=0,u=0;try{const f=await rn.getVisitors({status:"checked-in"});f.data&&Array.isArray(f.data)?d=f.data.length:typeof f.count=="number"&&(d=f.count)}catch(f){console.log("Visitor tracking not available:",f),d=0}try{const f=new Date().toISOString().split("T")[0],m=await rn.getVisitors({date:f});m.data&&Array.isArray(m.data)?u=m.data.length:typeof m.count=="number"&&(u=m.count)}catch(f){console.log("Today's visitor tracking not available:",f),u=0}let h=0;try{const f=await rn.getInquiries({status:"pending"});f.data&&Array.isArray(f.data)?h=f.data.length:typeof f.count=="number"&&(h=f.count)}catch(f){console.log("Inquiry tracking not available:",f),h=0}s({totalStaff:c,activeVisitors:d,pendingInquiries:h,todayVisitors:u})}catch(o){console.error("Failed to fetch dashboard stats:",o),K.error("Failed to load dashboard statistics"),s({totalStaff:0,activeVisitors:0,pendingInquiries:0,todayVisitors:0})}finally{a(!1)}},l=[{title:"Total Staff",value:t.totalStaff,icon:Xe,color:"blue",action:"staff"},{title:"Active Visitors",value:t.activeVisitors,icon:Kd,color:"green",action:"visitors"},{title:"Pending Inquiries",value:t.pendingInquiries,icon:Ab,color:"yellow",action:"inquiries"},{title:"Today's Visitors",value:t.todayVisitors,icon:Nt,color:"purple",action:"visitors"}];return n?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(o=>r.jsx("div",{className:"card animate-pulse",children:r.jsx("div",{className:"h-24 bg-gray-200 rounded"})},o))}):r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:l.map(o=>r.jsx("div",{className:"card hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>{o.action==="visitors"?e("visitors"):o.action==="inquiries"?e("inquiries"):o.action==="staff"&&e("staff")},children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:o.title}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:o.value})]}),r.jsx("div",{className:`p-3 rounded-full bg-${o.color}-100`,children:r.jsx(o.icon,{className:`w-8 h-8 text-${o.color}-600`})})]})},o.title))}),r.jsxs("div",{className:"card",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx("button",{onClick:()=>e("visitors"),className:"btn btn-primary",children:"Check-in Visitor"}),r.jsx("button",{onClick:()=>e("inquiries"),className:"btn btn-secondary",children:"Create Inquiry"}),r.jsx("button",{onClick:()=>e("reports"),className:"btn btn-secondary",children:"View Reports"})]})]}),r.jsx("div",{className:"text-right",children:r.jsx("button",{onClick:i,className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Refresh Statistics"})})]})},cV=()=>{const[e,t]=O.useState("dashboard"),s=[{id:"dashboard",label:"Dashboard",icon:MM},{id:"staff",label:"Front Desk Staff",icon:Xe},{id:"visitors",label:"Visitor Log",icon:Kd},{id:"inquiries",label:"Inquiries",icon:Ab},{id:"reports",label:"Reports",icon:Ue}];return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex justify-between items-center",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Front Desk Management"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage front desk staff, visitors, and inquiries"})]})}),r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:s.map(n=>r.jsxs("button",{onClick:()=>t(n.id),className:`
                                whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm 
                                transition-colors duration-200 flex items-center space-x-2
                                ${e===n.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                            `,children:[r.jsx(n.icon,{className:"w-5 h-5"}),r.jsx("span",{children:n.label})]},n.id))})}),r.jsxs("div",{className:"mt-6",children:[e==="dashboard"&&r.jsx(oV,{setActiveTab:t}),e==="staff"&&r.jsx(nV,{}),e==="visitors"&&r.jsx(aV,{}),e==="inquiries"&&r.jsx(iV,{}),e==="reports"&&r.jsx(lV,{})]})]})},dV=e=>({student:"student",teacher:"teacher",staff:"staff",admin:"admin",cleaner:"staff",frontdesk_staff:"staff",frontdesk:"staff",support_staff:"staff"})[e==null?void 0:e.toLowerCase()]||"staff",uV=({leave:e,onSubmit:t,onCancel:s})=>{const n=Ie(mr),a=dV(n),[i,l]=O.useState({user_type:a,leave_type:"casual",start_date:"",end_date:"",reason:"",supporting_document:null}),[o,c]=O.useState(0),[d,u]=O.useState({});O.useEffect(()=>{e&&l({user_type:e.user_type||a,leave_type:e.leave_type,start_date:e.start_date,end_date:e.end_date,reason:e.reason,supporting_document:null})},[e,a]),O.useEffect(()=>{if(i.start_date&&i.end_date){const x=new Date(i.start_date),p=new Date(i.end_date);if(p>=x){const j=Math.ceil((p-x)/864e5)+1;c(j)}else c(0)}},[i.start_date,i.end_date]);const h=x=>{const{name:p,value:j,files:v}=x.target;l(p==="supporting_document"&&v?{...i,[p]:v[0]}:{...i,[p]:j}),d[p]&&u({...d,[p]:""})},f=()=>{const x={};if(i.leave_type||(x.leave_type="Leave type is required"),i.start_date||(x.start_date="Start date is required"),i.end_date||(x.end_date="End date is required"),i.start_date&&i.end_date){const p=new Date(i.start_date);new Date(i.end_date)<p&&(x.end_date="End date must be after start date")}return(!i.reason||i.reason.trim().length<10)&&(x.reason="Reason must be at least 10 characters"),u(x),Object.keys(x).length===0},m=async x=>{if(x.preventDefault(),!f())return;const p={...i,user_type:a};await t(p)};return r.jsxs("form",{onSubmit:m,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Leave Type *"}),r.jsxs("select",{name:"leave_type",value:i.leave_type,onChange:h,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${d.leave_type?"border-red-500":"border-gray-300"}`,children:[r.jsx("option",{value:"casual",children:"Casual Leave"}),r.jsx("option",{value:"sick",children:"Sick Leave"}),r.jsx("option",{value:"emergency",children:"Emergency Leave"}),r.jsx("option",{value:"other",children:"Other"})]}),d.leave_type&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.leave_type})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date *"}),r.jsx("input",{type:"date",name:"start_date",value:i.start_date,onChange:h,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${d.start_date?"border-red-500":"border-gray-300"}`}),d.start_date&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.start_date})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date *"}),r.jsx("input",{type:"date",name:"end_date",value:i.end_date,onChange:h,min:i.start_date,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${d.end_date?"border-red-500":"border-gray-300"}`}),d.end_date&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.end_date})]})]}),o>0&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Total Days:"})," ",o," day",o!==1?"s":""]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason *"}),r.jsx("textarea",{name:"reason",value:i.reason,onChange:h,rows:4,placeholder:"Please provide a detailed reason for your leave application...",className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${d.reason?"border-red-500":"border-gray-300"}`}),d.reason&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.reason})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supporting Document (Optional)"}),r.jsx("input",{type:"file",name:"supporting_document",onChange:h,accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Accepted formats: PDF, JPG, PNG, DOC, DOCX (Max 5MB)"})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:s,className:"px-5 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-5 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-md",children:e?"Update Leave":"Submit Leave Application"})]})]})},t6=({leave:e,onApprove:t,onDecline:s,onView:n,isAdmin:a})=>{var o;const i=c=>{const d={pending:"bg-blue-50 text-blue-700 border-blue-200",approved:"bg-gray-100 text-gray-700 border-gray-200",declined:"bg-gray-100 text-gray-700 border-gray-200"};return r.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full border ${d[c]||"bg-gray-100 text-gray-800 border-gray-200"}`,children:c.charAt(0).toUpperCase()+c.slice(1)})},l=c=>{const d={sick:"bg-blue-100 text-blue-700",casual:"bg-blue-100 text-blue-700",emergency:"bg-blue-100 text-blue-700",other:"bg-gray-100 text-gray-700"};return r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${d[c]||"bg-gray-100 text-gray-800"}`,children:c.charAt(0).toUpperCase()+c.slice(1)})};return r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-5 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-700 rounded-full flex items-center justify-center text-white font-semibold",children:((o=e.user_name)==null?void 0:o.charAt(0))||"U"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:e.user_name||"Unknown User"}),r.jsxs("p",{className:"text-xs text-gray-500 capitalize",children:[e.user_type," ",e.user_identifier&&`(${e.user_identifier})`]})]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-2",children:[i(e.status),l(e.leave_type)]})]}),r.jsxs("div",{className:"space-y-3 mb-4",children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(Te,{className:"w-4 h-4 mr-2 text-gray-400"}),r.jsxs("span",{children:[new Date(e.start_date).toLocaleDateString()," -"," ",new Date(e.end_date).toLocaleDateString()]}),r.jsxs("span",{className:"ml-2 font-semibold text-blue-600",children:["(",e.total_days," day",e.total_days!==1?"s":"",")"]})]}),r.jsxs("div",{className:"flex items-start text-sm text-gray-600",children:[r.jsx(Ue,{className:"w-4 h-4 mr-2 mt-0.5 text-gray-400 flex-shrink-0"}),r.jsx("p",{className:"flex-1 line-clamp-2",children:e.reason})]}),e.admin_remarks&&r.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-md p-3 mt-3",children:[r.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Admin Remarks:"}),r.jsx("p",{className:"text-sm text-gray-600",children:e.admin_remarks})]}),e.reviewed_by&&r.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-2",children:[r.jsx(Nt,{className:"w-3 h-3 mr-1"}),r.jsxs("span",{children:["Reviewed by ",e.reviewer_name||e.reviewer_email," on"," ",new Date(e.reviewed_at).toLocaleDateString()]})]})]}),a&&r.jsx("div",{className:"pt-3 border-t border-gray-200",children:e.status==="pending"?r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>n&&n(e),className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition-colors flex items-center justify-center",children:[r.jsx(ki,{className:"w-4 h-4 mr-1"}),"View"]}),r.jsx("button",{onClick:()=>t(e),className:"flex-1 px-4 py-2 bg-blue-700 hover:bg-blue-800 text-white text-sm font-medium rounded-lg transition-colors",children:"Approve"}),r.jsx("button",{onClick:()=>s(e),className:"flex-1 px-4 py-2 bg-gray-700 hover:bg-gray-800 text-white text-sm font-medium rounded-lg transition-colors",children:"Decline"})]}):r.jsxs("button",{onClick:()=>n&&n(e),className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition-colors flex items-center justify-center",children:[r.jsx(ki,{className:"w-4 h-4 mr-1"}),"View Details"]})})]})},hV=({src:e,alt:t,className:s})=>{const[n,a]=O.useState(null),[i,l]=O.useState(!0),[o,c]=O.useState(null);return O.useEffect(()=>e?((async()=>{try{l(!0),c(null);const u=e.replace(/^uploads\//,""),h=localStorage.getItem("token"),m=`http://localhost:5001/api/files/${u}`,x=await fetch(m,{headers:{Authorization:`Bearer ${h}`}});if(!x.ok)throw new Error("Failed to load image");const p=await x.blob(),j=URL.createObjectURL(p);a(j)}catch(u){console.error("Error loading image:",u),c(u.message)}finally{l(!1)}})(),()=>{n&&URL.revokeObjectURL(n)}):void 0,[e]),i?r.jsx("div",{className:`flex items-center justify-center bg-gray-100 ${s}`,children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):o?r.jsx("div",{className:`flex items-center justify-center bg-gray-100 ${s}`,children:r.jsx("p",{className:"text-sm text-red-600",children:"Failed to load image"})}):r.jsx("img",{src:n,alt:t,className:s})},fV=({isOpen:e,onClose:t,leave:s})=>{var c;if(!s)return null;const n=d=>{const u={pending:"bg-yellow-100 text-yellow-800 border-yellow-200",approved:"bg-green-100 text-green-800 border-green-200",declined:"bg-red-100 text-red-800 border-red-200"};return r.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full border ${u[d]||"bg-gray-100 text-gray-800 border-gray-200"}`,children:d.charAt(0).toUpperCase()+d.slice(1)})},a=d=>{const u={sick:"bg-purple-100 text-purple-800",casual:"bg-blue-100 text-blue-800",emergency:"bg-red-100 text-red-800",other:"bg-gray-100 text-gray-800"};return r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${u[d]||"bg-gray-100 text-gray-800"}`,children:d.charAt(0).toUpperCase()+d.slice(1)})},i=()=>{if(s.supporting_document){const d=s.supporting_document.replace(/^uploads\//,""),u=localStorage.getItem("token"),f=`http://localhost:5001/api/files/${d}`;fetch(f,{headers:{Authorization:`Bearer ${u}`}}).then(m=>{if(!m.ok)throw new Error("Failed to download file");return m.blob()}).then(m=>{const x=window.URL.createObjectURL(m),p=document.createElement("a");p.href=x,p.download=d.split("/").pop(),document.body.appendChild(p),p.click(),window.URL.revokeObjectURL(x),document.body.removeChild(p)}).catch(m=>{console.error("Download error:",m),alert("Failed to download file. Please try again.")})}},l=d=>{if(!d)return!1;const u=d.toLowerCase().split(".").pop();return["jpg","jpeg","png","gif","webp","bmp"].includes(u)},o=d=>d?d.toLowerCase().endsWith(".pdf"):!1;return r.jsx(Ae,{isOpen:e,onClose:t,title:"Leave Application Details",size:"lg",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-5 border border-blue-100",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-2xl font-bold",children:((c=s.user_name)==null?void 0:c.charAt(0))||"U"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900",children:s.user_name||"Unknown User"}),r.jsxs("p",{className:"text-sm text-gray-600 capitalize",children:[s.user_type," ",s.user_identifier&&` ${s.user_identifier}`]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s.user_email})]}),r.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n(s.status),a(s.leave_type)]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[r.jsxs("div",{className:"flex items-center text-gray-600 mb-2",children:[r.jsx(Te,{className:"w-5 h-5 mr-2 text-blue-500"}),r.jsx("span",{className:"font-semibold",children:"Start Date"})]}),r.jsx("p",{className:"text-gray-900 font-medium ml-7",children:new Date(s.start_date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[r.jsxs("div",{className:"flex items-center text-gray-600 mb-2",children:[r.jsx(Te,{className:"w-5 h-5 mr-2 text-blue-500"}),r.jsx("span",{className:"font-semibold",children:"End Date"})]}),r.jsx("p",{className:"text-gray-900 font-medium ml-7",children:new Date(s.end_date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),r.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[r.jsxs("div",{className:"flex items-center text-gray-600 mb-2",children:[r.jsx(Nt,{className:"w-5 h-5 mr-2 text-blue-500"}),r.jsx("span",{className:"font-semibold",children:"Duration"})]}),r.jsxs("p",{className:"text-2xl font-bold text-blue-600 ml-7",children:[s.total_days," ",s.total_days===1?"Day":"Days"]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[r.jsxs("div",{className:"flex items-center text-gray-600 mb-2",children:[r.jsx(Nt,{className:"w-5 h-5 mr-2 text-gray-500"}),r.jsx("span",{className:"font-semibold",children:"Applied On"})]}),r.jsx("p",{className:"text-gray-900 font-medium ml-7",children:new Date(s.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[r.jsxs("div",{className:"flex items-start text-gray-600 mb-2",children:[r.jsx(Ue,{className:"w-5 h-5 mr-2 mt-0.5 text-gray-500"}),r.jsx("span",{className:"font-semibold",children:"Reason for Leave"})]}),r.jsx("p",{className:"text-gray-900 ml-7 whitespace-pre-wrap",children:s.reason})]}),s.supporting_document&&r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center text-gray-600",children:[r.jsx(Ue,{className:"w-5 h-5 mr-2 text-gray-500"}),r.jsx("span",{className:"font-semibold",children:"Supporting Document"})]}),r.jsxs("button",{onClick:i,className:"flex items-center px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-lg transition-colors",children:[r.jsx(El,{className:"w-4 h-4 mr-1"}),"Download"]})]}),r.jsx("div",{className:"ml-7 mt-3",children:l(s.supporting_document)?r.jsx("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:r.jsx(hV,{src:s.supporting_document,alt:"Supporting document",className:"w-full h-auto max-h-96 object-contain bg-white"})}):o(s.supporting_document)?r.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"PDF preview requires download. Click the Download button above to view the document."}),r.jsx("div",{className:"flex items-center justify-center p-8 bg-gray-50 rounded",children:r.jsx(Ue,{className:"w-12 h-12 text-gray-400"})})]}):r.jsx("div",{className:"flex items-center justify-center p-8 bg-white border border-gray-300 rounded-lg",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Ue,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-gray-600",children:s.supporting_document.split("/").pop()}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Click download to view this file"})]})})})]}),s.admin_remarks&&r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm font-semibold text-amber-900 mb-2",children:"Admin Remarks:"}),r.jsx("p",{className:"text-gray-800 whitespace-pre-wrap",children:s.admin_remarks})]}),s.reviewed_by&&r.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(tt,{className:"w-4 h-4 mr-2 text-gray-500"}),r.jsxs("span",{children:["Reviewed by ",r.jsx("strong",{children:s.reviewer_name||s.reviewer_email})," on"," ",new Date(s.reviewed_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})}),r.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:r.jsx("button",{onClick:t,className:"px-6 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors",children:"Close"})})]})})},mV=()=>{var k,w;const e=Me(),[t,s]=O.useState(!1),[n,a]=O.useState(!1),[i,l]=O.useState(!1),[o,c]=O.useState(!1),[d,u]=O.useState(!1),[h,f]=O.useState(null),[m,x]=O.useState(""),[p,j]=O.useState({status:"",user_type:"",search:""}),{data:v,isLoading:g}=me({queryKey:["leaves",p],queryFn:()=>Qi.getAll(p)}),{data:y}=me({queryKey:["leaves-pending-count"],queryFn:Qi.getPendingCount}),b=async()=>{try{await Qi.approve(h.id,m),K.success("Leave application approved"),a(!1),f(null),x(""),e.invalidateQueries(["leaves"]),e.invalidateQueries(["leaves-pending-count"])}catch(_){K.error(_.message||"Failed to approve leave")}},N=async()=>{try{if(!m.trim()){K.error("Please provide remarks for declining");return}await Qi.decline(h.id,m),K.success("Leave application declined"),l(!1),f(null),x(""),e.invalidateQueries(["leaves"]),e.invalidateQueries(["leaves-pending-count"])}catch(_){K.error(_.message||"Failed to decline leave")}};return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-extrabold text-gray-900",children:"Leave Management"}),r.jsx("p",{className:"text-gray-600 mt-1 max-w-md",children:"Manage leave applications from students, teachers, and staff."}),(y==null?void 0:y.count)>0&&r.jsxs("p",{className:"text-sm text-blue-700 font-medium mt-2",children:[y.count," pending application",y.count!==1?"s":""," awaiting review"]})]})}),r.jsxs("div",{className:"card p-6 bg-white rounded-xl shadow-sm border border-gray-100",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-center",children:[r.jsxs("div",{className:"relative md:col-span-2",children:[r.jsx(Tr,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5 pointer-events-none"}),r.jsx("input",{type:"text",placeholder:"Search by name, reason...",value:p.search,onChange:_=>j({...p,search:_.target.value}),className:"input pl-12 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:border-blue-500"})]}),r.jsxs("select",{value:p.status,onChange:_=>j({...p,status:_.target.value}),className:"input w-full border border-gray-300 rounded-lg py-2 px-3 focus:ring-2 focus:ring-blue-400 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"All Status"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"approved",children:"Approved"}),r.jsx("option",{value:"declined",children:"Declined"})]}),r.jsxs("select",{value:p.user_type,onChange:_=>j({...p,user_type:_.target.value}),className:"input w-full border border-gray-300 rounded-lg py-2 px-3 focus:ring-2 focus:ring-blue-400 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"All Types"}),r.jsx("option",{value:"student",children:"Students"}),r.jsx("option",{value:"teacher",children:"Teachers"}),r.jsx("option",{value:"staff",children:"Staff"})]})]}),r.jsxs("button",{onClick:()=>j({search:"",status:"",user_type:""}),className:"mt-4 text-sm text-blue-600 hover:text-blue-700 font-medium flex items-center",children:[r.jsx(cn,{className:"w-4 h-4 mr-1"}),"Reset Filters"]})]}),r.jsx("div",{children:g?r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-700"})}):((k=v==null?void 0:v.data)==null?void 0:k.length)===0?r.jsx("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm",children:r.jsx("p",{className:"text-gray-500",children:"No leave applications found"})}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(w=v==null?void 0:v.data)==null?void 0:w.map(_=>r.jsx(t6,{leave:_,isAdmin:!0,onView:S=>{f(S),u(!0)},onApprove:S=>{f(S),a(!0)},onDecline:S=>{f(S),l(!0)}},_.id))})}),r.jsx(Ae,{isOpen:n,onClose:()=>{a(!1),f(null),x("")},title:"Approve Leave Application",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("p",{className:"text-gray-600",children:["Are you sure you want to approve this leave application for"," ",r.jsx("strong",{children:h==null?void 0:h.user_name}),"?"]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Remarks (Optional)"}),r.jsx("textarea",{value:m,onChange:_=>x(_.target.value),rows:3,placeholder:"Add any remarks...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{className:"flex justify-end space-x-4",children:[r.jsx("button",{onClick:()=>{a(!1),f(null),x("")},className:"btn btn-outline",children:"Cancel"}),r.jsx("button",{onClick:b,className:"btn bg-blue-700 hover:bg-blue-800 text-white",children:"Approve"})]})]})}),r.jsx(Ae,{isOpen:i,onClose:()=>{l(!1),f(null),x("")},title:"Decline Leave Application",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("p",{className:"text-gray-600",children:["You are declining the leave application for"," ",r.jsx("strong",{children:h==null?void 0:h.user_name}),"."]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for Declining *"}),r.jsx("textarea",{value:m,onChange:_=>x(_.target.value),rows:3,placeholder:"Please provide a reason for declining...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),r.jsxs("div",{className:"flex justify-end space-x-4",children:[r.jsx("button",{onClick:()=>{l(!1),f(null),x("")},className:"btn btn-outline",children:"Cancel"}),r.jsx("button",{onClick:N,className:"btn bg-gray-700 hover:bg-gray-800 text-white",children:"Decline"})]})]})}),r.jsx(fV,{isOpen:d,onClose:()=>{u(!1),f(null)},leave:h})]})},pV=()=>{var m,x;const e=Me(),[t,s]=O.useState(!1),[n,a]=O.useState(!1),[i,l]=O.useState(null),{data:o,isLoading:c}=me({queryKey:["my-leaves"],queryFn:Qi.getMyLeaves}),d=async p=>{try{await Qi.create(p),K.success("Leave application submitted successfully"),s(!1),e.invalidateQueries(["my-leaves"])}catch(j){K.error(j.message||"Failed to submit leave application")}},u=async()=>{try{await Qi.delete(i.id),K.success("Leave application deleted"),a(!1),l(null),e.invalidateQueries(["my-leaves"])}catch(p){K.error(p.message||"Failed to delete leave")}},f=o!=null&&o.data?{total:o.data.length,pending:o.data.filter(p=>p.status==="pending").length,approved:o.data.filter(p=>p.status==="approved").length,declined:o.data.filter(p=>p.status==="declined").length}:{total:0,pending:0,approved:0,declined:0};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-extrabold text-gray-900",children:"My Leaves"}),r.jsx("p",{className:"text-gray-600 mt-1 max-w-md",children:"Submit and track your leave applications."})]}),r.jsxs("button",{onClick:()=>s(!0),className:"inline-flex items-center px-5 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow-md transition-colors mt-4 md:mt-0",children:[r.jsx(Be,{className:"w-5 h-5 mr-2"}),r.jsx("span",{children:"New Leave Application"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-5",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Total Applications"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:f.total})]}),r.jsx(Ue,{className:"w-10 h-10 text-blue-500 opacity-20"})]})}),r.jsx("div",{className:"bg-white border border-blue-200 rounded-lg p-5",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),r.jsx("p",{className:"text-2xl font-bold text-blue-700 mt-1",children:f.pending})]}),r.jsx(Te,{className:"w-10 h-10 text-blue-500 opacity-20"})]})}),r.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-5",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Approved"}),r.jsx("p",{className:"text-2xl font-bold text-gray-700 mt-1",children:f.approved})]}),r.jsx(Te,{className:"w-10 h-10 text-gray-500 opacity-20"})]})}),r.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-5",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Declined"}),r.jsx("p",{className:"text-2xl font-bold text-gray-700 mt-1",children:f.declined})]}),r.jsx(Te,{className:"w-10 h-10 text-gray-500 opacity-20"})]})})]}),r.jsx("div",{children:c?r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx("div",{className:"loading"})}):((m=o==null?void 0:o.data)==null?void 0:m.length)===0?r.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm",children:[r.jsx(Ue,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"No leave applications yet"}),r.jsxs("button",{onClick:()=>s(!0),className:"inline-flex items-center px-5 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow-md transition-colors",children:[r.jsx(Be,{className:"w-5 h-5 mr-2"}),"Submit Your First Leave"]})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(x=o==null?void 0:o.data)==null?void 0:x.map(p=>r.jsxs("div",{className:"relative",children:[r.jsx(t6,{leave:p,isAdmin:!1}),p.status==="pending"&&r.jsx("button",{onClick:()=>{l(p),a(!0)},className:"absolute top-3 right-3 p-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",title:"Delete application",children:r.jsx(Be,{className:"w-4 h-4 rotate-45"})})]},p.id))})}),r.jsx(Ae,{isOpen:t,onClose:()=>s(!1),title:"New Leave Application",size:"md",children:r.jsx(uV,{onSubmit:d,onCancel:()=>s(!1)})}),r.jsx(Ae,{isOpen:n,onClose:()=>{a(!1),l(null)},title:"Delete Leave Application",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-gray-600",children:"Are you sure you want to delete this leave application? This action cannot be undone."}),r.jsxs("div",{className:"flex justify-end space-x-4",children:[r.jsx("button",{onClick:()=>{a(!1),l(null)},className:"btn btn-outline",children:"Cancel"}),r.jsx("button",{onClick:u,className:"btn bg-red-600 hover:bg-red-700 text-white",children:"Delete"})]})]})})]})},xV=()=>{var E,A,C,D,M;const[e,t]=O.useState(!1),[s,n]=O.useState(null),[a,i]=O.useState(!1),[l,o]=O.useState(null),[c,d]=O.useState({status:"",severity:"",search:""}),u=Me(),h=Ie(mr),{data:f,isLoading:m}=me({queryKey:["discipline",c],queryFn:()=>oh.getAll(c)}),{data:x}=me({queryKey:["students-list"],queryFn:()=>Fr.getAll({status:"active"})}),p=O.useMemo(()=>{const L=(f==null?void 0:f.data)||[];return{total:L.length,pending:L.filter(z=>z.status==="pending").length,resolved:L.filter(z=>z.status==="resolved").length,critical:L.filter(z=>z.severity==="critical").length}},[f]),j=_e({mutationFn:oh.create,onSuccess:()=>{K.success("Record created successfully"),t(!1),u.invalidateQueries(["discipline"])},onError:L=>K.error(L.message||"Failed to create record")}),v=_e({mutationFn:({id:L,data:z})=>oh.update(L,z),onSuccess:()=>{K.success("Record updated successfully"),t(!1),n(null),i(!1),u.invalidateQueries(["discipline"])},onError:L=>K.error(L.message||"Failed to update record")}),g=_e({mutationFn:oh.delete,onSuccess:()=>{K.success("Record deleted successfully"),o(null),u.invalidateQueries(["discipline"])},onError:L=>K.error(L.message||"Failed to delete record")}),y=L=>{L.preventDefault();const z=new FormData(L.target),Y=Object.fromEntries(z.entries());a&&s?v.mutate({id:s.id,data:Y}):j.mutate(Y)},b=L=>{n(L),i(!0),t(!0)},N=L=>{window.confirm("Are you sure you want to delete this record?")&&g.mutate(L)},k=L=>{o(L)},w=L=>{switch(L){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},_=L=>{switch(L){case"critical":return"from-red-500 to-red-600";case"high":return"from-orange-500 to-orange-600";case"medium":return"from-yellow-500 to-yellow-600";case"low":return"from-green-500 to-green-600";default:return"from-gray-500 to-gray-600"}},S=L=>{switch(L){case"resolved":return"bg-green-100 text-green-800";case"dismissed":return"bg-gray-100 text-gray-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-blue-100 text-blue-800"}};return m?r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[r.jsx(ch,{className:"w-8 h-8 text-blue-600"}),"Discipline Management"]}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Track and manage student behavior records"})]})}),r.jsxs("div",{className:"flex h-screen bg-gray-50",children:[r.jsx("div",{className:"w-96 bg-white border-r border-gray-200 p-4",children:r.jsx("div",{className:"animate-pulse space-y-3",children:[...Array(8)].map((L,z)=>r.jsx("div",{className:"h-24 bg-gray-200 rounded-lg"},z))})}),r.jsx("div",{className:"flex-1 p-8",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-6"}),r.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})})]})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[r.jsx(ch,{className:"w-8 h-8 text-blue-600"}),"Discipline Management"]}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Track and manage student behavior records"})]}),h!=="student"&&r.jsxs("button",{onClick:()=>{n(null),i(!1),t(!0)},className:"btn btn-primary flex items-center gap-2 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all",children:[r.jsx(Be,{className:"w-5 h-5"}),r.jsx("span",{children:"Add Record"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Records"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:p.total})]}),r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsx(Ue,{className:"w-6 h-6 text-blue-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),r.jsx("p",{className:"text-3xl font-bold text-yellow-600 mt-2",children:p.pending})]}),r.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:r.jsx(Nt,{className:"w-6 h-6 text-yellow-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Resolved"}),r.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:p.resolved})]}),r.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:r.jsx(Ar,{className:"w-6 h-6 text-green-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Critical"}),r.jsx("p",{className:"text-3xl font-bold text-red-600 mt-2",children:p.critical})]}),r.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:r.jsx(If,{className:"w-6 h-6 text-red-600"})})]})})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Search records...",value:c.search,onChange:L=>d({...c,search:L.target.value}),className:"input pl-10 w-full"})]}),r.jsxs("select",{value:c.severity,onChange:L=>d({...c,severity:L.target.value}),className:"input w-full",children:[r.jsx("option",{value:"",children:"All Severities"}),r.jsx("option",{value:"low",children:"Low"}),r.jsx("option",{value:"medium",children:"Medium"}),r.jsx("option",{value:"high",children:"High"}),r.jsx("option",{value:"critical",children:"Critical"})]}),r.jsxs("select",{value:c.status,onChange:L=>d({...c,status:L.target.value}),className:"input w-full",children:[r.jsx("option",{value:"",children:"All Status"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"resolved",children:"Resolved"}),r.jsx("option",{value:"dismissed",children:"Dismissed"})]}),r.jsxs("button",{onClick:()=>d({status:"",severity:"",search:""}),className:"btn btn-outline flex items-center justify-center gap-2",children:[r.jsx(cn,{className:"w-4 h-4"}),r.jsx("span",{children:"Reset Filters"})]})]})}),((E=f==null?void 0:f.data)==null?void 0:E.length)===0?r.jsx("div",{className:"flex h-96 bg-white rounded-xl shadow-sm border border-gray-200 items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(ch,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"No Records Found"}),r.jsx("p",{className:"text-gray-500",children:"Try adjusting your filters or add a new record."})]})}):r.jsxs("div",{className:"flex h-[600px] bg-gray-50 rounded-xl overflow-hidden shadow-sm border border-gray-200",children:[r.jsxs("div",{className:"w-96 bg-white border-r border-gray-300 overflow-y-auto",children:[r.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-white sticky top-0 z-10",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Records"}),r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[(A=f==null?void 0:f.data)==null?void 0:A.length," Total"]})]}),r.jsx("div",{className:"p-4 space-y-2",children:(C=f==null?void 0:f.data)==null?void 0:C.map(L=>{var z;return r.jsx("div",{onClick:()=>k(L),className:`p-4 rounded-lg cursor-pointer transition-all duration-200 border ${(l==null?void 0:l.id)===L.id?"bg-blue-50 border-blue-500 shadow-md":"bg-white border-gray-200 hover:border-blue-300 hover:shadow-sm"}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-start space-x-3 flex-1 min-w-0",children:[r.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 ${(l==null?void 0:l.id)===L.id?"bg-blue-500":"bg-gradient-to-br from-blue-500 to-purple-600"}`,children:r.jsx("span",{className:"text-white font-bold text-sm",children:(z=L.student_name)==null?void 0:z.charAt(0)})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-900 truncate",children:L.student_name}),r.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:L.class_name}),r.jsx("div",{className:"text-sm text-gray-700 mt-1 truncate",children:L.title}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${w(L.severity)}`,children:L.severity}),r.jsx("span",{className:"text-xs text-gray-500",children:new Date(L.created_at).toLocaleDateString()})]})]})]}),r.jsx(Pi,{className:`w-5 h-5 flex-shrink-0 transition-transform ${(l==null?void 0:l.id)===L.id?"text-blue-500 transform translate-x-1":"text-gray-400"}`})]})},L.id)})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50",children:l?r.jsx("div",{className:"p-8",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[r.jsx("div",{className:`bg-gradient-to-r ${_(l.severity)} p-6 text-white`,children:r.jsx("div",{className:"flex items-start justify-between",children:r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"px-3 py-1 bg-white/20 backdrop-blur-sm rounded-full text-xs font-semibold uppercase",children:l.severity}),r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${S(l.status)}`,children:l.status})]}),r.jsx("h1",{className:"text-2xl font-bold",children:l.title}),r.jsx("p",{className:"text-white/90 mt-2",children:l.category})]})})}),r.jsx("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-gray-50 to-white",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-16 h-16 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold text-xl",children:(D=l.student_name)==null?void 0:D.charAt(0)}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:l.student_name}),r.jsxs("p",{className:"text-sm text-gray-600",children:[l.class_name,"  ",l.admission_number]})]})]})}),r.jsxs("div",{className:"p-6 grid grid-cols-2 gap-6",children:[r.jsxs("div",{className:"col-span-2 bg-gray-50 rounded-lg p-4 border border-gray-200",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Description"}),r.jsx("p",{className:"text-sm text-gray-900",children:l.description||"No description provided"})]}),l.action_taken&&r.jsxs("div",{className:"col-span-2 bg-gray-50 rounded-lg p-4 border border-gray-200",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Action Taken"}),r.jsx("p",{className:"text-sm text-gray-900",children:l.action_taken})]}),l.rating&&r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Behavior Rating"}),r.jsx("div",{className:"flex items-center space-x-2",children:r.jsxs("span",{className:`text-2xl font-bold ${l.rating<=4?"text-red-600":l.rating<=7?"text-yellow-600":"text-green-600"}`,children:[l.rating,"/10"]})})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Date Recorded"}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:new Date(l.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]}),h!=="student"&&r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("button",{onClick:()=>b(l),className:"flex items-center space-x-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors shadow-sm",children:[r.jsx(ct,{className:"w-4 h-4"}),r.jsx("span",{children:"Edit"})]}),r.jsxs("button",{onClick:()=>N(l.id),className:"flex items-center space-x-2 px-4 py-2 bg-red-50 hover:bg-red-100 text-red-600 border border-red-200 rounded-lg transition-colors shadow-sm",children:[r.jsx(ut,{className:"w-4 h-4"}),r.jsx("span",{children:"Delete"})]})]})]})})]})}):r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsxs("div",{className:"text-center",children:[r.jsx(ch,{className:"w-20 h-20 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Select a Record"}),r.jsx("p",{className:"text-gray-500",children:"Choose a record from the sidebar to view details"})]})})})]}),r.jsx(Ae,{isOpen:e,onClose:()=>t(!1),title:a?"Edit Discipline Record":"Add Discipline Record",size:"lg",children:r.jsxs("form",{onSubmit:y,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[!a&&r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Student *"}),r.jsxs("select",{name:"student_id",required:!0,className:"input",children:[r.jsx("option",{value:"",children:"Select a student..."}),(M=x==null?void 0:x.data)==null?void 0:M.map(L=>r.jsxs("option",{value:L.id,children:[L.first_name," ",L.last_name," (",L.class_name,")"]},L.id))]})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title/Incident *"}),r.jsx("input",{type:"text",name:"title",defaultValue:s==null?void 0:s.title,required:!0,className:"input",placeholder:"e.g., Fighting in class, Homework not done"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),r.jsxs("select",{name:"category",defaultValue:(s==null?void 0:s.category)||"behavior",className:"input",children:[r.jsx("option",{value:"behavior",children:"Behavior"}),r.jsx("option",{value:"activity",children:"Activity"}),r.jsx("option",{value:"other",children:"Other"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Severity"}),r.jsxs("select",{name:"severity",defaultValue:(s==null?void 0:s.severity)||"low",className:"input",children:[r.jsx("option",{value:"low",children:"Low"}),r.jsx("option",{value:"medium",children:"Medium"}),r.jsx("option",{value:"high",children:"High"}),r.jsx("option",{value:"critical",children:"Critical"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),r.jsxs("select",{name:"status",defaultValue:(s==null?void 0:s.status)||"pending",className:"input",children:[r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"resolved",children:"Resolved"}),r.jsx("option",{value:"dismissed",children:"Dismissed"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rating (1-10)"}),r.jsx("input",{type:"number",name:"rating",min:"1",max:"10",defaultValue:s==null?void 0:s.rating,className:"input",placeholder:"Rate behavior/activity"})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{name:"description",defaultValue:s==null?void 0:s.description,rows:"3",className:"input",placeholder:"Detailed description of the incident..."})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Action Taken"}),r.jsx("textarea",{name:"action_taken",defaultValue:s==null?void 0:s.action_taken,rows:"2",className:"input",placeholder:"What action was taken?"})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100",children:[r.jsx("button",{type:"button",onClick:()=>t(!1),className:"px-4 py-2 bg-white hover:bg-gray-50 text-gray-700 border border-gray-300 rounded-lg transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",disabled:j.isPending||v.isPending,children:j.isPending||v.isPending?"Saving...":"Save Record"})]})]})})]})};function gV(){this.__data__=[],this.size=0}var yV=gV;function bV(e,t){return e===t||e!==e&&t!==t}var r6=bV,vV=r6;function jV(e,t){for(var s=e.length;s--;)if(vV(e[s][0],t))return s;return-1}var lp=jV,NV=lp,wV=Array.prototype,_V=wV.splice;function SV(e){var t=this.__data__,s=NV(t,e);if(s<0)return!1;var n=t.length-1;return s==n?t.pop():_V.call(t,s,1),--this.size,!0}var kV=SV,EV=lp;function CV(e){var t=this.__data__,s=EV(t,e);return s<0?void 0:t[s][1]}var AV=CV,TV=lp;function OV(e){return TV(this.__data__,e)>-1}var RV=OV,PV=lp;function MV(e,t){var s=this.__data__,n=PV(s,e);return n<0?(++this.size,s.push([e,t])):s[n][1]=t,this}var DV=MV,LV=yV,FV=kV,IV=AV,BV=RV,qV=DV;function wc(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var n=e[t];this.set(n[0],n[1])}}wc.prototype.clear=LV;wc.prototype.delete=FV;wc.prototype.get=IV;wc.prototype.has=BV;wc.prototype.set=qV;var op=wc,$V=op;function UV(){this.__data__=new $V,this.size=0}var zV=UV;function VV(e){var t=this.__data__,s=t.delete(e);return this.size=t.size,s}var HV=VV;function WV(e){return this.__data__.get(e)}var YV=WV;function GV(e){return this.__data__.has(e)}var KV=GV,QV=typeof kt=="object"&&kt&&kt.Object===Object&&kt,s6=QV,XV=s6,ZV=typeof self=="object"&&self&&self.Object===Object&&self,JV=XV||ZV||Function("return this")(),Ta=JV,eH=Ta,tH=eH.Symbol,Pv=tH,Nw=Pv,n6=Object.prototype,rH=n6.hasOwnProperty,sH=n6.toString,Hc=Nw?Nw.toStringTag:void 0;function nH(e){var t=rH.call(e,Hc),s=e[Hc];try{e[Hc]=void 0;var n=!0}catch{}var a=sH.call(e);return n&&(t?e[Hc]=s:delete e[Hc]),a}var aH=nH,iH=Object.prototype,lH=iH.toString;function oH(e){return lH.call(e)}var cH=oH,ww=Pv,dH=aH,uH=cH,hH="[object Null]",fH="[object Undefined]",_w=ww?ww.toStringTag:void 0;function mH(e){return e==null?e===void 0?fH:hH:_w&&_w in Object(e)?dH(e):uH(e)}var cp=mH;function pH(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var a6=pH,xH=cp,gH=a6,yH="[object AsyncFunction]",bH="[object Function]",vH="[object GeneratorFunction]",jH="[object Proxy]";function NH(e){if(!gH(e))return!1;var t=xH(e);return t==bH||t==vH||t==yH||t==jH}var i6=NH,wH=Ta,_H=wH["__core-js_shared__"],SH=_H,$x=SH,Sw=function(){var e=/[^.]+$/.exec($x&&$x.keys&&$x.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function kH(e){return!!Sw&&Sw in e}var EH=kH,CH=Function.prototype,AH=CH.toString;function TH(e){if(e!=null){try{return AH.call(e)}catch{}try{return e+""}catch{}}return""}var l6=TH,OH=i6,RH=EH,PH=a6,MH=l6,DH=/[\\^$.*+?()[\]{}|]/g,LH=/^\[object .+?Constructor\]$/,FH=Function.prototype,IH=Object.prototype,BH=FH.toString,qH=IH.hasOwnProperty,$H=RegExp("^"+BH.call(qH).replace(DH,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function UH(e){if(!PH(e)||RH(e))return!1;var t=OH(e)?$H:LH;return t.test(MH(e))}var zH=UH;function VH(e,t){return e==null?void 0:e[t]}var HH=VH,WH=zH,YH=HH;function GH(e,t){var s=YH(e,t);return WH(s)?s:void 0}var _c=GH,KH=_c,QH=Ta,XH=KH(QH,"Map"),Mv=XH,ZH=_c,JH=ZH(Object,"create"),dp=JH,kw=dp;function eW(){this.__data__=kw?kw(null):{},this.size=0}var tW=eW;function rW(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var sW=rW,nW=dp,aW="__lodash_hash_undefined__",iW=Object.prototype,lW=iW.hasOwnProperty;function oW(e){var t=this.__data__;if(nW){var s=t[e];return s===aW?void 0:s}return lW.call(t,e)?t[e]:void 0}var cW=oW,dW=dp,uW=Object.prototype,hW=uW.hasOwnProperty;function fW(e){var t=this.__data__;return dW?t[e]!==void 0:hW.call(t,e)}var mW=fW,pW=dp,xW="__lodash_hash_undefined__";function gW(e,t){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=pW&&t===void 0?xW:t,this}var yW=gW,bW=tW,vW=sW,jW=cW,NW=mW,wW=yW;function Sc(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var n=e[t];this.set(n[0],n[1])}}Sc.prototype.clear=bW;Sc.prototype.delete=vW;Sc.prototype.get=jW;Sc.prototype.has=NW;Sc.prototype.set=wW;var _W=Sc,Ew=_W,SW=op,kW=Mv;function EW(){this.size=0,this.__data__={hash:new Ew,map:new(kW||SW),string:new Ew}}var CW=EW;function AW(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var TW=AW,OW=TW;function RW(e,t){var s=e.__data__;return OW(t)?s[typeof t=="string"?"string":"hash"]:s.map}var up=RW,PW=up;function MW(e){var t=PW(this,e).delete(e);return this.size-=t?1:0,t}var DW=MW,LW=up;function FW(e){return LW(this,e).get(e)}var IW=FW,BW=up;function qW(e){return BW(this,e).has(e)}var $W=qW,UW=up;function zW(e,t){var s=UW(this,e),n=s.size;return s.set(e,t),this.size+=s.size==n?0:1,this}var VW=zW,HW=CW,WW=DW,YW=IW,GW=$W,KW=VW;function kc(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var n=e[t];this.set(n[0],n[1])}}kc.prototype.clear=HW;kc.prototype.delete=WW;kc.prototype.get=YW;kc.prototype.has=GW;kc.prototype.set=KW;var o6=kc,QW=op,XW=Mv,ZW=o6,JW=200;function eY(e,t){var s=this.__data__;if(s instanceof QW){var n=s.__data__;if(!XW||n.length<JW-1)return n.push([e,t]),this.size=++s.size,this;s=this.__data__=new ZW(n)}return s.set(e,t),this.size=s.size,this}var tY=eY,rY=op,sY=zV,nY=HV,aY=YV,iY=KV,lY=tY;function Ec(e){var t=this.__data__=new rY(e);this.size=t.size}Ec.prototype.clear=sY;Ec.prototype.delete=nY;Ec.prototype.get=aY;Ec.prototype.has=iY;Ec.prototype.set=lY;var oY=Ec,cY="__lodash_hash_undefined__";function dY(e){return this.__data__.set(e,cY),this}var uY=dY;function hY(e){return this.__data__.has(e)}var fY=hY,mY=o6,pY=uY,xY=fY;function nm(e){var t=-1,s=e==null?0:e.length;for(this.__data__=new mY;++t<s;)this.add(e[t])}nm.prototype.add=nm.prototype.push=pY;nm.prototype.has=xY;var gY=nm;function yY(e,t){for(var s=-1,n=e==null?0:e.length;++s<n;)if(t(e[s],s,e))return!0;return!1}var bY=yY;function vY(e,t){return e.has(t)}var jY=vY,NY=gY,wY=bY,_Y=jY,SY=1,kY=2;function EY(e,t,s,n,a,i){var l=s&SY,o=e.length,c=t.length;if(o!=c&&!(l&&c>o))return!1;var d=i.get(e),u=i.get(t);if(d&&u)return d==t&&u==e;var h=-1,f=!0,m=s&kY?new NY:void 0;for(i.set(e,t),i.set(t,e);++h<o;){var x=e[h],p=t[h];if(n)var j=l?n(p,x,h,t,e,i):n(x,p,h,e,t,i);if(j!==void 0){if(j)continue;f=!1;break}if(m){if(!wY(t,function(v,g){if(!_Y(m,g)&&(x===v||a(x,v,s,n,i)))return m.push(g)})){f=!1;break}}else if(!(x===p||a(x,p,s,n,i))){f=!1;break}}return i.delete(e),i.delete(t),f}var c6=EY,CY=Ta,AY=CY.Uint8Array,TY=AY;function OY(e){var t=-1,s=Array(e.size);return e.forEach(function(n,a){s[++t]=[a,n]}),s}var RY=OY;function PY(e){var t=-1,s=Array(e.size);return e.forEach(function(n){s[++t]=n}),s}var MY=PY,Cw=Pv,Aw=TY,DY=r6,LY=c6,FY=RY,IY=MY,BY=1,qY=2,$Y="[object Boolean]",UY="[object Date]",zY="[object Error]",VY="[object Map]",HY="[object Number]",WY="[object RegExp]",YY="[object Set]",GY="[object String]",KY="[object Symbol]",QY="[object ArrayBuffer]",XY="[object DataView]",Tw=Cw?Cw.prototype:void 0,Ux=Tw?Tw.valueOf:void 0;function ZY(e,t,s,n,a,i,l){switch(s){case XY:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case QY:return!(e.byteLength!=t.byteLength||!i(new Aw(e),new Aw(t)));case $Y:case UY:case HY:return DY(+e,+t);case zY:return e.name==t.name&&e.message==t.message;case WY:case GY:return e==t+"";case VY:var o=FY;case YY:var c=n&BY;if(o||(o=IY),e.size!=t.size&&!c)return!1;var d=l.get(e);if(d)return d==t;n|=qY,l.set(e,t);var u=LY(o(e),o(t),n,a,i,l);return l.delete(e),u;case KY:if(Ux)return Ux.call(e)==Ux.call(t)}return!1}var JY=ZY;function eG(e,t){for(var s=-1,n=t.length,a=e.length;++s<n;)e[a+s]=t[s];return e}var tG=eG,rG=Array.isArray,Dv=rG,sG=tG,nG=Dv;function aG(e,t,s){var n=t(e);return nG(e)?n:sG(n,s(e))}var iG=aG;function lG(e,t){for(var s=-1,n=e==null?0:e.length,a=0,i=[];++s<n;){var l=e[s];t(l,s,e)&&(i[a++]=l)}return i}var oG=lG;function cG(){return[]}var dG=cG,uG=oG,hG=dG,fG=Object.prototype,mG=fG.propertyIsEnumerable,Ow=Object.getOwnPropertySymbols,pG=Ow?function(e){return e==null?[]:(e=Object(e),uG(Ow(e),function(t){return mG.call(e,t)}))}:hG,xG=pG;function gG(e,t){for(var s=-1,n=Array(e);++s<e;)n[s]=t(s);return n}var yG=gG;function bG(e){return e!=null&&typeof e=="object"}var hp=bG,vG=cp,jG=hp,NG="[object Arguments]";function wG(e){return jG(e)&&vG(e)==NG}var _G=wG,Rw=_G,SG=hp,d6=Object.prototype,kG=d6.hasOwnProperty,EG=d6.propertyIsEnumerable,CG=Rw(function(){return arguments}())?Rw:function(e){return SG(e)&&kG.call(e,"callee")&&!EG.call(e,"callee")},AG=CG,am={exports:{}};function TG(){return!1}var OG=TG;am.exports;(function(e,t){var s=Ta,n=OG,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,l=i&&i.exports===a,o=l?s.Buffer:void 0,c=o?o.isBuffer:void 0,d=c||n;e.exports=d})(am,am.exports);var u6=am.exports,RG=9007199254740991,PG=/^(?:0|[1-9]\d*)$/;function MG(e,t){var s=typeof e;return t=t??RG,!!t&&(s=="number"||s!="symbol"&&PG.test(e))&&e>-1&&e%1==0&&e<t}var DG=MG,LG=9007199254740991;function FG(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=LG}var h6=FG,IG=cp,BG=h6,qG=hp,$G="[object Arguments]",UG="[object Array]",zG="[object Boolean]",VG="[object Date]",HG="[object Error]",WG="[object Function]",YG="[object Map]",GG="[object Number]",KG="[object Object]",QG="[object RegExp]",XG="[object Set]",ZG="[object String]",JG="[object WeakMap]",eK="[object ArrayBuffer]",tK="[object DataView]",rK="[object Float32Array]",sK="[object Float64Array]",nK="[object Int8Array]",aK="[object Int16Array]",iK="[object Int32Array]",lK="[object Uint8Array]",oK="[object Uint8ClampedArray]",cK="[object Uint16Array]",dK="[object Uint32Array]",_t={};_t[rK]=_t[sK]=_t[nK]=_t[aK]=_t[iK]=_t[lK]=_t[oK]=_t[cK]=_t[dK]=!0;_t[$G]=_t[UG]=_t[eK]=_t[zG]=_t[tK]=_t[VG]=_t[HG]=_t[WG]=_t[YG]=_t[GG]=_t[KG]=_t[QG]=_t[XG]=_t[ZG]=_t[JG]=!1;function uK(e){return qG(e)&&BG(e.length)&&!!_t[IG(e)]}var hK=uK;function fK(e){return function(t){return e(t)}}var mK=fK,im={exports:{}};im.exports;(function(e,t){var s=s6,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,l=i&&s.process,o=function(){try{var c=a&&a.require&&a.require("util").types;return c||l&&l.binding&&l.binding("util")}catch{}}();e.exports=o})(im,im.exports);var pK=im.exports,xK=hK,gK=mK,Pw=pK,Mw=Pw&&Pw.isTypedArray,yK=Mw?gK(Mw):xK,f6=yK,bK=yG,vK=AG,jK=Dv,NK=u6,wK=DG,_K=f6,SK=Object.prototype,kK=SK.hasOwnProperty;function EK(e,t){var s=jK(e),n=!s&&vK(e),a=!s&&!n&&NK(e),i=!s&&!n&&!a&&_K(e),l=s||n||a||i,o=l?bK(e.length,String):[],c=o.length;for(var d in e)(t||kK.call(e,d))&&!(l&&(d=="length"||a&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||wK(d,c)))&&o.push(d);return o}var CK=EK,AK=Object.prototype;function TK(e){var t=e&&e.constructor,s=typeof t=="function"&&t.prototype||AK;return e===s}var OK=TK;function RK(e,t){return function(s){return e(t(s))}}var PK=RK,MK=PK,DK=MK(Object.keys,Object),LK=DK,FK=OK,IK=LK,BK=Object.prototype,qK=BK.hasOwnProperty;function $K(e){if(!FK(e))return IK(e);var t=[];for(var s in Object(e))qK.call(e,s)&&s!="constructor"&&t.push(s);return t}var UK=$K,zK=i6,VK=h6;function HK(e){return e!=null&&VK(e.length)&&!zK(e)}var WK=HK,YK=CK,GK=UK,KK=WK;function QK(e){return KK(e)?YK(e):GK(e)}var XK=QK,ZK=iG,JK=xG,eQ=XK;function tQ(e){return ZK(e,eQ,JK)}var rQ=tQ,Dw=rQ,sQ=1,nQ=Object.prototype,aQ=nQ.hasOwnProperty;function iQ(e,t,s,n,a,i){var l=s&sQ,o=Dw(e),c=o.length,d=Dw(t),u=d.length;if(c!=u&&!l)return!1;for(var h=c;h--;){var f=o[h];if(!(l?f in t:aQ.call(t,f)))return!1}var m=i.get(e),x=i.get(t);if(m&&x)return m==t&&x==e;var p=!0;i.set(e,t),i.set(t,e);for(var j=l;++h<c;){f=o[h];var v=e[f],g=t[f];if(n)var y=l?n(g,v,f,t,e,i):n(v,g,f,e,t,i);if(!(y===void 0?v===g||a(v,g,s,n,i):y)){p=!1;break}j||(j=f=="constructor")}if(p&&!j){var b=e.constructor,N=t.constructor;b!=N&&"constructor"in e&&"constructor"in t&&!(typeof b=="function"&&b instanceof b&&typeof N=="function"&&N instanceof N)&&(p=!1)}return i.delete(e),i.delete(t),p}var lQ=iQ,oQ=_c,cQ=Ta,dQ=oQ(cQ,"DataView"),uQ=dQ,hQ=_c,fQ=Ta,mQ=hQ(fQ,"Promise"),pQ=mQ,xQ=_c,gQ=Ta,yQ=xQ(gQ,"Set"),bQ=yQ,vQ=_c,jQ=Ta,NQ=vQ(jQ,"WeakMap"),wQ=NQ,dy=uQ,uy=Mv,hy=pQ,fy=bQ,my=wQ,m6=cp,Cc=l6,Lw="[object Map]",_Q="[object Object]",Fw="[object Promise]",Iw="[object Set]",Bw="[object WeakMap]",qw="[object DataView]",SQ=Cc(dy),kQ=Cc(uy),EQ=Cc(hy),CQ=Cc(fy),AQ=Cc(my),Ui=m6;(dy&&Ui(new dy(new ArrayBuffer(1)))!=qw||uy&&Ui(new uy)!=Lw||hy&&Ui(hy.resolve())!=Fw||fy&&Ui(new fy)!=Iw||my&&Ui(new my)!=Bw)&&(Ui=function(e){var t=m6(e),s=t==_Q?e.constructor:void 0,n=s?Cc(s):"";if(n)switch(n){case SQ:return qw;case kQ:return Lw;case EQ:return Fw;case CQ:return Iw;case AQ:return Bw}return t});var TQ=Ui,zx=oY,OQ=c6,RQ=JY,PQ=lQ,$w=TQ,Uw=Dv,zw=u6,MQ=f6,DQ=1,Vw="[object Arguments]",Hw="[object Array]",yh="[object Object]",LQ=Object.prototype,Ww=LQ.hasOwnProperty;function FQ(e,t,s,n,a,i){var l=Uw(e),o=Uw(t),c=l?Hw:$w(e),d=o?Hw:$w(t);c=c==Vw?yh:c,d=d==Vw?yh:d;var u=c==yh,h=d==yh,f=c==d;if(f&&zw(e)){if(!zw(t))return!1;l=!0,u=!1}if(f&&!u)return i||(i=new zx),l||MQ(e)?OQ(e,t,s,n,a,i):RQ(e,t,c,s,n,a,i);if(!(s&DQ)){var m=u&&Ww.call(e,"__wrapped__"),x=h&&Ww.call(t,"__wrapped__");if(m||x){var p=m?e.value():e,j=x?t.value():t;return i||(i=new zx),a(p,j,s,n,i)}}return f?(i||(i=new zx),PQ(e,t,s,n,a,i)):!1}var IQ=FQ,BQ=IQ,Yw=hp;function p6(e,t,s,n,a){return e===t?!0:e==null||t==null||!Yw(e)&&!Yw(t)?e!==e&&t!==t:BQ(e,t,s,n,p6,a)}var qQ=p6,$Q=qQ;function UQ(e,t){return $Q(e,t)}var zQ=UQ,x6={exports:{}};(function(e,t){(function(n,a){e.exports=a()})(typeof self<"u"?self:kt,function(){return function(s){var n={};function a(i){if(n[i])return n[i].exports;var l=n[i]={i,l:!1,exports:{}};return s[i].call(l.exports,l,l.exports,a),l.l=!0,l.exports}return a.m=s,a.c=n,a.d=function(i,l,o){a.o(i,l)||Object.defineProperty(i,l,{configurable:!1,enumerable:!0,get:o})},a.n=function(i){var l=i&&i.__esModule?function(){return i.default}:function(){return i};return a.d(l,"a",l),l},a.o=function(i,l){return Object.prototype.hasOwnProperty.call(i,l)},a.p="",a(a.s=109)}([function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=a(17),l=a(18),o=a(19),c=a(45),d=a(46),u=a(47),h=a(48),f=a(49),m=a(12),x=a(32),p=a(33),j=a(31),v=a(1),g={Scope:v.Scope,create:v.create,find:v.find,query:v.query,register:v.register,Container:i.default,Format:l.default,Leaf:o.default,Embed:h.default,Scroll:c.default,Block:u.default,Inline:d.default,Text:f.default,Attributor:{Attribute:m.default,Class:x.default,Style:p.default,Store:j.default}};n.default=g},function(s,n,a){var i=this&&this.__extends||function(){var j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var y in g)g.hasOwnProperty(y)&&(v[y]=g[y])};return function(v,g){j(v,g);function y(){this.constructor=v}v.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=function(j){i(v,j);function v(g){var y=this;return g="[Parchment] "+g,y=j.call(this,g)||this,y.message=g,y.name=y.constructor.name,y}return v}(Error);n.ParchmentError=l;var o={},c={},d={},u={};n.DATA_KEY="__blot";var h;(function(j){j[j.TYPE=3]="TYPE",j[j.LEVEL=12]="LEVEL",j[j.ATTRIBUTE=13]="ATTRIBUTE",j[j.BLOT=14]="BLOT",j[j.INLINE=7]="INLINE",j[j.BLOCK=11]="BLOCK",j[j.BLOCK_BLOT=10]="BLOCK_BLOT",j[j.INLINE_BLOT=6]="INLINE_BLOT",j[j.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",j[j.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",j[j.ANY=15]="ANY"})(h=n.Scope||(n.Scope={}));function f(j,v){var g=x(j);if(g==null)throw new l("Unable to create "+j+" blot");var y=g,b=j instanceof Node||j.nodeType===Node.TEXT_NODE?j:y.create(v);return new y(b,v)}n.create=f;function m(j,v){return v===void 0&&(v=!1),j==null?null:j[n.DATA_KEY]!=null?j[n.DATA_KEY].blot:v?m(j.parentNode,v):null}n.find=m;function x(j,v){v===void 0&&(v=h.ANY);var g;if(typeof j=="string")g=u[j]||o[j];else if(j instanceof Text||j.nodeType===Node.TEXT_NODE)g=u.text;else if(typeof j=="number")j&h.LEVEL&h.BLOCK?g=u.block:j&h.LEVEL&h.INLINE&&(g=u.inline);else if(j instanceof HTMLElement){var y=(j.getAttribute("class")||"").split(/\s+/);for(var b in y)if(g=c[y[b]],g)break;g=g||d[j.tagName]}return g==null?null:v&h.LEVEL&g.scope&&v&h.TYPE&g.scope?g:null}n.query=x;function p(){for(var j=[],v=0;v<arguments.length;v++)j[v]=arguments[v];if(j.length>1)return j.map(function(b){return p(b)});var g=j[0];if(typeof g.blotName!="string"&&typeof g.attrName!="string")throw new l("Invalid definition");if(g.blotName==="abstract")throw new l("Cannot register abstract class");if(u[g.blotName||g.attrName]=g,typeof g.keyName=="string")o[g.keyName]=g;else if(g.className!=null&&(c[g.className]=g),g.tagName!=null){Array.isArray(g.tagName)?g.tagName=g.tagName.map(function(b){return b.toUpperCase()}):g.tagName=g.tagName.toUpperCase();var y=Array.isArray(g.tagName)?g.tagName:[g.tagName];y.forEach(function(b){(d[b]==null||g.className==null)&&(d[b]=g)})}return g}n.register=p},function(s,n,a){var i=a(51),l=a(11),o=a(3),c=a(20),d="\0",u=function(h){Array.isArray(h)?this.ops=h:h!=null&&Array.isArray(h.ops)?this.ops=h.ops:this.ops=[]};u.prototype.insert=function(h,f){var m={};return h.length===0?this:(m.insert=h,f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(m.attributes=f),this.push(m))},u.prototype.delete=function(h){return h<=0?this:this.push({delete:h})},u.prototype.retain=function(h,f){if(h<=0)return this;var m={retain:h};return f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(m.attributes=f),this.push(m)},u.prototype.push=function(h){var f=this.ops.length,m=this.ops[f-1];if(h=o(!0,{},h),typeof m=="object"){if(typeof h.delete=="number"&&typeof m.delete=="number")return this.ops[f-1]={delete:m.delete+h.delete},this;if(typeof m.delete=="number"&&h.insert!=null&&(f-=1,m=this.ops[f-1],typeof m!="object"))return this.ops.unshift(h),this;if(l(h.attributes,m.attributes)){if(typeof h.insert=="string"&&typeof m.insert=="string")return this.ops[f-1]={insert:m.insert+h.insert},typeof h.attributes=="object"&&(this.ops[f-1].attributes=h.attributes),this;if(typeof h.retain=="number"&&typeof m.retain=="number")return this.ops[f-1]={retain:m.retain+h.retain},typeof h.attributes=="object"&&(this.ops[f-1].attributes=h.attributes),this}}return f===this.ops.length?this.ops.push(h):this.ops.splice(f,0,h),this},u.prototype.chop=function(){var h=this.ops[this.ops.length-1];return h&&h.retain&&!h.attributes&&this.ops.pop(),this},u.prototype.filter=function(h){return this.ops.filter(h)},u.prototype.forEach=function(h){this.ops.forEach(h)},u.prototype.map=function(h){return this.ops.map(h)},u.prototype.partition=function(h){var f=[],m=[];return this.forEach(function(x){var p=h(x)?f:m;p.push(x)}),[f,m]},u.prototype.reduce=function(h,f){return this.ops.reduce(h,f)},u.prototype.changeLength=function(){return this.reduce(function(h,f){return f.insert?h+c.length(f):f.delete?h-f.delete:h},0)},u.prototype.length=function(){return this.reduce(function(h,f){return h+c.length(f)},0)},u.prototype.slice=function(h,f){h=h||0,typeof f!="number"&&(f=1/0);for(var m=[],x=c.iterator(this.ops),p=0;p<f&&x.hasNext();){var j;p<h?j=x.next(h-p):(j=x.next(f-p),m.push(j)),p+=c.length(j)}return new u(m)},u.prototype.compose=function(h){var f=c.iterator(this.ops),m=c.iterator(h.ops),x=[],p=m.peek();if(p!=null&&typeof p.retain=="number"&&p.attributes==null){for(var j=p.retain;f.peekType()==="insert"&&f.peekLength()<=j;)j-=f.peekLength(),x.push(f.next());p.retain-j>0&&m.next(p.retain-j)}for(var v=new u(x);f.hasNext()||m.hasNext();)if(m.peekType()==="insert")v.push(m.next());else if(f.peekType()==="delete")v.push(f.next());else{var g=Math.min(f.peekLength(),m.peekLength()),y=f.next(g),b=m.next(g);if(typeof b.retain=="number"){var N={};typeof y.retain=="number"?N.retain=g:N.insert=y.insert;var k=c.attributes.compose(y.attributes,b.attributes,typeof y.retain=="number");if(k&&(N.attributes=k),v.push(N),!m.hasNext()&&l(v.ops[v.ops.length-1],N)){var w=new u(f.rest());return v.concat(w).chop()}}else typeof b.delete=="number"&&typeof y.retain=="number"&&v.push(b)}return v.chop()},u.prototype.concat=function(h){var f=new u(this.ops.slice());return h.ops.length>0&&(f.push(h.ops[0]),f.ops=f.ops.concat(h.ops.slice(1))),f},u.prototype.diff=function(h,f){if(this.ops===h.ops)return new u;var m=[this,h].map(function(g){return g.map(function(y){if(y.insert!=null)return typeof y.insert=="string"?y.insert:d;var b=g===h?"on":"with";throw new Error("diff() called "+b+" non-document")}).join("")}),x=new u,p=i(m[0],m[1],f),j=c.iterator(this.ops),v=c.iterator(h.ops);return p.forEach(function(g){for(var y=g[1].length;y>0;){var b=0;switch(g[0]){case i.INSERT:b=Math.min(v.peekLength(),y),x.push(v.next(b));break;case i.DELETE:b=Math.min(y,j.peekLength()),j.next(b),x.delete(b);break;case i.EQUAL:b=Math.min(j.peekLength(),v.peekLength(),y);var N=j.next(b),k=v.next(b);l(N.insert,k.insert)?x.retain(b,c.attributes.diff(N.attributes,k.attributes)):x.push(k).delete(b);break}y-=b}}),x.chop()},u.prototype.eachLine=function(h,f){f=f||`
`;for(var m=c.iterator(this.ops),x=new u,p=0;m.hasNext();){if(m.peekType()!=="insert")return;var j=m.peek(),v=c.length(j)-m.peekLength(),g=typeof j.insert=="string"?j.insert.indexOf(f,v)-v:-1;if(g<0)x.push(m.next());else if(g>0)x.push(m.next(g));else{if(h(x,m.next(1).attributes||{},p)===!1)return;p+=1,x=new u}}x.length()>0&&h(x,{},p)},u.prototype.transform=function(h,f){if(f=!!f,typeof h=="number")return this.transformPosition(h,f);for(var m=c.iterator(this.ops),x=c.iterator(h.ops),p=new u;m.hasNext()||x.hasNext();)if(m.peekType()==="insert"&&(f||x.peekType()!=="insert"))p.retain(c.length(m.next()));else if(x.peekType()==="insert")p.push(x.next());else{var j=Math.min(m.peekLength(),x.peekLength()),v=m.next(j),g=x.next(j);if(v.delete)continue;g.delete?p.push(g):p.retain(j,c.attributes.transform(v.attributes,g.attributes,f))}return p.chop()},u.prototype.transformPosition=function(h,f){f=!!f;for(var m=c.iterator(this.ops),x=0;m.hasNext()&&x<=h;){var p=m.peekLength(),j=m.peekType();if(m.next(),j==="delete"){h-=Math.min(p,h-x);continue}else j==="insert"&&(x<h||!f)&&(h+=p);x+=p}return h},s.exports=u},function(s,n){var a=Object.prototype.hasOwnProperty,i=Object.prototype.toString,l=Object.defineProperty,o=Object.getOwnPropertyDescriptor,c=function(m){return typeof Array.isArray=="function"?Array.isArray(m):i.call(m)==="[object Array]"},d=function(m){if(!m||i.call(m)!=="[object Object]")return!1;var x=a.call(m,"constructor"),p=m.constructor&&m.constructor.prototype&&a.call(m.constructor.prototype,"isPrototypeOf");if(m.constructor&&!x&&!p)return!1;var j;for(j in m);return typeof j>"u"||a.call(m,j)},u=function(m,x){l&&x.name==="__proto__"?l(m,x.name,{enumerable:!0,configurable:!0,value:x.newValue,writable:!0}):m[x.name]=x.newValue},h=function(m,x){if(x==="__proto__")if(a.call(m,x)){if(o)return o(m,x).value}else return;return m[x]};s.exports=function f(){var m,x,p,j,v,g,y=arguments[0],b=1,N=arguments.length,k=!1;for(typeof y=="boolean"&&(k=y,y=arguments[1]||{},b=2),(y==null||typeof y!="object"&&typeof y!="function")&&(y={});b<N;++b)if(m=arguments[b],m!=null)for(x in m)p=h(y,x),j=h(m,x),y!==j&&(k&&j&&(d(j)||(v=c(j)))?(v?(v=!1,g=p&&c(p)?p:[]):g=p&&d(p)?p:{},u(y,{name:x,newValue:f(k,g,j)})):typeof j<"u"&&u(y,{name:x,newValue:j}));return y}},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BlockEmbed=n.bubbleFormats=void 0;var i=function(){function A(C,D){for(var M=0;M<D.length;M++){var L=D[M];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(C,L.key,L)}}return function(C,D,M){return D&&A(C.prototype,D),M&&A(C,M),C}}(),l=function A(C,D,M){C===null&&(C=Function.prototype);var L=Object.getOwnPropertyDescriptor(C,D);if(L===void 0){var z=Object.getPrototypeOf(C);return z===null?void 0:A(z,D,M)}else{if("value"in L)return L.value;var Y=L.get;return Y===void 0?void 0:Y.call(M)}},o=a(3),c=y(o),d=a(2),u=y(d),h=a(0),f=y(h),m=a(16),x=y(m),p=a(6),j=y(p),v=a(7),g=y(v);function y(A){return A&&A.__esModule?A:{default:A}}function b(A,C){if(!(A instanceof C))throw new TypeError("Cannot call a class as a function")}function N(A,C){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:A}function k(A,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);A.prototype=Object.create(C&&C.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(A,C):A.__proto__=C)}var w=1,_=function(A){k(C,A);function C(){return b(this,C),N(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return i(C,[{key:"attach",value:function(){l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"attach",this).call(this),this.attributes=new f.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new u.default().insert(this.value(),(0,c.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(M,L){var z=f.default.query(M,f.default.Scope.BLOCK_ATTRIBUTE);z!=null&&this.attributes.attribute(z,L)}},{key:"formatAt",value:function(M,L,z,Y){this.format(z,Y)}},{key:"insertAt",value:function(M,L,z){if(typeof L=="string"&&L.endsWith(`
`)){var Y=f.default.create(S.blotName);this.parent.insertBefore(Y,M===0?this:this.next),Y.insertAt(0,L.slice(0,-1))}else l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertAt",this).call(this,M,L,z)}}]),C}(f.default.Embed);_.scope=f.default.Scope.BLOCK_BLOT;var S=function(A){k(C,A);function C(D){b(this,C);var M=N(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,D));return M.cache={},M}return i(C,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(f.default.Leaf).reduce(function(M,L){return L.length()===0?M:M.insert(L.value(),E(L))},new u.default).insert(`
`,E(this))),this.cache.delta}},{key:"deleteAt",value:function(M,L){l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"deleteAt",this).call(this,M,L),this.cache={}}},{key:"formatAt",value:function(M,L,z,Y){L<=0||(f.default.query(z,f.default.Scope.BLOCK)?M+L===this.length()&&this.format(z,Y):l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"formatAt",this).call(this,M,Math.min(L,this.length()-M-1),z,Y),this.cache={})}},{key:"insertAt",value:function(M,L,z){if(z!=null)return l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertAt",this).call(this,M,L,z);if(L.length!==0){var Y=L.split(`
`),X=Y.shift();X.length>0&&(M<this.length()-1||this.children.tail==null?l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertAt",this).call(this,Math.min(M,this.length()-1),X):this.children.tail.insertAt(this.children.tail.length(),X),this.cache={});var Z=this;Y.reduce(function(W,F){return Z=Z.split(W,!0),Z.insertAt(0,F),F.length},M+X.length)}}},{key:"insertBefore",value:function(M,L){var z=this.children.head;l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertBefore",this).call(this,M,L),z instanceof x.default&&z.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"length",this).call(this)+w),this.cache.length}},{key:"moveChildren",value:function(M,L){l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"moveChildren",this).call(this,M,L),this.cache={}}},{key:"optimize",value:function(M){l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"optimize",this).call(this,M),this.cache={}}},{key:"path",value:function(M){return l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"path",this).call(this,M,!0)}},{key:"removeChild",value:function(M){l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"removeChild",this).call(this,M),this.cache={}}},{key:"split",value:function(M){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(L&&(M===0||M>=this.length()-w)){var z=this.clone();return M===0?(this.parent.insertBefore(z,this),this):(this.parent.insertBefore(z,this.next),z)}else{var Y=l(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"split",this).call(this,M,L);return this.cache={},Y}}}]),C}(f.default.Block);S.blotName="block",S.tagName="P",S.defaultChild="break",S.allowedChildren=[j.default,f.default.Embed,g.default];function E(A){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return A==null||(typeof A.formats=="function"&&(C=(0,c.default)(C,A.formats())),A.parent==null||A.parent.blotName=="scroll"||A.parent.statics.scope!==A.statics.scope)?C:E(A.parent,C)}n.bubbleFormats=E,n.BlockEmbed=_,n.default=S},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.overload=n.expandConfig=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},l=function(){function Z(W,F){var q=[],I=!0,$=!1,G=void 0;try{for(var R=W[Symbol.iterator](),B;!(I=(B=R.next()).done)&&(q.push(B.value),!(F&&q.length===F));I=!0);}catch(Q){$=!0,G=Q}finally{try{!I&&R.return&&R.return()}finally{if($)throw G}}return q}return function(W,F){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return Z(W,F);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function Z(W,F){for(var q=0;q<F.length;q++){var I=F[q];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(W,I.key,I)}}return function(W,F,q){return F&&Z(W.prototype,F),q&&Z(W,q),W}}();a(50);var c=a(2),d=E(c),u=a(14),h=E(u),f=a(8),m=E(f),x=a(9),p=E(x),j=a(0),v=E(j),g=a(15),y=E(g),b=a(3),N=E(b),k=a(10),w=E(k),_=a(34),S=E(_);function E(Z){return Z&&Z.__esModule?Z:{default:Z}}function A(Z,W,F){return W in Z?Object.defineProperty(Z,W,{value:F,enumerable:!0,configurable:!0,writable:!0}):Z[W]=F,Z}function C(Z,W){if(!(Z instanceof W))throw new TypeError("Cannot call a class as a function")}var D=(0,w.default)("quill"),M=function(){o(Z,null,[{key:"debug",value:function(F){F===!0&&(F="log"),w.default.level(F)}},{key:"find",value:function(F){return F.__quill||v.default.find(F)}},{key:"import",value:function(F){return this.imports[F]==null&&D.error("Cannot import "+F+". Are you sure it was registered?"),this.imports[F]}},{key:"register",value:function(F,q){var I=this,$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof F!="string"){var G=F.attrName||F.blotName;typeof G=="string"?this.register("formats/"+G,F,q):Object.keys(F).forEach(function(R){I.register(R,F[R],q)})}else this.imports[F]!=null&&!$&&D.warn("Overwriting "+F+" with",q),this.imports[F]=q,(F.startsWith("blots/")||F.startsWith("formats/"))&&q.blotName!=="abstract"?v.default.register(q):F.startsWith("modules")&&typeof q.register=="function"&&q.register()}}]);function Z(W){var F=this,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(C(this,Z),this.options=L(W,q),this.container=this.options.container,this.container==null)return D.error("Invalid Quill container",W);this.options.debug&&Z.debug(this.options.debug);var I=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new m.default,this.scroll=v.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new h.default(this.scroll),this.selection=new y.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(m.default.events.EDITOR_CHANGE,function(G){G===m.default.events.TEXT_CHANGE&&F.root.classList.toggle("ql-blank",F.editor.isBlank())}),this.emitter.on(m.default.events.SCROLL_UPDATE,function(G,R){var B=F.selection.lastRange,Q=B&&B.length===0?B.index:void 0;z.call(F,function(){return F.editor.update(null,R,Q)},G)});var $=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+I+"<p><br></p></div>");this.setContents($),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return o(Z,[{key:"addContainer",value:function(F){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof F=="string"){var I=F;F=document.createElement("div"),F.classList.add(I)}return this.container.insertBefore(F,q),F}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(F,q,I){var $=this,G=Y(F,q,I),R=l(G,4);return F=R[0],q=R[1],I=R[3],z.call(this,function(){return $.editor.deleteText(F,q)},I,F,-1*q)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(F),this.container.classList.toggle("ql-disabled",!F)}},{key:"focus",value:function(){var F=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=F,this.scrollIntoView()}},{key:"format",value:function(F,q){var I=this,$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:m.default.sources.API;return z.call(this,function(){var G=I.getSelection(!0),R=new d.default;if(G==null)return R;if(v.default.query(F,v.default.Scope.BLOCK))R=I.editor.formatLine(G.index,G.length,A({},F,q));else{if(G.length===0)return I.selection.format(F,q),R;R=I.editor.formatText(G.index,G.length,A({},F,q))}return I.setSelection(G,m.default.sources.SILENT),R},$)}},{key:"formatLine",value:function(F,q,I,$,G){var R=this,B=void 0,Q=Y(F,q,I,$,G),te=l(Q,4);return F=te[0],q=te[1],B=te[2],G=te[3],z.call(this,function(){return R.editor.formatLine(F,q,B)},G,F,0)}},{key:"formatText",value:function(F,q,I,$,G){var R=this,B=void 0,Q=Y(F,q,I,$,G),te=l(Q,4);return F=te[0],q=te[1],B=te[2],G=te[3],z.call(this,function(){return R.editor.formatText(F,q,B)},G,F,0)}},{key:"getBounds",value:function(F){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,I=void 0;typeof F=="number"?I=this.selection.getBounds(F,q):I=this.selection.getBounds(F.index,F.length);var $=this.container.getBoundingClientRect();return{bottom:I.bottom-$.top,height:I.height,left:I.left-$.left,right:I.right-$.left,top:I.top-$.top,width:I.width}}},{key:"getContents",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-F,I=Y(F,q),$=l(I,2);return F=$[0],q=$[1],this.editor.getContents(F,q)}},{key:"getFormat",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof F=="number"?this.editor.getFormat(F,q):this.editor.getFormat(F.index,F.length)}},{key:"getIndex",value:function(F){return F.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(F){return this.scroll.leaf(F)}},{key:"getLine",value:function(F){return this.scroll.line(F)}},{key:"getLines",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof F!="number"?this.scroll.lines(F.index,F.length):this.scroll.lines(F,q)}},{key:"getModule",value:function(F){return this.theme.modules[F]}},{key:"getSelection",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return F&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-F,I=Y(F,q),$=l(I,2);return F=$[0],q=$[1],this.editor.getText(F,q)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(F,q,I){var $=this,G=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Z.sources.API;return z.call(this,function(){return $.editor.insertEmbed(F,q,I)},G,F)}},{key:"insertText",value:function(F,q,I,$,G){var R=this,B=void 0,Q=Y(F,0,I,$,G),te=l(Q,4);return F=te[0],B=te[2],G=te[3],z.call(this,function(){return R.editor.insertText(F,q,B)},G,F,q.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(F,q,I){this.clipboard.dangerouslyPasteHTML(F,q,I)}},{key:"removeFormat",value:function(F,q,I){var $=this,G=Y(F,q,I),R=l(G,4);return F=R[0],q=R[1],I=R[3],z.call(this,function(){return $.editor.removeFormat(F,q)},I,F)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(F){var q=this,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m.default.sources.API;return z.call(this,function(){F=new d.default(F);var $=q.getLength(),G=q.editor.deleteText(0,$),R=q.editor.applyDelta(F),B=R.ops[R.ops.length-1];B!=null&&typeof B.insert=="string"&&B.insert[B.insert.length-1]===`
`&&(q.editor.deleteText(q.getLength()-1,1),R.delete(1));var Q=G.compose(R);return Q},I)}},{key:"setSelection",value:function(F,q,I){if(F==null)this.selection.setRange(null,q||Z.sources.API);else{var $=Y(F,q,I),G=l($,4);F=G[0],q=G[1],I=G[3],this.selection.setRange(new g.Range(F,q),I),I!==m.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(F){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m.default.sources.API,I=new d.default().insert(F);return this.setContents(I,q)}},{key:"update",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m.default.sources.USER,q=this.scroll.update(F);return this.selection.update(F),q}},{key:"updateContents",value:function(F){var q=this,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m.default.sources.API;return z.call(this,function(){return F=new d.default(F),q.editor.applyDelta(F,I)},I,!0)}}]),Z}();M.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},M.events=m.default.events,M.sources=m.default.sources,M.version="1.3.7",M.imports={delta:d.default,parchment:v.default,"core/module":p.default,"core/theme":S.default};function L(Z,W){if(W=(0,N.default)(!0,{container:Z,modules:{clipboard:!0,keyboard:!0,history:!0}},W),!W.theme||W.theme===M.DEFAULTS.theme)W.theme=S.default;else if(W.theme=M.import("themes/"+W.theme),W.theme==null)throw new Error("Invalid theme "+W.theme+". Did you register it?");var F=(0,N.default)(!0,{},W.theme.DEFAULTS);[F,W].forEach(function($){$.modules=$.modules||{},Object.keys($.modules).forEach(function(G){$.modules[G]===!0&&($.modules[G]={})})});var q=Object.keys(F.modules).concat(Object.keys(W.modules)),I=q.reduce(function($,G){var R=M.import("modules/"+G);return R==null?D.error("Cannot load "+G+" module. Are you sure you registered it?"):$[G]=R.DEFAULTS||{},$},{});return W.modules!=null&&W.modules.toolbar&&W.modules.toolbar.constructor!==Object&&(W.modules.toolbar={container:W.modules.toolbar}),W=(0,N.default)(!0,{},M.DEFAULTS,{modules:I},F,W),["bounds","container","scrollingContainer"].forEach(function($){typeof W[$]=="string"&&(W[$]=document.querySelector(W[$]))}),W.modules=Object.keys(W.modules).reduce(function($,G){return W.modules[G]&&($[G]=W.modules[G]),$},{}),W}function z(Z,W,F,q){if(this.options.strict&&!this.isEnabled()&&W===m.default.sources.USER)return new d.default;var I=F==null?null:this.getSelection(),$=this.editor.delta,G=Z();if(I!=null&&(F===!0&&(F=I.index),q==null?I=X(I,G,W):q!==0&&(I=X(I,F,q,W)),this.setSelection(I,m.default.sources.SILENT)),G.length()>0){var R,B=[m.default.events.TEXT_CHANGE,G,$,W];if((R=this.emitter).emit.apply(R,[m.default.events.EDITOR_CHANGE].concat(B)),W!==m.default.sources.SILENT){var Q;(Q=this.emitter).emit.apply(Q,B)}}return G}function Y(Z,W,F,q,I){var $={};return typeof Z.index=="number"&&typeof Z.length=="number"?typeof W!="number"?(I=q,q=F,F=W,W=Z.length,Z=Z.index):(W=Z.length,Z=Z.index):typeof W!="number"&&(I=q,q=F,F=W,W=0),(typeof F>"u"?"undefined":i(F))==="object"?($=F,I=q):typeof F=="string"&&(q!=null?$[F]=q:I=F),I=I||m.default.sources.API,[Z,W,$,I]}function X(Z,W,F,q){if(Z==null)return null;var I=void 0,$=void 0;if(W instanceof d.default){var G=[Z.index,Z.index+Z.length].map(function(te){return W.transformPosition(te,q!==m.default.sources.USER)}),R=l(G,2);I=R[0],$=R[1]}else{var B=[Z.index,Z.index+Z.length].map(function(te){return te<W||te===W&&q===m.default.sources.USER?te:F>=0?te+F:Math.max(W,te+F)}),Q=l(B,2);I=Q[0],$=Q[1]}return new g.Range(I,$-I)}n.expandConfig=L,n.overload=Y,n.default=M},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function j(v,g){for(var y=0;y<g.length;y++){var b=g[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,g,y){return g&&j(v.prototype,g),y&&j(v,y),v}}(),l=function j(v,g,y){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,g);if(b===void 0){var N=Object.getPrototypeOf(v);return N===null?void 0:j(N,g,y)}else{if("value"in b)return b.value;var k=b.get;return k===void 0?void 0:k.call(y)}},o=a(7),c=h(o),d=a(0),u=h(d);function h(j){return j&&j.__esModule?j:{default:j}}function f(j,v){if(!(j instanceof v))throw new TypeError("Cannot call a class as a function")}function m(j,v){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:j}function x(j,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);j.prototype=Object.create(v&&v.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(j,v):j.__proto__=v)}var p=function(j){x(v,j);function v(){return f(this,v),m(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"formatAt",value:function(y,b,N,k){if(v.compare(this.statics.blotName,N)<0&&u.default.query(N,u.default.Scope.BLOT)){var w=this.isolate(y,b);k&&w.wrap(N,k)}else l(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"formatAt",this).call(this,y,b,N,k)}},{key:"optimize",value:function(y){if(l(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,y),this.parent instanceof v&&v.compare(this.statics.blotName,this.parent.statics.blotName)>0){var b=this.parent.isolate(this.offset(),this.length());this.moveChildren(b),b.wrap(this)}}}],[{key:"compare",value:function(y,b){var N=v.order.indexOf(y),k=v.order.indexOf(b);return N>=0||k>=0?N-k:y===b?0:y<b?-1:1}}]),v}(u.default.Inline);p.allowedChildren=[p,u.default.Embed,c.default],p.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],n.default=p},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=a(0),l=o(i);function o(f){return f&&f.__esModule?f:{default:f}}function c(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")}function d(f,m){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:f}function u(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(f,m):f.__proto__=m)}var h=function(f){u(m,f);function m(){return c(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m}(l.default.Text);n.default=h},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function g(y,b){for(var N=0;N<b.length;N++){var k=b[N];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(y,k.key,k)}}return function(y,b,N){return b&&g(y.prototype,b),N&&g(y,N),y}}(),l=function g(y,b,N){y===null&&(y=Function.prototype);var k=Object.getOwnPropertyDescriptor(y,b);if(k===void 0){var w=Object.getPrototypeOf(y);return w===null?void 0:g(w,b,N)}else{if("value"in k)return k.value;var _=k.get;return _===void 0?void 0:_.call(N)}},o=a(54),c=h(o),d=a(10),u=h(d);function h(g){return g&&g.__esModule?g:{default:g}}function f(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}function m(g,y){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:g}function x(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);g.prototype=Object.create(y&&y.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(g,y):g.__proto__=y)}var p=(0,u.default)("quill:events"),j=["selectionchange","mousedown","mouseup","click"];j.forEach(function(g){document.addEventListener(g,function(){for(var y=arguments.length,b=Array(y),N=0;N<y;N++)b[N]=arguments[N];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(k){if(k.__quill&&k.__quill.emitter){var w;(w=k.__quill.emitter).handleDOM.apply(w,b)}})})});var v=function(g){x(y,g);function y(){f(this,y);var b=m(this,(y.__proto__||Object.getPrototypeOf(y)).call(this));return b.listeners={},b.on("error",p.error),b}return i(y,[{key:"emit",value:function(){p.log.apply(p,arguments),l(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(N){for(var k=arguments.length,w=Array(k>1?k-1:0),_=1;_<k;_++)w[_-1]=arguments[_];(this.listeners[N.type]||[]).forEach(function(S){var E=S.node,A=S.handler;(N.target===E||E.contains(N.target))&&A.apply(void 0,[N].concat(w))})}},{key:"listenDOM",value:function(N,k,w){this.listeners[N]||(this.listeners[N]=[]),this.listeners[N].push({node:k,handler:w})}}]),y}(c.default);v.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},v.sources={API:"api",SILENT:"silent",USER:"user"},n.default=v},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});function i(o,c){if(!(o instanceof c))throw new TypeError("Cannot call a class as a function")}var l=function o(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i(this,o),this.quill=c,this.options=d};l.DEFAULTS={},n.default=l},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=["error","warn","log","info"],l="warn";function o(d){if(i.indexOf(d)<=i.indexOf(l)){for(var u,h=arguments.length,f=Array(h>1?h-1:0),m=1;m<h;m++)f[m-1]=arguments[m];(u=console)[d].apply(u,f)}}function c(d){return i.reduce(function(u,h){return u[h]=o.bind(console,h,d),u},{})}o.level=c.level=function(d){l=d},n.default=c},function(s,n,a){var i=Array.prototype.slice,l=a(52),o=a(53),c=s.exports=function(f,m,x){return x||(x={}),f===m?!0:f instanceof Date&&m instanceof Date?f.getTime()===m.getTime():!f||!m||typeof f!="object"&&typeof m!="object"?x.strict?f===m:f==m:h(f,m,x)};function d(f){return f==null}function u(f){return!(!f||typeof f!="object"||typeof f.length!="number"||typeof f.copy!="function"||typeof f.slice!="function"||f.length>0&&typeof f[0]!="number")}function h(f,m,x){var p,j;if(d(f)||d(m)||f.prototype!==m.prototype)return!1;if(o(f))return o(m)?(f=i.call(f),m=i.call(m),c(f,m,x)):!1;if(u(f)){if(!u(m)||f.length!==m.length)return!1;for(p=0;p<f.length;p++)if(f[p]!==m[p])return!1;return!0}try{var v=l(f),g=l(m)}catch{return!1}if(v.length!=g.length)return!1;for(v.sort(),g.sort(),p=v.length-1;p>=0;p--)if(v[p]!=g[p])return!1;for(p=v.length-1;p>=0;p--)if(j=v[p],!c(f[j],m[j],x))return!1;return typeof f==typeof m}},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=a(1),l=function(){function o(c,d,u){u===void 0&&(u={}),this.attrName=c,this.keyName=d;var h=i.Scope.TYPE&i.Scope.ATTRIBUTE;u.scope!=null?this.scope=u.scope&i.Scope.LEVEL|h:this.scope=i.Scope.ATTRIBUTE,u.whitelist!=null&&(this.whitelist=u.whitelist)}return o.keys=function(c){return[].map.call(c.attributes,function(d){return d.name})},o.prototype.add=function(c,d){return this.canAdd(c,d)?(c.setAttribute(this.keyName,d),!0):!1},o.prototype.canAdd=function(c,d){var u=i.query(c,i.Scope.BLOT&(this.scope|i.Scope.TYPE));return u==null?!1:this.whitelist==null?!0:typeof d=="string"?this.whitelist.indexOf(d.replace(/["']/g,""))>-1:this.whitelist.indexOf(d)>-1},o.prototype.remove=function(c){c.removeAttribute(this.keyName)},o.prototype.value=function(c){var d=c.getAttribute(this.keyName);return this.canAdd(c,d)&&d?d:""},o}();n.default=l},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Code=void 0;var i=function(){function _(S,E){var A=[],C=!0,D=!1,M=void 0;try{for(var L=S[Symbol.iterator](),z;!(C=(z=L.next()).done)&&(A.push(z.value),!(E&&A.length===E));C=!0);}catch(Y){D=!0,M=Y}finally{try{!C&&L.return&&L.return()}finally{if(D)throw M}}return A}return function(S,E){if(Array.isArray(S))return S;if(Symbol.iterator in Object(S))return _(S,E);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function _(S,E){for(var A=0;A<E.length;A++){var C=E[A];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(S,C.key,C)}}return function(S,E,A){return E&&_(S.prototype,E),A&&_(S,A),S}}(),o=function _(S,E,A){S===null&&(S=Function.prototype);var C=Object.getOwnPropertyDescriptor(S,E);if(C===void 0){var D=Object.getPrototypeOf(S);return D===null?void 0:_(D,E,A)}else{if("value"in C)return C.value;var M=C.get;return M===void 0?void 0:M.call(A)}},c=a(2),d=g(c),u=a(0),h=g(u),f=a(4),m=g(f),x=a(6),p=g(x),j=a(7),v=g(j);function g(_){return _&&_.__esModule?_:{default:_}}function y(_,S){if(!(_ instanceof S))throw new TypeError("Cannot call a class as a function")}function b(_,S){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:_}function N(_,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);_.prototype=Object.create(S&&S.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(_,S):_.__proto__=S)}var k=function(_){N(S,_);function S(){return y(this,S),b(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return S}(p.default);k.blotName="code",k.tagName="CODE";var w=function(_){N(S,_);function S(){return y(this,S),b(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return l(S,[{key:"delta",value:function(){var A=this,C=this.domNode.textContent;return C.endsWith(`
`)&&(C=C.slice(0,-1)),C.split(`
`).reduce(function(D,M){return D.insert(M).insert(`
`,A.formats())},new d.default)}},{key:"format",value:function(A,C){if(!(A===this.statics.blotName&&C)){var D=this.descendant(v.default,this.length()-1),M=i(D,1),L=M[0];L!=null&&L.deleteAt(L.length()-1,1),o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"format",this).call(this,A,C)}}},{key:"formatAt",value:function(A,C,D,M){if(C!==0&&!(h.default.query(D,h.default.Scope.BLOCK)==null||D===this.statics.blotName&&M===this.statics.formats(this.domNode))){var L=this.newlineIndex(A);if(!(L<0||L>=A+C)){var z=this.newlineIndex(A,!0)+1,Y=L-z+1,X=this.isolate(z,Y),Z=X.next;X.format(D,M),Z instanceof S&&Z.formatAt(0,A-z+C-Y,D,M)}}}},{key:"insertAt",value:function(A,C,D){if(D==null){var M=this.descendant(v.default,A),L=i(M,2),z=L[0],Y=L[1];z.insertAt(Y,C)}}},{key:"length",value:function(){var A=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?A:A+1}},{key:"newlineIndex",value:function(A){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(C)return this.domNode.textContent.slice(0,A).lastIndexOf(`
`);var D=this.domNode.textContent.slice(A).indexOf(`
`);return D>-1?A+D:-1}},{key:"optimize",value:function(A){this.domNode.textContent.endsWith(`
`)||this.appendChild(h.default.create("text",`
`)),o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"optimize",this).call(this,A);var C=this.next;C!=null&&C.prev===this&&C.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===C.statics.formats(C.domNode)&&(C.optimize(A),C.moveChildren(this),C.remove())}},{key:"replace",value:function(A){o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replace",this).call(this,A),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(C){var D=h.default.find(C);D==null?C.parentNode.removeChild(C):D instanceof h.default.Embed?D.remove():D.unwrap()})}}],[{key:"create",value:function(A){var C=o(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this,A);return C.setAttribute("spellcheck",!1),C}},{key:"formats",value:function(){return!0}}]),S}(m.default);w.blotName="code-block",w.tagName="PRE",w.TAB="  ",n.Code=k,n.default=w},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},l=function(){function Z(W,F){var q=[],I=!0,$=!1,G=void 0;try{for(var R=W[Symbol.iterator](),B;!(I=(B=R.next()).done)&&(q.push(B.value),!(F&&q.length===F));I=!0);}catch(Q){$=!0,G=Q}finally{try{!I&&R.return&&R.return()}finally{if($)throw G}}return q}return function(W,F){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return Z(W,F);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function Z(W,F){for(var q=0;q<F.length;q++){var I=F[q];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(W,I.key,I)}}return function(W,F,q){return F&&Z(W.prototype,F),q&&Z(W,q),W}}(),c=a(2),d=C(c),u=a(20),h=C(u),f=a(0),m=C(f),x=a(13),p=C(x),j=a(24),v=C(j),g=a(4),y=C(g),b=a(16),N=C(b),k=a(21),w=C(k),_=a(11),S=C(_),E=a(3),A=C(E);function C(Z){return Z&&Z.__esModule?Z:{default:Z}}function D(Z,W,F){return W in Z?Object.defineProperty(Z,W,{value:F,enumerable:!0,configurable:!0,writable:!0}):Z[W]=F,Z}function M(Z,W){if(!(Z instanceof W))throw new TypeError("Cannot call a class as a function")}var L=/^[ -~]*$/,z=function(){function Z(W){M(this,Z),this.scroll=W,this.delta=this.getDelta()}return o(Z,[{key:"applyDelta",value:function(F){var q=this,I=!1;this.scroll.update();var $=this.scroll.length();return this.scroll.batchStart(),F=X(F),F.reduce(function(G,R){var B=R.retain||R.delete||R.insert.length||1,Q=R.attributes||{};if(R.insert!=null){if(typeof R.insert=="string"){var te=R.insert;te.endsWith(`
`)&&I&&(I=!1,te=te.slice(0,-1)),G>=$&&!te.endsWith(`
`)&&(I=!0),q.scroll.insertAt(G,te);var ae=q.scroll.line(G),U=l(ae,2),V=U[0],ne=U[1],fe=(0,A.default)({},(0,g.bubbleFormats)(V));if(V instanceof y.default){var ye=V.descendant(m.default.Leaf,ne),oe=l(ye,1),be=oe[0];fe=(0,A.default)(fe,(0,g.bubbleFormats)(be))}Q=h.default.attributes.diff(fe,Q)||{}}else if(i(R.insert)==="object"){var ce=Object.keys(R.insert)[0];if(ce==null)return G;q.scroll.insertAt(G,ce,R.insert[ce])}$+=B}return Object.keys(Q).forEach(function(re){q.scroll.formatAt(G,B,re,Q[re])}),G+B},0),F.reduce(function(G,R){return typeof R.delete=="number"?(q.scroll.deleteAt(G,R.delete),G):G+(R.retain||R.insert.length||1)},0),this.scroll.batchEnd(),this.update(F)}},{key:"deleteText",value:function(F,q){return this.scroll.deleteAt(F,q),this.update(new d.default().retain(F).delete(q))}},{key:"formatLine",value:function(F,q){var I=this,$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys($).forEach(function(G){if(!(I.scroll.whitelist!=null&&!I.scroll.whitelist[G])){var R=I.scroll.lines(F,Math.max(q,1)),B=q;R.forEach(function(Q){var te=Q.length();if(!(Q instanceof p.default))Q.format(G,$[G]);else{var ae=F-Q.offset(I.scroll),U=Q.newlineIndex(ae+B)-ae+1;Q.formatAt(ae,U,G,$[G])}B-=te})}}),this.scroll.optimize(),this.update(new d.default().retain(F).retain(q,(0,w.default)($)))}},{key:"formatText",value:function(F,q){var I=this,$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys($).forEach(function(G){I.scroll.formatAt(F,q,G,$[G])}),this.update(new d.default().retain(F).retain(q,(0,w.default)($)))}},{key:"getContents",value:function(F,q){return this.delta.slice(F,F+q)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(F,q){return F.concat(q.delta())},new d.default)}},{key:"getFormat",value:function(F){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,I=[],$=[];q===0?this.scroll.path(F).forEach(function(R){var B=l(R,1),Q=B[0];Q instanceof y.default?I.push(Q):Q instanceof m.default.Leaf&&$.push(Q)}):(I=this.scroll.lines(F,q),$=this.scroll.descendants(m.default.Leaf,F,q));var G=[I,$].map(function(R){if(R.length===0)return{};for(var B=(0,g.bubbleFormats)(R.shift());Object.keys(B).length>0;){var Q=R.shift();if(Q==null)return B;B=Y((0,g.bubbleFormats)(Q),B)}return B});return A.default.apply(A.default,G)}},{key:"getText",value:function(F,q){return this.getContents(F,q).filter(function(I){return typeof I.insert=="string"}).map(function(I){return I.insert}).join("")}},{key:"insertEmbed",value:function(F,q,I){return this.scroll.insertAt(F,q,I),this.update(new d.default().retain(F).insert(D({},q,I)))}},{key:"insertText",value:function(F,q){var I=this,$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return q=q.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(F,q),Object.keys($).forEach(function(G){I.scroll.formatAt(F,q.length,G,$[G])}),this.update(new d.default().retain(F).insert(q,(0,w.default)($)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var F=this.scroll.children.head;return F.statics.blotName!==y.default.blotName||F.children.length>1?!1:F.children.head instanceof N.default}},{key:"removeFormat",value:function(F,q){var I=this.getText(F,q),$=this.scroll.line(F+q),G=l($,2),R=G[0],B=G[1],Q=0,te=new d.default;R!=null&&(R instanceof p.default?Q=R.newlineIndex(B)-B+1:Q=R.length()-B,te=R.delta().slice(B,B+Q-1).insert(`
`));var ae=this.getContents(F,q+Q),U=ae.diff(new d.default().insert(I).concat(te)),V=new d.default().retain(F).concat(U);return this.applyDelta(V)}},{key:"update",value:function(F){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,$=this.delta;if(q.length===1&&q[0].type==="characterData"&&q[0].target.data.match(L)&&m.default.find(q[0].target)){var G=m.default.find(q[0].target),R=(0,g.bubbleFormats)(G),B=G.offset(this.scroll),Q=q[0].oldValue.replace(v.default.CONTENTS,""),te=new d.default().insert(Q),ae=new d.default().insert(G.value()),U=new d.default().retain(B).concat(te.diff(ae,I));F=U.reduce(function(V,ne){return ne.insert?V.insert(ne.insert,R):V.push(ne)},new d.default),this.delta=$.compose(F)}else this.delta=this.getDelta(),(!F||!(0,S.default)($.compose(F),this.delta))&&(F=$.diff(this.delta,I));return F}}]),Z}();function Y(Z,W){return Object.keys(W).reduce(function(F,q){return Z[q]==null||(W[q]===Z[q]?F[q]=W[q]:Array.isArray(W[q])?W[q].indexOf(Z[q])<0&&(F[q]=W[q].concat([Z[q]])):F[q]=[W[q],Z[q]]),F},{})}function X(Z){return Z.reduce(function(W,F){if(F.insert===1){var q=(0,w.default)(F.attributes);return delete q.image,W.insert({image:F.attributes.image},q)}if(F.attributes!=null&&(F.attributes.list===!0||F.attributes.bullet===!0)&&(F=(0,w.default)(F),F.attributes.list?F.attributes.list="ordered":(F.attributes.list="bullet",delete F.attributes.bullet)),typeof F.insert=="string"){var I=F.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return W.insert(I,F.attributes)}return W.push(F)},new d.default)}n.default=z},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Range=void 0;var i=function(){function _(S,E){var A=[],C=!0,D=!1,M=void 0;try{for(var L=S[Symbol.iterator](),z;!(C=(z=L.next()).done)&&(A.push(z.value),!(E&&A.length===E));C=!0);}catch(Y){D=!0,M=Y}finally{try{!C&&L.return&&L.return()}finally{if(D)throw M}}return A}return function(S,E){if(Array.isArray(S))return S;if(Symbol.iterator in Object(S))return _(S,E);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function _(S,E){for(var A=0;A<E.length;A++){var C=E[A];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(S,C.key,C)}}return function(S,E,A){return E&&_(S.prototype,E),A&&_(S,A),S}}(),o=a(0),c=v(o),d=a(21),u=v(d),h=a(11),f=v(h),m=a(8),x=v(m),p=a(10),j=v(p);function v(_){return _&&_.__esModule?_:{default:_}}function g(_){if(Array.isArray(_)){for(var S=0,E=Array(_.length);S<_.length;S++)E[S]=_[S];return E}else return Array.from(_)}function y(_,S){if(!(_ instanceof S))throw new TypeError("Cannot call a class as a function")}var b=(0,j.default)("quill:selection"),N=function _(S){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;y(this,_),this.index=S,this.length=E},k=function(){function _(S,E){var A=this;y(this,_),this.emitter=E,this.scroll=S,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=c.default.create("cursor",this),this.lastRange=this.savedRange=new N(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){A.mouseDown||setTimeout(A.update.bind(A,x.default.sources.USER),1)}),this.emitter.on(x.default.events.EDITOR_CHANGE,function(C,D){C===x.default.events.TEXT_CHANGE&&D.length()>0&&A.update(x.default.sources.SILENT)}),this.emitter.on(x.default.events.SCROLL_BEFORE_UPDATE,function(){if(A.hasFocus()){var C=A.getNativeRange();C!=null&&C.start.node!==A.cursor.textNode&&A.emitter.once(x.default.events.SCROLL_UPDATE,function(){try{A.setNativeRange(C.start.node,C.start.offset,C.end.node,C.end.offset)}catch{}})}}),this.emitter.on(x.default.events.SCROLL_OPTIMIZE,function(C,D){if(D.range){var M=D.range,L=M.startNode,z=M.startOffset,Y=M.endNode,X=M.endOffset;A.setNativeRange(L,z,Y,X)}}),this.update(x.default.sources.SILENT)}return l(_,[{key:"handleComposition",value:function(){var E=this;this.root.addEventListener("compositionstart",function(){E.composing=!0}),this.root.addEventListener("compositionend",function(){if(E.composing=!1,E.cursor.parent){var A=E.cursor.restore();if(!A)return;setTimeout(function(){E.setNativeRange(A.startNode,A.startOffset,A.endNode,A.endOffset)},1)}})}},{key:"handleDragging",value:function(){var E=this;this.emitter.listenDOM("mousedown",document.body,function(){E.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){E.mouseDown=!1,E.update(x.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(E,A){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[E])){this.scroll.update();var C=this.getNativeRange();if(!(C==null||!C.native.collapsed||c.default.query(E,c.default.Scope.BLOCK))){if(C.start.node!==this.cursor.textNode){var D=c.default.find(C.start.node,!1);if(D==null)return;if(D instanceof c.default.Leaf){var M=D.split(C.start.offset);D.parent.insertBefore(this.cursor,M)}else D.insertBefore(this.cursor,C.start.node);this.cursor.attach()}this.cursor.format(E,A),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(E){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,C=this.scroll.length();E=Math.min(E,C-1),A=Math.min(E+A,C-1)-E;var D=void 0,M=this.scroll.leaf(E),L=i(M,2),z=L[0],Y=L[1];if(z==null)return null;var X=z.position(Y,!0),Z=i(X,2);D=Z[0],Y=Z[1];var W=document.createRange();if(A>0){W.setStart(D,Y);var F=this.scroll.leaf(E+A),q=i(F,2);if(z=q[0],Y=q[1],z==null)return null;var I=z.position(Y,!0),$=i(I,2);return D=$[0],Y=$[1],W.setEnd(D,Y),W.getBoundingClientRect()}else{var G="left",R=void 0;return D instanceof Text?(Y<D.data.length?(W.setStart(D,Y),W.setEnd(D,Y+1)):(W.setStart(D,Y-1),W.setEnd(D,Y),G="right"),R=W.getBoundingClientRect()):(R=z.domNode.getBoundingClientRect(),Y>0&&(G="right")),{bottom:R.top+R.height,height:R.height,left:R[G],right:R[G],top:R.top,width:0}}}},{key:"getNativeRange",value:function(){var E=document.getSelection();if(E==null||E.rangeCount<=0)return null;var A=E.getRangeAt(0);if(A==null)return null;var C=this.normalizeNative(A);return b.info("getNativeRange",C),C}},{key:"getRange",value:function(){var E=this.getNativeRange();if(E==null)return[null,null];var A=this.normalizedToRange(E);return[A,E]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(E){var A=this,C=[[E.start.node,E.start.offset]];E.native.collapsed||C.push([E.end.node,E.end.offset]);var D=C.map(function(z){var Y=i(z,2),X=Y[0],Z=Y[1],W=c.default.find(X,!0),F=W.offset(A.scroll);return Z===0?F:W instanceof c.default.Container?F+W.length():F+W.index(X,Z)}),M=Math.min(Math.max.apply(Math,g(D)),this.scroll.length()-1),L=Math.min.apply(Math,[M].concat(g(D)));return new N(L,M-L)}},{key:"normalizeNative",value:function(E){if(!w(this.root,E.startContainer)||!E.collapsed&&!w(this.root,E.endContainer))return null;var A={start:{node:E.startContainer,offset:E.startOffset},end:{node:E.endContainer,offset:E.endOffset},native:E};return[A.start,A.end].forEach(function(C){for(var D=C.node,M=C.offset;!(D instanceof Text)&&D.childNodes.length>0;)if(D.childNodes.length>M)D=D.childNodes[M],M=0;else if(D.childNodes.length===M)D=D.lastChild,M=D instanceof Text?D.data.length:D.childNodes.length+1;else break;C.node=D,C.offset=M}),A}},{key:"rangeToNative",value:function(E){var A=this,C=E.collapsed?[E.index]:[E.index,E.index+E.length],D=[],M=this.scroll.length();return C.forEach(function(L,z){L=Math.min(M-1,L);var Y=void 0,X=A.scroll.leaf(L),Z=i(X,2),W=Z[0],F=Z[1],q=W.position(F,z!==0),I=i(q,2);Y=I[0],F=I[1],D.push(Y,F)}),D.length<2&&(D=D.concat(D)),D}},{key:"scrollIntoView",value:function(E){var A=this.lastRange;if(A!=null){var C=this.getBounds(A.index,A.length);if(C!=null){var D=this.scroll.length()-1,M=this.scroll.line(Math.min(A.index,D)),L=i(M,1),z=L[0],Y=z;if(A.length>0){var X=this.scroll.line(Math.min(A.index+A.length,D)),Z=i(X,1);Y=Z[0]}if(!(z==null||Y==null)){var W=E.getBoundingClientRect();C.top<W.top?E.scrollTop-=W.top-C.top:C.bottom>W.bottom&&(E.scrollTop+=C.bottom-W.bottom)}}}}},{key:"setNativeRange",value:function(E,A){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:E,D=arguments.length>3&&arguments[3]!==void 0?arguments[3]:A,M=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(b.info("setNativeRange",E,A,C,D),!(E!=null&&(this.root.parentNode==null||E.parentNode==null||C.parentNode==null))){var L=document.getSelection();if(L!=null)if(E!=null){this.hasFocus()||this.root.focus();var z=(this.getNativeRange()||{}).native;if(z==null||M||E!==z.startContainer||A!==z.startOffset||C!==z.endContainer||D!==z.endOffset){E.tagName=="BR"&&(A=[].indexOf.call(E.parentNode.childNodes,E),E=E.parentNode),C.tagName=="BR"&&(D=[].indexOf.call(C.parentNode.childNodes,C),C=C.parentNode);var Y=document.createRange();Y.setStart(E,A),Y.setEnd(C,D),L.removeAllRanges(),L.addRange(Y)}}else L.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(E){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:x.default.sources.API;if(typeof A=="string"&&(C=A,A=!1),b.info("setRange",E),E!=null){var D=this.rangeToNative(E);this.setNativeRange.apply(this,g(D).concat([A]))}else this.setNativeRange(null);this.update(C)}},{key:"update",value:function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x.default.sources.USER,A=this.lastRange,C=this.getRange(),D=i(C,2),M=D[0],L=D[1];if(this.lastRange=M,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,f.default)(A,this.lastRange)){var z;!this.composing&&L!=null&&L.native.collapsed&&L.start.node!==this.cursor.textNode&&this.cursor.restore();var Y=[x.default.events.SELECTION_CHANGE,(0,u.default)(this.lastRange),(0,u.default)(A),E];if((z=this.emitter).emit.apply(z,[x.default.events.EDITOR_CHANGE].concat(Y)),E!==x.default.sources.SILENT){var X;(X=this.emitter).emit.apply(X,Y)}}}}]),_}();function w(_,S){try{S.parentNode}catch{return!1}return S instanceof Text&&(S=S.parentNode),_.contains(S)}n.Range=N,n.default=k},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function x(p,j){for(var v=0;v<j.length;v++){var g=j[v];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(p,g.key,g)}}return function(p,j,v){return j&&x(p.prototype,j),v&&x(p,v),p}}(),l=function x(p,j,v){p===null&&(p=Function.prototype);var g=Object.getOwnPropertyDescriptor(p,j);if(g===void 0){var y=Object.getPrototypeOf(p);return y===null?void 0:x(y,j,v)}else{if("value"in g)return g.value;var b=g.get;return b===void 0?void 0:b.call(v)}},o=a(0),c=d(o);function d(x){return x&&x.__esModule?x:{default:x}}function u(x,p){if(!(x instanceof p))throw new TypeError("Cannot call a class as a function")}function h(x,p){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:x}function f(x,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);x.prototype=Object.create(p&&p.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(x,p):x.__proto__=p)}var m=function(x){f(p,x);function p(){return u(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return i(p,[{key:"insertInto",value:function(v,g){v.children.length===0?l(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"insertInto",this).call(this,v,g):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),p}(c.default.Embed);m.blotName="break",m.tagName="BR",n.default=m},function(s,n,a){var i=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,m){f.__proto__=m}||function(f,m){for(var x in m)m.hasOwnProperty(x)&&(f[x]=m[x])};return function(f,m){h(f,m);function x(){this.constructor=f}f.prototype=m===null?Object.create(m):(x.prototype=m.prototype,new x)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=a(44),o=a(30),c=a(1),d=function(h){i(f,h);function f(m){var x=h.call(this,m)||this;return x.build(),x}return f.prototype.appendChild=function(m){this.insertBefore(m)},f.prototype.attach=function(){h.prototype.attach.call(this),this.children.forEach(function(m){m.attach()})},f.prototype.build=function(){var m=this;this.children=new l.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(x){try{var p=u(x);m.insertBefore(p,m.children.head||void 0)}catch(j){if(j instanceof c.ParchmentError)return;throw j}})},f.prototype.deleteAt=function(m,x){if(m===0&&x===this.length())return this.remove();this.children.forEachAt(m,x,function(p,j,v){p.deleteAt(j,v)})},f.prototype.descendant=function(m,x){var p=this.children.find(x),j=p[0],v=p[1];return m.blotName==null&&m(j)||m.blotName!=null&&j instanceof m?[j,v]:j instanceof f?j.descendant(m,v):[null,-1]},f.prototype.descendants=function(m,x,p){x===void 0&&(x=0),p===void 0&&(p=Number.MAX_VALUE);var j=[],v=p;return this.children.forEachAt(x,p,function(g,y,b){(m.blotName==null&&m(g)||m.blotName!=null&&g instanceof m)&&j.push(g),g instanceof f&&(j=j.concat(g.descendants(m,y,v))),v-=b}),j},f.prototype.detach=function(){this.children.forEach(function(m){m.detach()}),h.prototype.detach.call(this)},f.prototype.formatAt=function(m,x,p,j){this.children.forEachAt(m,x,function(v,g,y){v.formatAt(g,y,p,j)})},f.prototype.insertAt=function(m,x,p){var j=this.children.find(m),v=j[0],g=j[1];if(v)v.insertAt(g,x,p);else{var y=p==null?c.create("text",x):c.create(x,p);this.appendChild(y)}},f.prototype.insertBefore=function(m,x){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(p){return m instanceof p}))throw new c.ParchmentError("Cannot insert "+m.statics.blotName+" into "+this.statics.blotName);m.insertInto(this,x)},f.prototype.length=function(){return this.children.reduce(function(m,x){return m+x.length()},0)},f.prototype.moveChildren=function(m,x){this.children.forEach(function(p){m.insertBefore(p,x)})},f.prototype.optimize=function(m){if(h.prototype.optimize.call(this,m),this.children.length===0)if(this.statics.defaultChild!=null){var x=c.create(this.statics.defaultChild);this.appendChild(x),x.optimize(m)}else this.remove()},f.prototype.path=function(m,x){x===void 0&&(x=!1);var p=this.children.find(m,x),j=p[0],v=p[1],g=[[this,m]];return j instanceof f?g.concat(j.path(v,x)):(j!=null&&g.push([j,v]),g)},f.prototype.removeChild=function(m){this.children.remove(m)},f.prototype.replace=function(m){m instanceof f&&m.moveChildren(this),h.prototype.replace.call(this,m)},f.prototype.split=function(m,x){if(x===void 0&&(x=!1),!x){if(m===0)return this;if(m===this.length())return this.next}var p=this.clone();return this.parent.insertBefore(p,this.next),this.children.forEachAt(m,this.length(),function(j,v,g){j=j.split(v,x),p.appendChild(j)}),p},f.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},f.prototype.update=function(m,x){var p=this,j=[],v=[];m.forEach(function(g){g.target===p.domNode&&g.type==="childList"&&(j.push.apply(j,g.addedNodes),v.push.apply(v,g.removedNodes))}),v.forEach(function(g){if(!(g.parentNode!=null&&g.tagName!=="IFRAME"&&document.body.compareDocumentPosition(g)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var y=c.find(g);y!=null&&(y.domNode.parentNode==null||y.domNode.parentNode===p.domNode)&&y.detach()}}),j.filter(function(g){return g.parentNode==p.domNode}).sort(function(g,y){return g===y?0:g.compareDocumentPosition(y)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(g){var y=null;g.nextSibling!=null&&(y=c.find(g.nextSibling));var b=u(g);(b.next!=y||b.next==null)&&(b.parent!=null&&b.parent.removeChild(p),p.insertBefore(b,y||void 0))})},f}(o.default);function u(h){var f=c.find(h);if(f==null)try{f=c.create(h)}catch{f=c.create(c.Scope.INLINE),[].slice.call(h.childNodes).forEach(function(x){f.domNode.appendChild(x)}),h.parentNode&&h.parentNode.replaceChild(f.domNode,h),f.attach()}return f}n.default=d},function(s,n,a){var i=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,m){f.__proto__=m}||function(f,m){for(var x in m)m.hasOwnProperty(x)&&(f[x]=m[x])};return function(f,m){h(f,m);function x(){this.constructor=f}f.prototype=m===null?Object.create(m):(x.prototype=m.prototype,new x)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=a(12),o=a(31),c=a(17),d=a(1),u=function(h){i(f,h);function f(m){var x=h.call(this,m)||this;return x.attributes=new o.default(x.domNode),x}return f.formats=function(m){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return m.tagName.toLowerCase()},f.prototype.format=function(m,x){var p=d.query(m);p instanceof l.default?this.attributes.attribute(p,x):x&&p!=null&&(m!==this.statics.blotName||this.formats()[m]!==x)&&this.replaceWith(m,x)},f.prototype.formats=function(){var m=this.attributes.values(),x=this.statics.formats(this.domNode);return x!=null&&(m[this.statics.blotName]=x),m},f.prototype.replaceWith=function(m,x){var p=h.prototype.replaceWith.call(this,m,x);return this.attributes.copy(p),p},f.prototype.update=function(m,x){var p=this;h.prototype.update.call(this,m,x),m.some(function(j){return j.target===p.domNode&&j.type==="attributes"})&&this.attributes.build()},f.prototype.wrap=function(m,x){var p=h.prototype.wrap.call(this,m,x);return p instanceof f&&p.statics.scope===this.statics.scope&&this.attributes.move(p),p},f}(c.default);n.default=u},function(s,n,a){var i=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])};return function(u,h){d(u,h);function f(){this.constructor=u}u.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=a(30),o=a(1),c=function(d){i(u,d);function u(){return d!==null&&d.apply(this,arguments)||this}return u.value=function(h){return!0},u.prototype.index=function(h,f){return this.domNode===h||this.domNode.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(f,1):-1},u.prototype.position=function(h,f){var m=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return h>0&&(m+=1),[this.parent.domNode,m]},u.prototype.value=function(){var h;return h={},h[this.statics.blotName]=this.statics.value(this.domNode)||!0,h},u.scope=o.Scope.INLINE_BLOT,u}(l.default);n.default=c},function(s,n,a){var i=a(11),l=a(3),o={attributes:{compose:function(d,u,h){typeof d!="object"&&(d={}),typeof u!="object"&&(u={});var f=l(!0,{},u);h||(f=Object.keys(f).reduce(function(x,p){return f[p]!=null&&(x[p]=f[p]),x},{}));for(var m in d)d[m]!==void 0&&u[m]===void 0&&(f[m]=d[m]);return Object.keys(f).length>0?f:void 0},diff:function(d,u){typeof d!="object"&&(d={}),typeof u!="object"&&(u={});var h=Object.keys(d).concat(Object.keys(u)).reduce(function(f,m){return i(d[m],u[m])||(f[m]=u[m]===void 0?null:u[m]),f},{});return Object.keys(h).length>0?h:void 0},transform:function(d,u,h){if(typeof d!="object")return u;if(typeof u=="object"){if(!h)return u;var f=Object.keys(u).reduce(function(m,x){return d[x]===void 0&&(m[x]=u[x]),m},{});return Object.keys(f).length>0?f:void 0}}},iterator:function(d){return new c(d)},length:function(d){return typeof d.delete=="number"?d.delete:typeof d.retain=="number"?d.retain:typeof d.insert=="string"?d.insert.length:1}};function c(d){this.ops=d,this.index=0,this.offset=0}c.prototype.hasNext=function(){return this.peekLength()<1/0},c.prototype.next=function(d){d||(d=1/0);var u=this.ops[this.index];if(u){var h=this.offset,f=o.length(u);if(d>=f-h?(d=f-h,this.index+=1,this.offset=0):this.offset+=d,typeof u.delete=="number")return{delete:d};var m={};return u.attributes&&(m.attributes=u.attributes),typeof u.retain=="number"?m.retain=d:typeof u.insert=="string"?m.insert=u.insert.substr(h,d):m.insert=u.insert,m}else return{retain:1/0}},c.prototype.peek=function(){return this.ops[this.index]},c.prototype.peekLength=function(){return this.ops[this.index]?o.length(this.ops[this.index])-this.offset:1/0},c.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},c.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var d=this.offset,u=this.index,h=this.next(),f=this.ops.slice(this.index);return this.offset=d,this.index=u,[h].concat(f)}else return[]},s.exports=o},function(s,n){var a=function(){function i(p,j){return j!=null&&p instanceof j}var l;try{l=Map}catch{l=function(){}}var o;try{o=Set}catch{o=function(){}}var c;try{c=Promise}catch{c=function(){}}function d(p,j,v,g,y){typeof j=="object"&&(v=j.depth,g=j.prototype,y=j.includeNonEnumerable,j=j.circular);var b=[],N=[],k=typeof Wl<"u";typeof j>"u"&&(j=!0),typeof v>"u"&&(v=1/0);function w(_,S){if(_===null)return null;if(S===0)return _;var E,A;if(typeof _!="object")return _;if(i(_,l))E=new l;else if(i(_,o))E=new o;else if(i(_,c))E=new c(function(W,F){_.then(function(q){W(w(q,S-1))},function(q){F(w(q,S-1))})});else if(d.__isArray(_))E=[];else if(d.__isRegExp(_))E=new RegExp(_.source,x(_)),_.lastIndex&&(E.lastIndex=_.lastIndex);else if(d.__isDate(_))E=new Date(_.getTime());else{if(k&&Wl.isBuffer(_))return Wl.allocUnsafe?E=Wl.allocUnsafe(_.length):E=new Wl(_.length),_.copy(E),E;i(_,Error)?E=Object.create(_):typeof g>"u"?(A=Object.getPrototypeOf(_),E=Object.create(A)):(E=Object.create(g),A=g)}if(j){var C=b.indexOf(_);if(C!=-1)return N[C];b.push(_),N.push(E)}i(_,l)&&_.forEach(function(W,F){var q=w(F,S-1),I=w(W,S-1);E.set(q,I)}),i(_,o)&&_.forEach(function(W){var F=w(W,S-1);E.add(F)});for(var D in _){var M;A&&(M=Object.getOwnPropertyDescriptor(A,D)),!(M&&M.set==null)&&(E[D]=w(_[D],S-1))}if(Object.getOwnPropertySymbols)for(var L=Object.getOwnPropertySymbols(_),D=0;D<L.length;D++){var z=L[D],Y=Object.getOwnPropertyDescriptor(_,z);Y&&!Y.enumerable&&!y||(E[z]=w(_[z],S-1),Y.enumerable||Object.defineProperty(E,z,{enumerable:!1}))}if(y)for(var X=Object.getOwnPropertyNames(_),D=0;D<X.length;D++){var Z=X[D],Y=Object.getOwnPropertyDescriptor(_,Z);Y&&Y.enumerable||(E[Z]=w(_[Z],S-1),Object.defineProperty(E,Z,{enumerable:!1}))}return E}return w(p,v)}d.clonePrototype=function(j){if(j===null)return null;var v=function(){};return v.prototype=j,new v};function u(p){return Object.prototype.toString.call(p)}d.__objToStr=u;function h(p){return typeof p=="object"&&u(p)==="[object Date]"}d.__isDate=h;function f(p){return typeof p=="object"&&u(p)==="[object Array]"}d.__isArray=f;function m(p){return typeof p=="object"&&u(p)==="[object RegExp]"}d.__isRegExp=m;function x(p){var j="";return p.global&&(j+="g"),p.ignoreCase&&(j+="i"),p.multiline&&(j+="m"),j}return d.__getRegExpFlags=x,d}();typeof s=="object"&&s.exports&&(s.exports=a)},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function E(A,C){var D=[],M=!0,L=!1,z=void 0;try{for(var Y=A[Symbol.iterator](),X;!(M=(X=Y.next()).done)&&(D.push(X.value),!(C&&D.length===C));M=!0);}catch(Z){L=!0,z=Z}finally{try{!M&&Y.return&&Y.return()}finally{if(L)throw z}}return D}return function(A,C){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return E(A,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function E(A,C){for(var D=0;D<C.length;D++){var M=C[D];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(A,M.key,M)}}return function(A,C,D){return C&&E(A.prototype,C),D&&E(A,D),A}}(),o=function E(A,C,D){A===null&&(A=Function.prototype);var M=Object.getOwnPropertyDescriptor(A,C);if(M===void 0){var L=Object.getPrototypeOf(A);return L===null?void 0:E(L,C,D)}else{if("value"in M)return M.value;var z=M.get;return z===void 0?void 0:z.call(D)}},c=a(0),d=b(c),u=a(8),h=b(u),f=a(4),m=b(f),x=a(16),p=b(x),j=a(13),v=b(j),g=a(25),y=b(g);function b(E){return E&&E.__esModule?E:{default:E}}function N(E,A){if(!(E instanceof A))throw new TypeError("Cannot call a class as a function")}function k(E,A){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:E}function w(E,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);E.prototype=Object.create(A&&A.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(E,A):E.__proto__=A)}function _(E){return E instanceof m.default||E instanceof f.BlockEmbed}var S=function(E){w(A,E);function A(C,D){N(this,A);var M=k(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,C));return M.emitter=D.emitter,Array.isArray(D.whitelist)&&(M.whitelist=D.whitelist.reduce(function(L,z){return L[z]=!0,L},{})),M.domNode.addEventListener("DOMNodeInserted",function(){}),M.optimize(),M.enable(),M}return l(A,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(D,M){var L=this.line(D),z=i(L,2),Y=z[0],X=z[1],Z=this.line(D+M),W=i(Z,1),F=W[0];if(o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"deleteAt",this).call(this,D,M),F!=null&&Y!==F&&X>0){if(Y instanceof f.BlockEmbed||F instanceof f.BlockEmbed){this.optimize();return}if(Y instanceof v.default){var q=Y.newlineIndex(Y.length(),!0);if(q>-1&&(Y=Y.split(q+1),Y===F)){this.optimize();return}}else if(F instanceof v.default){var I=F.newlineIndex(0);I>-1&&F.split(I+1)}var $=F.children.head instanceof p.default?null:F.children.head;Y.moveChildren(F,$),Y.remove()}this.optimize()}},{key:"enable",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",D)}},{key:"formatAt",value:function(D,M,L,z){this.whitelist!=null&&!this.whitelist[L]||(o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"formatAt",this).call(this,D,M,L,z),this.optimize())}},{key:"insertAt",value:function(D,M,L){if(!(L!=null&&this.whitelist!=null&&!this.whitelist[M])){if(D>=this.length())if(L==null||d.default.query(M,d.default.Scope.BLOCK)==null){var z=d.default.create(this.statics.defaultChild);this.appendChild(z),L==null&&M.endsWith(`
`)&&(M=M.slice(0,-1)),z.insertAt(0,M,L)}else{var Y=d.default.create(M,L);this.appendChild(Y)}else o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,D,M,L);this.optimize()}}},{key:"insertBefore",value:function(D,M){if(D.statics.scope===d.default.Scope.INLINE_BLOT){var L=d.default.create(this.statics.defaultChild);L.appendChild(D),D=L}o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertBefore",this).call(this,D,M)}},{key:"leaf",value:function(D){return this.path(D).pop()||[null,-1]}},{key:"line",value:function(D){return D===this.length()?this.line(D-1):this.descendant(_,D)}},{key:"lines",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,L=function z(Y,X,Z){var W=[],F=Z;return Y.children.forEachAt(X,Z,function(q,I,$){_(q)?W.push(q):q instanceof d.default.Container&&(W=W.concat(z(q,I,F))),F-=$}),W};return L(this,D,M)}},{key:"optimize",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,D,M),D.length>0&&this.emitter.emit(h.default.events.SCROLL_OPTIMIZE,D,M))}},{key:"path",value:function(D){return o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"path",this).call(this,D).slice(1)}},{key:"update",value:function(D){if(this.batch!==!0){var M=h.default.sources.USER;typeof D=="string"&&(M=D),Array.isArray(D)||(D=this.observer.takeRecords()),D.length>0&&this.emitter.emit(h.default.events.SCROLL_BEFORE_UPDATE,M,D),o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"update",this).call(this,D.concat([])),D.length>0&&this.emitter.emit(h.default.events.SCROLL_UPDATE,M,D)}}}]),A}(d.default.Scroll);S.blotName="scroll",S.className="ql-editor",S.tagName="DIV",S.defaultChild="block",S.allowedChildren=[m.default,f.BlockEmbed,y.default],n.default=S},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.SHORTKEY=n.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},l=function(){function R(B,Q){var te=[],ae=!0,U=!1,V=void 0;try{for(var ne=B[Symbol.iterator](),fe;!(ae=(fe=ne.next()).done)&&(te.push(fe.value),!(Q&&te.length===Q));ae=!0);}catch(ye){U=!0,V=ye}finally{try{!ae&&ne.return&&ne.return()}finally{if(U)throw V}}return te}return function(B,Q){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return R(B,Q);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function R(B,Q){for(var te=0;te<Q.length;te++){var ae=Q[te];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(B,ae.key,ae)}}return function(B,Q,te){return Q&&R(B.prototype,Q),te&&R(B,te),B}}(),c=a(21),d=E(c),u=a(11),h=E(u),f=a(3),m=E(f),x=a(2),p=E(x),j=a(20),v=E(j),g=a(0),y=E(g),b=a(5),N=E(b),k=a(10),w=E(k),_=a(9),S=E(_);function E(R){return R&&R.__esModule?R:{default:R}}function A(R,B,Q){return B in R?Object.defineProperty(R,B,{value:Q,enumerable:!0,configurable:!0,writable:!0}):R[B]=Q,R}function C(R,B){if(!(R instanceof B))throw new TypeError("Cannot call a class as a function")}function D(R,B){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B&&(typeof B=="object"||typeof B=="function")?B:R}function M(R,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof B);R.prototype=Object.create(B&&B.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),B&&(Object.setPrototypeOf?Object.setPrototypeOf(R,B):R.__proto__=B)}var L=(0,w.default)("quill:keyboard"),z=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",Y=function(R){M(B,R),o(B,null,[{key:"match",value:function(te,ae){return ae=G(ae),["altKey","ctrlKey","metaKey","shiftKey"].some(function(U){return!!ae[U]!==te[U]&&ae[U]!==null})?!1:ae.key===(te.which||te.keyCode)}}]);function B(Q,te){C(this,B);var ae=D(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,Q,te));return ae.bindings={},Object.keys(ae.options.bindings).forEach(function(U){U==="list autofill"&&Q.scroll.whitelist!=null&&!Q.scroll.whitelist.list||ae.options.bindings[U]&&ae.addBinding(ae.options.bindings[U])}),ae.addBinding({key:B.keys.ENTER,shiftKey:null},q),ae.addBinding({key:B.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(ae.addBinding({key:B.keys.BACKSPACE},{collapsed:!0},Z),ae.addBinding({key:B.keys.DELETE},{collapsed:!0},W)):(ae.addBinding({key:B.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},Z),ae.addBinding({key:B.keys.DELETE},{collapsed:!0,suffix:/^.?$/},W)),ae.addBinding({key:B.keys.BACKSPACE},{collapsed:!1},F),ae.addBinding({key:B.keys.DELETE},{collapsed:!1},F),ae.addBinding({key:B.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},Z),ae.listen(),ae}return o(B,[{key:"addBinding",value:function(te){var ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},V=G(te);if(V==null||V.key==null)return L.warn("Attempted to add invalid keyboard binding",V);typeof ae=="function"&&(ae={handler:ae}),typeof U=="function"&&(U={handler:U}),V=(0,m.default)(V,ae,U),this.bindings[V.key]=this.bindings[V.key]||[],this.bindings[V.key].push(V)}},{key:"listen",value:function(){var te=this;this.quill.root.addEventListener("keydown",function(ae){if(!ae.defaultPrevented){var U=ae.which||ae.keyCode,V=(te.bindings[U]||[]).filter(function(Tt){return B.match(ae,Tt)});if(V.length!==0){var ne=te.quill.getSelection();if(!(ne==null||!te.quill.hasFocus())){var fe=te.quill.getLine(ne.index),ye=l(fe,2),oe=ye[0],be=ye[1],ce=te.quill.getLeaf(ne.index),re=l(ce,2),ge=re[0],we=re[1],pe=ne.length===0?[ge,we]:te.quill.getLeaf(ne.index+ne.length),de=l(pe,2),Re=de[0],Fe=de[1],Gt=ge instanceof y.default.Text?ge.value().slice(0,we):"",nr=Re instanceof y.default.Text?Re.value().slice(Fe):"",it={collapsed:ne.length===0,empty:ne.length===0&&oe.length()<=1,format:te.quill.getFormat(ne),offset:be,prefix:Gt,suffix:nr},Oa=V.some(function(Tt){if(Tt.collapsed!=null&&Tt.collapsed!==it.collapsed||Tt.empty!=null&&Tt.empty!==it.empty||Tt.offset!=null&&Tt.offset!==it.offset)return!1;if(Array.isArray(Tt.format)){if(Tt.format.every(function(Vs){return it.format[Vs]==null}))return!1}else if(i(Tt.format)==="object"&&!Object.keys(Tt.format).every(function(Vs){return Tt.format[Vs]===!0?it.format[Vs]!=null:Tt.format[Vs]===!1?it.format[Vs]==null:(0,h.default)(Tt.format[Vs],it.format[Vs])}))return!1;return Tt.prefix!=null&&!Tt.prefix.test(it.prefix)||Tt.suffix!=null&&!Tt.suffix.test(it.suffix)?!1:Tt.handler.call(te,ne,it)!==!0});Oa&&ae.preventDefault()}}}})}}]),B}(S.default);Y.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},Y.DEFAULTS={bindings:{bold:$("bold"),italic:$("italic"),underline:$("underline"),indent:{key:Y.keys.TAB,format:["blockquote","indent","list"],handler:function(B,Q){if(Q.collapsed&&Q.offset!==0)return!0;this.quill.format("indent","+1",N.default.sources.USER)}},outdent:{key:Y.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(B,Q){if(Q.collapsed&&Q.offset!==0)return!0;this.quill.format("indent","-1",N.default.sources.USER)}},"outdent backspace":{key:Y.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(B,Q){Q.format.indent!=null?this.quill.format("indent","-1",N.default.sources.USER):Q.format.list!=null&&this.quill.format("list",!1,N.default.sources.USER)}},"indent code-block":I(!0),"outdent code-block":I(!1),"remove tab":{key:Y.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(B){this.quill.deleteText(B.index-1,1,N.default.sources.USER)}},tab:{key:Y.keys.TAB,handler:function(B){this.quill.history.cutoff();var Q=new p.default().retain(B.index).delete(B.length).insert("	");this.quill.updateContents(Q,N.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(B.index+1,N.default.sources.SILENT)}},"list empty enter":{key:Y.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(B,Q){this.quill.format("list",!1,N.default.sources.USER),Q.format.indent&&this.quill.format("indent",!1,N.default.sources.USER)}},"checklist enter":{key:Y.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(B){var Q=this.quill.getLine(B.index),te=l(Q,2),ae=te[0],U=te[1],V=(0,m.default)({},ae.formats(),{list:"checked"}),ne=new p.default().retain(B.index).insert(`
`,V).retain(ae.length()-U-1).retain(1,{list:"unchecked"});this.quill.updateContents(ne,N.default.sources.USER),this.quill.setSelection(B.index+1,N.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:Y.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(B,Q){var te=this.quill.getLine(B.index),ae=l(te,2),U=ae[0],V=ae[1],ne=new p.default().retain(B.index).insert(`
`,Q.format).retain(U.length()-V-1).retain(1,{header:null});this.quill.updateContents(ne,N.default.sources.USER),this.quill.setSelection(B.index+1,N.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(B,Q){var te=Q.prefix.length,ae=this.quill.getLine(B.index),U=l(ae,2),V=U[0],ne=U[1];if(ne>te)return!0;var fe=void 0;switch(Q.prefix.trim()){case"[]":case"[ ]":fe="unchecked";break;case"[x]":fe="checked";break;case"-":case"*":fe="bullet";break;default:fe="ordered"}this.quill.insertText(B.index," ",N.default.sources.USER),this.quill.history.cutoff();var ye=new p.default().retain(B.index-ne).delete(te+1).retain(V.length()-2-ne).retain(1,{list:fe});this.quill.updateContents(ye,N.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(B.index-te,N.default.sources.SILENT)}},"code exit":{key:Y.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(B){var Q=this.quill.getLine(B.index),te=l(Q,2),ae=te[0],U=te[1],V=new p.default().retain(B.index+ae.length()-U-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(V,N.default.sources.USER)}},"embed left":X(Y.keys.LEFT,!1),"embed left shift":X(Y.keys.LEFT,!0),"embed right":X(Y.keys.RIGHT,!1),"embed right shift":X(Y.keys.RIGHT,!0)}};function X(R,B){var Q,te=R===Y.keys.LEFT?"prefix":"suffix";return Q={key:R,shiftKey:B,altKey:null},A(Q,te,/^$/),A(Q,"handler",function(U){var V=U.index;R===Y.keys.RIGHT&&(V+=U.length+1);var ne=this.quill.getLeaf(V),fe=l(ne,1),ye=fe[0];return ye instanceof y.default.Embed?(R===Y.keys.LEFT?B?this.quill.setSelection(U.index-1,U.length+1,N.default.sources.USER):this.quill.setSelection(U.index-1,N.default.sources.USER):B?this.quill.setSelection(U.index,U.length+1,N.default.sources.USER):this.quill.setSelection(U.index+U.length+1,N.default.sources.USER),!1):!0}),Q}function Z(R,B){if(!(R.index===0||this.quill.getLength()<=1)){var Q=this.quill.getLine(R.index),te=l(Q,1),ae=te[0],U={};if(B.offset===0){var V=this.quill.getLine(R.index-1),ne=l(V,1),fe=ne[0];if(fe!=null&&fe.length()>1){var ye=ae.formats(),oe=this.quill.getFormat(R.index-1,1);U=v.default.attributes.diff(ye,oe)||{}}}var be=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(B.prefix)?2:1;this.quill.deleteText(R.index-be,be,N.default.sources.USER),Object.keys(U).length>0&&this.quill.formatLine(R.index-be,be,U,N.default.sources.USER),this.quill.focus()}}function W(R,B){var Q=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(B.suffix)?2:1;if(!(R.index>=this.quill.getLength()-Q)){var te={},ae=0,U=this.quill.getLine(R.index),V=l(U,1),ne=V[0];if(B.offset>=ne.length()-1){var fe=this.quill.getLine(R.index+1),ye=l(fe,1),oe=ye[0];if(oe){var be=ne.formats(),ce=this.quill.getFormat(R.index,1);te=v.default.attributes.diff(be,ce)||{},ae=oe.length()}}this.quill.deleteText(R.index,Q,N.default.sources.USER),Object.keys(te).length>0&&this.quill.formatLine(R.index+ae-1,Q,te,N.default.sources.USER)}}function F(R){var B=this.quill.getLines(R),Q={};if(B.length>1){var te=B[0].formats(),ae=B[B.length-1].formats();Q=v.default.attributes.diff(ae,te)||{}}this.quill.deleteText(R,N.default.sources.USER),Object.keys(Q).length>0&&this.quill.formatLine(R.index,1,Q,N.default.sources.USER),this.quill.setSelection(R.index,N.default.sources.SILENT),this.quill.focus()}function q(R,B){var Q=this;R.length>0&&this.quill.scroll.deleteAt(R.index,R.length);var te=Object.keys(B.format).reduce(function(ae,U){return y.default.query(U,y.default.Scope.BLOCK)&&!Array.isArray(B.format[U])&&(ae[U]=B.format[U]),ae},{});this.quill.insertText(R.index,`
`,te,N.default.sources.USER),this.quill.setSelection(R.index+1,N.default.sources.SILENT),this.quill.focus(),Object.keys(B.format).forEach(function(ae){te[ae]==null&&(Array.isArray(B.format[ae])||ae!=="link"&&Q.quill.format(ae,B.format[ae],N.default.sources.USER))})}function I(R){return{key:Y.keys.TAB,shiftKey:!R,format:{"code-block":!0},handler:function(Q){var te=y.default.query("code-block"),ae=Q.index,U=Q.length,V=this.quill.scroll.descendant(te,ae),ne=l(V,2),fe=ne[0],ye=ne[1];if(fe!=null){var oe=this.quill.getIndex(fe),be=fe.newlineIndex(ye,!0)+1,ce=fe.newlineIndex(oe+ye+U),re=fe.domNode.textContent.slice(be,ce).split(`
`);ye=0,re.forEach(function(ge,we){R?(fe.insertAt(be+ye,te.TAB),ye+=te.TAB.length,we===0?ae+=te.TAB.length:U+=te.TAB.length):ge.startsWith(te.TAB)&&(fe.deleteAt(be+ye,te.TAB.length),ye-=te.TAB.length,we===0?ae-=te.TAB.length:U-=te.TAB.length),ye+=ge.length+1}),this.quill.update(N.default.sources.USER),this.quill.setSelection(ae,U,N.default.sources.SILENT)}}}}function $(R){return{key:R[0].toUpperCase(),shortKey:!0,handler:function(Q,te){this.quill.format(R,!te.format[R],N.default.sources.USER)}}}function G(R){if(typeof R=="string"||typeof R=="number")return G({key:R});if((typeof R>"u"?"undefined":i(R))==="object"&&(R=(0,d.default)(R,!1)),typeof R.key=="string")if(Y.keys[R.key.toUpperCase()]!=null)R.key=Y.keys[R.key.toUpperCase()];else if(R.key.length===1)R.key=R.key.toUpperCase().charCodeAt(0);else return null;return R.shortKey&&(R[z]=R.shortKey,delete R.shortKey),R}n.default=Y,n.SHORTKEY=z},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function v(g,y){var b=[],N=!0,k=!1,w=void 0;try{for(var _=g[Symbol.iterator](),S;!(N=(S=_.next()).done)&&(b.push(S.value),!(y&&b.length===y));N=!0);}catch(E){k=!0,w=E}finally{try{!N&&_.return&&_.return()}finally{if(k)throw w}}return b}return function(g,y){if(Array.isArray(g))return g;if(Symbol.iterator in Object(g))return v(g,y);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function v(g,y,b){g===null&&(g=Function.prototype);var N=Object.getOwnPropertyDescriptor(g,y);if(N===void 0){var k=Object.getPrototypeOf(g);return k===null?void 0:v(k,y,b)}else{if("value"in N)return N.value;var w=N.get;return w===void 0?void 0:w.call(b)}},o=function(){function v(g,y){for(var b=0;b<y.length;b++){var N=y[b];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(g,N.key,N)}}return function(g,y,b){return y&&v(g.prototype,y),b&&v(g,b),g}}(),c=a(0),d=f(c),u=a(7),h=f(u);function f(v){return v&&v.__esModule?v:{default:v}}function m(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function x(v,g){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:v}function p(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(v,g):v.__proto__=g)}var j=function(v){p(g,v),o(g,null,[{key:"value",value:function(){}}]);function g(y,b){m(this,g);var N=x(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,y));return N.selection=b,N.textNode=document.createTextNode(g.CONTENTS),N.domNode.appendChild(N.textNode),N._length=0,N}return o(g,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(b,N){if(this._length!==0)return l(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,b,N);for(var k=this,w=0;k!=null&&k.statics.scope!==d.default.Scope.BLOCK_BLOT;)w+=k.offset(k.parent),k=k.parent;k!=null&&(this._length=g.CONTENTS.length,k.optimize(),k.formatAt(w,g.CONTENTS.length,b,N),this._length=0)}},{key:"index",value:function(b,N){return b===this.textNode?0:l(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"index",this).call(this,b,N)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){l(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var b=this.textNode,N=this.selection.getNativeRange(),k=void 0,w=void 0,_=void 0;if(N!=null&&N.start.node===b&&N.end.node===b){var S=[b,N.start.offset,N.end.offset];k=S[0],w=S[1],_=S[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==g.CONTENTS){var E=this.textNode.data.split(g.CONTENTS).join("");this.next instanceof h.default?(k=this.next.domNode,this.next.insertAt(0,E),this.textNode.data=g.CONTENTS):(this.textNode.data=E,this.parent.insertBefore(d.default.create(this.textNode),this),this.textNode=document.createTextNode(g.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),w!=null){var A=[w,_].map(function(D){return Math.max(0,Math.min(k.data.length,D-1))}),C=i(A,2);return w=C[0],_=C[1],{startNode:k,startOffset:w,endNode:k,endOffset:_}}}}},{key:"update",value:function(b,N){var k=this;if(b.some(function(_){return _.type==="characterData"&&_.target===k.textNode})){var w=this.restore();w&&(N.range=w)}}},{key:"value",value:function(){return""}}]),g}(d.default.Embed);j.blotName="cursor",j.className="ql-cursor",j.tagName="span",j.CONTENTS="\uFEFF",n.default=j},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=a(0),l=d(i),o=a(4),c=d(o);function d(x){return x&&x.__esModule?x:{default:x}}function u(x,p){if(!(x instanceof p))throw new TypeError("Cannot call a class as a function")}function h(x,p){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:x}function f(x,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);x.prototype=Object.create(p&&p.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(x,p):x.__proto__=p)}var m=function(x){f(p,x);function p(){return u(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(l.default.Container);m.allowedChildren=[c.default,o.BlockEmbed,m],n.default=m},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.ColorStyle=n.ColorClass=n.ColorAttributor=void 0;var i=function(){function j(v,g){for(var y=0;y<g.length;y++){var b=g[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,g,y){return g&&j(v.prototype,g),y&&j(v,y),v}}(),l=function j(v,g,y){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,g);if(b===void 0){var N=Object.getPrototypeOf(v);return N===null?void 0:j(N,g,y)}else{if("value"in b)return b.value;var k=b.get;return k===void 0?void 0:k.call(y)}},o=a(0),c=d(o);function d(j){return j&&j.__esModule?j:{default:j}}function u(j,v){if(!(j instanceof v))throw new TypeError("Cannot call a class as a function")}function h(j,v){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:j}function f(j,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);j.prototype=Object.create(v&&v.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(j,v):j.__proto__=v)}var m=function(j){f(v,j);function v(){return u(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"value",value:function(y){var b=l(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"value",this).call(this,y);return b.startsWith("rgb(")?(b=b.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+b.split(",").map(function(N){return("00"+parseInt(N).toString(16)).slice(-2)}).join("")):b}}]),v}(c.default.Attributor.Style),x=new c.default.Attributor.Class("color","ql-color",{scope:c.default.Scope.INLINE}),p=new m("color","color",{scope:c.default.Scope.INLINE});n.ColorAttributor=m,n.ColorClass=x,n.ColorStyle=p},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.sanitize=n.default=void 0;var i=function(){function p(j,v){for(var g=0;g<v.length;g++){var y=v[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(j,y.key,y)}}return function(j,v,g){return v&&p(j.prototype,v),g&&p(j,g),j}}(),l=function p(j,v,g){j===null&&(j=Function.prototype);var y=Object.getOwnPropertyDescriptor(j,v);if(y===void 0){var b=Object.getPrototypeOf(j);return b===null?void 0:p(b,v,g)}else{if("value"in y)return y.value;var N=y.get;return N===void 0?void 0:N.call(g)}},o=a(6),c=d(o);function d(p){return p&&p.__esModule?p:{default:p}}function u(p,j){if(!(p instanceof j))throw new TypeError("Cannot call a class as a function")}function h(p,j){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:p}function f(p,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);p.prototype=Object.create(j&&j.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(p,j):p.__proto__=j)}var m=function(p){f(j,p);function j(){return u(this,j),h(this,(j.__proto__||Object.getPrototypeOf(j)).apply(this,arguments))}return i(j,[{key:"format",value:function(g,y){if(g!==this.statics.blotName||!y)return l(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"format",this).call(this,g,y);y=this.constructor.sanitize(y),this.domNode.setAttribute("href",y)}}],[{key:"create",value:function(g){var y=l(j.__proto__||Object.getPrototypeOf(j),"create",this).call(this,g);return g=this.sanitize(g),y.setAttribute("href",g),y.setAttribute("rel","noopener noreferrer"),y.setAttribute("target","_blank"),y}},{key:"formats",value:function(g){return g.getAttribute("href")}},{key:"sanitize",value:function(g){return x(g,this.PROTOCOL_WHITELIST)?g:this.SANITIZED_URL}}]),j}(c.default);m.blotName="link",m.tagName="A",m.SANITIZED_URL="about:blank",m.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function x(p,j){var v=document.createElement("a");v.href=p;var g=v.href.slice(0,v.href.indexOf(":"));return j.indexOf(g)>-1}n.default=m,n.sanitize=x},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},l=function(){function j(v,g){for(var y=0;y<g.length;y++){var b=g[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,g,y){return g&&j(v.prototype,g),y&&j(v,y),v}}(),o=a(23),c=h(o),d=a(107),u=h(d);function h(j){return j&&j.__esModule?j:{default:j}}function f(j,v){if(!(j instanceof v))throw new TypeError("Cannot call a class as a function")}var m=0;function x(j,v){j.setAttribute(v,j.getAttribute(v)!=="true")}var p=function(){function j(v){var g=this;f(this,j),this.select=v,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){g.togglePicker()}),this.label.addEventListener("keydown",function(y){switch(y.keyCode){case c.default.keys.ENTER:g.togglePicker();break;case c.default.keys.ESCAPE:g.escape(),y.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return l(j,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),x(this.label,"aria-expanded"),x(this.options,"aria-hidden")}},{key:"buildItem",value:function(g){var y=this,b=document.createElement("span");return b.tabIndex="0",b.setAttribute("role","button"),b.classList.add("ql-picker-item"),g.hasAttribute("value")&&b.setAttribute("data-value",g.getAttribute("value")),g.textContent&&b.setAttribute("data-label",g.textContent),b.addEventListener("click",function(){y.selectItem(b,!0)}),b.addEventListener("keydown",function(N){switch(N.keyCode){case c.default.keys.ENTER:y.selectItem(b,!0),N.preventDefault();break;case c.default.keys.ESCAPE:y.escape(),N.preventDefault();break}}),b}},{key:"buildLabel",value:function(){var g=document.createElement("span");return g.classList.add("ql-picker-label"),g.innerHTML=u.default,g.tabIndex="0",g.setAttribute("role","button"),g.setAttribute("aria-expanded","false"),this.container.appendChild(g),g}},{key:"buildOptions",value:function(){var g=this,y=document.createElement("span");y.classList.add("ql-picker-options"),y.setAttribute("aria-hidden","true"),y.tabIndex="-1",y.id="ql-picker-options-"+m,m+=1,this.label.setAttribute("aria-controls",y.id),this.options=y,[].slice.call(this.select.options).forEach(function(b){var N=g.buildItem(b);y.appendChild(N),b.selected===!0&&g.selectItem(N)}),this.container.appendChild(y)}},{key:"buildPicker",value:function(){var g=this;[].slice.call(this.select.attributes).forEach(function(y){g.container.setAttribute(y.name,y.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var g=this;this.close(),setTimeout(function(){return g.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(g){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,b=this.container.querySelector(".ql-selected");if(g!==b&&(b!=null&&b.classList.remove("ql-selected"),g!=null&&(g.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(g.parentNode.children,g),g.hasAttribute("data-value")?this.label.setAttribute("data-value",g.getAttribute("data-value")):this.label.removeAttribute("data-value"),g.hasAttribute("data-label")?this.label.setAttribute("data-label",g.getAttribute("data-label")):this.label.removeAttribute("data-label"),y))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":i(Event))==="object"){var N=document.createEvent("Event");N.initEvent("change",!0,!0),this.select.dispatchEvent(N)}this.close()}}},{key:"update",value:function(){var g=void 0;if(this.select.selectedIndex>-1){var y=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];g=this.select.options[this.select.selectedIndex],this.selectItem(y)}else this.selectItem(null);var b=g!=null&&g!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",b)}}]),j}();n.default=p},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=a(0),l=L(i),o=a(5),c=L(o),d=a(4),u=L(d),h=a(16),f=L(h),m=a(25),x=L(m),p=a(24),j=L(p),v=a(35),g=L(v),y=a(6),b=L(y),N=a(22),k=L(N),w=a(7),_=L(w),S=a(55),E=L(S),A=a(42),C=L(A),D=a(23),M=L(D);function L(z){return z&&z.__esModule?z:{default:z}}c.default.register({"blots/block":u.default,"blots/block/embed":d.BlockEmbed,"blots/break":f.default,"blots/container":x.default,"blots/cursor":j.default,"blots/embed":g.default,"blots/inline":b.default,"blots/scroll":k.default,"blots/text":_.default,"modules/clipboard":E.default,"modules/history":C.default,"modules/keyboard":M.default}),l.default.register(u.default,f.default,j.default,b.default,k.default,_.default),n.default=c.default},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=a(1),l=function(){function o(c){this.domNode=c,this.domNode[i.DATA_KEY]={blot:this}}return Object.defineProperty(o.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),o.create=function(c){if(this.tagName==null)throw new i.ParchmentError("Blot definition missing tagName");var d;return Array.isArray(this.tagName)?(typeof c=="string"&&(c=c.toUpperCase(),parseInt(c).toString()===c&&(c=parseInt(c))),typeof c=="number"?d=document.createElement(this.tagName[c-1]):this.tagName.indexOf(c)>-1?d=document.createElement(c):d=document.createElement(this.tagName[0])):d=document.createElement(this.tagName),this.className&&d.classList.add(this.className),d},o.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},o.prototype.clone=function(){var c=this.domNode.cloneNode(!1);return i.create(c)},o.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[i.DATA_KEY]},o.prototype.deleteAt=function(c,d){var u=this.isolate(c,d);u.remove()},o.prototype.formatAt=function(c,d,u,h){var f=this.isolate(c,d);if(i.query(u,i.Scope.BLOT)!=null&&h)f.wrap(u,h);else if(i.query(u,i.Scope.ATTRIBUTE)!=null){var m=i.create(this.statics.scope);f.wrap(m),m.format(u,h)}},o.prototype.insertAt=function(c,d,u){var h=u==null?i.create("text",d):i.create(d,u),f=this.split(c);this.parent.insertBefore(h,f)},o.prototype.insertInto=function(c,d){d===void 0&&(d=null),this.parent!=null&&this.parent.children.remove(this);var u=null;c.children.insertBefore(this,d),d!=null&&(u=d.domNode),(this.domNode.parentNode!=c.domNode||this.domNode.nextSibling!=u)&&c.domNode.insertBefore(this.domNode,u),this.parent=c,this.attach()},o.prototype.isolate=function(c,d){var u=this.split(c);return u.split(d),u},o.prototype.length=function(){return 1},o.prototype.offset=function(c){return c===void 0&&(c=this.parent),this.parent==null||this==c?0:this.parent.children.offset(this)+this.parent.offset(c)},o.prototype.optimize=function(c){this.domNode[i.DATA_KEY]!=null&&delete this.domNode[i.DATA_KEY].mutations},o.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},o.prototype.replace=function(c){c.parent!=null&&(c.parent.insertBefore(this,c.next),c.remove())},o.prototype.replaceWith=function(c,d){var u=typeof c=="string"?i.create(c,d):c;return u.replace(this),u},o.prototype.split=function(c,d){return c===0?this:this.next},o.prototype.update=function(c,d){},o.prototype.wrap=function(c,d){var u=typeof c=="string"?i.create(c,d):c;return this.parent!=null&&this.parent.insertBefore(u,this.next),u.appendChild(this),u},o.blotName="abstract",o}();n.default=l},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=a(12),l=a(32),o=a(33),c=a(1),d=function(){function u(h){this.attributes={},this.domNode=h,this.build()}return u.prototype.attribute=function(h,f){f?h.add(this.domNode,f)&&(h.value(this.domNode)!=null?this.attributes[h.attrName]=h:delete this.attributes[h.attrName]):(h.remove(this.domNode),delete this.attributes[h.attrName])},u.prototype.build=function(){var h=this;this.attributes={};var f=i.default.keys(this.domNode),m=l.default.keys(this.domNode),x=o.default.keys(this.domNode);f.concat(m).concat(x).forEach(function(p){var j=c.query(p,c.Scope.ATTRIBUTE);j instanceof i.default&&(h.attributes[j.attrName]=j)})},u.prototype.copy=function(h){var f=this;Object.keys(this.attributes).forEach(function(m){var x=f.attributes[m].value(f.domNode);h.format(m,x)})},u.prototype.move=function(h){var f=this;this.copy(h),Object.keys(this.attributes).forEach(function(m){f.attributes[m].remove(f.domNode)}),this.attributes={}},u.prototype.values=function(){var h=this;return Object.keys(this.attributes).reduce(function(f,m){return f[m]=h.attributes[m].value(h.domNode),f},{})},u}();n.default=d},function(s,n,a){var i=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])};return function(u,h){d(u,h);function f(){this.constructor=u}u.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=a(12);function o(d,u){var h=d.getAttribute("class")||"";return h.split(/\s+/).filter(function(f){return f.indexOf(u+"-")===0})}var c=function(d){i(u,d);function u(){return d!==null&&d.apply(this,arguments)||this}return u.keys=function(h){return(h.getAttribute("class")||"").split(/\s+/).map(function(f){return f.split("-").slice(0,-1).join("-")})},u.prototype.add=function(h,f){return this.canAdd(h,f)?(this.remove(h),h.classList.add(this.keyName+"-"+f),!0):!1},u.prototype.remove=function(h){var f=o(h,this.keyName);f.forEach(function(m){h.classList.remove(m)}),h.classList.length===0&&h.removeAttribute("class")},u.prototype.value=function(h){var f=o(h,this.keyName)[0]||"",m=f.slice(this.keyName.length+1);return this.canAdd(h,m)?m:""},u}(l.default);n.default=c},function(s,n,a){var i=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])};return function(u,h){d(u,h);function f(){this.constructor=u}u.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=a(12);function o(d){var u=d.split("-"),h=u.slice(1).map(function(f){return f[0].toUpperCase()+f.slice(1)}).join("");return u[0]+h}var c=function(d){i(u,d);function u(){return d!==null&&d.apply(this,arguments)||this}return u.keys=function(h){return(h.getAttribute("style")||"").split(";").map(function(f){var m=f.split(":");return m[0].trim()})},u.prototype.add=function(h,f){return this.canAdd(h,f)?(h.style[o(this.keyName)]=f,!0):!1},u.prototype.remove=function(h){h.style[o(this.keyName)]="",h.getAttribute("style")||h.removeAttribute("style")},u.prototype.value=function(h){var f=h.style[o(this.keyName)];return this.canAdd(h,f)?f:""},u}(l.default);n.default=c},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function c(d,u){for(var h=0;h<u.length;h++){var f=u[h];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(d,f.key,f)}}return function(d,u,h){return u&&c(d.prototype,u),h&&c(d,h),d}}();function l(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}var o=function(){function c(d,u){l(this,c),this.quill=d,this.options=u,this.modules={}}return i(c,[{key:"init",value:function(){var u=this;Object.keys(this.options.modules).forEach(function(h){u.modules[h]==null&&u.addModule(h)})}},{key:"addModule",value:function(u){var h=this.quill.constructor.import("modules/"+u);return this.modules[u]=new h(this.quill,this.options.modules[u]||{}),this.modules[u]}}]),c}();o.DEFAULTS={modules:{}},o.themes={default:o},n.default=o},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function v(g,y){for(var b=0;b<y.length;b++){var N=y[b];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(g,N.key,N)}}return function(g,y,b){return y&&v(g.prototype,y),b&&v(g,b),g}}(),l=function v(g,y,b){g===null&&(g=Function.prototype);var N=Object.getOwnPropertyDescriptor(g,y);if(N===void 0){var k=Object.getPrototypeOf(g);return k===null?void 0:v(k,y,b)}else{if("value"in N)return N.value;var w=N.get;return w===void 0?void 0:w.call(b)}},o=a(0),c=h(o),d=a(7),u=h(d);function h(v){return v&&v.__esModule?v:{default:v}}function f(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function m(v,g){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:v}function x(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(v,g):v.__proto__=g)}var p="\uFEFF",j=function(v){x(g,v);function g(y){f(this,g);var b=m(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,y));return b.contentNode=document.createElement("span"),b.contentNode.setAttribute("contenteditable",!1),[].slice.call(b.domNode.childNodes).forEach(function(N){b.contentNode.appendChild(N)}),b.leftGuard=document.createTextNode(p),b.rightGuard=document.createTextNode(p),b.domNode.appendChild(b.leftGuard),b.domNode.appendChild(b.contentNode),b.domNode.appendChild(b.rightGuard),b}return i(g,[{key:"index",value:function(b,N){return b===this.leftGuard?0:b===this.rightGuard?1:l(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"index",this).call(this,b,N)}},{key:"restore",value:function(b){var N=void 0,k=void 0,w=b.data.split(p).join("");if(b===this.leftGuard)if(this.prev instanceof u.default){var _=this.prev.length();this.prev.insertAt(_,w),N={startNode:this.prev.domNode,startOffset:_+w.length}}else k=document.createTextNode(w),this.parent.insertBefore(c.default.create(k),this),N={startNode:k,startOffset:w.length};else b===this.rightGuard&&(this.next instanceof u.default?(this.next.insertAt(0,w),N={startNode:this.next.domNode,startOffset:w.length}):(k=document.createTextNode(w),this.parent.insertBefore(c.default.create(k),this.next),N={startNode:k,startOffset:w.length}));return b.data=p,N}},{key:"update",value:function(b,N){var k=this;b.forEach(function(w){if(w.type==="characterData"&&(w.target===k.leftGuard||w.target===k.rightGuard)){var _=k.restore(w.target);_&&(N.range=_)}})}}]),g}(c.default.Embed);n.default=j},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.AlignStyle=n.AlignClass=n.AlignAttribute=void 0;var i=a(0),l=o(i);function o(f){return f&&f.__esModule?f:{default:f}}var c={scope:l.default.Scope.BLOCK,whitelist:["right","center","justify"]},d=new l.default.Attributor.Attribute("align","align",c),u=new l.default.Attributor.Class("align","ql-align",c),h=new l.default.Attributor.Style("align","text-align",c);n.AlignAttribute=d,n.AlignClass=u,n.AlignStyle=h},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.BackgroundStyle=n.BackgroundClass=void 0;var i=a(0),l=c(i),o=a(26);function c(h){return h&&h.__esModule?h:{default:h}}var d=new l.default.Attributor.Class("background","ql-bg",{scope:l.default.Scope.INLINE}),u=new o.ColorAttributor("background","background-color",{scope:l.default.Scope.INLINE});n.BackgroundClass=d,n.BackgroundStyle=u},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.DirectionStyle=n.DirectionClass=n.DirectionAttribute=void 0;var i=a(0),l=o(i);function o(f){return f&&f.__esModule?f:{default:f}}var c={scope:l.default.Scope.BLOCK,whitelist:["rtl"]},d=new l.default.Attributor.Attribute("direction","dir",c),u=new l.default.Attributor.Class("direction","ql-direction",c),h=new l.default.Attributor.Style("direction","direction",c);n.DirectionAttribute=d,n.DirectionClass=u,n.DirectionStyle=h},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.FontClass=n.FontStyle=void 0;var i=function(){function v(g,y){for(var b=0;b<y.length;b++){var N=y[b];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(g,N.key,N)}}return function(g,y,b){return y&&v(g.prototype,y),b&&v(g,b),g}}(),l=function v(g,y,b){g===null&&(g=Function.prototype);var N=Object.getOwnPropertyDescriptor(g,y);if(N===void 0){var k=Object.getPrototypeOf(g);return k===null?void 0:v(k,y,b)}else{if("value"in N)return N.value;var w=N.get;return w===void 0?void 0:w.call(b)}},o=a(0),c=d(o);function d(v){return v&&v.__esModule?v:{default:v}}function u(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function h(v,g){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:v}function f(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(v,g):v.__proto__=g)}var m={scope:c.default.Scope.INLINE,whitelist:["serif","monospace"]},x=new c.default.Attributor.Class("font","ql-font",m),p=function(v){f(g,v);function g(){return u(this,g),h(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return i(g,[{key:"value",value:function(b){return l(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"value",this).call(this,b).replace(/["']/g,"")}}]),g}(c.default.Attributor.Style),j=new p("font","font-family",m);n.FontStyle=j,n.FontClass=x},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.SizeStyle=n.SizeClass=void 0;var i=a(0),l=o(i);function o(u){return u&&u.__esModule?u:{default:u}}var c=new l.default.Attributor.Class("size","ql-size",{scope:l.default.Scope.INLINE,whitelist:["small","large","huge"]}),d=new l.default.Attributor.Style("size","font-size",{scope:l.default.Scope.INLINE,whitelist:["10px","18px","32px"]});n.SizeClass=c,n.SizeStyle=d},function(s,n,a){s.exports={align:{"":a(76),center:a(77),right:a(78),justify:a(79)},background:a(80),blockquote:a(81),bold:a(82),clean:a(83),code:a(58),"code-block":a(58),color:a(84),direction:{"":a(85),rtl:a(86)},float:{center:a(87),full:a(88),left:a(89),right:a(90)},formula:a(91),header:{1:a(92),2:a(93)},italic:a(94),image:a(95),indent:{"+1":a(96),"-1":a(97)},link:a(98),list:{ordered:a(99),bullet:a(100),check:a(101)},script:{sub:a(102),super:a(103)},strike:a(104),underline:a(105),video:a(106)}},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.getLastChangeIndex=n.default=void 0;var i=function(){function y(b,N){for(var k=0;k<N.length;k++){var w=N[k];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(b,w.key,w)}}return function(b,N,k){return N&&y(b.prototype,N),k&&y(b,k),b}}(),l=a(0),o=f(l),c=a(5),d=f(c),u=a(9),h=f(u);function f(y){return y&&y.__esModule?y:{default:y}}function m(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function x(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:y}function p(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}var j=function(y){p(b,y);function b(N,k){m(this,b);var w=x(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,N,k));return w.lastRecorded=0,w.ignoreChange=!1,w.clear(),w.quill.on(d.default.events.EDITOR_CHANGE,function(_,S,E,A){_!==d.default.events.TEXT_CHANGE||w.ignoreChange||(!w.options.userOnly||A===d.default.sources.USER?w.record(S,E):w.transform(S))}),w.quill.keyboard.addBinding({key:"Z",shortKey:!0},w.undo.bind(w)),w.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},w.redo.bind(w)),/Win/i.test(navigator.platform)&&w.quill.keyboard.addBinding({key:"Y",shortKey:!0},w.redo.bind(w)),w}return i(b,[{key:"change",value:function(k,w){if(this.stack[k].length!==0){var _=this.stack[k].pop();this.stack[w].push(_),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(_[k],d.default.sources.USER),this.ignoreChange=!1;var S=g(_[k]);this.quill.setSelection(S)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(k,w){if(k.ops.length!==0){this.stack.redo=[];var _=this.quill.getContents().diff(w),S=Date.now();if(this.lastRecorded+this.options.delay>S&&this.stack.undo.length>0){var E=this.stack.undo.pop();_=_.compose(E.undo),k=E.redo.compose(k)}else this.lastRecorded=S;this.stack.undo.push({redo:k,undo:_}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(k){this.stack.undo.forEach(function(w){w.undo=k.transform(w.undo,!0),w.redo=k.transform(w.redo,!0)}),this.stack.redo.forEach(function(w){w.undo=k.transform(w.undo,!0),w.redo=k.transform(w.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),b}(h.default);j.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function v(y){var b=y.ops[y.ops.length-1];return b==null?!1:b.insert!=null?typeof b.insert=="string"&&b.insert.endsWith(`
`):b.attributes!=null?Object.keys(b.attributes).some(function(N){return o.default.query(N,o.default.Scope.BLOCK)!=null}):!1}function g(y){var b=y.reduce(function(k,w){return k+=w.delete||0,k},0),N=y.length()-b;return v(y)&&(N-=1),N}n.default=j,n.getLastChangeIndex=g},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BaseTooltip=void 0;var i=function(){function q(I,$){for(var G=0;G<$.length;G++){var R=$[G];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(I,R.key,R)}}return function(I,$,G){return $&&q(I.prototype,$),G&&q(I,G),I}}(),l=function q(I,$,G){I===null&&(I=Function.prototype);var R=Object.getOwnPropertyDescriptor(I,$);if(R===void 0){var B=Object.getPrototypeOf(I);return B===null?void 0:q(B,$,G)}else{if("value"in R)return R.value;var Q=R.get;return Q===void 0?void 0:Q.call(G)}},o=a(3),c=S(o),d=a(2),u=S(d),h=a(8),f=S(h),m=a(23),x=S(m),p=a(34),j=S(p),v=a(59),g=S(v),y=a(60),b=S(y),N=a(28),k=S(N),w=a(61),_=S(w);function S(q){return q&&q.__esModule?q:{default:q}}function E(q,I){if(!(q instanceof I))throw new TypeError("Cannot call a class as a function")}function A(q,I){if(!q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:q}function C(q,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);q.prototype=Object.create(I&&I.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(q,I):q.__proto__=I)}var D=[!1,"center","right","justify"],M=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],L=[!1,"serif","monospace"],z=["1","2","3",!1],Y=["small",!1,"large","huge"],X=function(q){C(I,q);function I($,G){E(this,I);var R=A(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,$,G)),B=function Q(te){if(!document.body.contains($.root))return document.body.removeEventListener("click",Q);R.tooltip!=null&&!R.tooltip.root.contains(te.target)&&document.activeElement!==R.tooltip.textbox&&!R.quill.hasFocus()&&R.tooltip.hide(),R.pickers!=null&&R.pickers.forEach(function(ae){ae.container.contains(te.target)||ae.close()})};return $.emitter.listenDOM("click",document.body,B),R}return i(I,[{key:"addModule",value:function(G){var R=l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"addModule",this).call(this,G);return G==="toolbar"&&this.extendToolbar(R),R}},{key:"buildButtons",value:function(G,R){G.forEach(function(B){var Q=B.getAttribute("class")||"";Q.split(/\s+/).forEach(function(te){if(te.startsWith("ql-")&&(te=te.slice(3),R[te]!=null))if(te==="direction")B.innerHTML=R[te][""]+R[te].rtl;else if(typeof R[te]=="string")B.innerHTML=R[te];else{var ae=B.value||"";ae!=null&&R[te][ae]&&(B.innerHTML=R[te][ae])}})})}},{key:"buildPickers",value:function(G,R){var B=this;this.pickers=G.map(function(te){if(te.classList.contains("ql-align"))return te.querySelector("option")==null&&F(te,D),new b.default(te,R.align);if(te.classList.contains("ql-background")||te.classList.contains("ql-color")){var ae=te.classList.contains("ql-background")?"background":"color";return te.querySelector("option")==null&&F(te,M,ae==="background"?"#ffffff":"#000000"),new g.default(te,R[ae])}else return te.querySelector("option")==null&&(te.classList.contains("ql-font")?F(te,L):te.classList.contains("ql-header")?F(te,z):te.classList.contains("ql-size")&&F(te,Y)),new k.default(te)});var Q=function(){B.pickers.forEach(function(ae){ae.update()})};this.quill.on(f.default.events.EDITOR_CHANGE,Q)}}]),I}(j.default);X.DEFAULTS=(0,c.default)(!0,{},j.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var I=this,$=this.container.querySelector("input.ql-image[type=file]");$==null&&($=document.createElement("input"),$.setAttribute("type","file"),$.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),$.classList.add("ql-image"),$.addEventListener("change",function(){if($.files!=null&&$.files[0]!=null){var G=new FileReader;G.onload=function(R){var B=I.quill.getSelection(!0);I.quill.updateContents(new u.default().retain(B.index).delete(B.length).insert({image:R.target.result}),f.default.sources.USER),I.quill.setSelection(B.index+1,f.default.sources.SILENT),$.value=""},G.readAsDataURL($.files[0])}}),this.container.appendChild($)),$.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var Z=function(q){C(I,q);function I($,G){E(this,I);var R=A(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,$,G));return R.textbox=R.root.querySelector('input[type="text"]'),R.listen(),R}return i(I,[{key:"listen",value:function(){var G=this;this.textbox.addEventListener("keydown",function(R){x.default.match(R,"enter")?(G.save(),R.preventDefault()):x.default.match(R,"escape")&&(G.cancel(),R.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),R!=null?this.textbox.value=R:G!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+G)||""),this.root.setAttribute("data-mode",G)}},{key:"restoreFocus",value:function(){var G=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=G}},{key:"save",value:function(){var G=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var R=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",G,f.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",G,f.default.sources.USER)),this.quill.root.scrollTop=R;break}case"video":G=W(G);case"formula":{if(!G)break;var B=this.quill.getSelection(!0);if(B!=null){var Q=B.index+B.length;this.quill.insertEmbed(Q,this.root.getAttribute("data-mode"),G,f.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(Q+1," ",f.default.sources.USER),this.quill.setSelection(Q+2,f.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),I}(_.default);function W(q){var I=q.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||q.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return I?(I[1]||"https")+"://www.youtube.com/embed/"+I[2]+"?showinfo=0":(I=q.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(I[1]||"https")+"://player.vimeo.com/video/"+I[2]+"/":q}function F(q,I){var $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;I.forEach(function(G){var R=document.createElement("option");G===$?R.setAttribute("selected","selected"):R.setAttribute("value",G),q.appendChild(R)})}n.BaseTooltip=Z,n.default=X},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function l(){this.head=this.tail=null,this.length=0}return l.prototype.append=function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];this.insertBefore(o[0],null),o.length>1&&this.append.apply(this,o.slice(1))},l.prototype.contains=function(o){for(var c,d=this.iterator();c=d();)if(c===o)return!0;return!1},l.prototype.insertBefore=function(o,c){o&&(o.next=c,c!=null?(o.prev=c.prev,c.prev!=null&&(c.prev.next=o),c.prev=o,c===this.head&&(this.head=o)):this.tail!=null?(this.tail.next=o,o.prev=this.tail,this.tail=o):(o.prev=null,this.head=this.tail=o),this.length+=1)},l.prototype.offset=function(o){for(var c=0,d=this.head;d!=null;){if(d===o)return c;c+=d.length(),d=d.next}return-1},l.prototype.remove=function(o){this.contains(o)&&(o.prev!=null&&(o.prev.next=o.next),o.next!=null&&(o.next.prev=o.prev),o===this.head&&(this.head=o.next),o===this.tail&&(this.tail=o.prev),this.length-=1)},l.prototype.iterator=function(o){return o===void 0&&(o=this.head),function(){var c=o;return o!=null&&(o=o.next),c}},l.prototype.find=function(o,c){c===void 0&&(c=!1);for(var d,u=this.iterator();d=u();){var h=d.length();if(o<h||c&&o===h&&(d.next==null||d.next.length()!==0))return[d,o];o-=h}return[null,0]},l.prototype.forEach=function(o){for(var c,d=this.iterator();c=d();)o(c)},l.prototype.forEachAt=function(o,c,d){if(!(c<=0))for(var u=this.find(o),h=u[0],f=u[1],m,x=o-f,p=this.iterator(h);(m=p())&&x<o+c;){var j=m.length();o>x?d(m,o-x,Math.min(c,x+j-o)):d(m,0,Math.min(j,o+c-x)),x+=j}},l.prototype.map=function(o){return this.reduce(function(c,d){return c.push(o(d)),c},[])},l.prototype.reduce=function(o,c){for(var d,u=this.iterator();d=u();)c=o(c,d);return c},l}();n.default=i},function(s,n,a){var i=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,m){f.__proto__=m}||function(f,m){for(var x in m)m.hasOwnProperty(x)&&(f[x]=m[x])};return function(f,m){h(f,m);function x(){this.constructor=f}f.prototype=m===null?Object.create(m):(x.prototype=m.prototype,new x)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=a(17),o=a(1),c={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},d=100,u=function(h){i(f,h);function f(m){var x=h.call(this,m)||this;return x.scroll=x,x.observer=new MutationObserver(function(p){x.update(p)}),x.observer.observe(x.domNode,c),x.attach(),x}return f.prototype.detach=function(){h.prototype.detach.call(this),this.observer.disconnect()},f.prototype.deleteAt=function(m,x){this.update(),m===0&&x===this.length()?this.children.forEach(function(p){p.remove()}):h.prototype.deleteAt.call(this,m,x)},f.prototype.formatAt=function(m,x,p,j){this.update(),h.prototype.formatAt.call(this,m,x,p,j)},f.prototype.insertAt=function(m,x,p){this.update(),h.prototype.insertAt.call(this,m,x,p)},f.prototype.optimize=function(m,x){var p=this;m===void 0&&(m=[]),x===void 0&&(x={}),h.prototype.optimize.call(this,x);for(var j=[].slice.call(this.observer.takeRecords());j.length>0;)m.push(j.pop());for(var v=function(N,k){k===void 0&&(k=!0),!(N==null||N===p)&&N.domNode.parentNode!=null&&(N.domNode[o.DATA_KEY].mutations==null&&(N.domNode[o.DATA_KEY].mutations=[]),k&&v(N.parent))},g=function(N){N.domNode[o.DATA_KEY]==null||N.domNode[o.DATA_KEY].mutations==null||(N instanceof l.default&&N.children.forEach(g),N.optimize(x))},y=m,b=0;y.length>0;b+=1){if(b>=d)throw new Error("[Parchment] Maximum optimize iterations reached");for(y.forEach(function(N){var k=o.find(N.target,!0);k!=null&&(k.domNode===N.target&&(N.type==="childList"?(v(o.find(N.previousSibling,!1)),[].forEach.call(N.addedNodes,function(w){var _=o.find(w,!1);v(_,!1),_ instanceof l.default&&_.children.forEach(function(S){v(S,!1)})})):N.type==="attributes"&&v(k.prev)),v(k))}),this.children.forEach(g),y=[].slice.call(this.observer.takeRecords()),j=y.slice();j.length>0;)m.push(j.pop())}},f.prototype.update=function(m,x){var p=this;x===void 0&&(x={}),m=m||this.observer.takeRecords(),m.map(function(j){var v=o.find(j.target,!0);return v==null?null:v.domNode[o.DATA_KEY].mutations==null?(v.domNode[o.DATA_KEY].mutations=[j],v):(v.domNode[o.DATA_KEY].mutations.push(j),null)}).forEach(function(j){j==null||j===p||j.domNode[o.DATA_KEY]==null||j.update(j.domNode[o.DATA_KEY].mutations||[],x)}),this.domNode[o.DATA_KEY].mutations!=null&&h.prototype.update.call(this,this.domNode[o.DATA_KEY].mutations,x),this.optimize(m,x)},f.blotName="scroll",f.defaultChild="block",f.scope=o.Scope.BLOCK_BLOT,f.tagName="DIV",f}(l.default);n.default=u},function(s,n,a){var i=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var m in f)f.hasOwnProperty(m)&&(h[m]=f[m])};return function(h,f){u(h,f);function m(){this.constructor=h}h.prototype=f===null?Object.create(f):(m.prototype=f.prototype,new m)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=a(18),o=a(1);function c(u,h){if(Object.keys(u).length!==Object.keys(h).length)return!1;for(var f in u)if(u[f]!==h[f])return!1;return!0}var d=function(u){i(h,u);function h(){return u!==null&&u.apply(this,arguments)||this}return h.formats=function(f){if(f.tagName!==h.tagName)return u.formats.call(this,f)},h.prototype.format=function(f,m){var x=this;f===this.statics.blotName&&!m?(this.children.forEach(function(p){p instanceof l.default||(p=p.wrap(h.blotName,!0)),x.attributes.copy(p)}),this.unwrap()):u.prototype.format.call(this,f,m)},h.prototype.formatAt=function(f,m,x,p){if(this.formats()[x]!=null||o.query(x,o.Scope.ATTRIBUTE)){var j=this.isolate(f,m);j.format(x,p)}else u.prototype.formatAt.call(this,f,m,x,p)},h.prototype.optimize=function(f){u.prototype.optimize.call(this,f);var m=this.formats();if(Object.keys(m).length===0)return this.unwrap();var x=this.next;x instanceof h&&x.prev===this&&c(m,x.formats())&&(x.moveChildren(this),x.remove())},h.blotName="inline",h.scope=o.Scope.INLINE_BLOT,h.tagName="SPAN",h}(l.default);n.default=d},function(s,n,a){var i=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])};return function(u,h){d(u,h);function f(){this.constructor=u}u.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=a(18),o=a(1),c=function(d){i(u,d);function u(){return d!==null&&d.apply(this,arguments)||this}return u.formats=function(h){var f=o.query(u.blotName).tagName;if(h.tagName!==f)return d.formats.call(this,h)},u.prototype.format=function(h,f){o.query(h,o.Scope.BLOCK)!=null&&(h===this.statics.blotName&&!f?this.replaceWith(u.blotName):d.prototype.format.call(this,h,f))},u.prototype.formatAt=function(h,f,m,x){o.query(m,o.Scope.BLOCK)!=null?this.format(m,x):d.prototype.formatAt.call(this,h,f,m,x)},u.prototype.insertAt=function(h,f,m){if(m==null||o.query(f,o.Scope.INLINE)!=null)d.prototype.insertAt.call(this,h,f,m);else{var x=this.split(h),p=o.create(f,m);x.parent.insertBefore(p,x)}},u.prototype.update=function(h,f){navigator.userAgent.match(/Trident/)?this.build():d.prototype.update.call(this,h,f)},u.blotName="block",u.scope=o.Scope.BLOCK_BLOT,u.tagName="P",u}(l.default);n.default=c},function(s,n,a){var i=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,u){d.__proto__=u}||function(d,u){for(var h in u)u.hasOwnProperty(h)&&(d[h]=u[h])};return function(d,u){c(d,u);function h(){this.constructor=d}d.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=a(19),o=function(c){i(d,c);function d(){return c!==null&&c.apply(this,arguments)||this}return d.formats=function(u){},d.prototype.format=function(u,h){c.prototype.formatAt.call(this,0,this.length(),u,h)},d.prototype.formatAt=function(u,h,f,m){u===0&&h===this.length()?this.format(f,m):c.prototype.formatAt.call(this,u,h,f,m)},d.prototype.formats=function(){return this.statics.formats(this.domNode)},d}(l.default);n.default=o},function(s,n,a){var i=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])};return function(u,h){d(u,h);function f(){this.constructor=u}u.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var l=a(19),o=a(1),c=function(d){i(u,d);function u(h){var f=d.call(this,h)||this;return f.text=f.statics.value(f.domNode),f}return u.create=function(h){return document.createTextNode(h)},u.value=function(h){var f=h.data;return f.normalize&&(f=f.normalize()),f},u.prototype.deleteAt=function(h,f){this.domNode.data=this.text=this.text.slice(0,h)+this.text.slice(h+f)},u.prototype.index=function(h,f){return this.domNode===h?f:-1},u.prototype.insertAt=function(h,f,m){m==null?(this.text=this.text.slice(0,h)+f+this.text.slice(h),this.domNode.data=this.text):d.prototype.insertAt.call(this,h,f,m)},u.prototype.length=function(){return this.text.length},u.prototype.optimize=function(h){d.prototype.optimize.call(this,h),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof u&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},u.prototype.position=function(h,f){return[this.domNode,h]},u.prototype.split=function(h,f){if(f===void 0&&(f=!1),!f){if(h===0)return this;if(h===this.length())return this.next}var m=o.create(this.domNode.splitText(h));return this.parent.insertBefore(m,this.next),this.text=this.statics.value(this.domNode),m},u.prototype.update=function(h,f){var m=this;h.some(function(x){return x.type==="characterData"&&x.target===m.domNode})&&(this.text=this.statics.value(this.domNode))},u.prototype.value=function(){return this.text},u.blotName="text",u.scope=o.Scope.INLINE_BLOT,u}(l.default);n.default=c},function(s,n,a){var i=document.createElement("div");if(i.classList.toggle("test-class",!1),i.classList.contains("test-class")){var l=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(o,c){return arguments.length>1&&!this.contains(o)==!c?c:l.call(this,o)}}String.prototype.startsWith||(String.prototype.startsWith=function(o,c){return c=c||0,this.substr(c,o.length)===o}),String.prototype.endsWith||(String.prototype.endsWith=function(o,c){var d=this.toString();(typeof c!="number"||!isFinite(c)||Math.floor(c)!==c||c>d.length)&&(c=d.length),c-=o.length;var u=d.indexOf(o,c);return u!==-1&&u===c}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(c){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof c!="function")throw new TypeError("predicate must be a function");for(var d=Object(this),u=d.length>>>0,h=arguments[1],f,m=0;m<u;m++)if(f=d[m],c.call(h,f,m,d))return f}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(s,n){var a=-1,i=1,l=0;function o(b,N,k){if(b==N)return b?[[l,b]]:[];(k<0||b.length<k)&&(k=null);var w=h(b,N),_=b.substring(0,w);b=b.substring(w),N=N.substring(w),w=f(b,N);var S=b.substring(b.length-w);b=b.substring(0,b.length-w),N=N.substring(0,N.length-w);var E=c(b,N);return _&&E.unshift([l,_]),S&&E.push([l,S]),x(E),k!=null&&(E=v(E,k)),E=g(E),E}function c(b,N){var k;if(!b)return[[i,N]];if(!N)return[[a,b]];var w=b.length>N.length?b:N,_=b.length>N.length?N:b,S=w.indexOf(_);if(S!=-1)return k=[[i,w.substring(0,S)],[l,_],[i,w.substring(S+_.length)]],b.length>N.length&&(k[0][0]=k[2][0]=a),k;if(_.length==1)return[[a,b],[i,N]];var E=m(b,N);if(E){var A=E[0],C=E[1],D=E[2],M=E[3],L=E[4],z=o(A,D),Y=o(C,M);return z.concat([[l,L]],Y)}return d(b,N)}function d(b,N){for(var k=b.length,w=N.length,_=Math.ceil((k+w)/2),S=_,E=2*_,A=new Array(E),C=new Array(E),D=0;D<E;D++)A[D]=-1,C[D]=-1;A[S+1]=0,C[S+1]=0;for(var M=k-w,L=M%2!=0,z=0,Y=0,X=0,Z=0,W=0;W<_;W++){for(var F=-W+z;F<=W-Y;F+=2){var q=S+F,I;F==-W||F!=W&&A[q-1]<A[q+1]?I=A[q+1]:I=A[q-1]+1;for(var $=I-F;I<k&&$<w&&b.charAt(I)==N.charAt($);)I++,$++;if(A[q]=I,I>k)Y+=2;else if($>w)z+=2;else if(L){var G=S+M-F;if(G>=0&&G<E&&C[G]!=-1){var R=k-C[G];if(I>=R)return u(b,N,I,$)}}}for(var B=-W+X;B<=W-Z;B+=2){var G=S+B,R;B==-W||B!=W&&C[G-1]<C[G+1]?R=C[G+1]:R=C[G-1]+1;for(var Q=R-B;R<k&&Q<w&&b.charAt(k-R-1)==N.charAt(w-Q-1);)R++,Q++;if(C[G]=R,R>k)Z+=2;else if(Q>w)X+=2;else if(!L){var q=S+M-B;if(q>=0&&q<E&&A[q]!=-1){var I=A[q],$=S+I-q;if(R=k-R,I>=R)return u(b,N,I,$)}}}}return[[a,b],[i,N]]}function u(b,N,k,w){var _=b.substring(0,k),S=N.substring(0,w),E=b.substring(k),A=N.substring(w),C=o(_,S),D=o(E,A);return C.concat(D)}function h(b,N){if(!b||!N||b.charAt(0)!=N.charAt(0))return 0;for(var k=0,w=Math.min(b.length,N.length),_=w,S=0;k<_;)b.substring(S,_)==N.substring(S,_)?(k=_,S=k):w=_,_=Math.floor((w-k)/2+k);return _}function f(b,N){if(!b||!N||b.charAt(b.length-1)!=N.charAt(N.length-1))return 0;for(var k=0,w=Math.min(b.length,N.length),_=w,S=0;k<_;)b.substring(b.length-_,b.length-S)==N.substring(N.length-_,N.length-S)?(k=_,S=k):w=_,_=Math.floor((w-k)/2+k);return _}function m(b,N){var k=b.length>N.length?b:N,w=b.length>N.length?N:b;if(k.length<4||w.length*2<k.length)return null;function _(Y,X,Z){for(var W=Y.substring(Z,Z+Math.floor(Y.length/4)),F=-1,q="",I,$,G,R;(F=X.indexOf(W,F+1))!=-1;){var B=h(Y.substring(Z),X.substring(F)),Q=f(Y.substring(0,Z),X.substring(0,F));q.length<Q+B&&(q=X.substring(F-Q,F)+X.substring(F,F+B),I=Y.substring(0,Z-Q),$=Y.substring(Z+B),G=X.substring(0,F-Q),R=X.substring(F+B))}return q.length*2>=Y.length?[I,$,G,R,q]:null}var S=_(k,w,Math.ceil(k.length/4)),E=_(k,w,Math.ceil(k.length/2)),A;if(!S&&!E)return null;E?S?A=S[4].length>E[4].length?S:E:A=E:A=S;var C,D,M,L;b.length>N.length?(C=A[0],D=A[1],M=A[2],L=A[3]):(M=A[0],L=A[1],C=A[2],D=A[3]);var z=A[4];return[C,D,M,L,z]}function x(b){b.push([l,""]);for(var N=0,k=0,w=0,_="",S="",E;N<b.length;)switch(b[N][0]){case i:w++,S+=b[N][1],N++;break;case a:k++,_+=b[N][1],N++;break;case l:k+w>1?(k!==0&&w!==0&&(E=h(S,_),E!==0&&(N-k-w>0&&b[N-k-w-1][0]==l?b[N-k-w-1][1]+=S.substring(0,E):(b.splice(0,0,[l,S.substring(0,E)]),N++),S=S.substring(E),_=_.substring(E)),E=f(S,_),E!==0&&(b[N][1]=S.substring(S.length-E)+b[N][1],S=S.substring(0,S.length-E),_=_.substring(0,_.length-E))),k===0?b.splice(N-w,k+w,[i,S]):w===0?b.splice(N-k,k+w,[a,_]):b.splice(N-k-w,k+w,[a,_],[i,S]),N=N-k-w+(k?1:0)+(w?1:0)+1):N!==0&&b[N-1][0]==l?(b[N-1][1]+=b[N][1],b.splice(N,1)):N++,w=0,k=0,_="",S="";break}b[b.length-1][1]===""&&b.pop();var A=!1;for(N=1;N<b.length-1;)b[N-1][0]==l&&b[N+1][0]==l&&(b[N][1].substring(b[N][1].length-b[N-1][1].length)==b[N-1][1]?(b[N][1]=b[N-1][1]+b[N][1].substring(0,b[N][1].length-b[N-1][1].length),b[N+1][1]=b[N-1][1]+b[N+1][1],b.splice(N-1,1),A=!0):b[N][1].substring(0,b[N+1][1].length)==b[N+1][1]&&(b[N-1][1]+=b[N+1][1],b[N][1]=b[N][1].substring(b[N+1][1].length)+b[N+1][1],b.splice(N+1,1),A=!0)),N++;A&&x(b)}var p=o;p.INSERT=i,p.DELETE=a,p.EQUAL=l,s.exports=p;function j(b,N){if(N===0)return[l,b];for(var k=0,w=0;w<b.length;w++){var _=b[w];if(_[0]===a||_[0]===l){var S=k+_[1].length;if(N===S)return[w+1,b];if(N<S){b=b.slice();var E=N-k,A=[_[0],_[1].slice(0,E)],C=[_[0],_[1].slice(E)];return b.splice(w,1,A,C),[w+1,b]}else k=S}}throw new Error("cursor_pos is out of bounds!")}function v(b,N){var k=j(b,N),w=k[1],_=k[0],S=w[_],E=w[_+1];if(S==null)return b;if(S[0]!==l)return b;if(E!=null&&S[1]+E[1]===E[1]+S[1])return w.splice(_,2,E,S),y(w,_,2);if(E!=null&&E[1].indexOf(S[1])===0){w.splice(_,2,[E[0],S[1]],[0,S[1]]);var A=E[1].slice(S[1].length);return A.length>0&&w.splice(_+2,0,[E[0],A]),y(w,_,3)}else return b}function g(b){for(var N=!1,k=function(E){return E.charCodeAt(0)>=56320&&E.charCodeAt(0)<=57343},w=function(E){return E.charCodeAt(E.length-1)>=55296&&E.charCodeAt(E.length-1)<=56319},_=2;_<b.length;_+=1)b[_-2][0]===l&&w(b[_-2][1])&&b[_-1][0]===a&&k(b[_-1][1])&&b[_][0]===i&&k(b[_][1])&&(N=!0,b[_-1][1]=b[_-2][1].slice(-1)+b[_-1][1],b[_][1]=b[_-2][1].slice(-1)+b[_][1],b[_-2][1]=b[_-2][1].slice(0,-1));if(!N)return b;for(var S=[],_=0;_<b.length;_+=1)b[_][1].length>0&&S.push(b[_]);return S}function y(b,N,k){for(var w=N+k-1;w>=0&&w>=N-1;w--)if(w+1<b.length){var _=b[w],S=b[w+1];_[0]===S[1]&&b.splice(w,2,[_[0],_[1]+S[1]])}return b}},function(s,n){n=s.exports=typeof Object.keys=="function"?Object.keys:a,n.shim=a;function a(i){var l=[];for(var o in i)l.push(o);return l}},function(s,n){var a=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";n=s.exports=a?i:l,n.supported=i;function i(o){return Object.prototype.toString.call(o)=="[object Arguments]"}n.unsupported=l;function l(o){return o&&typeof o=="object"&&typeof o.length=="number"&&Object.prototype.hasOwnProperty.call(o,"callee")&&!Object.prototype.propertyIsEnumerable.call(o,"callee")||!1}},function(s,n){var a=Object.prototype.hasOwnProperty,i="~";function l(){}Object.create&&(l.prototype=Object.create(null),new l().__proto__||(i=!1));function o(d,u,h){this.fn=d,this.context=u,this.once=h||!1}function c(){this._events=new l,this._eventsCount=0}c.prototype.eventNames=function(){var u=[],h,f;if(this._eventsCount===0)return u;for(f in h=this._events)a.call(h,f)&&u.push(i?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},c.prototype.listeners=function(u,h){var f=i?i+u:u,m=this._events[f];if(h)return!!m;if(!m)return[];if(m.fn)return[m.fn];for(var x=0,p=m.length,j=new Array(p);x<p;x++)j[x]=m[x].fn;return j},c.prototype.emit=function(u,h,f,m,x,p){var j=i?i+u:u;if(!this._events[j])return!1;var v=this._events[j],g=arguments.length,y,b;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),g){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,h),!0;case 3:return v.fn.call(v.context,h,f),!0;case 4:return v.fn.call(v.context,h,f,m),!0;case 5:return v.fn.call(v.context,h,f,m,x),!0;case 6:return v.fn.call(v.context,h,f,m,x,p),!0}for(b=1,y=new Array(g-1);b<g;b++)y[b-1]=arguments[b];v.fn.apply(v.context,y)}else{var N=v.length,k;for(b=0;b<N;b++)switch(v[b].once&&this.removeListener(u,v[b].fn,void 0,!0),g){case 1:v[b].fn.call(v[b].context);break;case 2:v[b].fn.call(v[b].context,h);break;case 3:v[b].fn.call(v[b].context,h,f);break;case 4:v[b].fn.call(v[b].context,h,f,m);break;default:if(!y)for(k=1,y=new Array(g-1);k<g;k++)y[k-1]=arguments[k];v[b].fn.apply(v[b].context,y)}}return!0},c.prototype.on=function(u,h,f){var m=new o(h,f||this),x=i?i+u:u;return this._events[x]?this._events[x].fn?this._events[x]=[this._events[x],m]:this._events[x].push(m):(this._events[x]=m,this._eventsCount++),this},c.prototype.once=function(u,h,f){var m=new o(h,f||this,!0),x=i?i+u:u;return this._events[x]?this._events[x].fn?this._events[x]=[this._events[x],m]:this._events[x].push(m):(this._events[x]=m,this._eventsCount++),this},c.prototype.removeListener=function(u,h,f,m){var x=i?i+u:u;if(!this._events[x])return this;if(!h)return--this._eventsCount===0?this._events=new l:delete this._events[x],this;var p=this._events[x];if(p.fn)p.fn===h&&(!m||p.once)&&(!f||p.context===f)&&(--this._eventsCount===0?this._events=new l:delete this._events[x]);else{for(var j=0,v=[],g=p.length;j<g;j++)(p[j].fn!==h||m&&!p[j].once||f&&p[j].context!==f)&&v.push(p[j]);v.length?this._events[x]=v.length===1?v[0]:v:--this._eventsCount===0?this._events=new l:delete this._events[x]}return this},c.prototype.removeAllListeners=function(u){var h;return u?(h=i?i+u:u,this._events[h]&&(--this._eventsCount===0?this._events=new l:delete this._events[h])):(this._events=new l,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prototype.setMaxListeners=function(){return this},c.prefixed=i,c.EventEmitter=c,typeof s<"u"&&(s.exports=c)},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.matchText=n.matchSpacing=n.matchNewline=n.matchBlot=n.matchAttributor=n.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ce){return typeof ce}:function(ce){return ce&&typeof Symbol=="function"&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce},l=function(){function ce(re,ge){var we=[],pe=!0,de=!1,Re=void 0;try{for(var Fe=re[Symbol.iterator](),Gt;!(pe=(Gt=Fe.next()).done)&&(we.push(Gt.value),!(ge&&we.length===ge));pe=!0);}catch(nr){de=!0,Re=nr}finally{try{!pe&&Fe.return&&Fe.return()}finally{if(de)throw Re}}return we}return function(re,ge){if(Array.isArray(re))return re;if(Symbol.iterator in Object(re))return ce(re,ge);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function ce(re,ge){for(var we=0;we<ge.length;we++){var pe=ge[we];pe.enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(re,pe.key,pe)}}return function(re,ge,we){return ge&&ce(re.prototype,ge),we&&ce(re,we),re}}(),c=a(3),d=C(c),u=a(2),h=C(u),f=a(0),m=C(f),x=a(5),p=C(x),j=a(10),v=C(j),g=a(9),y=C(g),b=a(36),N=a(37),k=a(13),w=C(k),_=a(26),S=a(38),E=a(39),A=a(40);function C(ce){return ce&&ce.__esModule?ce:{default:ce}}function D(ce,re,ge){return re in ce?Object.defineProperty(ce,re,{value:ge,enumerable:!0,configurable:!0,writable:!0}):ce[re]=ge,ce}function M(ce,re){if(!(ce instanceof re))throw new TypeError("Cannot call a class as a function")}function L(ce,re){if(!ce)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return re&&(typeof re=="object"||typeof re=="function")?re:ce}function z(ce,re){if(typeof re!="function"&&re!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof re);ce.prototype=Object.create(re&&re.prototype,{constructor:{value:ce,enumerable:!1,writable:!0,configurable:!0}}),re&&(Object.setPrototypeOf?Object.setPrototypeOf(ce,re):ce.__proto__=re)}var Y=(0,v.default)("quill:clipboard"),X="__ql-matcher",Z=[[Node.TEXT_NODE,be],[Node.TEXT_NODE,fe],["br",U],[Node.ELEMENT_NODE,fe],[Node.ELEMENT_NODE,ae],[Node.ELEMENT_NODE,ye],[Node.ELEMENT_NODE,te],[Node.ELEMENT_NODE,oe],["li",ne],["b",Q.bind(Q,"bold")],["i",Q.bind(Q,"italic")],["style",V]],W=[b.AlignAttribute,S.DirectionAttribute].reduce(function(ce,re){return ce[re.keyName]=re,ce},{}),F=[b.AlignStyle,N.BackgroundStyle,_.ColorStyle,S.DirectionStyle,E.FontStyle,A.SizeStyle].reduce(function(ce,re){return ce[re.keyName]=re,ce},{}),q=function(ce){z(re,ce);function re(ge,we){M(this,re);var pe=L(this,(re.__proto__||Object.getPrototypeOf(re)).call(this,ge,we));return pe.quill.root.addEventListener("paste",pe.onPaste.bind(pe)),pe.container=pe.quill.addContainer("ql-clipboard"),pe.container.setAttribute("contenteditable",!0),pe.container.setAttribute("tabindex",-1),pe.matchers=[],Z.concat(pe.options.matchers).forEach(function(de){var Re=l(de,2),Fe=Re[0],Gt=Re[1];!we.matchVisual&&Gt===ye||pe.addMatcher(Fe,Gt)}),pe}return o(re,[{key:"addMatcher",value:function(we,pe){this.matchers.push([we,pe])}},{key:"convert",value:function(we){if(typeof we=="string")return this.container.innerHTML=we.replace(/\>\r?\n +\</g,"><"),this.convert();var pe=this.quill.getFormat(this.quill.selection.savedRange.index);if(pe[w.default.blotName]){var de=this.container.innerText;return this.container.innerHTML="",new h.default().insert(de,D({},w.default.blotName,pe[w.default.blotName]))}var Re=this.prepareMatching(),Fe=l(Re,2),Gt=Fe[0],nr=Fe[1],it=B(this.container,Gt,nr);return G(it,`
`)&&it.ops[it.ops.length-1].attributes==null&&(it=it.compose(new h.default().retain(it.length()-1).delete(1))),Y.log("convert",this.container.innerHTML,it),this.container.innerHTML="",it}},{key:"dangerouslyPasteHTML",value:function(we,pe){var de=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.default.sources.API;if(typeof we=="string")this.quill.setContents(this.convert(we),pe),this.quill.setSelection(0,p.default.sources.SILENT);else{var Re=this.convert(pe);this.quill.updateContents(new h.default().retain(we).concat(Re),de),this.quill.setSelection(we+Re.length(),p.default.sources.SILENT)}}},{key:"onPaste",value:function(we){var pe=this;if(!(we.defaultPrevented||!this.quill.isEnabled())){var de=this.quill.getSelection(),Re=new h.default().retain(de.index),Fe=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(p.default.sources.SILENT),setTimeout(function(){Re=Re.concat(pe.convert()).delete(de.length),pe.quill.updateContents(Re,p.default.sources.USER),pe.quill.setSelection(Re.length()-de.length,p.default.sources.SILENT),pe.quill.scrollingContainer.scrollTop=Fe,pe.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var we=this,pe=[],de=[];return this.matchers.forEach(function(Re){var Fe=l(Re,2),Gt=Fe[0],nr=Fe[1];switch(Gt){case Node.TEXT_NODE:de.push(nr);break;case Node.ELEMENT_NODE:pe.push(nr);break;default:[].forEach.call(we.container.querySelectorAll(Gt),function(it){it[X]=it[X]||[],it[X].push(nr)});break}}),[pe,de]}}]),re}(y.default);q.DEFAULTS={matchers:[],matchVisual:!0};function I(ce,re,ge){return(typeof re>"u"?"undefined":i(re))==="object"?Object.keys(re).reduce(function(we,pe){return I(we,pe,re[pe])},ce):ce.reduce(function(we,pe){return pe.attributes&&pe.attributes[re]?we.push(pe):we.insert(pe.insert,(0,d.default)({},D({},re,ge),pe.attributes))},new h.default)}function $(ce){if(ce.nodeType!==Node.ELEMENT_NODE)return{};var re="__ql-computed-style";return ce[re]||(ce[re]=window.getComputedStyle(ce))}function G(ce,re){for(var ge="",we=ce.ops.length-1;we>=0&&ge.length<re.length;--we){var pe=ce.ops[we];if(typeof pe.insert!="string")break;ge=pe.insert+ge}return ge.slice(-1*re.length)===re}function R(ce){if(ce.childNodes.length===0)return!1;var re=$(ce);return["block","list-item"].indexOf(re.display)>-1}function B(ce,re,ge){return ce.nodeType===ce.TEXT_NODE?ge.reduce(function(we,pe){return pe(ce,we)},new h.default):ce.nodeType===ce.ELEMENT_NODE?[].reduce.call(ce.childNodes||[],function(we,pe){var de=B(pe,re,ge);return pe.nodeType===ce.ELEMENT_NODE&&(de=re.reduce(function(Re,Fe){return Fe(pe,Re)},de),de=(pe[X]||[]).reduce(function(Re,Fe){return Fe(pe,Re)},de)),we.concat(de)},new h.default):new h.default}function Q(ce,re,ge){return I(ge,ce,!0)}function te(ce,re){var ge=m.default.Attributor.Attribute.keys(ce),we=m.default.Attributor.Class.keys(ce),pe=m.default.Attributor.Style.keys(ce),de={};return ge.concat(we).concat(pe).forEach(function(Re){var Fe=m.default.query(Re,m.default.Scope.ATTRIBUTE);Fe!=null&&(de[Fe.attrName]=Fe.value(ce),de[Fe.attrName])||(Fe=W[Re],Fe!=null&&(Fe.attrName===Re||Fe.keyName===Re)&&(de[Fe.attrName]=Fe.value(ce)||void 0),Fe=F[Re],Fe!=null&&(Fe.attrName===Re||Fe.keyName===Re)&&(Fe=F[Re],de[Fe.attrName]=Fe.value(ce)||void 0))}),Object.keys(de).length>0&&(re=I(re,de)),re}function ae(ce,re){var ge=m.default.query(ce);if(ge==null)return re;if(ge.prototype instanceof m.default.Embed){var we={},pe=ge.value(ce);pe!=null&&(we[ge.blotName]=pe,re=new h.default().insert(we,ge.formats(ce)))}else typeof ge.formats=="function"&&(re=I(re,ge.blotName,ge.formats(ce)));return re}function U(ce,re){return G(re,`
`)||re.insert(`
`),re}function V(){return new h.default}function ne(ce,re){var ge=m.default.query(ce);if(ge==null||ge.blotName!=="list-item"||!G(re,`
`))return re;for(var we=-1,pe=ce.parentNode;!pe.classList.contains("ql-clipboard");)(m.default.query(pe)||{}).blotName==="list"&&(we+=1),pe=pe.parentNode;return we<=0?re:re.compose(new h.default().retain(re.length()-1).retain(1,{indent:we}))}function fe(ce,re){return G(re,`
`)||(R(ce)||re.length()>0&&ce.nextSibling&&R(ce.nextSibling))&&re.insert(`
`),re}function ye(ce,re){if(R(ce)&&ce.nextElementSibling!=null&&!G(re,`

`)){var ge=ce.offsetHeight+parseFloat($(ce).marginTop)+parseFloat($(ce).marginBottom);ce.nextElementSibling.offsetTop>ce.offsetTop+ge*1.5&&re.insert(`
`)}return re}function oe(ce,re){var ge={},we=ce.style||{};return we.fontStyle&&$(ce).fontStyle==="italic"&&(ge.italic=!0),we.fontWeight&&($(ce).fontWeight.startsWith("bold")||parseInt($(ce).fontWeight)>=700)&&(ge.bold=!0),Object.keys(ge).length>0&&(re=I(re,ge)),parseFloat(we.textIndent||0)>0&&(re=new h.default().insert("	").concat(re)),re}function be(ce,re){var ge=ce.data;if(ce.parentNode.tagName==="O:P")return re.insert(ge.trim());if(ge.trim().length===0&&ce.parentNode.classList.contains("ql-clipboard"))return re;if(!$(ce.parentNode).whiteSpace.startsWith("pre")){var we=function(de,Re){return Re=Re.replace(/[^\u00a0]/g,""),Re.length<1&&de?" ":Re};ge=ge.replace(/\r\n/g," ").replace(/\n/g," "),ge=ge.replace(/\s\s+/g,we.bind(we,!0)),(ce.previousSibling==null&&R(ce.parentNode)||ce.previousSibling!=null&&R(ce.previousSibling))&&(ge=ge.replace(/^\s+/,we.bind(we,!1))),(ce.nextSibling==null&&R(ce.parentNode)||ce.nextSibling!=null&&R(ce.nextSibling))&&(ge=ge.replace(/\s+$/,we.bind(we,!1)))}return re.insert(ge)}n.default=q,n.matchAttributor=te,n.matchBlot=ae,n.matchNewline=fe,n.matchSpacing=ye,n.matchText=be},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function x(p,j){for(var v=0;v<j.length;v++){var g=j[v];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(p,g.key,g)}}return function(p,j,v){return j&&x(p.prototype,j),v&&x(p,v),p}}(),l=function x(p,j,v){p===null&&(p=Function.prototype);var g=Object.getOwnPropertyDescriptor(p,j);if(g===void 0){var y=Object.getPrototypeOf(p);return y===null?void 0:x(y,j,v)}else{if("value"in g)return g.value;var b=g.get;return b===void 0?void 0:b.call(v)}},o=a(6),c=d(o);function d(x){return x&&x.__esModule?x:{default:x}}function u(x,p){if(!(x instanceof p))throw new TypeError("Cannot call a class as a function")}function h(x,p){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:x}function f(x,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);x.prototype=Object.create(p&&p.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(x,p):x.__proto__=p)}var m=function(x){f(p,x);function p(){return u(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return i(p,[{key:"optimize",value:function(v){l(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"optimize",this).call(this,v),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return l(p.__proto__||Object.getPrototypeOf(p),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),p}(c.default);m.blotName="bold",m.tagName=["STRONG","B"],n.default=m},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.addControls=n.default=void 0;var i=function(){function A(C,D){var M=[],L=!0,z=!1,Y=void 0;try{for(var X=C[Symbol.iterator](),Z;!(L=(Z=X.next()).done)&&(M.push(Z.value),!(D&&M.length===D));L=!0);}catch(W){z=!0,Y=W}finally{try{!L&&X.return&&X.return()}finally{if(z)throw Y}}return M}return function(C,D){if(Array.isArray(C))return C;if(Symbol.iterator in Object(C))return A(C,D);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function A(C,D){for(var M=0;M<D.length;M++){var L=D[M];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(C,L.key,L)}}return function(C,D,M){return D&&A(C.prototype,D),M&&A(C,M),C}}(),o=a(2),c=v(o),d=a(0),u=v(d),h=a(5),f=v(h),m=a(10),x=v(m),p=a(9),j=v(p);function v(A){return A&&A.__esModule?A:{default:A}}function g(A,C,D){return C in A?Object.defineProperty(A,C,{value:D,enumerable:!0,configurable:!0,writable:!0}):A[C]=D,A}function y(A,C){if(!(A instanceof C))throw new TypeError("Cannot call a class as a function")}function b(A,C){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:A}function N(A,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);A.prototype=Object.create(C&&C.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(A,C):A.__proto__=C)}var k=(0,x.default)("quill:toolbar"),w=function(A){N(C,A);function C(D,M){y(this,C);var L=b(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,D,M));if(Array.isArray(L.options.container)){var z=document.createElement("div");S(z,L.options.container),D.container.parentNode.insertBefore(z,D.container),L.container=z}else typeof L.options.container=="string"?L.container=document.querySelector(L.options.container):L.container=L.options.container;if(!(L.container instanceof HTMLElement)){var Y;return Y=k.error("Container required for toolbar",L.options),b(L,Y)}return L.container.classList.add("ql-toolbar"),L.controls=[],L.handlers={},Object.keys(L.options.handlers).forEach(function(X){L.addHandler(X,L.options.handlers[X])}),[].forEach.call(L.container.querySelectorAll("button, select"),function(X){L.attach(X)}),L.quill.on(f.default.events.EDITOR_CHANGE,function(X,Z){X===f.default.events.SELECTION_CHANGE&&L.update(Z)}),L.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){var X=L.quill.selection.getRange(),Z=i(X,1),W=Z[0];L.update(W)}),L}return l(C,[{key:"addHandler",value:function(M,L){this.handlers[M]=L}},{key:"attach",value:function(M){var L=this,z=[].find.call(M.classList,function(X){return X.indexOf("ql-")===0});if(z){if(z=z.slice(3),M.tagName==="BUTTON"&&M.setAttribute("type","button"),this.handlers[z]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[z]==null){k.warn("ignoring attaching to disabled format",z,M);return}if(u.default.query(z)==null){k.warn("ignoring attaching to nonexistent format",z,M);return}}var Y=M.tagName==="SELECT"?"change":"click";M.addEventListener(Y,function(X){var Z=void 0;if(M.tagName==="SELECT"){if(M.selectedIndex<0)return;var W=M.options[M.selectedIndex];W.hasAttribute("selected")?Z=!1:Z=W.value||!1}else M.classList.contains("ql-active")?Z=!1:Z=M.value||!M.hasAttribute("value"),X.preventDefault();L.quill.focus();var F=L.quill.selection.getRange(),q=i(F,1),I=q[0];if(L.handlers[z]!=null)L.handlers[z].call(L,Z);else if(u.default.query(z).prototype instanceof u.default.Embed){if(Z=prompt("Enter "+z),!Z)return;L.quill.updateContents(new c.default().retain(I.index).delete(I.length).insert(g({},z,Z)),f.default.sources.USER)}else L.quill.format(z,Z,f.default.sources.USER);L.update(I)}),this.controls.push([z,M])}}},{key:"update",value:function(M){var L=M==null?{}:this.quill.getFormat(M);this.controls.forEach(function(z){var Y=i(z,2),X=Y[0],Z=Y[1];if(Z.tagName==="SELECT"){var W=void 0;if(M==null)W=null;else if(L[X]==null)W=Z.querySelector("option[selected]");else if(!Array.isArray(L[X])){var F=L[X];typeof F=="string"&&(F=F.replace(/\"/g,'\\"')),W=Z.querySelector('option[value="'+F+'"]')}W==null?(Z.value="",Z.selectedIndex=-1):W.selected=!0}else if(M==null)Z.classList.remove("ql-active");else if(Z.hasAttribute("value")){var q=L[X]===Z.getAttribute("value")||L[X]!=null&&L[X].toString()===Z.getAttribute("value")||L[X]==null&&!Z.getAttribute("value");Z.classList.toggle("ql-active",q)}else Z.classList.toggle("ql-active",L[X]!=null)})}}]),C}(j.default);w.DEFAULTS={};function _(A,C,D){var M=document.createElement("button");M.setAttribute("type","button"),M.classList.add("ql-"+C),D!=null&&(M.value=D),A.appendChild(M)}function S(A,C){Array.isArray(C[0])||(C=[C]),C.forEach(function(D){var M=document.createElement("span");M.classList.add("ql-formats"),D.forEach(function(L){if(typeof L=="string")_(M,L);else{var z=Object.keys(L)[0],Y=L[z];Array.isArray(Y)?E(M,z,Y):_(M,z,Y)}}),A.appendChild(M)})}function E(A,C,D){var M=document.createElement("select");M.classList.add("ql-"+C),D.forEach(function(L){var z=document.createElement("option");L!==!1?z.setAttribute("value",L):z.setAttribute("selected","selected"),M.appendChild(z)}),A.appendChild(M)}w.DEFAULTS={container:null,handlers:{clean:function(){var C=this,D=this.quill.getSelection();if(D!=null)if(D.length==0){var M=this.quill.getFormat();Object.keys(M).forEach(function(L){u.default.query(L,u.default.Scope.INLINE)!=null&&C.quill.format(L,!1)})}else this.quill.removeFormat(D,f.default.sources.USER)},direction:function(C){var D=this.quill.getFormat().align;C==="rtl"&&D==null?this.quill.format("align","right",f.default.sources.USER):!C&&D==="right"&&this.quill.format("align",!1,f.default.sources.USER),this.quill.format("direction",C,f.default.sources.USER)},indent:function(C){var D=this.quill.getSelection(),M=this.quill.getFormat(D),L=parseInt(M.indent||0);if(C==="+1"||C==="-1"){var z=C==="+1"?1:-1;M.direction==="rtl"&&(z*=-1),this.quill.format("indent",L+z,f.default.sources.USER)}},link:function(C){C===!0&&(C=prompt("Enter link URL:")),this.quill.format("link",C,f.default.sources.USER)},list:function(C){var D=this.quill.getSelection(),M=this.quill.getFormat(D);C==="check"?M.list==="checked"||M.list==="unchecked"?this.quill.format("list",!1,f.default.sources.USER):this.quill.format("list","unchecked",f.default.sources.USER):this.quill.format("list",C,f.default.sources.USER)}}},n.default=w,n.addControls=S},function(s,n){s.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function x(p,j){for(var v=0;v<j.length;v++){var g=j[v];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(p,g.key,g)}}return function(p,j,v){return j&&x(p.prototype,j),v&&x(p,v),p}}(),l=function x(p,j,v){p===null&&(p=Function.prototype);var g=Object.getOwnPropertyDescriptor(p,j);if(g===void 0){var y=Object.getPrototypeOf(p);return y===null?void 0:x(y,j,v)}else{if("value"in g)return g.value;var b=g.get;return b===void 0?void 0:b.call(v)}},o=a(28),c=d(o);function d(x){return x&&x.__esModule?x:{default:x}}function u(x,p){if(!(x instanceof p))throw new TypeError("Cannot call a class as a function")}function h(x,p){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:x}function f(x,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);x.prototype=Object.create(p&&p.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(x,p):x.__proto__=p)}var m=function(x){f(p,x);function p(j,v){u(this,p);var g=h(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,j));return g.label.innerHTML=v,g.container.classList.add("ql-color-picker"),[].slice.call(g.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(y){y.classList.add("ql-primary")}),g}return i(p,[{key:"buildItem",value:function(v){var g=l(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"buildItem",this).call(this,v);return g.style.backgroundColor=v.getAttribute("value")||"",g}},{key:"selectItem",value:function(v,g){l(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"selectItem",this).call(this,v,g);var y=this.label.querySelector(".ql-color-label"),b=v&&v.getAttribute("data-value")||"";y&&(y.tagName==="line"?y.style.stroke=b:y.style.fill=b)}}]),p}(c.default);n.default=m},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function x(p,j){for(var v=0;v<j.length;v++){var g=j[v];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(p,g.key,g)}}return function(p,j,v){return j&&x(p.prototype,j),v&&x(p,v),p}}(),l=function x(p,j,v){p===null&&(p=Function.prototype);var g=Object.getOwnPropertyDescriptor(p,j);if(g===void 0){var y=Object.getPrototypeOf(p);return y===null?void 0:x(y,j,v)}else{if("value"in g)return g.value;var b=g.get;return b===void 0?void 0:b.call(v)}},o=a(28),c=d(o);function d(x){return x&&x.__esModule?x:{default:x}}function u(x,p){if(!(x instanceof p))throw new TypeError("Cannot call a class as a function")}function h(x,p){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:x}function f(x,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);x.prototype=Object.create(p&&p.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(x,p):x.__proto__=p)}var m=function(x){f(p,x);function p(j,v){u(this,p);var g=h(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,j));return g.container.classList.add("ql-icon-picker"),[].forEach.call(g.container.querySelectorAll(".ql-picker-item"),function(y){y.innerHTML=v[y.getAttribute("data-value")||""]}),g.defaultItem=g.container.querySelector(".ql-selected"),g.selectItem(g.defaultItem),g}return i(p,[{key:"selectItem",value:function(v,g){l(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"selectItem",this).call(this,v,g),v=v||this.defaultItem,this.label.innerHTML=v.innerHTML}}]),p}(c.default);n.default=m},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function c(d,u){for(var h=0;h<u.length;h++){var f=u[h];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(d,f.key,f)}}return function(d,u,h){return u&&c(d.prototype,u),h&&c(d,h),d}}();function l(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}var o=function(){function c(d,u){var h=this;l(this,c),this.quill=d,this.boundsContainer=u||document.body,this.root=d.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){h.root.style.marginTop=-1*h.quill.root.scrollTop+"px"}),this.hide()}return i(c,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(u){var h=u.left+u.width/2-this.root.offsetWidth/2,f=u.bottom+this.quill.root.scrollTop;this.root.style.left=h+"px",this.root.style.top=f+"px",this.root.classList.remove("ql-flip");var m=this.boundsContainer.getBoundingClientRect(),x=this.root.getBoundingClientRect(),p=0;if(x.right>m.right&&(p=m.right-x.right,this.root.style.left=h+p+"px"),x.left<m.left&&(p=m.left-x.left,this.root.style.left=h+p+"px"),x.bottom>m.bottom){var j=x.bottom-x.top,v=u.bottom-u.top+j;this.root.style.top=f-v+"px",this.root.classList.add("ql-flip")}return p}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),c}();n.default=o},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function E(A,C){var D=[],M=!0,L=!1,z=void 0;try{for(var Y=A[Symbol.iterator](),X;!(M=(X=Y.next()).done)&&(D.push(X.value),!(C&&D.length===C));M=!0);}catch(Z){L=!0,z=Z}finally{try{!M&&Y.return&&Y.return()}finally{if(L)throw z}}return D}return function(A,C){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return E(A,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function E(A,C,D){A===null&&(A=Function.prototype);var M=Object.getOwnPropertyDescriptor(A,C);if(M===void 0){var L=Object.getPrototypeOf(A);return L===null?void 0:E(L,C,D)}else{if("value"in M)return M.value;var z=M.get;return z===void 0?void 0:z.call(D)}},o=function(){function E(A,C){for(var D=0;D<C.length;D++){var M=C[D];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(A,M.key,M)}}return function(A,C,D){return C&&E(A.prototype,C),D&&E(A,D),A}}(),c=a(3),d=y(c),u=a(8),h=y(u),f=a(43),m=y(f),x=a(27),p=y(x),j=a(15),v=a(41),g=y(v);function y(E){return E&&E.__esModule?E:{default:E}}function b(E,A){if(!(E instanceof A))throw new TypeError("Cannot call a class as a function")}function N(E,A){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:E}function k(E,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);E.prototype=Object.create(A&&A.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(E,A):E.__proto__=A)}var w=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],_=function(E){k(A,E);function A(C,D){b(this,A),D.modules.toolbar!=null&&D.modules.toolbar.container==null&&(D.modules.toolbar.container=w);var M=N(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,C,D));return M.quill.container.classList.add("ql-snow"),M}return o(A,[{key:"extendToolbar",value:function(D){D.container.classList.add("ql-snow"),this.buildButtons([].slice.call(D.container.querySelectorAll("button")),g.default),this.buildPickers([].slice.call(D.container.querySelectorAll("select")),g.default),this.tooltip=new S(this.quill,this.options.bounds),D.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(M,L){D.handlers.link.call(D,!L.format.link)})}}]),A}(m.default);_.DEFAULTS=(0,d.default)(!0,{},m.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(A){if(A){var C=this.quill.getSelection();if(C==null||C.length==0)return;var D=this.quill.getText(C);/^\S+@\S+\.\S+$/.test(D)&&D.indexOf("mailto:")!==0&&(D="mailto:"+D);var M=this.quill.theme.tooltip;M.edit("link",D)}else this.quill.format("link",!1)}}}}});var S=function(E){k(A,E);function A(C,D){b(this,A);var M=N(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,C,D));return M.preview=M.root.querySelector("a.ql-preview"),M}return o(A,[{key:"listen",value:function(){var D=this;l(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(M){D.root.classList.contains("ql-editing")?D.save():D.edit("link",D.preview.textContent),M.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(M){if(D.linkRange!=null){var L=D.linkRange;D.restoreFocus(),D.quill.formatText(L,"link",!1,h.default.sources.USER),delete D.linkRange}M.preventDefault(),D.hide()}),this.quill.on(h.default.events.SELECTION_CHANGE,function(M,L,z){if(M!=null){if(M.length===0&&z===h.default.sources.USER){var Y=D.quill.scroll.descendant(p.default,M.index),X=i(Y,2),Z=X[0],W=X[1];if(Z!=null){D.linkRange=new j.Range(M.index-W,Z.length());var F=p.default.formats(Z.domNode);D.preview.textContent=F,D.preview.setAttribute("href",F),D.show(),D.position(D.quill.getBounds(D.linkRange));return}}else delete D.linkRange;D.hide()}})}},{key:"show",value:function(){l(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),A}(f.BaseTooltip);S.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),n.default=_},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=a(29),l=pe(i),o=a(36),c=a(38),d=a(64),u=a(65),h=pe(u),f=a(66),m=pe(f),x=a(67),p=pe(x),j=a(37),v=a(26),g=a(39),y=a(40),b=a(56),N=pe(b),k=a(68),w=pe(k),_=a(27),S=pe(_),E=a(69),A=pe(E),C=a(70),D=pe(C),M=a(71),L=pe(M),z=a(72),Y=pe(z),X=a(73),Z=pe(X),W=a(13),F=pe(W),q=a(74),I=pe(q),$=a(75),G=pe($),R=a(57),B=pe(R),Q=a(41),te=pe(Q),ae=a(28),U=pe(ae),V=a(59),ne=pe(V),fe=a(60),ye=pe(fe),oe=a(61),be=pe(oe),ce=a(108),re=pe(ce),ge=a(62),we=pe(ge);function pe(de){return de&&de.__esModule?de:{default:de}}l.default.register({"attributors/attribute/direction":c.DirectionAttribute,"attributors/class/align":o.AlignClass,"attributors/class/background":j.BackgroundClass,"attributors/class/color":v.ColorClass,"attributors/class/direction":c.DirectionClass,"attributors/class/font":g.FontClass,"attributors/class/size":y.SizeClass,"attributors/style/align":o.AlignStyle,"attributors/style/background":j.BackgroundStyle,"attributors/style/color":v.ColorStyle,"attributors/style/direction":c.DirectionStyle,"attributors/style/font":g.FontStyle,"attributors/style/size":y.SizeStyle},!0),l.default.register({"formats/align":o.AlignClass,"formats/direction":c.DirectionClass,"formats/indent":d.IndentClass,"formats/background":j.BackgroundStyle,"formats/color":v.ColorStyle,"formats/font":g.FontClass,"formats/size":y.SizeClass,"formats/blockquote":h.default,"formats/code-block":F.default,"formats/header":m.default,"formats/list":p.default,"formats/bold":N.default,"formats/code":W.Code,"formats/italic":w.default,"formats/link":S.default,"formats/script":A.default,"formats/strike":D.default,"formats/underline":L.default,"formats/image":Y.default,"formats/video":Z.default,"formats/list/item":x.ListItem,"modules/formula":I.default,"modules/syntax":G.default,"modules/toolbar":B.default,"themes/bubble":re.default,"themes/snow":we.default,"ui/icons":te.default,"ui/picker":U.default,"ui/icon-picker":ye.default,"ui/color-picker":ne.default,"ui/tooltip":be.default},!0),n.default=l.default},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.IndentClass=void 0;var i=function(){function p(j,v){for(var g=0;g<v.length;g++){var y=v[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(j,y.key,y)}}return function(j,v,g){return v&&p(j.prototype,v),g&&p(j,g),j}}(),l=function p(j,v,g){j===null&&(j=Function.prototype);var y=Object.getOwnPropertyDescriptor(j,v);if(y===void 0){var b=Object.getPrototypeOf(j);return b===null?void 0:p(b,v,g)}else{if("value"in y)return y.value;var N=y.get;return N===void 0?void 0:N.call(g)}},o=a(0),c=d(o);function d(p){return p&&p.__esModule?p:{default:p}}function u(p,j){if(!(p instanceof j))throw new TypeError("Cannot call a class as a function")}function h(p,j){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:p}function f(p,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);p.prototype=Object.create(j&&j.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(p,j):p.__proto__=j)}var m=function(p){f(j,p);function j(){return u(this,j),h(this,(j.__proto__||Object.getPrototypeOf(j)).apply(this,arguments))}return i(j,[{key:"add",value:function(g,y){if(y==="+1"||y==="-1"){var b=this.value(g)||0;y=y==="+1"?b+1:b-1}return y===0?(this.remove(g),!0):l(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"add",this).call(this,g,y)}},{key:"canAdd",value:function(g,y){return l(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"canAdd",this).call(this,g,y)||l(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"canAdd",this).call(this,g,parseInt(y))}},{key:"value",value:function(g){return parseInt(l(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"value",this).call(this,g))||void 0}}]),j}(c.default.Attributor.Class),x=new m("indent","ql-indent",{scope:c.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});n.IndentClass=x},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=a(4),l=o(i);function o(f){return f&&f.__esModule?f:{default:f}}function c(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")}function d(f,m){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:f}function u(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(f,m):f.__proto__=m)}var h=function(f){u(m,f);function m(){return c(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m}(l.default);h.blotName="blockquote",h.tagName="blockquote",n.default=h},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function m(x,p){for(var j=0;j<p.length;j++){var v=p[j];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(x,v.key,v)}}return function(x,p,j){return p&&m(x.prototype,p),j&&m(x,j),x}}(),l=a(4),o=c(l);function c(m){return m&&m.__esModule?m:{default:m}}function d(m,x){if(!(m instanceof x))throw new TypeError("Cannot call a class as a function")}function u(m,x){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:m}function h(m,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);m.prototype=Object.create(x&&x.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(m,x):m.__proto__=x)}var f=function(m){h(x,m);function x(){return d(this,x),u(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return i(x,null,[{key:"formats",value:function(j){return this.tagName.indexOf(j.tagName)+1}}]),x}(o.default);f.blotName="header",f.tagName=["H1","H2","H3","H4","H5","H6"],n.default=f},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ListItem=void 0;var i=function(){function b(N,k){for(var w=0;w<k.length;w++){var _=k[w];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(N,_.key,_)}}return function(N,k,w){return k&&b(N.prototype,k),w&&b(N,w),N}}(),l=function b(N,k,w){N===null&&(N=Function.prototype);var _=Object.getOwnPropertyDescriptor(N,k);if(_===void 0){var S=Object.getPrototypeOf(N);return S===null?void 0:b(S,k,w)}else{if("value"in _)return _.value;var E=_.get;return E===void 0?void 0:E.call(w)}},o=a(0),c=m(o),d=a(4),u=m(d),h=a(25),f=m(h);function m(b){return b&&b.__esModule?b:{default:b}}function x(b,N,k){return N in b?Object.defineProperty(b,N,{value:k,enumerable:!0,configurable:!0,writable:!0}):b[N]=k,b}function p(b,N){if(!(b instanceof N))throw new TypeError("Cannot call a class as a function")}function j(b,N){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:b}function v(b,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);b.prototype=Object.create(N&&N.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(b,N):b.__proto__=N)}var g=function(b){v(N,b);function N(){return p(this,N),j(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return i(N,[{key:"format",value:function(w,_){w===y.blotName&&!_?this.replaceWith(c.default.create(this.statics.scope)):l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"format",this).call(this,w,_)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(w,_){return this.parent.isolate(this.offset(this.parent),this.length()),w===this.parent.statics.blotName?(this.parent.replaceWith(w,_),this):(this.parent.unwrap(),l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"replaceWith",this).call(this,w,_))}}],[{key:"formats",value:function(w){return w.tagName===this.tagName?void 0:l(N.__proto__||Object.getPrototypeOf(N),"formats",this).call(this,w)}}]),N}(u.default);g.blotName="list-item",g.tagName="LI";var y=function(b){v(N,b),i(N,null,[{key:"create",value:function(w){var _=w==="ordered"?"OL":"UL",S=l(N.__proto__||Object.getPrototypeOf(N),"create",this).call(this,_);return(w==="checked"||w==="unchecked")&&S.setAttribute("data-checked",w==="checked"),S}},{key:"formats",value:function(w){if(w.tagName==="OL")return"ordered";if(w.tagName==="UL")return w.hasAttribute("data-checked")?w.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function N(k){p(this,N);var w=j(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,k)),_=function(E){if(E.target.parentNode===k){var A=w.statics.formats(k),C=c.default.find(E.target);A==="checked"?C.format("list","unchecked"):A==="unchecked"&&C.format("list","checked")}};return k.addEventListener("touchstart",_),k.addEventListener("mousedown",_),w}return i(N,[{key:"format",value:function(w,_){this.children.length>0&&this.children.tail.format(w,_)}},{key:"formats",value:function(){return x({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(w,_){if(w instanceof g)l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertBefore",this).call(this,w,_);else{var S=_==null?this.length():_.offset(this),E=this.split(S);E.parent.insertBefore(w,E)}}},{key:"optimize",value:function(w){l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"optimize",this).call(this,w);var _=this.next;_!=null&&_.prev===this&&_.statics.blotName===this.statics.blotName&&_.domNode.tagName===this.domNode.tagName&&_.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(_.moveChildren(this),_.remove())}},{key:"replace",value:function(w){if(w.statics.blotName!==this.statics.blotName){var _=c.default.create(this.statics.defaultChild);w.moveChildren(_),this.appendChild(_)}l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"replace",this).call(this,w)}}]),N}(f.default);y.blotName="list",y.scope=c.default.Scope.BLOCK_BLOT,y.tagName=["OL","UL"],y.defaultChild="list-item",y.allowedChildren=[g],n.ListItem=g,n.default=y},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=a(56),l=o(i);function o(f){return f&&f.__esModule?f:{default:f}}function c(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")}function d(f,m){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:f}function u(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(f,m):f.__proto__=m)}var h=function(f){u(m,f);function m(){return c(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m}(l.default);h.blotName="italic",h.tagName=["EM","I"],n.default=h},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function x(p,j){for(var v=0;v<j.length;v++){var g=j[v];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(p,g.key,g)}}return function(p,j,v){return j&&x(p.prototype,j),v&&x(p,v),p}}(),l=function x(p,j,v){p===null&&(p=Function.prototype);var g=Object.getOwnPropertyDescriptor(p,j);if(g===void 0){var y=Object.getPrototypeOf(p);return y===null?void 0:x(y,j,v)}else{if("value"in g)return g.value;var b=g.get;return b===void 0?void 0:b.call(v)}},o=a(6),c=d(o);function d(x){return x&&x.__esModule?x:{default:x}}function u(x,p){if(!(x instanceof p))throw new TypeError("Cannot call a class as a function")}function h(x,p){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:x}function f(x,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);x.prototype=Object.create(p&&p.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(x,p):x.__proto__=p)}var m=function(x){f(p,x);function p(){return u(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return i(p,null,[{key:"create",value:function(v){return v==="super"?document.createElement("sup"):v==="sub"?document.createElement("sub"):l(p.__proto__||Object.getPrototypeOf(p),"create",this).call(this,v)}},{key:"formats",value:function(v){if(v.tagName==="SUB")return"sub";if(v.tagName==="SUP")return"super"}}]),p}(c.default);m.blotName="script",m.tagName=["SUB","SUP"],n.default=m},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=a(6),l=o(i);function o(f){return f&&f.__esModule?f:{default:f}}function c(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")}function d(f,m){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:f}function u(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(f,m):f.__proto__=m)}var h=function(f){u(m,f);function m(){return c(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m}(l.default);h.blotName="strike",h.tagName="S",n.default=h},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=a(6),l=o(i);function o(f){return f&&f.__esModule?f:{default:f}}function c(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")}function d(f,m){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:f}function u(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(f,m):f.__proto__=m)}var h=function(f){u(m,f);function m(){return c(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m}(l.default);h.blotName="underline",h.tagName="U",n.default=h},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function j(v,g){for(var y=0;y<g.length;y++){var b=g[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,g,y){return g&&j(v.prototype,g),y&&j(v,y),v}}(),l=function j(v,g,y){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,g);if(b===void 0){var N=Object.getPrototypeOf(v);return N===null?void 0:j(N,g,y)}else{if("value"in b)return b.value;var k=b.get;return k===void 0?void 0:k.call(y)}},o=a(0),c=u(o),d=a(27);function u(j){return j&&j.__esModule?j:{default:j}}function h(j,v){if(!(j instanceof v))throw new TypeError("Cannot call a class as a function")}function f(j,v){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:j}function m(j,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);j.prototype=Object.create(v&&v.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(j,v):j.__proto__=v)}var x=["alt","height","width"],p=function(j){m(v,j);function v(){return h(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"format",value:function(y,b){x.indexOf(y)>-1?b?this.domNode.setAttribute(y,b):this.domNode.removeAttribute(y):l(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,y,b)}}],[{key:"create",value:function(y){var b=l(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,y);return typeof y=="string"&&b.setAttribute("src",this.sanitize(y)),b}},{key:"formats",value:function(y){return x.reduce(function(b,N){return y.hasAttribute(N)&&(b[N]=y.getAttribute(N)),b},{})}},{key:"match",value:function(y){return/\.(jpe?g|gif|png)$/.test(y)||/^data:image\/.+;base64/.test(y)}},{key:"sanitize",value:function(y){return(0,d.sanitize)(y,["http","https","data"])?y:"//:0"}},{key:"value",value:function(y){return y.getAttribute("src")}}]),v}(c.default.Embed);p.blotName="image",p.tagName="IMG",n.default=p},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function j(v,g){for(var y=0;y<g.length;y++){var b=g[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,g,y){return g&&j(v.prototype,g),y&&j(v,y),v}}(),l=function j(v,g,y){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,g);if(b===void 0){var N=Object.getPrototypeOf(v);return N===null?void 0:j(N,g,y)}else{if("value"in b)return b.value;var k=b.get;return k===void 0?void 0:k.call(y)}},o=a(4),c=a(27),d=u(c);function u(j){return j&&j.__esModule?j:{default:j}}function h(j,v){if(!(j instanceof v))throw new TypeError("Cannot call a class as a function")}function f(j,v){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:j}function m(j,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);j.prototype=Object.create(v&&v.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(j,v):j.__proto__=v)}var x=["height","width"],p=function(j){m(v,j);function v(){return h(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"format",value:function(y,b){x.indexOf(y)>-1?b?this.domNode.setAttribute(y,b):this.domNode.removeAttribute(y):l(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,y,b)}}],[{key:"create",value:function(y){var b=l(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,y);return b.setAttribute("frameborder","0"),b.setAttribute("allowfullscreen",!0),b.setAttribute("src",this.sanitize(y)),b}},{key:"formats",value:function(y){return x.reduce(function(b,N){return y.hasAttribute(N)&&(b[N]=y.getAttribute(N)),b},{})}},{key:"sanitize",value:function(y){return d.default.sanitize(y)}},{key:"value",value:function(y){return y.getAttribute("src")}}]),v}(o.BlockEmbed);p.blotName="video",p.className="ql-video",p.tagName="IFRAME",n.default=p},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.FormulaBlot=void 0;var i=function(){function y(b,N){for(var k=0;k<N.length;k++){var w=N[k];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(b,w.key,w)}}return function(b,N,k){return N&&y(b.prototype,N),k&&y(b,k),b}}(),l=function y(b,N,k){b===null&&(b=Function.prototype);var w=Object.getOwnPropertyDescriptor(b,N);if(w===void 0){var _=Object.getPrototypeOf(b);return _===null?void 0:y(_,N,k)}else{if("value"in w)return w.value;var S=w.get;return S===void 0?void 0:S.call(k)}},o=a(35),c=m(o),d=a(5),u=m(d),h=a(9),f=m(h);function m(y){return y&&y.__esModule?y:{default:y}}function x(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function p(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:y}function j(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}var v=function(y){j(b,y);function b(){return x(this,b),p(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return i(b,null,[{key:"create",value:function(k){var w=l(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,k);return typeof k=="string"&&(window.katex.render(k,w,{throwOnError:!1,errorColor:"#f00"}),w.setAttribute("data-value",k)),w}},{key:"value",value:function(k){return k.getAttribute("data-value")}}]),b}(c.default);v.blotName="formula",v.className="ql-formula",v.tagName="SPAN";var g=function(y){j(b,y),i(b,null,[{key:"register",value:function(){u.default.register(v,!0)}}]);function b(){x(this,b);var N=p(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return N}return b}(f.default);n.FormulaBlot=v,n.default=g},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.CodeToken=n.CodeBlock=void 0;var i=function(){function k(w,_){for(var S=0;S<_.length;S++){var E=_[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(w,E.key,E)}}return function(w,_,S){return _&&k(w.prototype,_),S&&k(w,S),w}}(),l=function k(w,_,S){w===null&&(w=Function.prototype);var E=Object.getOwnPropertyDescriptor(w,_);if(E===void 0){var A=Object.getPrototypeOf(w);return A===null?void 0:k(A,_,S)}else{if("value"in E)return E.value;var C=E.get;return C===void 0?void 0:C.call(S)}},o=a(0),c=p(o),d=a(5),u=p(d),h=a(9),f=p(h),m=a(13),x=p(m);function p(k){return k&&k.__esModule?k:{default:k}}function j(k,w){if(!(k instanceof w))throw new TypeError("Cannot call a class as a function")}function v(k,w){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:k}function g(k,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);k.prototype=Object.create(w&&w.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(k,w):k.__proto__=w)}var y=function(k){g(w,k);function w(){return j(this,w),v(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return i(w,[{key:"replaceWith",value:function(S){this.domNode.textContent=this.domNode.textContent,this.attach(),l(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"replaceWith",this).call(this,S)}},{key:"highlight",value:function(S){var E=this.domNode.textContent;this.cachedText!==E&&((E.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=S(E),this.domNode.normalize(),this.attach()),this.cachedText=E)}}]),w}(x.default);y.className="ql-syntax";var b=new c.default.Attributor.Class("token","hljs",{scope:c.default.Scope.INLINE}),N=function(k){g(w,k),i(w,null,[{key:"register",value:function(){u.default.register(b,!0),u.default.register(y,!0)}}]);function w(_,S){j(this,w);var E=v(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,_,S));if(typeof E.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var A=null;return E.quill.on(u.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(A),A=setTimeout(function(){E.highlight(),A=null},E.options.interval)}),E.highlight(),E}return i(w,[{key:"highlight",value:function(){var S=this;if(!this.quill.selection.composing){this.quill.update(u.default.sources.USER);var E=this.quill.getSelection();this.quill.scroll.descendants(y).forEach(function(A){A.highlight(S.options.highlight)}),this.quill.update(u.default.sources.SILENT),E!=null&&this.quill.setSelection(E,u.default.sources.SILENT)}}}]),w}(f.default);N.DEFAULTS={highlight:function(){return window.hljs==null?null:function(k){var w=window.hljs.highlightAuto(k);return w.value}}(),interval:1e3},n.CodeBlock=y,n.CodeToken=b,n.default=N},function(s,n){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(s,n){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(s,n){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(s,n){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(s,n){s.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(s,n){s.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(s,n){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(s,n){s.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(s,n){s.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(s,n){s.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(s,n){s.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(s,n){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(s,n){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(s,n){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(s,n){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(s,n){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(s,n){s.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(s,n){s.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(s,n){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(s,n){s.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(s,n){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(s,n){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(s,n){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(s,n){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(s,n){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(s,n){s.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(s,n){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(s,n){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(s,n){s.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(s,n){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(s,n){s.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(s,n){s.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(s,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BubbleTooltip=void 0;var i=function w(_,S,E){_===null&&(_=Function.prototype);var A=Object.getOwnPropertyDescriptor(_,S);if(A===void 0){var C=Object.getPrototypeOf(_);return C===null?void 0:w(C,S,E)}else{if("value"in A)return A.value;var D=A.get;return D===void 0?void 0:D.call(E)}},l=function(){function w(_,S){for(var E=0;E<S.length;E++){var A=S[E];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(_,A.key,A)}}return function(_,S,E){return S&&w(_.prototype,S),E&&w(_,E),_}}(),o=a(3),c=j(o),d=a(8),u=j(d),h=a(43),f=j(h),m=a(15),x=a(41),p=j(x);function j(w){return w&&w.__esModule?w:{default:w}}function v(w,_){if(!(w instanceof _))throw new TypeError("Cannot call a class as a function")}function g(w,_){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:w}function y(w,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);w.prototype=Object.create(_&&_.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(w,_):w.__proto__=_)}var b=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],N=function(w){y(_,w);function _(S,E){v(this,_),E.modules.toolbar!=null&&E.modules.toolbar.container==null&&(E.modules.toolbar.container=b);var A=g(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,S,E));return A.quill.container.classList.add("ql-bubble"),A}return l(_,[{key:"extendToolbar",value:function(E){this.tooltip=new k(this.quill,this.options.bounds),this.tooltip.root.appendChild(E.container),this.buildButtons([].slice.call(E.container.querySelectorAll("button")),p.default),this.buildPickers([].slice.call(E.container.querySelectorAll("select")),p.default)}}]),_}(f.default);N.DEFAULTS=(0,c.default)(!0,{},f.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(_){_?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var k=function(w){y(_,w);function _(S,E){v(this,_);var A=g(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,S,E));return A.quill.on(u.default.events.EDITOR_CHANGE,function(C,D,M,L){if(C===u.default.events.SELECTION_CHANGE)if(D!=null&&D.length>0&&L===u.default.sources.USER){A.show(),A.root.style.left="0px",A.root.style.width="",A.root.style.width=A.root.offsetWidth+"px";var z=A.quill.getLines(D.index,D.length);if(z.length===1)A.position(A.quill.getBounds(D));else{var Y=z[z.length-1],X=A.quill.getIndex(Y),Z=Math.min(Y.length()-1,D.index+D.length-X),W=A.quill.getBounds(new m.Range(X,Z));A.position(W)}}else document.activeElement!==A.textbox&&A.quill.hasFocus()&&A.hide()}),A}return l(_,[{key:"listen",value:function(){var E=this;i(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){E.root.classList.remove("ql-editing")}),this.quill.on(u.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!E.root.classList.contains("ql-hidden")){var A=E.quill.getSelection();A!=null&&E.position(E.quill.getBounds(A))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(E){var A=i(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"position",this).call(this,E),C=this.root.querySelector(".ql-tooltip-arrow");if(C.style.marginLeft="",A===0)return A;C.style.marginLeft=-1*A-C.offsetWidth/2+"px"}}]),_}(h.BaseTooltip);k.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),n.BubbleTooltip=k,n.default=N},function(s,n,a){s.exports=a(63)}]).default})})(x6);var VQ=x6.exports,HQ=kt&&kt.__extends||function(){var e=function(t,s){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,s)};return function(t,s){e(t,s);function n(){this.constructor=t}t.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}}(),lm=kt&&kt.__assign||function(){return lm=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++){t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},lm.apply(this,arguments)},WQ=kt&&kt.__spreadArrays||function(){for(var e=0,t=0,s=arguments.length;t<s;t++)e+=arguments[t].length;for(var n=Array(e),a=0,t=0;t<s;t++)for(var i=arguments[t],l=0,o=i.length;l<o;l++,a++)n[a]=i[l];return n},fp=kt&&kt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},mn=fp(O),YQ=fp(bS),Wc=fp(zQ),Gw=fp(VQ),GQ=function(e){HQ(t,e);function t(s){var n=e.call(this,s)||this;n.dirtyProps=["modules","formats","bounds","theme","children"],n.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],n.state={generation:0},n.selection=null,n.onEditorChange=function(i,l,o,c){var d,u,h,f;i==="text-change"?(u=(d=n).onEditorChangeText)===null||u===void 0||u.call(d,n.editor.root.innerHTML,l,c,n.unprivilegedEditor):i==="selection-change"&&((f=(h=n).onEditorChangeSelection)===null||f===void 0||f.call(h,l,c,n.unprivilegedEditor))};var a=n.isControlled()?s.value:s.defaultValue;return n.value=a??"",n}return t.prototype.validateProps=function(s){var n;if(mn.default.Children.count(s.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(mn.default.Children.count(s.children)){var a=mn.default.Children.only(s.children);if(((n=a)===null||n===void 0?void 0:n.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&s.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},t.prototype.shouldComponentUpdate=function(s,n){var a=this,i;if(this.validateProps(s),!this.editor||this.state.generation!==n.generation)return!0;if("value"in s){var l=this.getEditorContents(),o=(i=s.value,i??"");this.isEqualValue(o,l)||this.setEditorContents(this.editor,o)}return s.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,s.readOnly),WQ(this.cleanProps,this.dirtyProps).some(function(c){return!Wc.default(s[c],a.props[c])})},t.prototype.shouldComponentRegenerate=function(s){var n=this;return this.dirtyProps.some(function(a){return!Wc.default(s[a],n.props[a])})},t.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},t.prototype.componentWillUnmount=function(){this.destroyEditor()},t.prototype.componentDidUpdate=function(s,n){var a=this;if(this.editor&&this.shouldComponentRegenerate(s)){var i=this.editor.getContents(),l=this.editor.getSelection();this.regenerationSnapshot={delta:i,selection:l},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==n.generation){var o=this.regenerationSnapshot,i=o.delta,c=o.selection;delete this.regenerationSnapshot,this.instantiateEditor();var d=this.editor;d.setContents(i),Kw(function(){return a.setEditorSelection(d,c)})}},t.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},t.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},t.prototype.isControlled=function(){return"value"in this.props},t.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},t.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},t.prototype.createEditor=function(s,n){var a=new Gw.default(s,n);return n.tabIndex!=null&&this.setEditorTabIndex(a,n.tabIndex),this.hookEditor(a),a},t.prototype.hookEditor=function(s){this.unprivilegedEditor=this.makeUnprivilegedEditor(s),s.on("editor-change",this.onEditorChange)},t.prototype.unhookEditor=function(s){s.off("editor-change",this.onEditorChange)},t.prototype.getEditorContents=function(){return this.value},t.prototype.getEditorSelection=function(){return this.selection},t.prototype.isDelta=function(s){return s&&s.ops},t.prototype.isEqualValue=function(s,n){return this.isDelta(s)&&this.isDelta(n)?Wc.default(s.ops,n.ops):Wc.default(s,n)},t.prototype.setEditorContents=function(s,n){var a=this;this.value=n;var i=this.getEditorSelection();typeof n=="string"?s.setContents(s.clipboard.convert(n)):s.setContents(n),Kw(function(){return a.setEditorSelection(s,i)})},t.prototype.setEditorSelection=function(s,n){if(this.selection=n,n){var a=s.getLength();n.index=Math.max(0,Math.min(n.index,a-1)),n.length=Math.max(0,Math.min(n.length,a-1-n.index)),s.setSelection(n)}},t.prototype.setEditorTabIndex=function(s,n){var a,i;!((i=(a=s)===null||a===void 0?void 0:a.scroll)===null||i===void 0)&&i.domNode&&(s.scroll.domNode.tabIndex=n)},t.prototype.setEditorReadOnly=function(s,n){n?s.disable():s.enable()},t.prototype.makeUnprivilegedEditor=function(s){var n=s;return{getHTML:function(){return n.root.innerHTML},getLength:n.getLength.bind(n),getText:n.getText.bind(n),getContents:n.getContents.bind(n),getSelection:n.getSelection.bind(n),getBounds:n.getBounds.bind(n)}},t.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var s=YQ.default.findDOMNode(this.editingArea);if(!s)throw new Error("Cannot find element for editing area");if(s.nodeType===3)throw new Error("Editing area cannot be a text node");return s},t.prototype.renderEditingArea=function(){var s=this,n=this.props,a=n.children,i=n.preserveWhitespace,l=this.state.generation,o={key:l,ref:function(c){s.editingArea=c}};return mn.default.Children.count(a)?mn.default.cloneElement(mn.default.Children.only(a),o):i?mn.default.createElement("pre",lm({},o)):mn.default.createElement("div",lm({},o))},t.prototype.render=function(){var s;return mn.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(s=this.props.className,s??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},t.prototype.onEditorChangeText=function(s,n,a,i){var l,o;if(this.editor){var c=this.isDelta(this.value)?i.getContents():i.getHTML();c!==this.getEditorContents()&&(this.lastDeltaChangeSet=n,this.value=c,(o=(l=this.props).onChange)===null||o===void 0||o.call(l,s,n,a,i))}},t.prototype.onEditorChangeSelection=function(s,n,a){var i,l,o,c,d,u;if(this.editor){var h=this.getEditorSelection(),f=!h&&s,m=h&&!s;Wc.default(s,h)||(this.selection=s,(l=(i=this.props).onChangeSelection)===null||l===void 0||l.call(i,s,n,a),f?(c=(o=this.props).onFocus)===null||c===void 0||c.call(o,s,n,a):m&&((u=(d=this.props).onBlur)===null||u===void 0||u.call(d,h,n,a)))}},t.prototype.focus=function(){this.editor&&this.editor.focus()},t.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},t.displayName="React Quill",t.Quill=Gw.default,t.defaultProps={theme:"snow",modules:{},readOnly:!1},t}(mn.default.Component);function Kw(e){Promise.resolve().then(e)}var KQ=GQ;const QQ=om(KQ),XQ=({initialData:e={},onSave:t,onCancel:s,isSaving:n=!1})=>{const[a,i]=O.useState(""),[l,o]=O.useState("");O.useEffect(()=>{e&&(i(e.content||""),o(e.title||""))},[e]);const c={toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","table"]]},d=[{label:"Student Name",value:"{{student_name}}"},{label:"Roll Number",value:"{{roll_number}}"},{label:"Class",value:"{{class}}"},{label:"Section",value:"{{section}}"},{label:"Admission Number",value:"{{admission_number}}"},{label:"Examination",value:"{{exam_name}}"},{label:"Academic Year",value:"{{academic_year}}"},{label:"Marks Table",value:"{{marks_table}}"},{label:"Total Marks",value:"{{total_marks}}"},{label:"Percentage",value:"{{percentage}}"},{label:"Grade",value:"{{grade}}"},{label:"Result Status",value:"{{result_status}}"}],u=f=>{const m=document.querySelector(".ql-editor");m&&(m.focus(),document.execCommand("insertText",!1,f))},h=()=>{t({...e,content:a,title:l})};return r.jsxs("div",{className:"bg-white min-h-screen flex flex-col",children:[r.jsxs("div",{className:"bg-gray-50 border-b border-gray-200 px-6 py-4 flex flex-col md:flex-row justify-between items-center gap-4 sticky top-0 z-10 w-full",children:[r.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[r.jsx("button",{onClick:s,className:"p-2 text-gray-600 hover:bg-gray-200 rounded-full transition-colors",title:"Back",children:r.jsx(wF,{})}),r.jsxs("div",{className:"flex-1 md:flex-initial",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-800",children:l||"Untitled Template"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Marksheet Template Editor"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{onClick:()=>window.print(),className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx(CF,{})," Print Preview"]}),r.jsxs("button",{onClick:h,disabled:n,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx(TF,{})," ",n?"Saving...":"Save Template"]})]})]}),r.jsxs("div",{className:"flex-1 flex flex-col md:flex-row overflow-hidden",children:[r.jsxs("div",{className:"w-full md:w-64 bg-gray-50 border-r border-gray-200 p-4 overflow-y-auto",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-4",children:"Placeholders"}),r.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Click to insert dynamic values into your template."}),r.jsx("div",{className:"space-y-2",children:d.map(f=>r.jsx("button",{onClick:()=>u(f.value),className:"w-full text-left px-3 py-2 bg-white border border-gray-200 rounded hover:bg-blue-50 hover:border-blue-200 hover:text-blue-700 transition-colors text-sm font-medium text-gray-700",children:f.label},f.value))})]}),r.jsx("div",{className:"flex-1 p-6 md:p-8 overflow-y-auto bg-gray-100 flex justify-center",children:r.jsx("div",{className:"bg-white shadow-lg w-full max-w-[210mm] min-h-[297mm] h-fit p-[20mm] flex flex-col",children:r.jsx(QQ,{theme:"snow",value:a,onChange:i,modules:c,className:"h-full",style:{height:"100%",border:"none"}})})})]}),r.jsx("style",{children:`
        .ql-container {
            font-size: 14px;
            font-family: 'Times New Roman', Times, serif; 
            min-height: 250mm; /* approximate height within A4 padding */
        }
        .ql-toolbar {
            position: sticky;
            top: 0;
            background: white;
            z-index: 5;
            border-bottom: 1px solid #e5e7eb !important;
            border-top: none !important;
            border-left: none !important;
            border-right: none !important;
        }
        .ql-editor {
            min-height: 100%;
        }
        @media print {
            body * {
                visibility: hidden;
            }
            .ql-editor, .ql-editor * {
                visibility: visible;
            }
            .ql-editor {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                margin: 0;
                padding: 0;
            }
        }
      `})]})},ZQ=()=>{const[e,t]=O.useState(null),[s,n]=O.useState([]),[a,i]=O.useState(!0),[l,o]=O.useState(!1),[c,d]=O.useState(!1),[u,h]=O.useState(null),[f,m]=O.useState(!1),[x,p]=O.useState({title:"",template_type:"exam",description:""}),[j,v]=O.useState("");O.useEffect(()=>{g()},[]);const g=async()=>{try{i(!0);const D=await ee.get("/marksheets");D.success&&n(D.data||[])}catch(D){console.error("Error fetching marksheets:",D)}finally{i(!1)}},y=D=>{p({...x,[D.target.name]:D.target.value})},b=()=>{p({title:"",template_type:"exam",description:""}),d(!1),h(null)},N=(D=null)=>{D?(d(!!D.id&&!D.isSample),h(D),p({title:D.isSample?`${D.title} (Copy)`:D.title,template_type:D.template_type,description:D.description})):b(),o(!0)},k=()=>{o(!1),b()},w=async D=>{var M,L;D.preventDefault();try{let z;c?(z=await ee.put(`/marksheets/${u.id}`,x),K.success("Marksheet updated successfully"),(e==null?void 0:e.id)===u.id&&t(z.data)):(z=await ee.post("/marksheets",x),K.success("Marksheet created successfully"),t(z.data)),g(),k()}catch(z){console.error("Error saving marksheet:",z),K.error(((L=(M=z.response)==null?void 0:M.data)==null?void 0:L.message)||"Failed to save marksheet")}},_=async D=>{try{await ee.put(`/marksheets/${D.id}`,{content:D.content,title:D.title}),K.success("Template saved successfully"),m(!1),g(),(e==null?void 0:e.id)===D.id&&t({...e,content:D.content,title:D.title})}catch(M){console.error("Error saving template content:",M),K.error("Failed to save template content")}},S=async D=>{if(window.confirm("Are you sure you want to delete this marksheet template?"))try{await ee.delete(`/marksheets/${D}`),K.success("Marksheet deleted successfully"),(e==null?void 0:e.id)===D&&t(null),g()}catch(M){console.error("Error deleting marksheet:",M),K.error("Failed to delete marksheet")}},E=D=>{h(D),m(!0)},A=s.filter(D=>D.title.toLowerCase().includes(j.toLowerCase()));if(f&&u)return r.jsx(XQ,{initialData:u,onSave:_,onCancel:()=>m(!1)});const C=s.length===0&&!a&&j===""?[{id:"sample-1",title:"Standard School Marksheet",template_type:"exam",description:"A comprehensive marksheet format suitable for primary and secondary schools including grade tables and remarks.",updated_at:new Date().toISOString(),isSample:!0},{id:"sample-2",title:"College Transcript Template",template_type:"semester",description:"Professional semester-wise transcript layout for colleges and universities with GPA calculation fields.",updated_at:new Date().toISOString(),isSample:!0},{id:"sample-3",title:"Term Assessment Report",template_type:"test",description:"Simple and clean layout for periodic term assessments and unit tests.",updated_at:new Date().toISOString(),isSample:!0},{id:"sample-4",title:"Kindergarten Progress Report",template_type:"preschool",description:"Colorful and visual progress report designed specifically for kindergarten and preschool students.",updated_at:new Date().toISOString(),isSample:!0},{id:"sample-5",title:"CBSE Format Report Card",template_type:"board",description:"Standardized marksheet format following CBSE board guidelines and grading systems.",updated_at:new Date().toISOString(),isSample:!0},{id:"sample-6",title:"Skills & Activity Report",template_type:"activity",description:"Report card focused on co-curricular activities, skills, and behavioral assessment.",updated_at:new Date().toISOString(),isSample:!0}]:A;return r.jsxs("div",{className:"flex h-screen bg-gray-50 overflow-hidden",children:[r.jsxs("div",{className:"w-80 bg-white border-r border-gray-300 flex flex-col",children:[r.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-white",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Templates"}),r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[s.length," Total"]})]}),r.jsx("button",{onClick:()=>N(),className:"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-sm",title:"Create Template",children:r.jsx(y1,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"relative",children:[r.jsx(OF,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search templates...",value:j,onChange:D=>v(D.target.value),className:"w-full pl-9 pr-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:a?r.jsx("div",{className:"flex justify-center p-8",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):C.length===0?r.jsx("div",{className:"text-center py-8 text-gray-500",children:r.jsx("p",{children:"No matching templates found."})}):C.map(D=>r.jsxs("div",{onClick:()=>t(D),className:`p-4 rounded-lg cursor-pointer transition-all duration-200 border ${(e==null?void 0:e.id)===D.id?"bg-blue-50 border-blue-500 shadow-md":"bg-white border-gray-200 hover:border-blue-300 hover:shadow-sm"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${(e==null?void 0:e.id)===D.id?"bg-blue-600 text-white":"bg-blue-50 text-blue-600"}`,children:r.jsx(px,{className:"text-lg"})}),r.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs font-bold uppercase rounded-full",children:D.template_type})]}),r.jsx("h3",{className:`font-semibold text-sm line-clamp-1 ${(e==null?void 0:e.id)===D.id?"text-blue-900":"text-gray-900"}`,children:D.title}),r.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-1",children:D.isSample?"Sample Template":`Updated: ${new Date(D.updated_at).toLocaleDateString()}`})]},D.id))})]}),r.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50 flex flex-col",children:e?r.jsx("div",{className:"flex-1 p-8",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden mb-8",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-700 to-blue-800 p-8 text-white relative overflow-hidden",children:r.jsx("div",{className:"relative z-10 flex justify-between items-start",children:r.jsxs("div",{className:"flex items-start gap-6",children:[r.jsx("div",{className:"w-20 h-20 bg-white/10 backdrop-blur-md rounded-2xl flex items-center justify-center border border-white/20",children:r.jsx(px,{className:"text-4xl text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold mb-2",children:e.title}),r.jsxs("div",{className:"flex items-center gap-3 text-blue-100",children:[r.jsx("span",{className:"px-3 py-1 bg-white/20 rounded-full text-sm font-medium backdrop-blur-sm border border-white/10",children:e.template_type.replace("_"," ").toUpperCase()}),r.jsxs("span",{className:"text-sm border-l border-blue-400 pl-3",children:["Last updated: ",new Date(e.updated_at).toLocaleDateString()]}),e.isSample&&r.jsx("span",{className:"text-xs bg-yellow-400 text-yellow-900 px-2 py-0.5 rounded font-bold uppercase",children:"Sample"})]})]})]})})}),r.jsxs("div",{className:"px-8 py-4 bg-white border-b border-gray-100 flex items-center justify-between",children:[r.jsx("div",{className:"text-sm text-gray-500 font-medium",children:e.isSample?"Use this sample as a starting point for your own marksheet.":"Manage and customize this marksheet template."}),r.jsx("div",{className:"flex gap-3",children:e.isSample?r.jsxs("button",{onClick:()=>N(e),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium shadow-sm",children:[r.jsx(y1,{})," Use Template"]}):r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>E(e),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors font-medium shadow-sm",children:[r.jsx(g1,{})," Design Layout"]}),r.jsxs("button",{onClick:()=>N(e),className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors font-medium shadow-sm",children:[r.jsx(g1,{})," Edit Details"]}),r.jsxs("button",{onClick:()=>S(e.id),className:"flex items-center gap-2 px-4 py-2 bg-red-50 text-red-600 hover:bg-red-100 border border-red-100 rounded-lg transition-colors font-medium",children:[r.jsx(PF,{})," Delete"]})]})})]}),r.jsxs("div",{className:"p-8",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Description"}),r.jsx("p",{className:"text-gray-600 leading-relaxed mb-6",children:e.description||"No description provided."}),r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Template Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1",children:"Created Date"}),r.jsx("div",{className:"text-gray-900 font-medium",children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1",children:"Type"}),r.jsx("div",{className:"text-gray-900 font-medium capitalize",children:e.template_type})]})]})]})]})}):r.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center p-8",children:[r.jsx("div",{className:"w-24 h-24 bg-blue-50 rounded-full flex items-center justify-center mb-6",children:r.jsx(px,{className:"text-4xl text-blue-300"})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Select a Template"}),r.jsx("p",{className:"text-gray-500 max-w-sm",children:"Choose a template from the sidebar to view details, edit its design, or manage its settings."})]})}),l&&r.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden transform transition-all",children:[r.jsxs("div",{className:"bg-blue-600 px-6 py-4 flex justify-between items-center text-white",children:[r.jsx("h2",{className:"text-xl font-bold",children:c?"Edit Marksheet Details":"Create New Marksheet"}),r.jsx("button",{onClick:k,className:"text-white/80 hover:text-white transition-colors",children:r.jsx(RF,{size:20})})]}),r.jsxs("form",{onSubmit:w,className:"p-6 space-y-5",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Template Title"}),r.jsx("input",{type:"text",name:"title",value:x.title,onChange:y,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all text-black",placeholder:"e.g. Final Term Exam 2024",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Template Type"}),r.jsxs("select",{name:"template_type",value:x.template_type,onChange:y,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all text-black bg-white",children:[r.jsx("option",{value:"exam",children:"Exam Template"}),r.jsx("option",{value:"tournament",children:"Tournament Template"}),r.jsx("option",{value:"semester",children:"Semester"}),r.jsx("option",{value:"test",children:"Class Test"}),r.jsx("option",{value:"other",children:"Other"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{name:"description",value:x.description,onChange:y,rows:"3",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all text-black resize-none",placeholder:"e.g. Standard marksheet format for final term exams..."})]}),r.jsxs("div",{className:"flex gap-3 pt-2",children:[r.jsx("button",{type:"button",onClick:k,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors shadow-sm",children:c?"Update Details":"Create Template"})]})]})]})})]})},JQ=({children:e})=>Ie(Uk)?e:r.jsx(zd,{to:"/login",replace:!0}),eX=({children:e})=>Ie(Uk)?r.jsx(zd,{to:"/dashboard",replace:!0}):e;function tX(){return r.jsxs(H3,{children:[r.jsx(Le,{path:"/login",element:r.jsx(eX,{children:r.jsx(iD,{children:r.jsx(IF,{})})})}),r.jsxs(Le,{path:"/",element:r.jsx(JQ,{children:r.jsx(FF,{})}),children:[r.jsx(Le,{index:!0,element:r.jsx(zd,{to:"/dashboard",replace:!0})}),r.jsx(Le,{path:"dashboard",element:r.jsx(zF,{})}),r.jsx(Le,{path:"classes",element:r.jsx(HF,{})}),r.jsx(Le,{path:"/classes/:id",element:r.jsx(tB,{})}),r.jsx(Le,{path:"/subjects",element:r.jsx(cB,{})}),r.jsx(Le,{path:"users",element:r.jsx(KF,{})}),r.jsx(Le,{path:"students",element:r.jsx(WF,{})}),r.jsx(Le,{path:"students/:id",element:r.jsx(YF,{})}),r.jsx(Le,{path:"student-reports/:id",element:r.jsx(tV,{})}),r.jsx(Le,{path:"my-reports",element:r.jsx(rV,{})}),r.jsx(Le,{path:"teachers",element:r.jsx(QF,{})}),r.jsx(Le,{path:"teachers/:id",element:r.jsx(ZF,{})}),r.jsx(Le,{path:"attendance",element:r.jsx(r8,{})}),r.jsx(Le,{path:"exams",element:r.jsx(i8,{})}),r.jsx(Le,{path:"exams/:id",element:r.jsx(hB,{})}),r.jsx(Le,{path:"exams/:id/results",element:r.jsx(qB,{})}),r.jsx(Le,{path:"exams/:id/report",element:r.jsx(HB,{})}),r.jsx(Le,{path:"assignments",element:r.jsx(l8,{})}),r.jsx(Le,{path:"assignments/:id",element:r.jsx(fB,{})}),r.jsx(Le,{path:"fees",element:r.jsx(o8,{})}),r.jsx(Le,{path:"events",element:r.jsx(m8,{})}),r.jsx(Le,{path:"events/:id",element:r.jsx(p8,{})}),r.jsx(Le,{path:"announcements",element:r.jsx(x8,{})}),r.jsx(Le,{path:"announcements/:id",element:r.jsx(gB,{})}),r.jsx(Le,{path:"messages",element:r.jsx(Q9,{})}),r.jsx(Le,{path:"profile",element:r.jsx(X9,{})}),r.jsx(Le,{path:"schedule",element:r.jsx(rB,{})}),r.jsx(Le,{path:"schedule/:id",element:r.jsx(sB,{})}),r.jsx(Le,{path:"library",element:r.jsx(yB,{})}),r.jsx(Le,{path:"hostel",element:r.jsx(_B,{})}),r.jsx(Le,{path:"transport",element:r.jsx(TB,{})}),r.jsx(Le,{path:"payroll",element:r.jsx(BB,{})}),r.jsx(Le,{path:"notifications",element:r.jsx($B,{})}),r.jsx(Le,{path:"admissions",element:r.jsx(UB,{})}),r.jsx(Le,{path:"frontdesk",element:r.jsx(cV,{})}),r.jsx(Le,{path:"leaves",element:r.jsx(mV,{})}),r.jsx(Le,{path:"my-leaves",element:r.jsx(pV,{})}),r.jsx(Le,{path:"results",element:r.jsx(zB,{})}),r.jsx(Le,{path:"blogs",element:r.jsx(Jz,{})}),r.jsx(Le,{path:"blogs/:id",element:r.jsx(eV,{})}),r.jsx(Le,{path:"reports",element:r.jsx(WB,{})}),r.jsx(Le,{path:"reports/:id",element:r.jsx(YB,{})}),r.jsx(Le,{path:"bus-attendance-reports",element:r.jsx(GB,{})}),r.jsx(Le,{path:"discipline",element:r.jsx(xV,{})}),r.jsx(Le,{path:"marksheets",element:r.jsx(ZQ,{})})]}),r.jsx(Le,{path:"*",element:r.jsx(Z9,{})})]})}const rX=new TT({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:5*60*1e3}}});Vx.createRoot(document.getElementById("root")).render(r.jsx(oO,{store:OM,children:r.jsx(OT,{client:rX,children:r.jsxs(eT,{children:[r.jsx(tX,{}),r.jsx(eR,{position:"top-right",toastOptions:{duration:3e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#4ade80",secondary:"#fff"}},error:{duration:4e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})}))});export default sX();
